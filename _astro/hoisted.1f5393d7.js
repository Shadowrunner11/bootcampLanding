function Ri(r,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in r)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ui(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pe={DEBUG:!1,LIB_VERSION:"2.45.0"},J;if(typeof window>"u"){var kr={hostname:""};J={navigator:{userAgent:""},document:{location:kr,referrer:""},screen:{width:0,height:0},location:kr}}else J=window;var bt=Array.prototype,qi=Function.prototype,ti=Object.prototype,de=bt.slice,it=ti.toString,wt=ti.hasOwnProperty,q=J.console,ue=J.navigator,I=J.document,Ke=J.opera,ht=J.screen,Z=ue.userAgent,It=qi.bind,Sr=bt.forEach,Or=bt.indexOf,Tr=bt.map,Ni=Array.isArray,Ht={},c={trim:function(r){return r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},$={log:function(){if(pe.DEBUG&&!c.isUndefined(q)&&q)try{q.log.apply(q,arguments)}catch{c.each(arguments,function(e){q.log(e)})}},warn:function(){if(pe.DEBUG&&!c.isUndefined(q)&&q){var r=["Mixpanel warning:"].concat(c.toArray(arguments));try{q.warn.apply(q,r)}catch{c.each(r,function(t){q.warn(t)})}}},error:function(){if(pe.DEBUG&&!c.isUndefined(q)&&q){var r=["Mixpanel error:"].concat(c.toArray(arguments));try{q.error.apply(q,r)}catch{c.each(r,function(t){q.error(t)})}}},critical:function(){if(!c.isUndefined(q)&&q){var r=["Mixpanel error:"].concat(c.toArray(arguments));try{q.error.apply(q,r)}catch{c.each(r,function(t){q.error(t)})}}}},jt=function(r,e){return function(){return arguments[0]="["+e+"] "+arguments[0],r.apply($,arguments)}},tr=function(r){return{log:jt($.log,r),error:jt($.error,r),critical:jt($.critical,r)}};c.bind=function(r,e){var t,i;if(It&&r.bind===It)return It.apply(r,de.call(arguments,1));if(!c.isFunction(r))throw new TypeError;return t=de.call(arguments,2),i=function(){if(!(this instanceof i))return r.apply(e,t.concat(de.call(arguments)));var n={};n.prototype=r.prototype;var s=new n;n.prototype=null;var o=r.apply(s,t.concat(de.call(arguments)));return Object(o)===o?o:s},i};c.each=function(r,e,t){if(r!=null){if(Sr&&r.forEach===Sr)r.forEach(e,t);else if(r.length===+r.length){for(var i=0,n=r.length;i<n;i++)if(i in r&&e.call(t,r[i],i,r)===Ht)return}else for(var s in r)if(wt.call(r,s)&&e.call(t,r[s],s,r)===Ht)return}};c.extend=function(r){return c.each(de.call(arguments,1),function(e){for(var t in e)e[t]!==void 0&&(r[t]=e[t])}),r};c.isArray=Ni||function(r){return it.call(r)==="[object Array]"};c.isFunction=function(r){try{return/^\s*\bfunction\b/.test(r)}catch{return!1}};c.isArguments=function(r){return!!(r&&wt.call(r,"callee"))};c.toArray=function(r){return r?r.toArray?r.toArray():c.isArray(r)||c.isArguments(r)?de.call(r):c.values(r):[]};c.map=function(r,e,t){if(Tr&&r.map===Tr)return r.map(e,t);var i=[];return c.each(r,function(n){i.push(e.call(t,n))}),i};c.keys=function(r){var e=[];return r===null||c.each(r,function(t,i){e[e.length]=i}),e};c.values=function(r){var e=[];return r===null||c.each(r,function(t){e[e.length]=t}),e};c.include=function(r,e){var t=!1;return r===null?t:Or&&r.indexOf===Or?r.indexOf(e)!=-1:(c.each(r,function(i){if(t||(t=i===e))return Ht}),t)};c.includes=function(r,e){return r.indexOf(e)!==-1};c.inherit=function(r,e){return r.prototype=new e,r.prototype.constructor=r,r.superclass=e.prototype,r};c.isObject=function(r){return r===Object(r)&&!c.isArray(r)};c.isEmptyObject=function(r){if(c.isObject(r)){for(var e in r)if(wt.call(r,e))return!1;return!0}return!1};c.isUndefined=function(r){return r===void 0};c.isString=function(r){return it.call(r)=="[object String]"};c.isDate=function(r){return it.call(r)=="[object Date]"};c.isNumber=function(r){return it.call(r)=="[object Number]"};c.isElement=function(r){return!!(r&&r.nodeType===1)};c.encodeDates=function(r){return c.each(r,function(e,t){c.isDate(e)?r[t]=c.formatDate(e):c.isObject(e)&&(r[t]=c.encodeDates(e))}),r};c.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()};c.formatDate=function(r){function e(t){return t<10?"0"+t:t}return r.getUTCFullYear()+"-"+e(r.getUTCMonth()+1)+"-"+e(r.getUTCDate())+"T"+e(r.getUTCHours())+":"+e(r.getUTCMinutes())+":"+e(r.getUTCSeconds())};c.strip_empty_properties=function(r){var e={};return c.each(r,function(t,i){c.isString(t)&&t.length>0&&(e[i]=t)}),e};c.truncate=function(r,e){var t;return typeof r=="string"?t=r.slice(0,e):c.isArray(r)?(t=[],c.each(r,function(i){t.push(c.truncate(i,e))})):c.isObject(r)?(t={},c.each(r,function(i,n){t[n]=c.truncate(i,e)})):t=r,t};c.JSONEncode=function(){return function(r){var e=r,t=function(n){var s=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return s.lastIndex=0,s.test(n)?'"'+n.replace(s,function(a){var u=o[a];return typeof u=="string"?u:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'},i=function(n,s){var o="",a="    ",u=0,l="",h="",f=0,d=o,g=[],_=s[n];switch(_&&typeof _=="object"&&typeof _.toJSON=="function"&&(_=_.toJSON(n)),typeof _){case"string":return t(_);case"number":return isFinite(_)?String(_):"null";case"boolean":case"null":return String(_);case"object":if(!_)return"null";if(o+=a,g=[],it.apply(_)==="[object Array]"){for(f=_.length,u=0;u<f;u+=1)g[u]=i(u,_)||"null";return h=g.length===0?"[]":o?`[
`+o+g.join(`,
`+o)+`
`+d+"]":"["+g.join(",")+"]",o=d,h}for(l in _)wt.call(_,l)&&(h=i(l,_),h&&g.push(t(l)+(o?": ":":")+h));return h=g.length===0?"{}":o?"{"+g.join(",")+d+"}":"{"+g.join(",")+"}",o=d,h}};return i("",{"":e})}}();c.JSONDecode=function(){var r,e,t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},i,n=function(g){var _=new SyntaxError(g);throw _.at=r,_.text=i,_},s=function(g){return g&&g!==e&&n("Expected '"+g+"' instead of '"+e+"'"),e=i.charAt(r),r+=1,e},o=function(){var g,_="";for(e==="-"&&(_="-",s("-"));e>="0"&&e<="9";)_+=e,s();if(e===".")for(_+=".";s()&&e>="0"&&e<="9";)_+=e;if(e==="e"||e==="E")for(_+=e,s(),(e==="-"||e==="+")&&(_+=e,s());e>="0"&&e<="9";)_+=e,s();if(g=+_,!isFinite(g))n("Bad number");else return g},a=function(){var g,_,b="",v;if(e==='"')for(;s();){if(e==='"')return s(),b;if(e==="\\")if(s(),e==="u"){for(v=0,_=0;_<4&&(g=parseInt(s(),16),!!isFinite(g));_+=1)v=v*16+g;b+=String.fromCharCode(v)}else if(typeof t[e]=="string")b+=t[e];else break;else b+=e}n("Bad string")},u=function(){for(;e&&e<=" ";)s()},l=function(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}n('Unexpected "'+e+'"')},h,f=function(){var g=[];if(e==="["){if(s("["),u(),e==="]")return s("]"),g;for(;e;){if(g.push(h()),u(),e==="]")return s("]"),g;s(","),u()}}n("Bad array")},d=function(){var g,_={};if(e==="{"){if(s("{"),u(),e==="}")return s("}"),_;for(;e;){if(g=a(),u(),s(":"),Object.hasOwnProperty.call(_,g)&&n('Duplicate key "'+g+'"'),_[g]=h(),u(),e==="}")return s("}"),_;s(","),u()}}n("Bad object")};return h=function(){switch(u(),e){case"{":return d();case"[":return f();case'"':return a();case"-":return o();default:return e>="0"&&e<="9"?o():l()}},function(g){var _;return i=g,r=0,e=" ",_=h(),u(),e&&n("Syntax error"),_}}();c.base64Encode=function(r){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t,i,n,s,o,a,u,l,h=0,f=0,d="",g=[];if(!r)return r;r=c.utf8Encode(r);do t=r.charCodeAt(h++),i=r.charCodeAt(h++),n=r.charCodeAt(h++),l=t<<16|i<<8|n,s=l>>18&63,o=l>>12&63,a=l>>6&63,u=l&63,g[f++]=e.charAt(s)+e.charAt(o)+e.charAt(a)+e.charAt(u);while(h<r.length);switch(d=g.join(""),r.length%3){case 1:d=d.slice(0,-2)+"==";break;case 2:d=d.slice(0,-1)+"=";break}return d};c.utf8Encode=function(r){r=(r+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var e="",t,i,n=0,s;for(t=i=0,n=r.length,s=0;s<n;s++){var o=r.charCodeAt(s),a=null;o<128?i++:o>127&&o<2048?a=String.fromCharCode(o>>6|192,o&63|128):a=String.fromCharCode(o>>12|224,o>>6&63|128,o&63|128),a!==null&&(i>t&&(e+=r.substring(t,i)),e+=a,t=i=s+1)}return i>t&&(e+=r.substring(t,r.length)),e};c.UUID=function(){var r=function(){for(var i=1*new Date,n=0;i==1*new Date;)n++;return i.toString(16)+n.toString(16)},e=function(){return Math.random().toString(16).replace(".","")},t=function(){var i=Z,n,s,o=[],a=0;function u(l,h){var f,d=0;for(f=0;f<h.length;f++)d|=o[f]<<f*8;return l^d}for(n=0;n<i.length;n++)s=i.charCodeAt(n),o.unshift(s&255),o.length>=4&&(a=u(a,o),o=[]);return o.length>0&&(a=u(a,o)),a.toString(16)};return function(){var i=(ht.height*ht.width).toString(16);return r()+"-"+e()+"-"+t()+"-"+i+"-"+r()}}();var Ar=["ahrefsbot","baiduspider","bingbot","bingpreview","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];c.isBlockedUA=function(r){var e;for(r=r.toLowerCase(),e=0;e<Ar.length;e++)if(r.indexOf(Ar[e])!==-1)return!0;return!1};c.HTTPBuildQuery=function(r,e){var t,i,n=[];return c.isUndefined(e)&&(e="&"),c.each(r,function(s,o){t=encodeURIComponent(s.toString()),i=encodeURIComponent(o),n[n.length]=i+"="+t}),n.join(e)};c.getQueryParam=function(r,e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",i=new RegExp(t),n=i.exec(r);if(n===null||n&&typeof n[1]!="string"&&n[1].length)return"";var s=n[1];try{s=decodeURIComponent(s)}catch{$.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")};c.cookie={get:function(r){for(var e=r+"=",t=I.cookie.split(";"),i=0;i<t.length;i++){for(var n=t[i];n.charAt(0)==" ";)n=n.substring(1,n.length);if(n.indexOf(e)===0)return decodeURIComponent(n.substring(e.length,n.length))}return null},parse:function(r){var e;try{e=c.JSONDecode(c.cookie.get(r))||{}}catch{}return e},set_seconds:function(r,e,t,i,n,s,o){var a="",u="",l="";if(o)a="; domain="+o;else if(i){var h=$r(I.location.hostname);a=h?"; domain=."+h:""}if(t){var f=new Date;f.setTime(f.getTime()+t*1e3),u="; expires="+f.toGMTString()}s&&(n=!0,l="; SameSite=None"),n&&(l+="; secure"),I.cookie=r+"="+encodeURIComponent(e)+u+"; path=/"+a+l},set:function(r,e,t,i,n,s,o){var a="",u="",l="";if(o)a="; domain="+o;else if(i){var h=$r(I.location.hostname);a=h?"; domain=."+h:""}if(t){var f=new Date;f.setTime(f.getTime()+t*24*60*60*1e3),u="; expires="+f.toGMTString()}s&&(n=!0,l="; SameSite=None"),n&&(l+="; secure");var d=r+"="+encodeURIComponent(e)+u+"; path=/"+a+l;return I.cookie=d,d},remove:function(r,e,t){c.cookie.set(r,"",-1,e,!1,!1,t)}};var Pt=null,ft=function(r,e){if(Pt!==null&&!e)return Pt;var t=!0;try{r=r||window.localStorage;var i="__mplss_"+rr(8),n="xyz";r.setItem(i,n),r.getItem(i)!==n&&(t=!1),r.removeItem(i)}catch{t=!1}return Pt=t,t};c.localStorage={is_supported:function(r){var e=ft(null,r);return e||$.error("localStorage unsupported; falling back to cookie store"),e},error:function(r){$.error("localStorage error: "+r)},get:function(r){try{return window.localStorage.getItem(r)}catch(e){c.localStorage.error(e)}return null},parse:function(r){try{return c.JSONDecode(c.localStorage.get(r))||{}}catch{}return null},set:function(r,e){try{window.localStorage.setItem(r,e)}catch(t){c.localStorage.error(t)}},remove:function(r){try{window.localStorage.removeItem(r)}catch(e){c.localStorage.error(e)}}};c.register_event=function(){var r=function(i,n,s,o,a){if(!i){$.error("No valid element provided to register_event");return}if(i.addEventListener&&!o)i.addEventListener(n,s,!!a);else{var u="on"+n,l=i[u];i[u]=e(i,s,l)}};function e(i,n,s){var o=function(a){if(a=a||t(window.event),!!a){var u=!0,l,h;return c.isFunction(s)&&(l=s(a)),h=n.call(i,a),(l===!1||h===!1)&&(u=!1),u}};return o}function t(i){return i&&(i.preventDefault=t.preventDefault,i.stopPropagation=t.stopPropagation),i}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},r}();var Li=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');c.dom_query=function(){function r(n){return n.all?n.all:n.getElementsByTagName("*")}var e=/[\t\r\n]/g;function t(n,s){var o=" "+s+" ";return(" "+n.className+" ").replace(e," ").indexOf(o)>=0}function i(n){if(!I.getElementsByTagName)return[];var s=n.split(" "),o,a,u,l,h,f,d,g,_,b,v=[I];for(f=0;f<s.length;f++){if(o=s[f].replace(/^\s+/,"").replace(/\s+$/,""),o.indexOf("#")>-1){a=o.split("#"),u=a[0];var w=a[1],k=I.getElementById(w);if(!k||u&&k.nodeName.toLowerCase()!=u)return[];v=[k];continue}if(o.indexOf(".")>-1){a=o.split("."),u=a[0];var R=a[1];for(u||(u="*"),l=[],h=0,d=0;d<v.length;d++)for(u=="*"?_=r(v[d]):_=v[d].getElementsByTagName(u),g=0;g<_.length;g++)l[h++]=_[g];for(v=[],b=0,d=0;d<l.length;d++)l[d].className&&c.isString(l[d].className)&&t(l[d],R)&&(v[b++]=l[d]);continue}var A=o.match(Li);if(A){u=A[1];var N=A[2],ye=A[3],W=A[4];for(u||(u="*"),l=[],h=0,d=0;d<v.length;d++)for(u=="*"?_=r(v[d]):_=v[d].getElementsByTagName(u),g=0;g<_.length;g++)l[h++]=_[g];v=[],b=0;var U;switch(ye){case"=":U=function(L){return L.getAttribute(N)==W};break;case"~":U=function(L){return L.getAttribute(N).match(new RegExp("\\b"+W+"\\b"))};break;case"|":U=function(L){return L.getAttribute(N).match(new RegExp("^"+W+"-?"))};break;case"^":U=function(L){return L.getAttribute(N).indexOf(W)===0};break;case"$":U=function(L){return L.getAttribute(N).lastIndexOf(W)==L.getAttribute(N).length-W.length};break;case"*":U=function(L){return L.getAttribute(N).indexOf(W)>-1};break;default:U=function(L){return L.getAttribute(N)}}for(v=[],b=0,d=0;d<l.length;d++)U(l[d])&&(v[b++]=l[d]);continue}for(u=o,l=[],h=0,d=0;d<v.length;d++)for(_=v[d].getElementsByTagName(u),g=0;g<_.length;g++)l[h++]=_[g];v=l}return v}return function(n){return c.isElement(n)?[n]:c.isObject(n)&&!c.isUndefined(n.length)?n:i.call(this,n)}}();c.info={campaignParams:function(){var r="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),e="",t={};return c.each(r,function(i){e=c.getQueryParam(I.URL,i),e.length&&(t[i]=e)}),t},searchEngine:function(r){return r.search("https?://(.*)google.([^/?]*)")===0?"google":r.search("https?://(.*)bing.com")===0?"bing":r.search("https?://(.*)yahoo.com")===0?"yahoo":r.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(r){var e=c.info.searchEngine(r),t=e!="yahoo"?"q":"p",i={};if(e!==null){i.$search_engine=e;var n=c.getQueryParam(r,t);n.length&&(i.mp_keyword=n)}return i},browser:function(r,e,t){return e=e||"",t||c.includes(r," OPR/")?c.includes(r,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":c.includes(r,"IEMobile")||c.includes(r,"WPDesktop")?"Internet Explorer Mobile":c.includes(r,"SamsungBrowser/")?"Samsung Internet":c.includes(r,"Edge")||c.includes(r,"Edg/")?"Microsoft Edge":c.includes(r,"FBIOS")?"Facebook Mobile":c.includes(r,"Chrome")?"Chrome":c.includes(r,"CriOS")?"Chrome iOS":c.includes(r,"UCWEB")||c.includes(r,"UCBrowser")?"UC Browser":c.includes(r,"FxiOS")?"Firefox iOS":c.includes(e,"Apple")?c.includes(r,"Mobile")?"Mobile Safari":"Safari":c.includes(r,"Android")?"Android Mobile":c.includes(r,"Konqueror")?"Konqueror":c.includes(r,"Firefox")?"Firefox":c.includes(r,"MSIE")||c.includes(r,"Trident/")?"Internet Explorer":c.includes(r,"Gecko")?"Mozilla":""},browserVersion:function(r,e,t){var i=c.info.browser(r,e,t),n={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},s=n[i];if(s===void 0)return null;var o=r.match(s);return o?parseFloat(o[o.length-2]):null},os:function(){var r=Z;return/Windows/i.test(r)?/Phone/.test(r)||/WPDesktop/.test(r)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(r)?"iOS":/Android/.test(r)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":/Mac/i.test(r)?"Mac OS X":/Linux/.test(r)?"Linux":/CrOS/.test(r)?"Chrome OS":""},device:function(r){return/Windows Phone/i.test(r)||/WPDesktop/.test(r)?"Windows Phone":/iPad/.test(r)?"iPad":/iPod/.test(r)?"iPod Touch":/iPhone/.test(r)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(r)?"BlackBerry":/Android/.test(r)?"Android":""},referringDomain:function(r){var e=r.split("/");return e.length>=3?e[2]:""},properties:function(){return c.extend(c.strip_empty_properties({$os:c.info.os(),$browser:c.info.browser(Z,ue.vendor,Ke),$referrer:I.referrer,$referring_domain:c.info.referringDomain(I.referrer),$device:c.info.device(Z)}),{$current_url:J.location.href,$browser_version:c.info.browserVersion(Z,ue.vendor,Ke),$screen_height:ht.height,$screen_width:ht.width,mp_lib:"web",$lib_version:pe.LIB_VERSION,$insert_id:rr(),time:c.timestamp()/1e3})},people_properties:function(){return c.extend(c.strip_empty_properties({$os:c.info.os(),$browser:c.info.browser(Z,ue.vendor,Ke)}),{$browser_version:c.info.browserVersion(Z,ue.vendor,Ke)})},pageviewInfo:function(r){return c.strip_empty_properties({mp_page:r,mp_referrer:I.referrer,mp_browser:c.info.browser(Z,ue.vendor,Ke),mp_platform:c.info.os()})}};var rr=function(r){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return r?e.substring(0,r):e},Bi=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,Mi=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,$r=function(r){var e=Mi,t=r.split("."),i=t[t.length-1];(i.length>4||i==="com"||i==="org")&&(e=Bi);var n=r.match(e);return n?n[0]:""},dt=null,pt=null;typeof JSON<"u"&&(dt=JSON.stringify,pt=JSON.parse);dt=dt||c.JSONEncode;pt=pt||c.JSONDecode;c.toArray=c.toArray;c.isObject=c.isObject;c.JSONEncode=c.JSONEncode;c.JSONDecode=c.JSONDecode;c.isBlockedUA=c.isBlockedUA;c.isEmptyObject=c.isEmptyObject;c.info=c.info;c.info.device=c.info.device;c.info.browser=c.info.browser;c.info.browserVersion=c.info.browserVersion;c.info.properties=c.info.properties;var he=function(){};he.prototype.create_properties=function(){};he.prototype.event_handler=function(){};he.prototype.after_track_handler=function(){};he.prototype.init=function(r){return this.mp=r,this};he.prototype.track=function(r,e,t,i){var n=this,s=c.dom_query(r);if(s.length===0){$.error("The DOM query ("+r+") returned 0 elements");return}return c.each(s,function(o){c.register_event(o,this.override_event,function(a){var u={},l=n.create_properties(t,this),h=n.mp.get_config("track_links_timeout");n.event_handler(a,this,u),window.setTimeout(n.track_callback(i,l,u,!0),h),n.mp.track(e,l,n.track_callback(i,l,u))})},this),!0};he.prototype.track_callback=function(r,e,t,i){i=i||!1;var n=this;return function(){t.callback_fired||(t.callback_fired=!0,!(r&&r(i,e)===!1)&&n.after_track_handler(e,t,i))}};he.prototype.create_properties=function(r,e){var t;return typeof r=="function"?t=r(e):t=c.extend({},r),t};var Be=function(){this.override_event="click"};c.inherit(Be,he);Be.prototype.create_properties=function(r,e){var t=Be.superclass.create_properties.apply(this,arguments);return e.href&&(t.url=e.href),t};Be.prototype.event_handler=function(r,e,t){t.new_tab=r.which===2||r.metaKey||r.ctrlKey||e.target==="_blank",t.href=e.href,t.new_tab||r.preventDefault()};Be.prototype.after_track_handler=function(r,e){e.new_tab||setTimeout(function(){window.location=e.href},0)};var Et=function(){this.override_event="submit"};c.inherit(Et,he);Et.prototype.event_handler=function(r,e,t){t.element=e,r.preventDefault()};Et.prototype.after_track_handler=function(r,e){setTimeout(function(){e.element.submit()},0)};var zi=tr("lock"),ri=function(r,e){e=e||{},this.storageKey=r,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};ri.prototype.withLock=function(r,e,t){!t&&typeof e!="function"&&(t=e,e=null);var i=t||new Date().getTime()+"|"+Math.random(),n=new Date().getTime(),s=this.storageKey,o=this.pollIntervalMS,a=this.timeoutMS,u=this.storage,l=s+":X",h=s+":Y",f=s+":Z",d=function(k){e&&e(k)},g=function(k){if(new Date().getTime()-n>a){zi.error("Timeout waiting for mutex on "+s+"; clearing lock. ["+i+"]"),u.removeItem(f),u.removeItem(h),v();return}setTimeout(function(){try{k()}catch(R){d(R)}},o*(Math.random()+.1))},_=function(k,R){k()?R():g(function(){_(k,R)})},b=function(){var k=u.getItem(h);if(k&&k!==i)return!1;if(u.setItem(h,i),u.getItem(h)===i)return!0;if(!ft(u,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},v=function(){u.setItem(l,i),_(b,function(){if(u.getItem(l)===i){w();return}g(function(){if(u.getItem(h)!==i){v();return}_(function(){return!u.getItem(f)},w)})})},w=function(){u.setItem(f,"1");try{r()}finally{u.removeItem(f),u.getItem(h)===i&&u.removeItem(h),u.getItem(l)===i&&u.removeItem(l)}};try{if(ft(u,!0))v();else throw new Error("localStorage support check failed")}catch(k){d(k)}};var Cr=tr("batch"),me=function(r,e){e=e||{},this.storageKey=r,this.storage=e.storage||window.localStorage,this.reportError=e.errorReporter||c.bind(Cr.error,Cr),this.lock=new ri(r,{storage:this.storage}),this.pid=e.pid||null,this.memQueue=[]};me.prototype.enqueue=function(r,e,t){var i={id:rr(),flushAfter:new Date().getTime()+e*2,payload:r};this.lock.withLock(c.bind(function(){var s;try{var o=this.readFromStorage();o.push(i),s=this.saveToStorage(o),s&&this.memQueue.push(i)}catch{this.reportError("Error enqueueing item",r),s=!1}t&&t(s)},this),c.bind(function(s){this.reportError("Error acquiring storage lock",s),t&&t(!1)},this),this.pid)};me.prototype.fillBatch=function(r){var e=this.memQueue.slice(0,r);if(e.length<r){var t=this.readFromStorage();if(t.length){var i={};c.each(e,function(o){i[o.id]=!0});for(var n=0;n<t.length;n++){var s=t[n];if(new Date().getTime()>s.flushAfter&&!i[s.id]&&(s.orphaned=!0,e.push(s),e.length>=r))break}}}return e};var Dr=function(r,e){var t=[];return c.each(r,function(i){i.id&&!e[i.id]&&t.push(i)}),t};me.prototype.removeItemsByID=function(r,e){var t={};c.each(r,function(n){t[n]=!0}),this.memQueue=Dr(this.memQueue,t);var i=c.bind(function(){var n;try{var s=this.readFromStorage();if(s=Dr(s,t),n=this.saveToStorage(s),n){s=this.readFromStorage();for(var o=0;o<s.length;o++){var a=s[o];if(a.id&&t[a.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",r),n=!1}return n},this);this.lock.withLock(function(){var s=i();e&&e(s)},c.bind(function(s){var o=!1;if(this.reportError("Error acquiring storage lock",s),!ft(this.storage,!0)&&(o=i(),!o))try{this.storage.removeItem(this.storageKey)}catch(a){this.reportError("Error clearing queue",a)}e&&e(o)},this),this.pid)};var Ir=function(r,e){var t=[];return c.each(r,function(i){var n=i.id;if(n in e){var s=e[n];s!==null&&(i.payload=s,t.push(i))}else t.push(i)}),t};me.prototype.updatePayloads=function(r,e){this.memQueue=Ir(this.memQueue,r),this.lock.withLock(c.bind(function(){var i;try{var n=this.readFromStorage();n=Ir(n,r),i=this.saveToStorage(n)}catch{this.reportError("Error updating items",r),i=!1}e&&e(i)},this),c.bind(function(i){this.reportError("Error acquiring storage lock",i),e&&e(!1)},this),this.pid)};me.prototype.readFromStorage=function(){var r;try{r=this.storage.getItem(this.storageKey),r&&(r=pt(r),c.isArray(r)||(this.reportError("Invalid storage entry:",r),r=null))}catch(e){this.reportError("Error retrieving queue",e),r=null}return r||[]};me.prototype.saveToStorage=function(r){try{return this.storage.setItem(this.storageKey,dt(r)),!0}catch(e){return this.reportError("Error saving queue",e),!1}};me.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var Hi=10*60*1e3,We=tr("batch"),oe=function(r,e){this.errorReporter=e.errorReporter,this.queue=new me(r,{errorReporter:c.bind(this.reportError,this),storage:e.storage}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0};oe.prototype.enqueue=function(r,e){this.queue.enqueue(r,this.flushInterval,e)};oe.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()};oe.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)};oe.prototype.clear=function(){this.queue.clear()};oe.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size};oe.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)};oe.prototype.scheduleFlush=function(r){this.flushInterval=r,this.stopped||(this.timeoutID=setTimeout(c.bind(this.flush,this),this.flushInterval))};oe.prototype.flush=function(r){try{if(this.requestInProgress){We.log("Flush: Request already in progress");return}r=r||{};var e=this.libConfig.batch_request_timeout_ms,t=new Date().getTime(),i=this.batchSize,n=this.queue.fillBatch(i),s=[],o={};if(c.each(n,function(l){var h=l.payload;this.beforeSendHook&&!l.orphaned&&(h=this.beforeSendHook(h)),h&&s.push(h),o[l.id]=h},this),s.length<1){this.resetFlush();return}this.requestInProgress=!0;var a=c.bind(function(l){this.requestInProgress=!1;try{var h=!1;if(r.unloading)this.queue.updatePayloads(o);else if(c.isObject(l)&&l.error==="timeout"&&new Date().getTime()-t>=e)this.reportError("Network timeout; retrying"),this.flush();else if(c.isObject(l)&&l.xhr_req&&(l.xhr_req.status>=500||l.xhr_req.status===429||l.error==="timeout")){var f=this.flushInterval*2,d=l.xhr_req.responseHeaders;if(d){var g=d["Retry-After"];g&&(f=parseInt(g,10)*1e3||f)}f=Math.min(Hi,f),this.reportError("Error; retry in "+f+" ms"),this.scheduleFlush(f)}else if(c.isObject(l)&&l.xhr_req&&l.xhr_req.status===413)if(n.length>1){var _=Math.max(1,Math.floor(i/2));this.batchSize=Math.min(this.batchSize,_,n.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",n),this.resetBatchSize(),h=!0;else h=!0;h&&this.queue.removeItemsByID(c.map(n,function(b){return b.id}),c.bind(function(b){b?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this))}catch(b){this.reportError("Error handling API response",b),this.resetFlush()}},this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};r.unloading&&(u.transport="sendBeacon"),We.log("MIXPANEL REQUEST:",s),this.sendRequest(s,u,a)}catch(l){this.reportError("Error flushing request queue",l),this.resetFlush()}};oe.prototype.reportError=function(r,e){if(We.error.apply(We.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(r)),this.errorReporter(r,e)}catch(t){We.error(t)}};var Ji="__mp_opt_in_out_";function Gi(r,e){si(!0,r,e)}function Ki(r,e){si(!1,r,e)}function Vi(r,e){return ni(r,e)==="1"}function ii(r,e){if(Yi(e))return $.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var t=ni(r,e)==="0";return t&&$.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),t}function nt(r){return sr(r,function(e){return this.get_config(e)})}function ve(r){return sr(r,function(e){return this._get_config(e)})}function He(r){return sr(r,function(e){return this._get_config(e)})}function Wi(r,e){e=e||{},ir(e).remove(nr(r,e),!!e.crossSubdomainCookie,e.cookieDomain)}function ir(r){return r=r||{},r.persistenceType==="localStorage"?c.localStorage:c.cookie}function nr(r,e){return e=e||{},(e.persistencePrefix||Ji)+r}function ni(r,e){return ir(e).get(nr(r,e))}function Yi(r){if(r&&r.ignoreDnt)return!1;var e=r&&r.window||J,t=e.navigator||{},i=!1;return c.each([t.doNotTrack,t.msDoNotTrack,e.doNotTrack],function(n){c.includes([!0,1,"1","yes"],n)&&(i=!0)}),i}function si(r,e,t){if(!c.isString(e)||!e.length){$.error("gdpr."+(r?"optIn":"optOut")+" called with an invalid token");return}t=t||{},ir(t).set(nr(e,t),r?1:0,c.isNumber(t.cookieExpiration)?t.cookieExpiration:null,!!t.crossSubdomainCookie,!!t.secureCookie,!!t.crossSiteCookie,t.cookieDomain),t.track&&r&&t.track(t.trackEventName||"$opt_in",t.trackProperties,{send_immediately:!0})}function sr(r,e){return function(){var t=!1;try{var i=e.call(this,"token"),n=e.call(this,"ignore_dnt"),s=e.call(this,"opt_out_tracking_persistence_type"),o=e.call(this,"opt_out_tracking_cookie_prefix"),a=e.call(this,"window");i&&(t=ii(i,{ignoreDnt:n,persistenceType:s,persistencePrefix:o,window:a}))}catch(l){$.error("Unexpected error when checking tracking opt-out status: "+l)}if(!t)return r.apply(this,arguments);var u=arguments[arguments.length-1];typeof u=="function"&&u(0)}}var _e="$set",Me="$set_once",te="$unset",$e="$add",le="$append",Ce="$union",ge="$remove",Xi="$delete",oi={set_action:function(r,e){var t={},i={};return c.isObject(r)?c.each(r,function(n,s){this._is_reserved_property(s)||(i[s]=n)},this):i[r]=e,t[_e]=i,t},unset_action:function(r){var e={},t=[];return c.isArray(r)||(r=[r]),c.each(r,function(i){this._is_reserved_property(i)||t.push(i)},this),e[te]=t,e},set_once_action:function(r,e){var t={},i={};return c.isObject(r)?c.each(r,function(n,s){this._is_reserved_property(s)||(i[s]=n)},this):i[r]=e,t[Me]=i,t},union_action:function(r,e){var t={},i={};return c.isObject(r)?c.each(r,function(n,s){this._is_reserved_property(s)||(i[s]=c.isArray(n)?n:[n])},this):i[r]=c.isArray(e)?e:[e],t[Ce]=i,t},append_action:function(r,e){var t={},i={};return c.isObject(r)?c.each(r,function(n,s){this._is_reserved_property(s)||(i[s]=n)},this):i[r]=e,t[le]=i,t},remove_action:function(r,e){var t={},i={};return c.isObject(r)?c.each(r,function(n,s){this._is_reserved_property(s)||(i[s]=n)},this):i[r]=e,t[ge]=i,t},delete_action:function(){var r={};return r[Xi]="",r}},P=function(){};c.extend(P.prototype,oi);P.prototype._init=function(r,e,t){this._mixpanel=r,this._group_key=e,this._group_id=t};P.prototype.set=He(function(r,e,t){var i=this.set_action(r,e);return c.isObject(r)&&(t=e),this._send_request(i,t)});P.prototype.set_once=He(function(r,e,t){var i=this.set_once_action(r,e);return c.isObject(r)&&(t=e),this._send_request(i,t)});P.prototype.unset=He(function(r,e){var t=this.unset_action(r);return this._send_request(t,e)});P.prototype.union=He(function(r,e,t){c.isObject(r)&&(t=e);var i=this.union_action(r,e);return this._send_request(i,t)});P.prototype.delete=He(function(r){var e=this.delete_action();return this._send_request(e,r)});P.prototype.remove=He(function(r,e,t){var i=this.remove_action(r,e);return this._send_request(i,t)});P.prototype._send_request=function(r,e){r.$group_key=this._group_key,r.$group_id=this._group_id,r.$token=this._get_config("token");var t=c.encodeDates(r);return this._mixpanel._track_or_batch({type:"groups",data:t,endpoint:this._get_config("api_host")+"/groups/",batcher:this._mixpanel.request_batchers.groups},e)};P.prototype._is_reserved_property=function(r){return r==="$group_key"||r==="$group_id"};P.prototype._get_config=function(r){return this._mixpanel.get_config(r)};P.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id};P.prototype.remove=P.prototype.remove;P.prototype.set=P.prototype.set;P.prototype.set_once=P.prototype.set_once;P.prototype.union=P.prototype.union;P.prototype.unset=P.prototype.unset;P.prototype.toString=P.prototype.toString;var E=function(){};c.extend(E.prototype,oi);E.prototype._init=function(r){this._mixpanel=r};E.prototype.set=ve(function(r,e,t){var i=this.set_action(r,e);return c.isObject(r)&&(t=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),i[_e]=c.extend({},c.info.people_properties(),this._mixpanel.persistence.get_referrer_info(),i[_e]),this._send_request(i,t)});E.prototype.set_once=ve(function(r,e,t){var i=this.set_once_action(r,e);return c.isObject(r)&&(t=e),this._send_request(i,t)});E.prototype.unset=ve(function(r,e){var t=this.unset_action(r);return this._send_request(t,e)});E.prototype.increment=ve(function(r,e,t){var i={},n={};return c.isObject(r)?(c.each(r,function(s,o){if(!this._is_reserved_property(o))if(isNaN(parseFloat(s))){$.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else n[o]=s},this),t=e):(c.isUndefined(e)&&(e=1),n[r]=e),i[$e]=n,this._send_request(i,t)});E.prototype.append=ve(function(r,e,t){c.isObject(r)&&(t=e);var i=this.append_action(r,e);return this._send_request(i,t)});E.prototype.remove=ve(function(r,e,t){c.isObject(r)&&(t=e);var i=this.remove_action(r,e);return this._send_request(i,t)});E.prototype.union=ve(function(r,e,t){c.isObject(r)&&(t=e);var i=this.union_action(r,e);return this._send_request(i,t)});E.prototype.track_charge=ve(function(r,e,t){if(!c.isNumber(r)&&(r=parseFloat(r),isNaN(r))){$.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",c.extend({$amount:r},e),t)});E.prototype.clear_charges=function(r){return this.set("$transactions",[],r)};E.prototype.delete_user=function(){if(!this._identify_called()){$.error("mixpanel.people.delete_user() requires you to call identify() first");return}var r={$delete:this._mixpanel.get_distinct_id()};return this._send_request(r)};E.prototype.toString=function(){return this._mixpanel.toString()+".people"};E.prototype._send_request=function(r,e){r.$token=this._get_config("token"),r.$distinct_id=this._mixpanel.get_distinct_id();var t=this._mixpanel.get_property("$device_id"),i=this._mixpanel.get_property("$user_id"),n=this._mixpanel.get_property("$had_persisted_distinct_id");t&&(r.$device_id=t),i&&(r.$user_id=i),n&&(r.$had_persisted_distinct_id=n);var s=c.encodeDates(r);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:s,endpoint:this._get_config("api_host")+"/engage/",batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(r),c.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),c.truncate(s,255))};E.prototype._get_config=function(r){return this._mixpanel.get_config(r)};E.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0};E.prototype._enqueue=function(r){_e in r?this._mixpanel.persistence._add_to_people_queue(_e,r):Me in r?this._mixpanel.persistence._add_to_people_queue(Me,r):te in r?this._mixpanel.persistence._add_to_people_queue(te,r):$e in r?this._mixpanel.persistence._add_to_people_queue($e,r):le in r?this._mixpanel.persistence._add_to_people_queue(le,r):ge in r?this._mixpanel.persistence._add_to_people_queue(ge,r):Ce in r?this._mixpanel.persistence._add_to_people_queue(Ce,r):$.error("Invalid call to _enqueue():",r)};E.prototype._flush_one_queue=function(r,e,t,i){var n=this,s=c.extend({},this._mixpanel.persistence._get_queue(r)),o=s;!c.isUndefined(s)&&c.isObject(s)&&!c.isEmptyObject(s)&&(n._mixpanel.persistence._pop_from_people_queue(r,s),i&&(o=i(s)),e.call(n,o,function(a,u){a===0&&n._mixpanel.persistence._add_to_people_queue(r,s),c.isUndefined(t)||t(a,u)}))};E.prototype._flush=function(r,e,t,i,n,s,o){var a=this,u=this._mixpanel.persistence._get_queue(le),l=this._mixpanel.persistence._get_queue(ge);if(this._flush_one_queue(_e,this.set,r),this._flush_one_queue(Me,this.set_once,i),this._flush_one_queue(te,this.unset,s,function(v){return c.keys(v)}),this._flush_one_queue($e,this.increment,e),this._flush_one_queue(Ce,this.union,n),!c.isUndefined(u)&&c.isArray(u)&&u.length){for(var h,f=function(v,w){v===0&&a._mixpanel.persistence._add_to_people_queue(le,h),c.isUndefined(t)||t(v,w)},d=u.length-1;d>=0;d--)h=u.pop(),c.isEmptyObject(h)||a.append(h,f);a._mixpanel.persistence.save()}if(!c.isUndefined(l)&&c.isArray(l)&&l.length){for(var g,_=function(v,w){v===0&&a._mixpanel.persistence._add_to_people_queue(ge,g),c.isUndefined(o)||o(v,w)},b=l.length-1;b>=0;b--)g=l.pop(),c.isEmptyObject(g)||a.remove(g,_);a._mixpanel.persistence.save()}};E.prototype._is_reserved_property=function(r){return r==="$distinct_id"||r==="$token"||r==="$device_id"||r==="$user_id"||r==="$had_persisted_distinct_id"};E.prototype.set=E.prototype.set;E.prototype.set_once=E.prototype.set_once;E.prototype.unset=E.prototype.unset;E.prototype.increment=E.prototype.increment;E.prototype.append=E.prototype.append;E.prototype.remove=E.prototype.remove;E.prototype.union=E.prototype.union;E.prototype.track_charge=E.prototype.track_charge;E.prototype.clear_charges=E.prototype.clear_charges;E.prototype.delete_user=E.prototype.delete_user;E.prototype.toString=E.prototype.toString;var or="__mps",ar="__mpso",cr="__mpus",ur="__mpa",lr="__mpap",hr="__mpr",fr="__mpu",ai="$people_distinct_id",_t="__alias",et="__timers",Qi=[or,ar,cr,ur,lr,hr,fr,ai,_t,et],x=function(r){this.props={},this.campaign_params_saved=!1,r.persistence_name?this.name="mp_"+r.persistence_name:this.name="mp_"+r.token+"_mixpanel";var e=r.persistence;e!=="cookie"&&e!=="localStorage"&&($.critical("Unknown persistence type "+e+"; falling back to cookie"),e=r.persistence="cookie"),e==="localStorage"&&c.localStorage.is_supported()?this.storage=c.localStorage:this.storage=c.cookie,this.load(),this.update_config(r),this.upgrade(r),this.save()};x.prototype.properties=function(){var r={};return c.each(this.props,function(e,t){c.include(Qi,t)||(r[t]=e)}),r};x.prototype.load=function(){if(!this.disabled){var r=this.storage.parse(this.name);r&&(this.props=c.extend({},r))}};x.prototype.upgrade=function(r){var e=r.upgrade,t,i;e&&(t="mp_super_properties",typeof e=="string"&&(t=e),i=this.storage.parse(t),this.storage.remove(t),this.storage.remove(t,!0),i&&(this.props=c.extend(this.props,i.all,i.events))),!r.cookie_name&&r.name!=="mixpanel"&&(t="mp_"+r.token+"_"+r.name,i=this.storage.parse(t),i&&(this.storage.remove(t),this.storage.remove(t,!0),this.register_once(i))),this.storage===c.localStorage&&(i=c.cookie.parse(this.name),c.cookie.remove(this.name),c.cookie.remove(this.name,!0),i&&this.register_once(i))};x.prototype.save=function(){this.disabled||this.storage.set(this.name,c.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)};x.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)};x.prototype.clear=function(){this.remove(),this.props={}};x.prototype.register_once=function(r,e,t){return c.isObject(r)?(typeof e>"u"&&(e="None"),this.expire_days=typeof t>"u"?this.default_expiry:t,c.each(r,function(i,n){(!this.props.hasOwnProperty(n)||this.props[n]===e)&&(this.props[n]=i)},this),this.save(),!0):!1};x.prototype.register=function(r,e){return c.isObject(r)?(this.expire_days=typeof e>"u"?this.default_expiry:e,c.extend(this.props,r),this.save(),!0):!1};x.prototype.unregister=function(r){r in this.props&&(delete this.props[r],this.save())};x.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(c.info.campaignParams()),this.campaign_params_saved=!0)};x.prototype.update_search_keyword=function(r){this.register(c.info.searchInfo(r))};x.prototype.update_referrer_info=function(r){this.register_once({$initial_referrer:r||"$direct",$initial_referring_domain:c.info.referringDomain(r)||"$direct"},"")};x.prototype.get_referrer_info=function(){return c.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})};x.prototype.safe_merge=function(r){return c.each(this.props,function(e,t){t in r||(r[t]=e)}),r};x.prototype.update_config=function(r){this.default_expiry=this.expire_days=r.cookie_expiration,this.set_disabled(r.disable_persistence),this.set_cookie_domain(r.cookie_domain),this.set_cross_site(r.cross_site_cookie),this.set_cross_subdomain(r.cross_subdomain_cookie),this.set_secure(r.secure_cookie)};x.prototype.set_disabled=function(r){this.disabled=r,this.disabled?this.remove():this.save()};x.prototype.set_cookie_domain=function(r){r!==this.cookie_domain&&(this.remove(),this.cookie_domain=r,this.save())};x.prototype.set_cross_site=function(r){r!==this.cross_site&&(this.cross_site=r,this.remove(),this.save())};x.prototype.set_cross_subdomain=function(r){r!==this.cross_subdomain&&(this.cross_subdomain=r,this.remove(),this.save())};x.prototype.get_cross_subdomain=function(){return this.cross_subdomain};x.prototype.set_secure=function(r){r!==this.secure&&(this.secure=!!r,this.remove(),this.save())};x.prototype._add_to_people_queue=function(r,e){var t=this._get_queue_key(r),i=e[r],n=this._get_or_create_queue(_e),s=this._get_or_create_queue(Me),o=this._get_or_create_queue(te),a=this._get_or_create_queue($e),u=this._get_or_create_queue(Ce),l=this._get_or_create_queue(ge,[]),h=this._get_or_create_queue(le,[]);t===or?(c.extend(n,i),this._pop_from_people_queue($e,i),this._pop_from_people_queue(Ce,i),this._pop_from_people_queue(te,i)):t===ar?(c.each(i,function(f,d){d in s||(s[d]=f)}),this._pop_from_people_queue(te,i)):t===cr?c.each(i,function(f){c.each([n,s,a,u],function(d){f in d&&delete d[f]}),c.each(h,function(d){f in d&&delete d[f]}),o[f]=!0}):t===ur?(c.each(i,function(f,d){d in n?n[d]+=f:(d in a||(a[d]=0),a[d]+=f)},this),this._pop_from_people_queue(te,i)):t===fr?(c.each(i,function(f,d){c.isArray(f)&&(d in u||(u[d]=[]),u[d]=u[d].concat(f))}),this._pop_from_people_queue(te,i)):t===hr?(l.push(i),this._pop_from_people_queue(le,i)):t===lr&&(h.push(i),this._pop_from_people_queue(te,i)),$.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),$.log(e),this.save()};x.prototype._pop_from_people_queue=function(r,e){var t=this._get_queue(r);c.isUndefined(t)||(c.each(e,function(i,n){r===le||r===ge?c.each(t,function(s){s[n]===i&&delete s[n]}):delete t[n]},this),this.save())};x.prototype._get_queue_key=function(r){if(r===_e)return or;if(r===Me)return ar;if(r===te)return cr;if(r===$e)return ur;if(r===le)return lr;if(r===ge)return hr;if(r===Ce)return fr;$.error("Invalid queue:",r)};x.prototype._get_queue=function(r){return this.props[this._get_queue_key(r)]};x.prototype._get_or_create_queue=function(r,e){var t=this._get_queue_key(r);return e=c.isUndefined(e)?{}:e,this.props[t]||(this.props[t]=e)};x.prototype.set_event_timer=function(r,e){var t=this.props[et]||{};t[r]=e,this.props[et]=t,this.save()};x.prototype.remove_event_timer=function(r){var e=this.props[et]||{},t=e[r];return c.isUndefined(t)||(delete this.props[et][r],this.save()),t};var dr,H,ci=0,Zi=1,en=function(r){return r},tt=function(){},X="mixpanel",ui="base64",tn="json",Ne=J.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,li=!Ne&&Z.indexOf("MSIE")===-1&&Z.indexOf("Mozilla")===-1,gt=null;ue.sendBeacon&&(gt=function(){return ue.sendBeacon.apply(ue,arguments)});var jr={api_host:"https://api-js.mixpanel.com",api_method:"POST",api_transport:"XHR",api_payload_format:ui,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:tt,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:tt,store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{}},hi=!1,m=function(){},Jt=function(r,e,t){var i,n=t===X?H:H[t];if(n&&dr===ci)i=n;else{if(n&&!c.isArray(n)){$.error("You have already initialized "+t);return}i=new m}return i._cached_groups={},i._init(r,e,t),i.people=new E,i.people._init(i),pe.DEBUG=pe.DEBUG||i.get_config("debug"),!c.isUndefined(n)&&c.isArray(n)&&(i._execute_array.call(i.people,n.people),i._execute_array(n)),i};m.prototype.init=function(r,e,t){if(c.isUndefined(t)){this.report_error("You must name your new library: init(token, config, name)");return}if(t===X){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var i=Jt(r,e,t);return H[t]=i,i._loaded(),i};m.prototype._init=function(r,e,t){e=e||{},this.__loaded=!0,this.config={};var i={};if(!("api_payload_format"in e)){var n=e.api_host||jr.api_host;n.match(/\.mixpanel\.com$/)&&(i.api_payload_format=tn)}if(this.set_config(c.extend({},jr,i,e,{name:t,token:r,callback_fn:(t===X?t:X+"."+t)+"._jsc"})),this._jsc=tt,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!c.localStorage.is_supported(!0)||!Ne)this._batch_requests=!1,$.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support");else if(this.init_batchers(),gt&&J.addEventListener){var s=c.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);J.addEventListener("pagehide",function(a){a.persisted&&s()}),J.addEventListener("visibilitychange",function(){I.visibilityState==="hidden"&&s()})}}this.persistence=this.cookie=new x(this.config),this.unpersisted_superprops={},this._gdpr_init();var o=c.UUID();this.get_distinct_id()||this.register_once({distinct_id:o,$device_id:o},"")};m.prototype._loaded=function(){this.get_config("loaded")(this),this._set_default_superprops()};m.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(I.referrer),this.get_config("store_google")&&this.persistence.update_campaign_params(),this.get_config("save_referrer")&&this.persistence.update_referrer_info(I.referrer)};m.prototype._dom_loaded=function(){c.each(this.__dom_loaded_queue,function(r){this._track_dom.apply(this,r)},this),this.has_opted_out_tracking()||c.each(this.__request_queue,function(r){this._send_request.apply(this,r)},this),delete this.__dom_loaded_queue,delete this.__request_queue};m.prototype._track_dom=function(r,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!hi)return this.__dom_loaded_queue.push([r,e]),!1;var t=new r().init(this);return t.track.apply(t,e)};m.prototype._prepare_callback=function(r,e){if(c.isUndefined(r))return null;if(Ne){var t=function(o){r(o,e)};return t}else{var i=this._jsc,n=""+Math.floor(Math.random()*1e8),s=this.get_config("callback_fn")+"["+n+"]";return i[n]=function(o){delete i[n],r(o,e)},s}};m.prototype._send_request=function(r,e,t,i){var n=!0;if(li)return this.__request_queue.push(arguments),n;var s={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},o=null;!i&&(c.isFunction(t)||typeof t=="string")&&(i=t,t=null),t=c.extend(s,t||{}),Ne||(t.method="GET");var a=t.method==="POST",u=gt&&a&&t.transport.toLowerCase()==="sendbeacon",l=t.verbose;e.verbose&&(l=!0),this.get_config("test")&&(e.test=1),l&&(e.verbose=1),this.get_config("img")&&(e.img=1),Ne||(i?e.callback=i:(l||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=new Date().getTime().toString(),a&&(o="data="+encodeURIComponent(e.data),delete e.data),r+="?"+c.HTTPBuildQuery(e);var h=this;if("img"in e){var f=I.createElement("img");f.src=r,I.body.appendChild(f)}else if(u){try{n=gt(r,o)}catch(w){h.report_error(w),n=!1}try{i&&i(n?1:0)}catch(w){h.report_error(w)}}else if(Ne)try{var d=new XMLHttpRequest;d.open(t.method,r,!0);var g=this.get_config("xhr_headers");if(a&&(g["Content-Type"]="application/x-www-form-urlencoded"),c.each(g,function(w,k){d.setRequestHeader(k,w)}),t.timeout_ms&&typeof d.timeout<"u"){d.timeout=t.timeout_ms;var _=new Date().getTime()}d.withCredentials=!0,d.onreadystatechange=function(){if(d.readyState===4)if(d.status===200){if(i)if(l){var w;try{w=c.JSONDecode(d.responseText)}catch(R){if(h.report_error(R),t.ignore_json_errors)w=d.responseText;else return}i(w)}else i(Number(d.responseText))}else{var k;d.timeout&&!d.status&&new Date().getTime()-_>=d.timeout?k="timeout":k="Bad HTTP status: "+d.status+" "+d.statusText,h.report_error(k),i&&i(l?{status:0,error:k,xhr_req:d}:0)}},d.send(o)}catch(w){h.report_error(w),n=!1}else{var b=I.createElement("script");b.type="text/javascript",b.async=!0,b.defer=!0,b.src=r;var v=I.getElementsByTagName("script")[0];v.parentNode.insertBefore(b,v)}return n};m.prototype._execute_array=function(r){var e,t=[],i=[],n=[];c.each(r,function(o){o&&(e=o[0],c.isArray(e)?n.push(o):typeof o=="function"?o.call(this):c.isArray(o)&&e==="alias"?t.push(o):c.isArray(o)&&e.indexOf("track")!==-1&&typeof this[e]=="function"?n.push(o):i.push(o))},this);var s=function(o,a){c.each(o,function(u){if(c.isArray(u[0])){var l=a;c.each(u,function(h){l=l[h[0]].apply(l,h.slice(1))})}else this[u[0]].apply(this,u.slice(1))},a)};s(t,this),s(i,this),s(n,this)};m.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events};m.prototype.init_batchers=function(){var r=this.get_config("token");if(!this.are_batchers_initialized()){var e=c.bind(function(t){return new oe("__mpq_"+r+t.queue_suffix,{libConfig:this.config,sendRequestFunc:c.bind(function(i,n,s){this._send_request(this.get_config("api_host")+t.endpoint,this._encode_data_for_request(i),n,this._prepare_callback(s,i))},this),beforeSendHook:c.bind(function(i){return this._run_hook("before_send_"+t.type,i)},this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:c.bind(this.stop_batch_senders,this)})},this);this.request_batchers={events:e({type:"events",endpoint:"/track/",queue_suffix:"_ev"}),people:e({type:"people",endpoint:"/engage/",queue_suffix:"_pp"}),groups:e({type:"groups",endpoint:"/groups/",queue_suffix:"_gr"})}}this.get_config("batch_autostart")&&this.start_batch_senders()};m.prototype.start_batch_senders=function(){this.are_batchers_initialized()&&(this._batch_requests=!0,c.each(this.request_batchers,function(r){r.start()}))};m.prototype.stop_batch_senders=function(){this._batch_requests=!1,c.each(this.request_batchers,function(r){r.stop(),r.clear()})};m.prototype.push=function(r){this._execute_array([r])};m.prototype.disable=function(r){typeof r>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(r)};m.prototype._encode_data_for_request=function(r){var e=c.JSONEncode(r);return this.get_config("api_payload_format")===ui&&(e=c.base64Encode(e)),{data:e}};m.prototype._track_or_batch=function(r,e){var t=c.truncate(r.data,255),i=r.endpoint,n=r.batcher,s=r.should_send_immediately,o=r.send_request_options||{};e=e||tt;var a=!0,u=c.bind(function(){return o.skip_hooks||(t=this._run_hook("before_send_"+r.type,t)),t?($.log("MIXPANEL REQUEST:"),$.log(t),this._send_request(i,this._encode_data_for_request(t),o,this._prepare_callback(e,t))):null},this);return this._batch_requests&&!s?n.enqueue(t,function(l){l?e(1,t):u()}):a=u(),a&&t};m.prototype.track=nt(function(r,e,t,i){!i&&typeof t=="function"&&(i=t,t=null),t=t||{};var n=t.transport;n&&(t.transport=n);var s=t.send_immediately;if(typeof i!="function"&&(i=tt),c.isUndefined(r)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(r)){i(0);return}e=e||{},e.token=this.get_config("token");var o=this.persistence.remove_event_timer(r);if(!c.isUndefined(o)){var a=new Date().getTime()-o;e.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops(),e=c.extend({},c.info.properties(),this.persistence.properties(),this.unpersisted_superprops,e);var u=this.get_config("property_blacklist");c.isArray(u)?c.each(u,function(f){delete e[f]}):this.report_error("Invalid value for property_blacklist config: "+u);var l={event:r,properties:e},h=this._track_or_batch({type:"events",data:l,endpoint:this.get_config("api_host")+"/track/",batcher:this.request_batchers.events,should_send_immediately:s,send_request_options:t},i);return h});m.prototype.set_group=nt(function(r,e,t){c.isArray(e)||(e=[e]);var i={};return i[r]=e,this.register(i),this.people.set(r,e,t)});m.prototype.add_group=nt(function(r,e,t){var i=this.get_property(r);if(i===void 0){var n={};n[r]=[e],this.register(n)}else i.indexOf(e)===-1&&(i.push(e),this.register(n));return this.people.union(r,e,t)});m.prototype.remove_group=nt(function(r,e,t){var i=this.get_property(r);if(i!==void 0){var n=i.indexOf(e);n>-1&&(i.splice(n,1),this.register({group_key:i})),i.length===0&&this.unregister(r)}return this.people.remove(r,e,t)});m.prototype.track_with_groups=nt(function(r,e,t,i){var n=c.extend({},e||{});return c.each(t,function(s,o){s!=null&&(n[o]=s)}),this.track(r,n,i)});m.prototype._create_map_key=function(r,e){return r+"_"+JSON.stringify(e)};m.prototype._remove_group_from_cache=function(r,e){delete this._cached_groups[this._create_map_key(r,e)]};m.prototype.get_group=function(r,e){var t=this._create_map_key(r,e),i=this._cached_groups[t];return(i===void 0||i._group_key!==r||i._group_id!==e)&&(i=new P,i._init(this,r,e),this._cached_groups[t]=i),i};m.prototype.track_pageview=function(r){c.isUndefined(r)&&(r=I.location.href),this.track("mp_page_view",c.info.pageviewInfo(r))};m.prototype.track_links=function(){return this._track_dom.call(this,Be,arguments)};m.prototype.track_forms=function(){return this._track_dom.call(this,Et,arguments)};m.prototype.time_event=function(r){if(c.isUndefined(r)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(r)||this.persistence.set_event_timer(r,new Date().getTime())};var rn={persistent:!0},pr=function(r){var e;return c.isObject(r)?e=r:c.isUndefined(r)?e={}:e={days:r},c.extend({},rn,e)};m.prototype.register=function(r,e){var t=pr(e);t.persistent?this.persistence.register(r,t.days):c.extend(this.unpersisted_superprops,r)};m.prototype.register_once=function(r,e,t){var i=pr(t);i.persistent?this.persistence.register_once(r,e,i.days):(typeof e>"u"&&(e="None"),c.each(r,function(n,s){(!this.unpersisted_superprops.hasOwnProperty(s)||this.unpersisted_superprops[s]===e)&&(this.unpersisted_superprops[s]=n)},this))};m.prototype.unregister=function(r,e){e=pr(e),e.persistent?this.persistence.unregister(r):delete this.unpersisted_superprops[r]};m.prototype._register_single=function(r,e){var t={};t[r]=e,this.register(t)};m.prototype.identify=function(r,e,t,i,n,s,o,a){var u=this.get_distinct_id();if(this.register({$user_id:r}),!this.get_property("$device_id")){var l=u;this.register_once({$had_persisted_distinct_id:!0,$device_id:l},"")}r!==u&&r!==this.get_property(_t)&&(this.unregister(_t),this.register({distinct_id:r})),this._flags.identify_called=!0,this.people._flush(e,t,i,n,s,o,a),r!==u&&this.track("$identify",{distinct_id:r,$anon_distinct_id:u},{skip_hooks:!0})};m.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var r=c.UUID();this.register_once({distinct_id:r,$device_id:r},"")};m.prototype.get_distinct_id=function(){return this.get_property("distinct_id")};m.prototype.alias=function(r,e){if(r===this.get_property(ai))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var t=this;return c.isUndefined(e)&&(e=this.get_distinct_id()),r!==e?(this._register_single(_t,r),this.track("$create_alias",{alias:r,distinct_id:e},{skip_hooks:!0},function(){t.identify(r)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(r),-1)};m.prototype.name_tag=function(r){this._register_single("mp_name_tag",r)};m.prototype.set_config=function(r){if(c.isObject(r)){c.extend(this.config,r);var e=r.batch_size;e&&c.each(this.request_batchers,function(t){t.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),pe.DEBUG=pe.DEBUG||this.get_config("debug")}};m.prototype.get_config=function(r){return this.config[r]};m.prototype._run_hook=function(r){var e=(this.config.hooks[r]||en).apply(this,de.call(arguments,1));return typeof e>"u"&&(this.report_error(r+" hook did not return a value"),e=null),e};m.prototype.get_property=function(r){return this.persistence.props[r]};m.prototype.toString=function(){var r=this.get_config("name");return r!==X&&(r=X+"."+r),r};m.prototype._event_is_disabled=function(r){return c.isBlockedUA(Z)||this._flags.disable_all_events||c.include(this.__disabled_events,r)};m.prototype._gdpr_init=function(){var r=this.get_config("opt_out_tracking_persistence_type")==="localStorage";r&&c.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||c.cookie.get("mp_optout"))&&(c.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))};m.prototype._gdpr_update_persistence=function(r){var e;if(r&&r.clear_persistence)e=!0;else if(r&&r.enable_persistence)e=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==e&&this.persistence.set_disabled(e),e&&c.each(this.request_batchers,function(t){t.clear()})};m.prototype._gdpr_call_func=function(r,e){return e=c.extend({track:c.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),c.localStorage.is_supported()||(e.persistence_type="cookie"),r(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})};m.prototype.opt_in_tracking=function(r){r=c.extend({enable_persistence:!0},r),this._gdpr_call_func(Gi,r),this._gdpr_update_persistence(r)};m.prototype.opt_out_tracking=function(r){r=c.extend({clear_persistence:!0,delete_user:!0},r),r.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(Ki,r),this._gdpr_update_persistence(r)};m.prototype.has_opted_in_tracking=function(r){return this._gdpr_call_func(Vi,r)};m.prototype.has_opted_out_tracking=function(r){return this._gdpr_call_func(ii,r)};m.prototype.clear_opt_in_out_tracking=function(r){r=c.extend({enable_persistence:!0},r),this._gdpr_call_func(Wi,r),this._gdpr_update_persistence(r)};m.prototype.report_error=function(r,e){$.error.apply($.error,arguments);try{!e&&!(r instanceof Error)&&(r=new Error(r)),this.get_config("error_reporter")(r,e)}catch(t){$.error(t)}};m.prototype.init=m.prototype.init;m.prototype.reset=m.prototype.reset;m.prototype.disable=m.prototype.disable;m.prototype.time_event=m.prototype.time_event;m.prototype.track=m.prototype.track;m.prototype.track_links=m.prototype.track_links;m.prototype.track_forms=m.prototype.track_forms;m.prototype.track_pageview=m.prototype.track_pageview;m.prototype.register=m.prototype.register;m.prototype.register_once=m.prototype.register_once;m.prototype.unregister=m.prototype.unregister;m.prototype.identify=m.prototype.identify;m.prototype.alias=m.prototype.alias;m.prototype.name_tag=m.prototype.name_tag;m.prototype.set_config=m.prototype.set_config;m.prototype.get_config=m.prototype.get_config;m.prototype.get_property=m.prototype.get_property;m.prototype.get_distinct_id=m.prototype.get_distinct_id;m.prototype.toString=m.prototype.toString;m.prototype.opt_out_tracking=m.prototype.opt_out_tracking;m.prototype.opt_in_tracking=m.prototype.opt_in_tracking;m.prototype.has_opted_out_tracking=m.prototype.has_opted_out_tracking;m.prototype.has_opted_in_tracking=m.prototype.has_opted_in_tracking;m.prototype.clear_opt_in_out_tracking=m.prototype.clear_opt_in_out_tracking;m.prototype.get_group=m.prototype.get_group;m.prototype.set_group=m.prototype.set_group;m.prototype.add_group=m.prototype.add_group;m.prototype.remove_group=m.prototype.remove_group;m.prototype.track_with_groups=m.prototype.track_with_groups;m.prototype.start_batch_senders=m.prototype.start_batch_senders;m.prototype.stop_batch_senders=m.prototype.stop_batch_senders;x.prototype.properties=x.prototype.properties;x.prototype.update_search_keyword=x.prototype.update_search_keyword;x.prototype.update_referrer_info=x.prototype.update_referrer_info;x.prototype.get_cross_subdomain=x.prototype.get_cross_subdomain;x.prototype.clear=x.prototype.clear;var Ue={},nn=function(){c.each(Ue,function(r,e){e!==X&&(H[e]=r)}),H._=c},sn=function(){H.init=function(r,e,t){if(t)return H[t]||(H[t]=Ue[t]=Jt(r,e,t),H[t]._loaded()),H[t];var i=H;Ue[X]?i=Ue[X]:r&&(i=Jt(r,e,X),i._loaded(),Ue[X]=i),H=i,dr===Zi&&(J[X]=H),nn()}},on=function(){function r(){r.done||(r.done=!0,hi=!0,li=!1,c.each(Ue,function(i){i._dom_loaded()}))}function e(){try{I.documentElement.doScroll("left")}catch{setTimeout(e,1);return}r()}if(I.addEventListener)I.readyState==="complete"?r():I.addEventListener("DOMContentLoaded",r,!1);else if(I.attachEvent){I.attachEvent("onreadystatechange",r);var t=!1;try{t=J.frameElement===null}catch{}I.documentElement.doScroll&&t&&e()}c.register_event(J,"load",r,!0)};function an(){return dr=ci,H=new m,sn(),H.init(),on(),H}var cn=an(),un=cn;const Pr={}.APP_MODE,ln=Boolean(""),hn="",fn=Pr?Pr==="development":!1,dn={debug:fn},Rt=ln?un:void 0;class Ye{static instance;constructor(e){Rt?.init(hn,e)}static defaultInstance(e){return Ye.instance??=new Ye({...dn,...e}),Ye.instance}trackCta(e){Rt?.track("hizo click en cta",{description:e})}trackVisit(e){Rt?.track("visito la web",{description:e})}}const fi=Ye.defaultInstance;addEventListener("load",()=>{localStorage.getItem("theme")&&localStorage.setItem("theme","dark"),fi().trackVisit()});function Te(r,e=document.body){return e.querySelector(r)}function pn(r,e=document.body){return[...e.querySelectorAll(r)]}function di(r){r instanceof HTMLElement&&pn("svg",r)?.forEach(e=>{e.classList.toggle("swap-on"),e.classList.toggle("swap-off")})}const Ft=Te(".collapse > input");Te('[data-button="menu"]')?.addEventListener("click",function(r){console.log("click"),r.preventDefault(),di(this),Ft instanceof HTMLInputElement&&(Ft.checked=!Ft.checked)});const _n="Hola, quisiera mas informacion sobre el bootcamp",gn="https://api.whatsapp.com/send",Rr={}.PUBLIC_CONTATCS_API;class Fr{name;email;phone;constructor(e,t,i){this.email=t,this.name=i,this.phone=e}saveLocal(){this.email&&localStorage.setItem("email",this.email)}}class Ur{from;to;constructor(e,t){this.from=e,this.to=t}get isInTime(){if(!this.to||!this.from)return!0;const e=new Date().getUTCHours();return e<(this.to??0)&&e>(this.from??23)}}class mn{schedules;text;contact;constructor(e,t,i=_n){this.schedules=Array.isArray(e)?e:[e],this.contact=t,this.text=i}get wpText(){return`${this.contact.name||""}${this.text}`}get link(){const e=new URL(gn),{searchParams:t}=e;return t.append("text",this.wpText),t.append("phone",this.contact.phone.toString()),e}get isAvailable(){return Boolean(this.schedules.find(e=>e.isInTime))}get linkString(){return this.link.toString()}}const vn=[{contact:new Fr(51956332124),schedule:new Ur(6+12+5,11+12+5)},{contact:new Fr(51956971785),schedule:new Ur(12,19)}],yn=vn.map(({contact:r,schedule:e})=>new mn(e,r));class bn{contacs=yn;async fetchContacts(){return await(await fetch(Rr)).json()}async getContacsAsync(){try{return await this.fetchContacts()??this.contacs}catch(e){return console.log(e),this.contacs}}getContacts(e=!1){return!Rr||e?this.contacs:this.getContacsAsync()}}function wn(r,e){const[t]=e.filter(i=>i.isAvailable);t&&(r.target="_blank"),r.href=t?.linkString??"#contact"}function En(r){const t=new bn().getContacts(!0);Te(`[data-cta="${r}"]`)?.addEventListener("click",({target:i})=>{i instanceof HTMLAnchorElement&&(fi().trackCta(i.textContent||""),wn(i,t))})}En("inscribirse");function De(r){this._maxSize=r,this.clear()}De.prototype.clear=function(){this._size=0,this._values=Object.create(null)};De.prototype.get=function(r){return this._values[r]};De.prototype.set=function(r,e){return this._size>=this._maxSize&&this.clear(),r in this._values||this._size++,this._values[r]=e};var xn=/[^.^\]^[]+|(?=\[\]|\.\.)/g,pi=/^\d+$/,kn=/^\d/,Sn=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,On=/^\s*(['"]?)(.*?)(\1)\s*$/,_r=512,qr=new De(_r),Nr=new De(_r),Lr=new De(_r),Ae={Cache:De,split:Gt,normalizePath:Ut,setter:function(r){var e=Ut(r);return Nr.get(r)||Nr.set(r,function(i,n){for(var s=0,o=e.length,a=i;s<o-1;){var u=e[s];if(u==="__proto__"||u==="constructor"||u==="prototype")return i;a=a[e[s++]]}a[e[s]]=n})},getter:function(r,e){var t=Ut(r);return Lr.get(r)||Lr.set(r,function(n){for(var s=0,o=t.length;s<o;)if(n!=null||!e)n=n[t[s++]];else return;return n})},join:function(r){return r.reduce(function(e,t){return e+(gr(t)||pi.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(r,e,t){Tn(Array.isArray(r)?r:Gt(r),e,t)}};function Ut(r){return qr.get(r)||qr.set(r,Gt(r).map(function(e){return e.replace(On,"$2")}))}function Gt(r){return r.match(xn)||[""]}function Tn(r,e,t){var i=r.length,n,s,o,a;for(s=0;s<i;s++)n=r[s],n&&(Cn(n)&&(n='"'+n+'"'),a=gr(n),o=!a&&/^\d+$/.test(n),e.call(t,n,a,o,s,r))}function gr(r){return typeof r=="string"&&r&&["'",'"'].indexOf(r.charAt(0))!==-1}function An(r){return r.match(kn)&&!r.match(pi)}function $n(r){return Sn.test(r)}function Cn(r){return!gr(r)&&(An(r)||$n(r))}const Dn=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,xt=r=>r.match(Dn)||[],kt=r=>r[0].toUpperCase()+r.slice(1),mr=(r,e)=>xt(r).join(e).toLowerCase(),_i=r=>xt(r).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,""),In=r=>kt(_i(r)),jn=r=>mr(r,"_"),Pn=r=>mr(r,"-"),Rn=r=>kt(mr(r," ")),Fn=r=>xt(r).map(kt).join(" ");var qt={words:xt,upperFirst:kt,camelCase:_i,pascalCase:In,snakeCase:jn,kebabCase:Pn,sentenceCase:Rn,titleCase:Fn},mt={},Un={get exports(){return mt},set exports(r){mt=r}};Un.exports=function(r){return gi(qn(r),r)};mt.array=gi;function gi(r,e){var t=r.length,i=new Array(t),n={},s=t,o=Nn(e),a=Ln(r);for(e.forEach(function(l){if(!a.has(l[0])||!a.has(l[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)n[s]||u(r[s],s,new Set);return i;function u(l,h,f){if(f.has(l)){var d;try{d=", node was:"+JSON.stringify(l)}catch{d=""}throw new Error("Cyclic dependency"+d)}if(!a.has(l))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(l));if(!n[h]){n[h]=!0;var g=o.get(l)||new Set;if(g=Array.from(g),h=g.length){f.add(l);do{var _=g[--h];u(_,a.get(_),f)}while(h);f.delete(l)}i[--t]=l}}}function qn(r){for(var e=new Set,t=0,i=r.length;t<i;t++){var n=r[t];e.add(n[0]),e.add(n[1])}return Array.from(e)}function Nn(r){for(var e=new Map,t=0,i=r.length;t<i;t++){var n=r[t];e.has(n[0])||e.set(n[0],new Set),e.has(n[1])||e.set(n[1],new Set),e.get(n[0]).add(n[1])}return e}function Ln(r){for(var e=new Map,t=0,i=r.length;t<i;t++)e.set(r[t],t);return e}const Bn=Object.prototype.toString,Mn=Error.prototype.toString,zn=RegExp.prototype.toString,Hn=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Jn=/^Symbol\((.*)\)(.*)$/;function Gn(r){return r!=+r?"NaN":r===0&&1/r<0?"-0":""+r}function Br(r,e=!1){if(r==null||r===!0||r===!1)return""+r;const t=typeof r;if(t==="number")return Gn(r);if(t==="string")return e?`"${r}"`:r;if(t==="function")return"[Function "+(r.name||"anonymous")+"]";if(t==="symbol")return Hn.call(r).replace(Jn,"Symbol($1)");const i=Bn.call(r).slice(8,-1);return i==="Date"?isNaN(r.getTime())?""+r:r.toISOString(r):i==="Error"||r instanceof Error?"["+Mn.call(r)+"]":i==="RegExp"?zn.call(r):null}function Le(r,e){let t=Br(r,e);return t!==null?t:JSON.stringify(r,function(i,n){let s=Br(this[i],e);return s!==null?s:n},2)}function mi(r){return r==null?[]:[].concat(r)}let Kn=/\$\{\s*(\w+)\s*\}/g;class K extends Error{static formatError(e,t){const i=t.label||t.path||"this";return i!==t.path&&(t=Object.assign({},t,{path:i})),typeof e=="string"?e.replace(Kn,(n,s)=>Le(t[s])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,i,n){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this.name="ValidationError",this.value=t,this.path=i,this.type=n,this.errors=[],this.inner=[],mi(e).forEach(s=>{K.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,K)}}let ce={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:r,type:e,value:t,originalValue:i})=>{const n=i!=null&&i!==t?` (cast from the value \`${Le(i,!0)}\`).`:".";return e!=="mixed"?`${r} must be a \`${e}\` type, but the final value was: \`${Le(t,!0)}\``+n:`${r} must match the configured type. The validated value was: \`${Le(t,!0)}\``+n}},Q={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},fe={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Kt={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Vn={isValue:"${path} field must be ${value}"},Vt={noUnknown:"${path} field has unspecified keys: ${unknown}"},Wn={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"};Object.assign(Object.create(null),{mixed:ce,string:Q,number:fe,date:Kt,object:Vt,array:Wn,boolean:Vn});const vr=r=>r&&r.__isYupSchema__;class vt{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:n,otherwise:s}=t,o=typeof i=="function"?i:(...a)=>a.every(u=>u===i);return new vt(e,(a,u)=>{var l;let h=o(...a)?n:s;return(l=h?.(u))!=null?l:u})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let i=this.refs.map(s=>s.getValue(t?.value,t?.parent,t?.context)),n=this.fn(i,e,t);if(n===void 0||n===e)return e;if(!vr(n))throw new TypeError("conditions must return a schema object");return n.resolve(t)}}const ct={context:"$",value:"."};class Ie{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===ct.context,this.isValue=this.key[0]===ct.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?ct.context:this.isValue?ct.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&Ae.getter(this.path,!0),this.map=t.map}getValue(e,t,i){let n=this.isContext?i:this.isValue?e:t;return this.getter&&(n=this.getter(n||{})),this.map&&(n=this.map(n)),n}cast(e,t){return this.getValue(e,t?.parent,t?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Ie.prototype.__isYupRef=!0;const se=r=>r==null;function Pe(r){function e({value:t,path:i="",options:n,originalValue:s,schema:o},a,u){const{name:l,test:h,params:f,message:d,skipAbsent:g}=r;let{parent:_,context:b,abortEarly:v=o.spec.abortEarly}=n;function w(F){return Ie.isRef(F)?F.getValue(t,_,b):F}function k(F={}){const B=Object.assign({value:t,originalValue:s,label:o.spec.label,path:F.path||i,spec:o.spec},f,F.params);for(const je of Object.keys(B))B[je]=w(B[je]);const ot=new K(K.formatError(F.message||d,B),t,B.path,F.type||l);return ot.params=B,ot}const R=v?a:u;let A={path:i,parent:_,type:l,from:n.from,createError:k,resolve:w,options:n,originalValue:s,schema:o};const N=F=>{K.isError(F)?R(F):F?u(null):R(k())},ye=F=>{K.isError(F)?R(F):a(F)},W=g&&se(t);if(!n.sync){try{Promise.resolve(W?!0:h.call(A,t,A)).then(N,ye)}catch(F){ye(F)}return}let U;try{var L;if(U=W?!0:h.call(A,t,A),typeof((L=U)==null?void 0:L.then)=="function")throw new Error(`Validation test of type: "${A.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(F){ye(F);return}N(U)}return e.OPTIONS=r,e}function Yn(r,e,t,i=t){let n,s,o;return e?(Ae.forEach(e,(a,u,l)=>{let h=u?a.slice(1,a.length-1):a;r=r.resolve({context:i,parent:n,value:t});let f=r.type==="tuple",d=l?parseInt(h,10):0;if(r.innerType||f){if(f&&!l)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(t&&d>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${a}, in the path: ${e}. because there is no value at that index. `);n=t,t=t&&t[d],r=f?r.spec.types[d]:r.innerType}if(!l){if(!r.fields||!r.fields[h])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${r.type}")`);n=t,t=t&&t[h],r=r.fields[h]}s=h,o=u?"["+a+"]":"."+a}),{schema:r,parent:n,parentPath:s}):{parent:n,parentPath:e,schema:r}}class yt extends Set{describe(){const e=[];for(const t of this.values())e.push(Ie.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const i of this.values())t.push(e(i));return t}clone(){return new yt(this.values())}merge(e,t){const i=this.clone();return e.forEach(n=>i.add(n)),t.forEach(n=>i.delete(n)),i}}function qe(r,e=new Map){if(vr(r)||!r||typeof r!="object")return r;if(e.has(r))return e.get(r);let t;if(r instanceof Date)t=new Date(r.getTime()),e.set(r,t);else if(r instanceof RegExp)t=new RegExp(r),e.set(r,t);else if(Array.isArray(r)){t=new Array(r.length),e.set(r,t);for(let i=0;i<r.length;i++)t[i]=qe(r[i],e)}else if(r instanceof Map){t=new Map,e.set(r,t);for(const[i,n]of r.entries())t.set(i,qe(n,e))}else if(r instanceof Set){t=new Set,e.set(r,t);for(const i of r)t.add(qe(i,e))}else if(r instanceof Object){t={},e.set(r,t);for(const[i,n]of Object.entries(r))t[i]=qe(n,e)}else throw Error(`Unable to clone ${r}`);return t}class re{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new yt,this._blacklist=new yt,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ce.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=qe(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let i=e(this);return this._mutate=t,i}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,i=e.clone();const n=Object.assign({},t.spec,i.spec);return i.spec=n,i.internalTests=Object.assign({},t.internalTests,i.internalTests),i._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),i._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),i.tests=t.tests,i.exclusiveTests=t.exclusiveTests,i.withMutation(s=>{e.tests.forEach(o=>{s.test(o.OPTIONS)})}),i.transforms=[...t.transforms,...i.transforms],i}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let i=t.conditions;t=t.clone(),t.conditions=[],t=i.reduce((n,s)=>s.resolve(n,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,i,n;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(i=e.abortEarly)!=null?i:this.spec.abortEarly,recursive:(n=e.recursive)!=null?n:this.spec.recursive})}cast(e,t={}){let i=this.resolve(Object.assign({value:e},t)),n=t.assert==="ignore-optionality",s=i._cast(e,t);if(t.assert!==!1&&!i.isType(s)){if(n&&se(s))return s;let o=Le(e),a=Le(s);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${o} 
`+(a!==o?`result of cast: ${a}`:""))}return s}_cast(e,t){let i=e===void 0?e:this.transforms.reduce((n,s)=>s.call(this,n,e,this),e);return i===void 0&&(i=this.getDefault()),i}_validate(e,t={},i,n){let{path:s,originalValue:o=e,strict:a=this.spec.strict}=t,u=e;a||(u=this._cast(u,Object.assign({assert:!1},t)));let l=[];for(let h of Object.values(this.internalTests))h&&l.push(h);this.runTests({path:s,value:u,originalValue:o,options:t,tests:l},i,h=>{if(h.length)return n(h,u);this.runTests({path:s,value:u,originalValue:o,options:t,tests:this.tests},i,n)})}runTests(e,t,i){let n=!1,{tests:s,value:o,originalValue:a,path:u,options:l}=e,h=b=>{n||(n=!0,t(b,o))},f=b=>{n||(n=!0,i(b,o))},d=s.length,g=[];if(!d)return f([]);let _={value:o,originalValue:a,path:u,options:l,schema:this};for(let b=0;b<s.length;b++){const v=s[b];v(_,h,function(k){k&&(g=g.concat(k)),--d<=0&&f(g)})}}asNestedTest({key:e,index:t,parent:i,parentPath:n,originalParent:s,options:o}){const a=e??t;if(a==null)throw TypeError("Must include `key` or `index` for nested validations");const u=typeof a=="number";let l=i[a];const h=Object.assign({},o,{strict:!0,parent:i,value:l,originalValue:s[a],key:void 0,[u?"index":"key"]:a,path:u||a.includes(".")?`${n||""}[${l?a:`"${a}"`}]`:(n?`${n}.`:"")+e});return(f,d,g)=>this.resolve(h)._validate(l,h,d,g)}validate(e,t){let i=this.resolve(Object.assign({},t,{value:e}));return new Promise((n,s)=>i._validate(e,t,(o,a)=>{K.isError(o)&&(o.value=a),s(o)},(o,a)=>{o.length?s(new K(o,a)):n(a)}))}validateSync(e,t){let i=this.resolve(Object.assign({},t,{value:e})),n;return i._validate(e,Object.assign({},t,{sync:!0}),(s,o)=>{throw K.isError(s)&&(s.value=o),s},(s,o)=>{if(s.length)throw new K(s,e);n=o}),n}isValid(e,t){return this.validate(e,t).then(()=>!0,i=>{if(K.isError(i))return!1;throw i})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(i){if(K.isError(i))return!1;throw i}}_getDefault(){let e=this.spec.default;return e==null?e:typeof e=="function"?e.call(this):qe(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const i=this.clone({nullable:e});return i.internalTests.nullable=Pe({message:t,name:"nullable",test(n){return n===null?this.schema.spec.nullable:!0}}),i}optionality(e,t){const i=this.clone({optional:e});return i.internalTests.optionality=Pe({message:t,name:"optionality",test(n){return n===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(e=ce.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=ce.notNull){return this.nullability(!1,e)}required(e=ce.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=ce.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),n=Pe(t),s=t.exclusive||t.name&&i.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(i.exclusiveTests[t.name]=!!t.exclusive),i.tests=i.tests.filter(o=>!(o.OPTIONS.name===t.name&&(s||o.OPTIONS.test===n.OPTIONS.test))),i.tests.push(n),i}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let i=this.clone(),n=mi(e).map(s=>new Ie(s));return n.forEach(s=>{s.isSibling&&i.deps.push(s.key)}),i.conditions.push(typeof t=="function"?new vt(n,t):vt.fromOptions(n,t)),i}typeError(e){let t=this.clone();return t.internalTests.typeError=Pe({message:e,name:"typeError",test(i){return!se(i)&&!this.schema._typeCheck(i)?this.createError({params:{type:this.schema.type}}):!0}}),t}oneOf(e,t=ce.oneOf){let i=this.clone();return e.forEach(n=>{i._whitelist.add(n),i._blacklist.delete(n)}),i.internalTests.whiteList=Pe({message:t,name:"oneOf",skipAbsent:!0,test(n){let s=this.schema._whitelist,o=s.resolveAll(this.resolve);return o.includes(n)?!0:this.createError({params:{values:Array.from(s).join(", "),resolved:o}})}}),i}notOneOf(e,t=ce.notOneOf){let i=this.clone();return e.forEach(n=>{i._blacklist.add(n),i._whitelist.delete(n)}),i.internalTests.blacklist=Pe({message:t,name:"notOneOf",test(n){let s=this.schema._blacklist,o=s.resolveAll(this.resolve);return o.includes(n)?this.createError({params:{values:Array.from(s).join(", "),resolved:o}}):!0}}),i}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:i,meta:n,optional:s,nullable:o}=t.spec;return{meta:n,label:i,optional:s,nullable:o,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(u=>({name:u.OPTIONS.name,params:u.OPTIONS.params})).filter((u,l,h)=>h.findIndex(f=>f.name===u.name)===l)}}}re.prototype.__isYupSchema__=!0;for(const r of["validate","validateSync"])re.prototype[`${r}At`]=function(e,t,i={}){const{parent:n,parentPath:s,schema:o}=Yn(this,e,t,i.context);return o[r](n&&n[s],Object.assign({},i,{parent:n,path:e}))};for(const r of["equals","is"])re.prototype[r]=re.prototype.oneOf;for(const r of["not","nope"])re.prototype[r]=re.prototype.notOneOf;let Xn=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Qn=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Zn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,es=r=>se(r)||r===r.trim(),ts={}.toString();function Wt(){return new vi}class vi extends re{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t,i)=>{if(!i.spec.coerce||i.isType(e)||Array.isArray(e))return e;const n=e!=null&&e.toString?e.toString():e;return n===ts?e:n})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||ce.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=Q.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(i){return i.length===this.resolve(e)}})}min(e,t=Q.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i.length>=this.resolve(e)}})}max(e,t=Q.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(i){return i.length<=this.resolve(e)}})}matches(e,t){let i=!1,n,s;return t&&(typeof t=="object"?{excludeEmptyString:i=!1,message:n,name:s}=t:n=t),this.test({name:s||"matches",message:n||Q.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&i||o.search(e)!==-1})}email(e=Q.email){return this.matches(Xn,{name:"email",message:e,excludeEmptyString:!0})}url(e=Q.url){return this.matches(Qn,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Q.uuid){return this.matches(Zn,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Q.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:es})}lowercase(e=Q.lowercase){return this.transform(t=>se(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>se(t)||t===t.toLowerCase()})}uppercase(e=Q.uppercase){return this.transform(t=>se(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>se(t)||t===t.toUpperCase()})}}Wt.prototype=vi.prototype;let rs=r=>r!=+r;function yi(){return new bi}class bi extends re{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!rs(e)}}),this.withMutation(()=>{this.transform((e,t,i)=>{if(!i.spec.coerce)return e;let n=e;if(typeof n=="string"){if(n=n.replace(/\s/g,""),n==="")return NaN;n=+n}return i.isType(n)?n:parseFloat(n)})})}min(e,t=fe.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(e)}})}max(e,t=fe.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(e)}})}lessThan(e,t=fe.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(i){return i<this.resolve(e)}})}moreThan(e,t=fe.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(i){return i>this.resolve(e)}})}positive(e=fe.positive){return this.moreThan(0,e)}negative(e=fe.negative){return this.lessThan(0,e)}integer(e=fe.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:t=>Number.isInteger(t)})}truncate(){return this.transform(e=>se(e)?e:e|0)}round(e){var t;let i=["ceil","floor","round","trunc"];if(e=((t=e)==null?void 0:t.toLowerCase())||"round",e==="trunc")return this.truncate();if(i.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+i.join(", "));return this.transform(n=>se(n)?n:Math[e](n))}}yi.prototype=bi.prototype;var is=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function ns(r){var e=[1,4,5,6,7,10,11],t=0,i,n;if(n=is.exec(r)){for(var s=0,o;o=e[s];++s)n[o]=+n[o]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,(n[8]===void 0||n[8]==="")&&(n[9]===void 0||n[9]==="")?i=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7]):(n[8]!=="Z"&&n[9]!==void 0&&(t=n[10]*60+n[11],n[9]==="+"&&(t=0-t)),i=Date.UTC(n[1],n[2],n[3],n[4],n[5]+t,n[6],n[7]))}else i=Date.parse?Date.parse(r):NaN;return i}let ss=new Date(""),os=r=>Object.prototype.toString.call(r)==="[object Date]";class St extends re{constructor(){super({type:"date",check(e){return os(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t,i)=>!i.spec.coerce||i.isType(e)?e:(e=ns(e),isNaN(e)?St.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let i;if(Ie.isRef(e))i=e;else{let n=this.cast(e);if(!this._typeCheck(n))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);i=n}return i}min(e,t=Kt.min){let i=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(n){return n>=this.resolve(i)}})}max(e,t=Kt.max){let i=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(n){return n<=this.resolve(i)}})}}St.INVALID_DATE=ss;St.prototype;function as(r,e=[]){let t=[],i=new Set,n=new Set(e.map(([o,a])=>`${o}-${a}`));function s(o,a){let u=Ae.split(o)[0];i.add(u),n.has(`${a}-${u}`)||t.push([a,u])}for(const o of Object.keys(r)){let a=r[o];i.add(o),Ie.isRef(a)&&a.isSibling?s(a.path,o):vr(a)&&"deps"in a&&a.deps.forEach(u=>s(u,o))}return mt.array(Array.from(i),t).reverse()}function Mr(r,e){let t=1/0;return r.some((i,n)=>{var s;if((s=e.path)!=null&&s.includes(i))return t=n,!0}),t}function wi(r){return(e,t)=>Mr(r,e)-Mr(r,t)}const cs=(r,e,t)=>{if(typeof r!="string")return r;let i=r;try{i=JSON.parse(r)}catch{}return t.isType(i)?i:r};function lt(r){if("fields"in r){const e={};for(const[t,i]of Object.entries(r.fields))e[t]=lt(i);return r.setFields(e)}if(r.type==="array"){const e=r.optional();return e.innerType&&(e.innerType=lt(e.innerType)),e}return r.type==="tuple"?r.optional().clone({types:r.spec.types.map(lt)}):"optional"in r?r.optional():r}const us=(r,e)=>{const t=[...Ae.normalizePath(e)];if(t.length===1)return t[0]in r;let i=t.pop(),n=Ae.getter(Ae.join(t),!0)(r);return!!(n&&i in n)};let zr=r=>Object.prototype.toString.call(r)==="[object Object]";function ls(r,e){let t=Object.keys(r.fields);return Object.keys(e).filter(i=>t.indexOf(i)===-1)}const hs=wi([]);function Ei(r){return new xi(r)}class xi extends re{constructor(e){super({type:"object",check(t){return zr(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=hs,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var i;let n=super._cast(e,t);if(n===void 0)return this.getDefault();if(!this._typeCheck(n))return n;let s=this.fields,o=(i=t.stripUnknown)!=null?i:this.spec.noUnknown,a=[].concat(this._nodes,Object.keys(n).filter(f=>!this._nodes.includes(f))),u={},l=Object.assign({},t,{parent:u,__validating:t.__validating||!1}),h=!1;for(const f of a){let d=s[f],g=f in n;if(d){let _,b=n[f];l.path=(t.path?`${t.path}.`:"")+f,d=d.resolve({value:b,context:t.context,parent:u});let v=d instanceof re?d.spec:void 0,w=v?.strict;if(v!=null&&v.strip){h=h||f in n;continue}_=!t.__validating||!w?d.cast(n[f],l):n[f],_!==void 0&&(u[f]=_)}else g&&!o&&(u[f]=n[f]);(g!==f in u||u[f]!==n[f])&&(h=!0)}return h?u:n}_validate(e,t={},i,n){let{from:s=[],originalValue:o=e,recursive:a=this.spec.recursive}=t;t.from=[{schema:this,value:o},...s],t.__validating=!0,t.originalValue=o,super._validate(e,t,i,(u,l)=>{if(!a||!zr(l)){n(u,l);return}o=o||l;let h=[];for(let f of this._nodes){let d=this.fields[f];!d||Ie.isRef(d)||h.push(d.asNestedTest({options:t,key:f,parent:l,parentPath:t.path,originalParent:o}))}this.runTests({tests:h,value:l,originalValue:o,options:t},i,f=>{n(f.sort(this._sortErrors).concat(u),l)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),i=t.fields;for(let[n,s]of Object.entries(this.fields)){const o=i[n];i[n]=o===void 0?s:o}return t.withMutation(n=>n.setFields(i,this._excludedEdges))}_getDefault(){if("default"in this.spec)return super._getDefault();if(!this._nodes.length)return;let e={};return this._nodes.forEach(t=>{const i=this.fields[t];e[t]=i&&"getDefault"in i?i.getDefault():void 0}),e}setFields(e,t){let i=this.clone();return i.fields=e,i._nodes=as(e,t),i._sortErrors=wi(Object.keys(e)),t&&(i._excludedEdges=t),i}shape(e,t=[]){return this.clone().withMutation(i=>{let n=i._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),n=[...i._excludedEdges,...t]),i.setFields(Object.assign(i.fields,e),n)})}partial(){const e={};for(const[t,i]of Object.entries(this.fields))e[t]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(e)}deepPartial(){return lt(this)}pick(e){const t={};for(const i of e)this.fields[i]&&(t[i]=this.fields[i]);return this.setFields(t)}omit(e){const t=Object.assign({},this.fields);for(const i of e)delete t[i];return this.setFields(t)}from(e,t,i){let n=Ae.getter(e,!0);return this.transform(s=>{if(!s)return s;let o=s;return us(s,e)&&(o=Object.assign({},s),i||delete o[e],o[t]=n(s)),o})}json(){return this.transform(cs)}noUnknown(e=!0,t=Vt.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:t,test(n){if(n==null)return!0;const s=ls(this.schema,n);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return i.spec.noUnknown=e,i}unknown(e=!0,t=Vt.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const i={};for(const n of Object.keys(t))i[e(n)]=t[n];return i})}camelCase(){return this.transformKeys(qt.camelCase)}snakeCase(){return this.transformKeys(qt.snakeCase)}constantCase(){return this.transformKeys(e=>qt.snakeCase(e).toUpperCase())}describe(e){let t=super.describe(e);t.fields={};for(const[n,s]of Object.entries(this.fields)){var i;let o=e;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),t.fields[n]=s.describe(o)}return t}}Ei.prototype=xi.prototype;const fs=Ei().shape({name:Wt().required(),email:Wt().required().email(),phone:yi().required()}),ds="modulepreload",ps=function(r){return"/bootcampLanding/"+r},Hr={},Ot=function(e,t,i){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=ps(s),s in Hr)return;Hr[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let h=n.length-1;h>=0;h--){const f=n[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":ds,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((h,f)=>{l.addEventListener("load",h),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};var _s=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const gs=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>_s(void 0,void 0,void 0,function*(){return yield(yield Ot(()=>Promise.resolve().then(()=>Tt),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class yr extends Error{constructor(e,t="FunctionsError",i){super(e),super.name=t,this.context=i}}class ms extends yr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class vs extends yr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ys extends yr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bs=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};class ws{constructor(e,{headers:t={},customFetch:i}={}){this.url=e,this.headers=t,this.fetch=gs(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return bs(this,void 0,void 0,function*(){try{const{headers:n,body:s}=t;let o={},a;s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=s):typeof s=="string"?(o["Content-Type"]="text/plain",a=s):typeof FormData<"u"&&s instanceof FormData?a=s:(o["Content-Type"]="application/json",a=JSON.stringify(s)));const u=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:a}).catch(d=>{throw new ms(d)}),l=u.headers.get("x-relay-error");if(l&&l==="true")throw new vs(u);if(!u.ok)throw new ys(u);let h=((i=u.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(n){return{data:null,error:n}}})}}var ze={},Es={get exports(){return ze},set exports(r){ze=r}};(function(r,e){var t=typeof self<"u"?self:Fi,i=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(p){return p&&DataView.prototype.isPrototypeOf(p)}if(a.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(p){return p&&l.indexOf(Object.prototype.toString.call(p))>-1};function f(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(p))throw new TypeError("Invalid character in header field name");return p.toLowerCase()}function d(p){return typeof p!="string"&&(p=String(p)),p}function g(p){var y={next:function(){var S=p.shift();return{done:S===void 0,value:S}}};return a.iterable&&(y[Symbol.iterator]=function(){return y}),y}function _(p){this.map={},p instanceof _?p.forEach(function(y,S){this.append(S,y)},this):Array.isArray(p)?p.forEach(function(y){this.append(y[0],y[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(y){this.append(y,p[y])},this)}_.prototype.append=function(p,y){p=f(p),y=d(y);var S=this.map[p];this.map[p]=S?S+", "+y:y},_.prototype.delete=function(p){delete this.map[f(p)]},_.prototype.get=function(p){return p=f(p),this.has(p)?this.map[p]:null},_.prototype.has=function(p){return this.map.hasOwnProperty(f(p))},_.prototype.set=function(p,y){this.map[f(p)]=d(y)},_.prototype.forEach=function(p,y){for(var S in this.map)this.map.hasOwnProperty(S)&&p.call(y,this.map[S],S,this)},_.prototype.keys=function(){var p=[];return this.forEach(function(y,S){p.push(S)}),g(p)},_.prototype.values=function(){var p=[];return this.forEach(function(y){p.push(y)}),g(p)},_.prototype.entries=function(){var p=[];return this.forEach(function(y,S){p.push([S,y])}),g(p)},a.iterable&&(_.prototype[Symbol.iterator]=_.prototype.entries);function b(p){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}function v(p){return new Promise(function(y,S){p.onload=function(){y(p.result)},p.onerror=function(){S(p.error)}})}function w(p){var y=new FileReader,S=v(y);return y.readAsArrayBuffer(p),S}function k(p){var y=new FileReader,S=v(y);return y.readAsText(p),S}function R(p){for(var y=new Uint8Array(p),S=new Array(y.length),z=0;z<y.length;z++)S[z]=String.fromCharCode(y[z]);return S.join("")}function A(p){if(p.slice)return p.slice(0);var y=new Uint8Array(p.byteLength);return y.set(new Uint8Array(p)),y.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(p){this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:a.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:a.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():a.arrayBuffer&&a.blob&&u(p)?(this._bodyArrayBuffer=A(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||h(p))?this._bodyArrayBuffer=A(p):this._bodyText=p=Object.prototype.toString.call(p):this._bodyText="",this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var p=b(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var p=b(this);if(p)return p;if(this._bodyBlob)return k(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(R(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var ye=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function W(p){var y=p.toUpperCase();return ye.indexOf(y)>-1?y:p}function U(p,y){y=y||{};var S=y.body;if(p instanceof U){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,y.headers||(this.headers=new _(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!S&&p._bodyInit!=null&&(S=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=y.credentials||this.credentials||"same-origin",(y.headers||!this.headers)&&(this.headers=new _(y.headers)),this.method=W(y.method||this.method||"GET"),this.mode=y.mode||this.mode||null,this.signal=y.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&S)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(S)}U.prototype.clone=function(){return new U(this,{body:this._bodyInit})};function L(p){var y=new FormData;return p.trim().split("&").forEach(function(S){if(S){var z=S.split("="),M=z.shift().replace(/\+/g," "),C=z.join("=").replace(/\+/g," ");y.append(decodeURIComponent(M),decodeURIComponent(C))}}),y}function F(p){var y=new _,S=p.replace(/\r?\n[\t ]+/g," ");return S.split(/\r?\n/).forEach(function(z){var M=z.split(":"),C=M.shift().trim();if(C){var at=M.join(":").trim();y.append(C,at)}}),y}N.call(U.prototype);function B(p,y){y||(y={}),this.type="default",this.status=y.status===void 0?200:y.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in y?y.statusText:"OK",this.headers=new _(y.headers),this.url=y.url||"",this._initBody(p)}N.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new _(this.headers),url:this.url})},B.error=function(){var p=new B(null,{status:0,statusText:""});return p.type="error",p};var ot=[301,302,303,307,308];B.redirect=function(p,y){if(ot.indexOf(y)===-1)throw new RangeError("Invalid status code");return new B(null,{status:y,headers:{location:p}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(y,S){this.message=y,this.name=S;var z=Error(y);this.stack=z.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function je(p,y){return new Promise(function(S,z){var M=new U(p,y);if(M.signal&&M.signal.aborted)return z(new o.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function at(){C.abort()}C.onload=function(){var Ge={status:C.status,statusText:C.statusText,headers:F(C.getAllResponseHeaders()||"")};Ge.url="responseURL"in C?C.responseURL:Ge.headers.get("X-Request-URL");var Dt="response"in C?C.response:C.responseText;S(new B(Dt,Ge))},C.onerror=function(){z(new TypeError("Network request failed"))},C.ontimeout=function(){z(new TypeError("Network request failed"))},C.onabort=function(){z(new o.DOMException("Aborted","AbortError"))},C.open(M.method,M.url,!0),M.credentials==="include"?C.withCredentials=!0:M.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&a.blob&&(C.responseType="blob"),M.headers.forEach(function(Ge,Dt){C.setRequestHeader(Dt,Ge)}),M.signal&&(M.signal.addEventListener("abort",at),C.onreadystatechange=function(){C.readyState===4&&M.signal.removeEventListener("abort",at)}),C.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return je.polyfill=!0,s.fetch||(s.fetch=je,s.Headers=_,s.Request=U,s.Response=B),o.Headers=_,o.Request=U,o.Response=B,o.fetch=je,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=i;e=n.fetch,e.default=n.fetch,e.fetch=n.fetch,e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response,r.exports=e})(Es,ze);const br=Ui(ze),Tt=Ri({__proto__:null,default:br},[ze]);class xs{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=br:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let n=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,u;let l=null,h=null,f=null,d=s.status,g=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=w:h=JSON.parse(w))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&v&&v.length>1&&(f=parseInt(v[1]))}else{const b=await s.text();try{l=JSON.parse(b),Array.isArray(l)&&s.status===404&&(h=[],l=null,d=200,g="OK")}catch{s.status===404&&b===""?(d=204,g="No Content"):l={message:b}}if(l&&this.allowEmpty&&(!((u=l?.details)===null||u===void 0)&&u.includes("Results contain 0 rows"))&&(l=null,d=200,g="OK"),l&&this.shouldThrowOnError)throw l}return{error:l,data:h,count:f,status:d,statusText:g}});return this.shouldThrowOnError||(n=n.catch(s=>({error:{message:`FetchError: ${s.message}`,details:"",hint:"",code:s.code||""},data:null,count:null,status:0,statusText:""}))),n.then(e,t)}}class ks extends xs{select(e){let t=!1;const i=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:n}={}){const s=n?`${n}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const i=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:i}={}){const n=typeof i>"u"?"offset":`${i}.offset`,s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:n=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,i?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Fe extends ks{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=t.map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t}={}){const i=t?`${t}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}}class Ss{constructor(e,{headers:t={},schema:i,fetch:n}){this.url=e,this.headers=t,this.schema=i,this.fetch=n}select(e,{head:t=!1,count:i}={}){const n=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new Fe({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const i="POST",n=[],s=e;if(t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),Array.isArray(e)){const o=e.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(o.length>0){const a=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new Fe({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:n}={}){const s="POST",o=[`resolution=${i?"ignore":"merge"}-duplicates`];t!==void 0&&this.url.searchParams.set("on_conflict",t);const a=e;return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new Fe({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const i="PATCH",n=[],s=e;return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Fe({method:i,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new Fe({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Os="1.4.0",Ts={"X-Client-Info":`postgrest-js/${Os}`};class As{constructor(e,{headers:t={},schema:i,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ts),t),this.schema=i,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new Ss(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:i=!1,count:n}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;i?(s="HEAD",Object.entries(t).forEach(([l,h])=>{o.searchParams.append(l,`${h}`)})):(s="POST",a=t);const u=Object.assign({},this.headers);return n&&(u.Prefer=`count=${n}`),new Fe({method:s,url:o,headers:u,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var Nt,Jr;function $s(){if(Jr)return Nt;Jr=1;var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Nt=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}(),Nt}const Cs="websocket",Ds="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Is=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],js="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Ps=["Iaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Rs="1.0.34",Fs={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Us="https://github.com/theturtle32/WebSocket-Node",qs={node:">=4.0.0"},Ns={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Ls={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Bs={verbose:!1},Ms={test:"tape test/unit/*.js",gulp:"gulp"},zs="index",Hs={lib:"./lib"},Js="lib/browser.js",Gs="Apache-2.0",Ks={name:Cs,description:Ds,keywords:Is,author:js,contributors:Ps,version:Rs,repository:Fs,homepage:Us,engines:qs,dependencies:Ns,devDependencies:Ls,config:Bs,scripts:Ms,main:zs,directories:Hs,browser:Js,license:Gs};var Vs=Ks.version,xe;if(typeof globalThis=="object")xe=globalThis;else try{xe=$s()}catch{}finally{if(!xe&&typeof window<"u"&&(xe=window),!xe)throw new Error("Could not determine global this")}var rt=xe.WebSocket||xe.MozWebSocket,Ws=Vs;function ki(r,e){var t;return e?t=new rt(r,e):t=new rt(r),t}rt&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(ki,r,{get:function(){return rt[r]}})});var Ys={w3cwebsocket:rt?ki:null,version:Ws};const Xs="2.6.0",Qs={"X-Client-Info":`realtime-js/${Xs}`},Zs="1.0.0",Si=1e4,eo=1e3;var Xe;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Xe||(Xe={}));var V;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(V||(V={}));var ee;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(ee||(ee={}));var Yt;(function(r){r.websocket="websocket"})(Yt||(Yt={}));var ke;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ke||(ke={}));class Oi{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class to{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const n=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+n));o=o+n;const u=i.decode(e.slice(o,o+s));o=o+s;const l=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:u,payload:l}}}class Lt{constructor(e,t,i={},n=Si){this.channel=e,this.event=t,this.payload=i,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Gr;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Gr||(Gr={}));class Qe{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},n=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qe.syncState(this.state,n,s,o),this.pendingDiffs.forEach(u=>{this.state=Qe.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},n=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Qe.syncDiff(this.state,n,s,o),a())}),this.onJoin((n,s,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:s,newPresences:o})}),this.onLeave((n,s,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,n){const s=this.cloneDeep(e),o=this.transformState(t),a={},u={};return this.map(s,(l,h)=>{o[l]||(u[l]=h)}),this.map(o,(l,h)=>{const f=s[l];if(f){const d=h.map(v=>v.presence_ref),g=f.map(v=>v.presence_ref),_=h.filter(v=>g.indexOf(v.presence_ref)<0),b=f.filter(v=>d.indexOf(v.presence_ref)<0);_.length>0&&(a[l]=_),b.length>0&&(u[l]=b)}else a[l]=h}),this.syncDiff(s,{joins:a,leaves:u},i,n)}static syncDiff(e,t,i,n){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),n||(n=()=>{}),this.map(s,(a,u)=>{var l;const h=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(u),h.length>0){const f=e[a].map(g=>g.presence_ref),d=h.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...d)}i(a,h,u)}),this.map(o,(a,u)=>{let l=e[a];if(!l)return;const h=u.map(f=>f.presence_ref);l=l.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=l,n(a,l,u),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const n=e[i];return"metas"in n?t[i]=n.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var j;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(j||(j={}));const Kr=(r,e,t={})=>{var i;const n=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=ro(o,r,e,n),s),{})},ro=(r,e,t,i)=>{const n=e.find(a=>a.name===r),s=n?.type,o=t[r];return s&&!i.includes(s)?Ti(s,o):Xt(o)},Ti=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return oo(e,t)}switch(r){case j.bool:return io(e);case j.float4:case j.float8:case j.int2:case j.int4:case j.int8:case j.numeric:case j.oid:return no(e);case j.json:case j.jsonb:return so(e);case j.timestamp:return ao(e);case j.abstime:case j.date:case j.daterange:case j.int4range:case j.int8range:case j.money:case j.reltime:case j.text:case j.time:case j.timestamptz:case j.timetz:case j.tsrange:case j.tstzrange:return Xt(e);default:return Xt(e)}},Xt=r=>r,io=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},no=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},so=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},oo=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,i=r[t];if(r[0]==="{"&&i==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Ti(e,a))}return r},ao=r=>typeof r=="string"?r.replace(" ","T"):r;var Vr=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})},Wr;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Wr||(Wr={}));var Yr;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(Yr||(Yr={}));var Xr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Xr||(Xr={}));class wr{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=V.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Lt(this,ee.join,this.params,this.timeout),this.rejoinTimer=new Oi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=V.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=V.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=V.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=V.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ee.reply,{},(n,s)=>{this._trigger(this._replyEventName(s),n)}),this.presence=new Qe(this)}subscribe(e,t=this.timeout){var i,n;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const a={},u={broadcast:s,presence:o,postgres_changes:(n=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(l=>l.filter))!==null&&n!==void 0?n:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,d=(h=f?.length)!==null&&h!==void 0?h:0,g=[];for(let _=0;_<d;_++){const b=f[_],{filter:{event:v,schema:w,table:k,filter:R}}=b,A=l&&l[_];if(A&&A.event===v&&A.schema===w&&A.table===k&&A.filter===R)g.push(Object.assign(Object.assign({},b),{id:A.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return Vr(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return Vr(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,i){return this._on(e,t,i)}send(e,t={}){return new Promise(i=>{var n,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&i("rate limited"),e.type==="broadcast"&&!(!((o=(s=(n=this.params)===null||n===void 0?void 0:n.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.ack)&&i("ok"),a.receive("ok",()=>i("ok")),a.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=V.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ee.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const n=new Lt(this,ee.leave,{},e);n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Lt(this,e,t,i);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var n,s;const o=e.toLocaleLowerCase(),{close:a,error:u,leave:l,join:h}=ee;if(i&&[a,u,l,h].indexOf(o)>=0&&i!==this._joinRef())return;let d=this._onMessage(o,t,i);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var _,b,v;return((_=g.filter)===null||_===void 0?void 0:_.event)==="*"||((v=(b=g.filter)===null||b===void 0?void 0:b.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(d,i)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var _,b,v,w,k,R;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const A=g.id,N=(_=g.filter)===null||_===void 0?void 0:_.event;return A&&((b=t.ids)===null||b===void 0?void 0:b.includes(A))&&(N==="*"||N?.toLocaleLowerCase()===((v=t.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const A=(k=(w=g?.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return A==="*"||A===((R=t?.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof d=="object"&&"ids"in d){const _=d.data,{schema:b,table:v,commit_timestamp:w,type:k,errors:R}=_;d=Object.assign(Object.assign({},{schema:b,table:v,commit_timestamp:w,eventType:k,new:{},old:{},errors:R}),this._getPayloadRecords(_))}g.callback(d,i)})}_isClosed(){return this.state===V.closed}_isJoined(){return this.state===V.joined}_isJoining(){return this.state===V.joining}_isLeaving(){return this.state===V.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:i};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(n=>{var s;return!(((s=n.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&wr.isEqual(n.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ee.close,{},e)}_onError(e){this._on(ee.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=V.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Kr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Kr(e.columns,e.old_record)),t}}var co=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const uo=()=>{};class lo{constructor(e,t){var i;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Qs,this.params={},this.timeout=Si,this.transport=Ys.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=uo,this.conn=null,this.sendBuffer=[],this.serializer=new to,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${Yt.websocket}`,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.transport&&(this.transport=t.transport),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=(i=t?.params)===null||i===void 0?void 0:i.eventsPerSecond;n&&(this.eventsPerSecondLimitMs=Math.floor(1e3/n)),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Oi(()=>co(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return e.unsubscribe().then(t=>(this.channels.length===0&&this.disconnect(),t))}removeAllChannels(){return Promise.all(this.channels.map(e=>e.unsubscribe())).then(e=>(this.disconnect(),e))}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Xe.connecting:return ke.Connecting;case Xe.open:return ke.Open;case Xe.closing:return ke.Closing;default:return ke.Closed}}isConnected(){return this.connectionState()===ke.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const i=new wr(`realtime:${e}`,t,this);return this.channels.push(i),i}push(e){const{topic:t,event:i,payload:n,ref:s}=e;let o=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};if(this.log("push",`${t} ${i} (${s})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(i)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(ee.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Zs}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:n,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||n===s?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${n} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(n,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ee.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return`${e}${i}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(eo,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}class Ai extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function G(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class ho extends Ai{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class fo extends Ai{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var $i=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const Ci=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>$i(void 0,void 0,void 0,function*(){return yield(yield Ot(()=>Promise.resolve().then(()=>Tt),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},po=()=>$i(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ot(()=>Promise.resolve().then(()=>Tt),void 0)).Response:Response});var Je=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const Qr=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),_o=(r,e)=>Je(void 0,void 0,void 0,function*(){const t=yield po();r instanceof t?r.json().then(i=>{e(new ho(Qr(i),r.status||500))}):e(new fo(Qr(r),r))}),go=(r,e,t,i)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e?.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),t))};function At(r,e,t,i,n,s){return Je(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,go(e,i,n,s)).then(u=>{if(!u.ok)throw u;return i?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>_o(u,a))})})}function Qt(r,e,t,i){return Je(this,void 0,void 0,function*(){return At(r,"GET",e,t,i)})}function Se(r,e,t,i,n){return Je(this,void 0,void 0,function*(){return At(r,"POST",e,i,n,t)})}function mo(r,e,t,i,n){return Je(this,void 0,void 0,function*(){return At(r,"PUT",e,i,n,t)})}function Di(r,e,t,i,n){return Je(this,void 0,void 0,function*(){return At(r,"DELETE",e,i,n,t)})}var ie=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const vo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bo{constructor(e,t={},i,n){this.url=e,this.headers=t,this.bucketId=i,this.fetch=Ci(n)}uploadOrUpdate(e,t,i,n){return ie(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},yo),n),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl)):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const u=this._removeEmptyFolders(t),l=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${l}`,{method:e,body:s,headers:a});return h.ok?{data:{path:u},error:null}:{data:null,error:yield h.json()}}catch(s){if(G(s))return{data:null,error:s};throw s}})}upload(e,t,i){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}update(e,t,i){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t){return ie(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}copy(e,t){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Se(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,i){return ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield Se(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,i){return ie(this,void 0,void 0,function*(){try{const n=yield Se(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}download(e,t){return ie(this,void 0,void 0,function*(){const n=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Qt(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(G(a))return{data:null,error:a};throw a}})}getPublicUrl(e,t){const i=this._getFinalPath(e),n=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&n.push(s);const a=typeof t?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(t?.transform||{});u!==""&&n.push(u);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${l}`)}}}remove(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}list(e,t,i){return ie(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},vo),t),{prefix:e||""});return{data:yield Se(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},i),error:null}}catch(n){if(G(n))return{data:null,error:n};throw n}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const wo="2.3.0",Eo={"X-Client-Info":`storage-js/${wo}`};var Re=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};class xo{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},Eo),t),this.fetch=Ci(i)}listBuckets(){return Re(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(G(e))return{data:null,error:e};throw e}})}getBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Re(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return Re(this,void 0,void 0,function*(){try{return{data:yield mo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(i){if(G(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Re(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(G(t))return{data:null,error:t};throw t}})}}class ko extends xo{constructor(e,t={},i){super(e,t,i)}from(e){return new bo(this.url,this.headers,e,this.fetch)}}const So="2.8.0",Oo={"X-Client-Info":`supabase-js/${So}`};var To=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const Ao=r=>{let e;return r?e=r:typeof fetch>"u"?e=br:e=fetch,(...t)=>e(...t)},$o=()=>typeof Headers>"u"?ze.Headers:Headers,Co=(r,e,t)=>{const i=Ao(t),n=$o();return(s,o)=>To(void 0,void 0,void 0,function*(){var a;const u=(a=yield e())!==null&&a!==void 0?a:r;let l=new n(o?.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),i(s,Object.assign(Object.assign({},o),{headers:l}))})};function Do(r){return r.replace(/\/$/,"")}function Io(r,e){const{db:t,auth:i,realtime:n,global:s}=r,{db:o,auth:a,realtime:u,global:l}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},u),n),global:Object.assign(Object.assign({},l),s)}}var st=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};function jo(r){return Math.round(Date.now()/1e3)+r}function Po(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const Ee=()=>typeof document<"u",be={tested:!1,writable:!1},Bt=()=>{if(!Ee())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(be.tested)return be.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),be.tested=!0,be.writable=!0}catch{be.tested=!0,be.writable=!1}return be.writable};function Y(r,e){var t;e||(e=((t=window?.location)===null||t===void 0?void 0:t.href)||""),r=r.replace(/[\[\]]/g,"\\$&");const i=new RegExp("[?&#]"+r+"(=([^&#]*)|&|#|$)"),n=i.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const Ii=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>st(void 0,void 0,void 0,function*(){return yield(yield Ot(()=>Promise.resolve().then(()=>Tt),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Ro=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Fo=(r,e,t)=>st(void 0,void 0,void 0,function*(){yield r.setItem(e,JSON.stringify(t))}),Zr=(r,e)=>st(void 0,void 0,void 0,function*(){const t=yield r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Uo=(r,e)=>st(void 0,void 0,void 0,function*(){yield r.removeItem(e)});function qo(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",i,n,s,o,a,u,l,h=0;for(r=r.replace("-","+").replace("_","/");h<r.length;)o=e.indexOf(r.charAt(h++)),a=e.indexOf(r.charAt(h++)),u=e.indexOf(r.charAt(h++)),l=e.indexOf(r.charAt(h++)),i=o<<2|a>>4,n=(a&15)<<4|u>>2,s=(u&3)<<6|l,t=t+String.fromCharCode(i),u!=64&&n!=0&&(t=t+String.fromCharCode(n)),l!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class $t{constructor(){this.promise=new $t.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}$t.promiseConstructor=Promise;function ei(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=t[1];return JSON.parse(qo(i))}function No(r){return new Promise(e=>{setTimeout(()=>e(null),r)})}function Lo(r,e){return new Promise((i,n)=>{st(this,void 0,void 0,function*(){for(let s=0;s<1/0;s++)try{const o=yield r(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){n(o);return}}})})}class Er extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function T(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Bo extends Er{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Mo(r){return T(r)&&r.name==="AuthApiError"}class ji extends Er{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ct extends Er{constructor(e,t,i){super(e),this.name=t,this.status=i}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Ve extends Ct{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Mt extends Ct{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class ae extends Ct{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zt extends Ct{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var xr=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})},zo=globalThis&&globalThis.__rest||function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t};const ut=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Ho=(r,e)=>xr(void 0,void 0,void 0,function*(){const t=[502,503,504];Ro(r)?t.includes(r.status)?e(new Zt(ut(r),r.status)):r.json().then(i=>{e(new Bo(ut(i),r.status||500))}).catch(i=>{e(new ji(ut(i),i))}):e(new Zt(ut(r),0))}),Jo=(r,e,t,i)=>{const n={method:r,headers:e?.headers||{}};return r==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),n.body=JSON.stringify(i),Object.assign(Object.assign({},n),t))};function D(r,e,t,i){var n;return xr(this,void 0,void 0,function*(){const s=Object.assign({},i?.headers);i?.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(n=i?.query)!==null&&n!==void 0?n:{};i?.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=yield Go(r,e,t+a,{headers:s,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(u):{data:Object.assign({},u),error:null}})}function Go(r,e,t,i,n,s){return xr(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Jo(e,i,n,s)).then(u=>{if(!u.ok)throw u;return i?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Ho(u,a))})})}function we(r){var e;let t=null;Yo(r)&&(t=Object.assign({},r),t.expires_at=jo(r.expires_in));const i=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:i},error:null}}function Oe(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Ko(r){return{data:r,error:null}}function Vo(r){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:n,verification_type:s}=r,o=zo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:i,redirect_to:n,verification_type:s},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function Wo(r){return r}function Yo(r){return r.access_token&&r.refresh_token&&r.expires_in}var ne=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})},Xo=globalThis&&globalThis.__rest||function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t};class Qo{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=Ii(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return ne(this,void 0,void 0,function*(){try{return yield D(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return ne(this,void 0,void 0,function*(){try{return yield D(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Oe})}catch(i){if(T(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return ne(this,void 0,void 0,function*(){try{const{options:t}=e,i=Xo(e,["options"]),n=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(n.new_email=i?.newEmail,delete n.newEmail),yield D(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Vo,redirectTo:t?.redirectTo})}catch(t){if(T(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return ne(this,void 0,void 0,function*(){try{return yield D(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Oe})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}})}listUsers(e){var t,i,n,s,o,a,u;return ne(this,void 0,void 0,function*(){try{const l={nextPage:null,lastPage:0,total:0},h=yield D(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(n=e?.perPage)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:""},xform:Wo});if(h.error)throw h.error;const f=yield h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(u=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&u!==void 0?u:[];return g.length>0&&(g.forEach(_=>{const b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(_.split(";")[1].split("=")[1]);l[`${v}Page`]=b}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},f),l),error:null}}catch(l){if(T(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return ne(this,void 0,void 0,function*(){try{return yield D(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Oe})}catch(t){if(T(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return ne(this,void 0,void 0,function*(){try{return yield D(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Oe})}catch(i){if(T(i))return{data:{user:null},error:i};throw i}})}deleteUser(e,t=!1){return ne(this,void 0,void 0,function*(){try{return yield D(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Oe})}catch(i){if(T(i))return{data:{user:null},error:i};throw i}})}_listFactors(e){return ne(this,void 0,void 0,function*(){try{const{data:t,error:i}=yield D(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:t,error:i}}catch(t){if(T(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return ne(this,void 0,void 0,function*(){try{return{data:yield D(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(T(t))return{data:null,error:t};throw t}})}}const Zo="2.12.1",ea="http://localhost:9999",ta="supabase.auth.token",ra={"X-Client-Info":`gotrue-js/${Zo}`},ia=10,na={getItem:r=>Bt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Bt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Bt()&&globalThis.localStorage.removeItem(r)}};function sa(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var O=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};sa();const oa={url:ea,storageKey:ta,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ra},zt=10*1e3,aa=3;class ca{constructor(e){this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const t=Object.assign(Object.assign({},oa),e);this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||na,this.admin=new Qo({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=Ii(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},Ee()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey&&(this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey),this.broadcastChannel.addEventListener("message",i=>{this._notifyAllSubscribers(i.data.event,i.data.session,!1)})),this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return O(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:i,redirectType:n}=e;return yield this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN",i),n==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY",i),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return T(e)?{error:e}:{error:new ji("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}})}signUp(e){var t,i;return O(this,void 0,void 0,function*(){try{yield this._removeSession();let n;if("email"in e){const{email:l,password:h,options:f}=e;n=yield D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:l,password:h,data:(t=f?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:we})}else if("phone"in e){const{phone:l,password:h,options:f}=e;n=yield D(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:we})}else throw new Mt("You must provide either an email or phone number and a password");const{data:s,error:o}=n;if(o||!s)return{data:{user:null,session:null},error:o};const a=s.session,u=s.user;return s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(n){if(T(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithPassword(e){var t,i;return O(this,void 0,void 0,function*(){try{yield this._removeSession();let n;if("email"in e){const{email:a,password:u,options:l}=e;n=yield D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,data:(t=l?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:we})}else if("phone"in e){const{phone:a,password:u,options:l}=e;n=yield D(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,data:(i=l?.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:we})}else throw new Mt("You must provide either an email or phone number and a password");const{data:s,error:o}=n;return o||!s?{data:{user:null,session:null},error:o}:(s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:o})}catch(n){if(T(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOAuth(e){var t,i,n,s;return O(this,void 0,void 0,function*(){return yield this._removeSession(),this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})})}signInWithIdToken(e){return O(this,void 0,void 0,function*(){yield this._removeSession();try{const{options:t,provider:i,token:n,nonce:s}=e,o=yield D(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:n,nonce:s,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:we}),{data:a,error:u}=o;return u||!a?{data:{user:null,session:null},error:u}:(a.session&&(yield this._saveSession(a.session),this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:u})}catch(t){if(T(t))return{data:{user:null,session:null},error:t};throw t}})}signInWithOtp(e){var t,i,n,s;return O(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:o,options:a}=e,{error:u}=yield D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=a?.data)!==null&&t!==void 0?t:{},create_user:(i=a?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:o,options:a}=e,{error:u}=yield D(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=a?.data)!==null&&n!==void 0?n:{},create_user:(s=a?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null},error:u}}throw new Mt("You must provide either an email or phone number.")}catch(o){if(T(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(e){var t,i;return O(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:n,error:s}=yield D(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,xform:we});if(s)throw s;if(!n)throw"An error occurred on token verification.";const o=n.session,a=n.user;return o?.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(n){if(T(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithSSO(e){var t,i,n;return O(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield D(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((n=e?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Ko})}catch(s){if(T(s))return{data:null,error:s};throw s}})}getSession(){return O(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const s=yield Zr(this.storage,this.storageKey);s!==null&&(this._isValidSession(s)?e=s:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:i,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:i},error:null}})}getUser(e){var t,i;return O(this,void 0,void 0,function*(){try{if(!e){const{data:n,error:s}=yield this.getSession();if(s)throw s;e=(i=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&i!==void 0?i:void 0}return yield D(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Oe})}catch(n){if(T(n))return{data:{user:null},error:n};throw n}})}updateUser(e,t={}){return O(this,void 0,void 0,function*(){try{const{data:i,error:n}=yield this.getSession();if(n)throw n;if(!i.session)throw new Ve;const s=i.session,{data:o,error:a}=yield D(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:e,jwt:s.access_token,xform:Oe});if(a)throw a;return s.user=o.user,yield this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(i){if(T(i))return{data:{user:null},error:i};throw i}})}_decodeJWT(e){return ei(e)}setSession(e){return O(this,void 0,void 0,function*(){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let i=t,n=!0,s=null;const o=ei(e.access_token);if(o.exp&&(i=o.exp,n=i<=t),n){const{session:a,error:u}=yield this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:u}=yield this.getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-t,expires_at:i},yield this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(T(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return O(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:o}=yield this.getSession();if(o)throw o;e=(t=s.session)!==null&&t!==void 0?t:void 0}if(!e?.refresh_token)throw new Ve;const{session:i,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}}catch(i){if(T(i))return{data:{user:null,session:null},error:i};throw i}})}_getSessionFromUrl(){return O(this,void 0,void 0,function*(){try{if(!Ee())throw new ae("No browser detected.");if(!this._isImplicitGrantFlow())throw new ae("Not a valid implicit grant flow url.");const e=Y("error_description");if(e){const b=Y("error_code");if(!b)throw new ae("No error_code detected.");const v=Y("error");throw v?new ae(e,{error:v,code:b}):new ae("No error detected.")}const t=Y("provider_token"),i=Y("provider_refresh_token"),n=Y("access_token");if(!n)throw new ae("No access_token detected.");const s=Y("expires_in");if(!s)throw new ae("No expires_in detected.");const o=Y("refresh_token");if(!o)throw new ae("No refresh_token detected.");const a=Y("token_type");if(!a)throw new ae("No token_type detected.");const l=Math.round(Date.now()/1e3)+parseInt(s),{data:h,error:f}=yield this.getUser(n);if(f)throw f;const d=h.user,g={provider_token:t,provider_refresh_token:i,access_token:n,expires_in:parseInt(s),expires_at:l,refresh_token:o,token_type:a,user:d},_=Y("type");return window.location.hash="",{data:{session:g,redirectType:_},error:null}}catch(e){if(T(e))return{data:{session:null,redirectType:null},error:e};throw e}})}_isImplicitGrantFlow(){return Ee()&&(Boolean(Y("access_token"))||Boolean(Y("error_description")))}signOut(){var e;return O(this,void 0,void 0,function*(){const{data:t,error:i}=yield this.getSession();if(i)return{error:i};const n=(e=t.session)===null||e===void 0?void 0:e.access_token;if(n){const{error:s}=yield this.admin.signOut(n);if(s&&!(Mo(s)&&(s.status===404||s.status===401)))return{error:s}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=Po(),i={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,i),{data:{subscription:i}}}resetPasswordForEmail(e,t={}){return O(this,void 0,void 0,function*(){try{return yield D(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(T(i))return{data:null,error:i};throw i}})}_refreshAccessToken(e){return O(this,void 0,void 0,function*(){try{const t=Date.now();return yield Lo(i=>O(this,void 0,void 0,function*(){return yield No(i*200),yield D(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:we})}),(i,n,s)=>s&&s.error&&s.error instanceof Zt&&Date.now()+(i+1)*200-t<zt)}catch(t){if(T(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t={}){const i=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return Ee()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}_recoverAndRefresh(){var e;return O(this,void 0,void 0,function*(){try{const t=yield Zr(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const i=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<i+ia)if(this.autoRefreshToken&&t.refresh_token){const{error:n}=yield this._callRefreshToken(t.refresh_token);n&&(console.log(n.message),yield this._removeSession())}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,i;return O(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new $t,!e)throw new Ve;const{data:n,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!n.session)throw new Ve;yield this._saveSession(n.session),this._notifyAllSubscribers("TOKEN_REFRESHED",n.session);const o={session:n.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(n){if(T(n)){const s={session:null,error:n};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(n),n}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t,i=!0){this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach(n=>n.callback(e,t))}_saveSession(e){return O(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Fo(this.storage,this.storageKey,e)}_removeSession(){return O(this,void 0,void 0,function*(){this.persistSession?yield Uo(this.storage,this.storageKey):this.inMemorySession=null})}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ee()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return O(this,void 0,void 0,function*(){yield this._stopAutoRefresh();const e=setInterval(()=>this._autoRefreshTokenTick(),zt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"&&e.unref(),yield this._autoRefreshTokenTick()})}_stopAutoRefresh(){return O(this,void 0,void 0,function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return O(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return O(this,void 0,void 0,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return O(this,void 0,void 0,function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((t.expires_at*1e3-e)/zt)<aa&&(yield this._callRefreshToken(t.refresh_token))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}})}_handleVisibilityChange(){return O(this,void 0,void 0,function*(){if(!Ee()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>O(this,void 0,void 0,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return O(this,void 0,void 0,function*(){document.visibilityState==="visible"?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t){const i=[`provider=${encodeURIComponent(e)}`];if(t?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t?.scopes&&i.push(`scopes=${encodeURIComponent(t.scopes)}`),t?.queryParams){const n=new URLSearchParams(t.queryParams);i.push(n.toString())}return`${this.url}/authorize?${i.join("&")}`}_unenroll(e){var t;return O(this,void 0,void 0,function*(){try{const{data:i,error:n}=yield this.getSession();return n?{data:null,error:n}:yield D(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=i?.session)===null||t===void 0?void 0:t.access_token})}catch(i){if(T(i))return{data:null,error:i};throw i}})}_enroll(e){var t,i;return O(this,void 0,void 0,function*(){try{const{data:n,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:o,error:a}=yield D(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=n?.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((i=o?.totp)===null||i===void 0)&&i.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})}catch(n){if(T(n))return{data:null,error:n};throw n}})}_verify(e){var t;return O(this,void 0,void 0,function*(){try{const{data:i,error:n}=yield this.getSession();if(n)return{data:null,error:n};const{data:s,error:o}=yield D(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=i?.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})}catch(i){if(T(i))return{data:null,error:i};throw i}})}_challenge(e){var t;return O(this,void 0,void 0,function*(){try{const{data:i,error:n}=yield this.getSession();return n?{data:null,error:n}:yield D(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=i?.session)===null||t===void 0?void 0:t.access_token})}catch(i){if(T(i))return{data:null,error:i};throw i}})}_challengeAndVerify(e){return O(this,void 0,void 0,function*(){const{data:t,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return O(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const i=e?.factors||[],n=i.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:i,totp:n},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return O(this,void 0,void 0,function*(){const{data:{session:i},error:n}=yield this.getSession();if(n)return{data:null,error:n};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(i.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=i.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const l=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:l},error:null}})}}class ua extends ca{constructor(e){super(e)}}var la=globalThis&&globalThis.__awaiter||function(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(i.next(h))}catch(f){o(f)}}function u(h){try{l(i.throw(h))}catch(f){o(f)}}function l(h){h.done?s(h.value):n(h.value).then(a,u)}l((i=i.apply(r,e||[])).next())})};const ha={headers:Oo},fa={schema:"public"},da={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},pa={};class _a{constructor(e,t,i){var n,s,o,a,u,l,h,f;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=Do(e);if(this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,d.match(/(supabase\.co)|(supabase\.in)/)){const w=d.split(".");this.functionsUrl=`${w[0]}.functions.${w[1]}.${w[2]}`}else this.functionsUrl=`${d}/functions/v1`;const _=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,b={db:fa,realtime:pa,auth:Object.assign(Object.assign({},da),{storageKey:_}),global:ha},v=Io(i??{},b);this.storageKey=(s=(n=v.auth)===null||n===void 0?void 0:n.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=v.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,(l=v.global)===null||l===void 0?void 0:l.fetch),this.fetch=Co(t,this._getAccessToken.bind(this),(h=v.global)===null||h===void 0?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},v.realtime)),this.rest=new As(`${d}/rest/v1`,{headers:this.headers,schema:(f=v.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ws(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ko(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},i){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return la(this,void 0,void 0,function*(){const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:n,storageKey:s},o,a){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ua({url:this.authUrl,headers:Object.assign(Object.assign({},u),o),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:n,fetch:a})}_initRealtimeClient(e){return new lo(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,i?.access_token,"CLIENT")})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ga=(r,e,t)=>new _a(r,e,t),Pi="",ma="",va=Boolean(Pi);class Ze{static thisInstance;localClient;constructor(e){this.localClient=va?ga(ma,Pi,e):void 0}static defaultInstance(){return Ze.thisInstance??=new Ze,Ze.thisInstance}sendFormContact(e){if(localStorage.getItem("alreadySended")!=="true")return this.localClient?.from("interested").insert(e).then(({error:t})=>{if(!t)return localStorage.setItem("alredySended","true"),e},t=>t)}}const ya=Ze.defaultInstance;function ba(r){if(r instanceof K)return r.inner.map(({path:e})=>e)}async function wa(r){try{const e=fs.validateSync(r,{abortEarly:!1});await ya().sendFormContact(e)}catch(e){return ba(e)}}function Ea(r){r instanceof HTMLElement&&r.click()}Te('[data-form="contact"]')?.addEventListener("submit",async function(r){if(r.preventDefault(),!(this instanceof HTMLFormElement))return;const e=new FormData(this),t={};e.forEach((n,s)=>{t[s]=n}),console.log(t);const i=await wa(t);if(console.log(i),i?.length)return i.forEach(n=>{const s=Te(`[name="${n}"`,this);s instanceof HTMLInputElement&&s.insertAdjacentHTML("afterend","error")});Ea(Te('label[for="subscription"]'))});var er={},xa={get exports(){return er},set exports(r){er=r}};(function(r,e){function t(){var o=document.querySelector("[data-toggle-theme]");(function(a=localStorage.getItem("theme")){localStorage.getItem("theme")&&(document.documentElement.setAttribute("data-theme",a),o&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(u=>{u.classList.add(o.getAttribute("data-act-class"))}))})(),o&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(a=>{a.addEventListener("click",function(){var u=a.getAttribute("data-toggle-theme");if(u){var l=u.split(",");document.documentElement.getAttribute("data-theme")==l[0]?l.length==1?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem("theme")):(document.documentElement.setAttribute("data-theme",l[1]),localStorage.setItem("theme",l[1])):(document.documentElement.setAttribute("data-theme",l[0]),localStorage.setItem("theme",l[0]))}[...document.querySelectorAll("[data-toggle-theme]")].forEach(h=>{h.classList.toggle(this.getAttribute("data-act-class"))})})})}function i(){(function(o=localStorage.getItem("theme")){if(o!=null&&o!="")if(localStorage.getItem("theme")&&localStorage.getItem("theme")!=""){document.documentElement.setAttribute("data-theme",o);var a=document.querySelector("[data-set-theme='"+o.toString()+"']");a&&([...document.querySelectorAll("[data-set-theme]")].forEach(u=>{u.classList.remove(u.getAttribute("data-act-class"))}),a.getAttribute("data-act-class")&&a.classList.add(a.getAttribute("data-act-class")))}else{var a=document.querySelector("[data-set-theme='']");a.getAttribute("data-act-class")&&a.classList.add(a.getAttribute("data-act-class"))}})(),[...document.querySelectorAll("[data-set-theme]")].forEach(o=>{o.addEventListener("click",function(){document.documentElement.setAttribute("data-theme",this.getAttribute("data-set-theme")),localStorage.setItem("theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("[data-set-theme]")].forEach(a=>{a.classList.remove(a.getAttribute("data-act-class"))}),o.getAttribute("data-act-class")&&o.classList.add(o.getAttribute("data-act-class"))})})}function n(){(function(o=localStorage.getItem("theme")){if(localStorage.getItem("theme")){document.documentElement.setAttribute("data-theme",o);var a=document.querySelector("select[data-choose-theme] [value='"+o.toString()+"']");a&&[...document.querySelectorAll("select[data-choose-theme] [value='"+o.toString()+"']")].forEach(u=>{u.selected=!0})}})(),document.querySelector("select[data-choose-theme]")&&[...document.querySelectorAll("select[data-choose-theme]")].forEach(o=>{o.addEventListener("change",function(){document.documentElement.setAttribute("data-theme",this.value),localStorage.setItem("theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("select[data-choose-theme] [value='"+localStorage.getItem("theme")+"']")].forEach(a=>{a.selected=!0})})})}function s(o=!0){o===!0?document.addEventListener("DOMContentLoaded",function(a){t(),n(),i()}):(t(),n(),i())}r.exports={themeChange:s}})(xa);er.themeChange();Te('label.swap > button[data-button="change-theme"]')?.addEventListener("click",function(r){r.preventDefault(),this.parentElement instanceof HTMLElement&&di(this.parentElement)});
