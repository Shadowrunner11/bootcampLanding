{"version":3,"file":"hoisted.d2717ebe.js","sources":["../../node_modules/mixpanel-browser/dist/mixpanel.cjs.js","../../src/ts/config/index.ts","../../src/ts/config/mixpanel.ts","../../src/ts/services/Mixpanel.ts","../../src/ts/main.ts","../../node_modules/property-expr/index.js","../../node_modules/tiny-case/index.js","../../node_modules/toposort/index.js","../../node_modules/yup/index.esm.js","../../src/components/Contact/schema.validaiton.ts","../../node_modules/@supabase/functions-js/dist/module/helper.js","../../node_modules/@supabase/functions-js/dist/module/types.js","../../node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","../../node_modules/cross-fetch/dist/browser-ponyfill.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestTransformBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestFilterBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestQueryBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/version.js","../../node_modules/@supabase/postgrest-js/dist/module/constants.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","../../node_modules/es5-ext/global.js","../../node_modules/websocket/lib/version.js","../../node_modules/websocket/lib/browser.js","../../node_modules/@supabase/realtime-js/dist/module/lib/version.js","../../node_modules/@supabase/realtime-js/dist/module/lib/constants.js","../../node_modules/@supabase/realtime-js/dist/module/lib/timer.js","../../node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","../../node_modules/@supabase/realtime-js/dist/module/lib/push.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","../../node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","../../node_modules/@supabase/storage-js/dist/module/lib/errors.js","../../node_modules/@supabase/storage-js/dist/module/lib/helpers.js","../../node_modules/@supabase/storage-js/dist/module/lib/fetch.js","../../node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","../../node_modules/@supabase/storage-js/dist/module/lib/version.js","../../node_modules/@supabase/storage-js/dist/module/lib/constants.js","../../node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","../../node_modules/@supabase/storage-js/dist/module/StorageClient.js","../../node_modules/@supabase/supabase-js/dist/module/lib/version.js","../../node_modules/@supabase/supabase-js/dist/module/lib/constants.js","../../node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","../../node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/errors.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","../../node_modules/@supabase/gotrue-js/dist/module/GoTrueAdminApi.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/version.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/local-storage.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","../../node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","../../node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","../../node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","../../node_modules/@supabase/supabase-js/dist/module/index.js","../../src/ts/config/supabase.ts","../../src/ts/services/Supabse.ts","../../src/components/Contact/main.ts","../../src/components/Contact/Contact.astro?astro&type=script&index=0&lang.ts","../../src/components/DeveloperAlert/DeveloperAlert.astro?astro&type=script&index=0&lang.ts","../../node_modules/tiny-slider/dist/tiny-slider.js","../../node_modules/just-throttle/index.mjs","../../src/layouts/main.ts","../../src/layouts/MaybeCarousel.astro?astro&type=script&index=0&lang.ts","../../node_modules/hotkeys-js/dist/hotkeys.esm.js","../../src/ts/controllers/Contact.ts","../../src/ts/config/whatsapp.ts","../../src/ts/controllers/Whatsapp.ts","../../src/ts/reactive/index.ts","../../src/components/DeveloperSettings/properties.ts","../../src/components/DeveloperSettings/types/index.ts","../../src/components/DeveloperSettings/DeveloperSetting.astro?astro&type=script&index=0&lang.ts"],"sourcesContent":["'use strict';\n\nvar Config = {\n    DEBUG: false,\n    LIB_VERSION: '2.45.0'\n};\n\n// since es6 imports are static and we run unit tests from the console, window won't be defined when importing this file\nvar window$1;\nif (typeof(window) === 'undefined') {\n    var loc = {\n        hostname: ''\n    };\n    window$1 = {\n        navigator: { userAgent: '' },\n        document: {\n            location: loc,\n            referrer: ''\n        },\n        screen: { width: 0, height: 0 },\n        location: loc\n    };\n} else {\n    window$1 = window;\n}\n\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\nvar ArrayProto = Array.prototype;\nvar FuncProto = Function.prototype;\nvar ObjProto = Object.prototype;\nvar slice = ArrayProto.slice;\nvar toString = ObjProto.toString;\nvar hasOwnProperty = ObjProto.hasOwnProperty;\nvar windowConsole = window$1.console;\nvar navigator = window$1.navigator;\nvar document$1 = window$1.document;\nvar windowOpera = window$1.opera;\nvar screen = window$1.screen;\nvar userAgent = navigator.userAgent;\nvar nativeBind = FuncProto.bind;\nvar nativeForEach = ArrayProto.forEach;\nvar nativeIndexOf = ArrayProto.indexOf;\nvar nativeMap = ArrayProto.map;\nvar nativeIsArray = Array.isArray;\nvar breaker = {};\nvar _ = {\n    trim: function(str) {\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n};\n\n// Console override\nvar console = {\n    /** @type {function(...*)} */\n    log: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            try {\n                windowConsole.log.apply(windowConsole, arguments);\n            } catch (err) {\n                _.each(arguments, function(arg) {\n                    windowConsole.log(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    warn: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel warning:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.warn.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.warn(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    error: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel error:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.error.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.error(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    critical: function() {\n        if (!_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel error:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.error.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.error(arg);\n                });\n            }\n        }\n    }\n};\n\nvar log_func_with_prefix = function(func, prefix) {\n    return function() {\n        arguments[0] = '[' + prefix + '] ' + arguments[0];\n        return func.apply(console, arguments);\n    };\n};\nvar console_with_prefix = function(prefix) {\n    return {\n        log: log_func_with_prefix(console.log, prefix),\n        error: log_func_with_prefix(console.error, prefix),\n        critical: log_func_with_prefix(console.critical, prefix)\n    };\n};\n\n\n// UNDERSCORE\n// Embed part of the Underscore Library\n_.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) {\n        return nativeBind.apply(func, slice.call(arguments, 1));\n    }\n    if (!_.isFunction(func)) {\n        throw new TypeError();\n    }\n    args = slice.call(arguments, 2);\n    bound = function() {\n        if (!(this instanceof bound)) {\n            return func.apply(context, args.concat(slice.call(arguments)));\n        }\n        var ctor = {};\n        ctor.prototype = func.prototype;\n        var self = new ctor();\n        ctor.prototype = null;\n        var result = func.apply(self, args.concat(slice.call(arguments)));\n        if (Object(result) === result) {\n            return result;\n        }\n        return self;\n    };\n    return bound;\n};\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} context\n */\n_.each = function(obj, iterator, context) {\n    if (obj === null || obj === undefined) {\n        return;\n    }\n    if (nativeForEach && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n                return;\n            }\n        }\n    } else {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                if (iterator.call(context, obj[key], key, obj) === breaker) {\n                    return;\n                }\n            }\n        }\n    }\n};\n\n_.extend = function(obj) {\n    _.each(slice.call(arguments, 1), function(source) {\n        for (var prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop];\n            }\n        }\n    });\n    return obj;\n};\n\n_.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n};\n\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// var bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\n_.isFunction = function(f) {\n    try {\n        return /^\\s*\\bfunction\\b/.test(f);\n    } catch (x) {\n        return false;\n    }\n};\n\n_.isArguments = function(obj) {\n    return !!(obj && hasOwnProperty.call(obj, 'callee'));\n};\n\n_.toArray = function(iterable) {\n    if (!iterable) {\n        return [];\n    }\n    if (iterable.toArray) {\n        return iterable.toArray();\n    }\n    if (_.isArray(iterable)) {\n        return slice.call(iterable);\n    }\n    if (_.isArguments(iterable)) {\n        return slice.call(iterable);\n    }\n    return _.values(iterable);\n};\n\n_.map = function(arr, callback, context) {\n    if (nativeMap && arr.map === nativeMap) {\n        return arr.map(callback, context);\n    } else {\n        var results = [];\n        _.each(arr, function(item) {\n            results.push(callback.call(context, item));\n        });\n        return results;\n    }\n};\n\n_.keys = function(obj) {\n    var results = [];\n    if (obj === null) {\n        return results;\n    }\n    _.each(obj, function(value, key) {\n        results[results.length] = key;\n    });\n    return results;\n};\n\n_.values = function(obj) {\n    var results = [];\n    if (obj === null) {\n        return results;\n    }\n    _.each(obj, function(value) {\n        results[results.length] = value;\n    });\n    return results;\n};\n\n_.include = function(obj, target) {\n    var found = false;\n    if (obj === null) {\n        return found;\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1;\n    }\n    _.each(obj, function(value) {\n        if (found || (found = (value === target))) {\n            return breaker;\n        }\n    });\n    return found;\n};\n\n_.includes = function(str, needle) {\n    return str.indexOf(needle) !== -1;\n};\n\n// Underscore Addons\n_.inherit = function(subclass, superclass) {\n    subclass.prototype = new superclass();\n    subclass.prototype.constructor = subclass;\n    subclass.superclass = superclass.prototype;\n    return subclass;\n};\n\n_.isObject = function(obj) {\n    return (obj === Object(obj) && !_.isArray(obj));\n};\n\n_.isEmptyObject = function(obj) {\n    if (_.isObject(obj)) {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n};\n\n_.isUndefined = function(obj) {\n    return obj === void 0;\n};\n\n_.isString = function(obj) {\n    return toString.call(obj) == '[object String]';\n};\n\n_.isDate = function(obj) {\n    return toString.call(obj) == '[object Date]';\n};\n\n_.isNumber = function(obj) {\n    return toString.call(obj) == '[object Number]';\n};\n\n_.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n};\n\n_.encodeDates = function(obj) {\n    _.each(obj, function(v, k) {\n        if (_.isDate(v)) {\n            obj[k] = _.formatDate(v);\n        } else if (_.isObject(v)) {\n            obj[k] = _.encodeDates(v); // recurse\n        }\n    });\n    return obj;\n};\n\n_.timestamp = function() {\n    Date.now = Date.now || function() {\n        return +new Date;\n    };\n    return Date.now();\n};\n\n_.formatDate = function(d) {\n    // YYYY-MM-DDTHH:MM:SS in UTC\n    function pad(n) {\n        return n < 10 ? '0' + n : n;\n    }\n    return d.getUTCFullYear() + '-' +\n        pad(d.getUTCMonth() + 1) + '-' +\n        pad(d.getUTCDate()) + 'T' +\n        pad(d.getUTCHours()) + ':' +\n        pad(d.getUTCMinutes()) + ':' +\n        pad(d.getUTCSeconds());\n};\n\n_.strip_empty_properties = function(p) {\n    var ret = {};\n    _.each(p, function(v, k) {\n        if (_.isString(v) && v.length > 0) {\n            ret[k] = v;\n        }\n    });\n    return ret;\n};\n\n/*\n * this function returns a copy of object after truncating it.  If\n * passed an Array or Object it will iterate through obj and\n * truncate all the values recursively.\n */\n_.truncate = function(obj, length) {\n    var ret;\n\n    if (typeof(obj) === 'string') {\n        ret = obj.slice(0, length);\n    } else if (_.isArray(obj)) {\n        ret = [];\n        _.each(obj, function(val) {\n            ret.push(_.truncate(val, length));\n        });\n    } else if (_.isObject(obj)) {\n        ret = {};\n        _.each(obj, function(val, key) {\n            ret[key] = _.truncate(val, length);\n        });\n    } else {\n        ret = obj;\n    }\n\n    return ret;\n};\n\n_.JSONEncode = (function() {\n    return function(mixed_val) {\n        var value = mixed_val;\n        var quote = function(string) {\n            var escapable = /[\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g; // eslint-disable-line no-control-regex\n            var meta = { // table of character substitutions\n                '\\b': '\\\\b',\n                '\\t': '\\\\t',\n                '\\n': '\\\\n',\n                '\\f': '\\\\f',\n                '\\r': '\\\\r',\n                '\"': '\\\\\"',\n                '\\\\': '\\\\\\\\'\n            };\n\n            escapable.lastIndex = 0;\n            return escapable.test(string) ?\n                '\"' + string.replace(escapable, function(a) {\n                    var c = meta[a];\n                    return typeof c === 'string' ? c :\n                        '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                }) + '\"' :\n                '\"' + string + '\"';\n        };\n\n        var str = function(key, holder) {\n            var gap = '';\n            var indent = '    ';\n            var i = 0; // The loop counter.\n            var k = ''; // The member key.\n            var v = ''; // The member value.\n            var length = 0;\n            var mind = gap;\n            var partial = [];\n            var value = holder[key];\n\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value && typeof value === 'object' &&\n                typeof value.toJSON === 'function') {\n                value = value.toJSON(key);\n            }\n\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n\n                    return String(value);\n\n                case 'object':\n                    // If the type is 'object', we might be dealing with an object or an array or\n                    // null.\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n\n                    // Is the value an array?\n                    if (toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' :\n                            gap ? '[\\n' + gap +\n                            partial.join(',\\n' + gap) + '\\n' +\n                            mind + ']' :\n                                '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n\n                    // Iterate through all of the keys in the object.\n                    for (k in value) {\n                        if (hasOwnProperty.call(value, k)) {\n                            v = str(k, value);\n                            if (v) {\n                                partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                            }\n                        }\n                    }\n\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' :\n                        gap ? '{' + partial.join(',') + '' +\n                        mind + '}' : '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        };\n\n        // Make a fake root object containing our value under the key of ''.\n        // Return the result of stringifying the value.\n        return str('', {\n            '': value\n        });\n    };\n})();\n\n/**\n * From https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n * Slightly modified to throw a real Error rather than a POJO\n */\n_.JSONDecode = (function() {\n    var at, // The index of the current character\n        ch, // The current character\n        escapee = {\n            '\"': '\"',\n            '\\\\': '\\\\',\n            '/': '/',\n            'b': '\\b',\n            'f': '\\f',\n            'n': '\\n',\n            'r': '\\r',\n            't': '\\t'\n        },\n        text,\n        error = function(m) {\n            var e = new SyntaxError(m);\n            e.at = at;\n            e.text = text;\n            throw e;\n        },\n        next = function(c) {\n            // If a c parameter is provided, verify that it matches the current character.\n            if (c && c !== ch) {\n                error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n            }\n            // Get the next character. When there are no more characters,\n            // return the empty string.\n            ch = text.charAt(at);\n            at += 1;\n            return ch;\n        },\n        number = function() {\n            // Parse a number value.\n            var number,\n                string = '';\n\n            if (ch === '-') {\n                string = '-';\n                next('-');\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n            if (ch === '.') {\n                string += '.';\n                while (next() && ch >= '0' && ch <= '9') {\n                    string += ch;\n                }\n            }\n            if (ch === 'e' || ch === 'E') {\n                string += ch;\n                next();\n                if (ch === '-' || ch === '+') {\n                    string += ch;\n                    next();\n                }\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n            }\n            number = +string;\n            if (!isFinite(number)) {\n                error('Bad number');\n            } else {\n                return number;\n            }\n        },\n\n        string = function() {\n            // Parse a string value.\n            var hex,\n                i,\n                string = '',\n                uffff;\n            // When parsing for string values, we must look for \" and \\ characters.\n            if (ch === '\"') {\n                while (next()) {\n                    if (ch === '\"') {\n                        next();\n                        return string;\n                    }\n                    if (ch === '\\\\') {\n                        next();\n                        if (ch === 'u') {\n                            uffff = 0;\n                            for (i = 0; i < 4; i += 1) {\n                                hex = parseInt(next(), 16);\n                                if (!isFinite(hex)) {\n                                    break;\n                                }\n                                uffff = uffff * 16 + hex;\n                            }\n                            string += String.fromCharCode(uffff);\n                        } else if (typeof escapee[ch] === 'string') {\n                            string += escapee[ch];\n                        } else {\n                            break;\n                        }\n                    } else {\n                        string += ch;\n                    }\n                }\n            }\n            error('Bad string');\n        },\n        white = function() {\n            // Skip whitespace.\n            while (ch && ch <= ' ') {\n                next();\n            }\n        },\n        word = function() {\n            // true, false, or null.\n            switch (ch) {\n                case 't':\n                    next('t');\n                    next('r');\n                    next('u');\n                    next('e');\n                    return true;\n                case 'f':\n                    next('f');\n                    next('a');\n                    next('l');\n                    next('s');\n                    next('e');\n                    return false;\n                case 'n':\n                    next('n');\n                    next('u');\n                    next('l');\n                    next('l');\n                    return null;\n            }\n            error('Unexpected \"' + ch + '\"');\n        },\n        value, // Placeholder for the value function.\n        array = function() {\n            // Parse an array value.\n            var array = [];\n\n            if (ch === '[') {\n                next('[');\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array; // empty array\n                }\n                while (ch) {\n                    array.push(value());\n                    white();\n                    if (ch === ']') {\n                        next(']');\n                        return array;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error('Bad array');\n        },\n        object = function() {\n            // Parse an object value.\n            var key,\n                object = {};\n\n            if (ch === '{') {\n                next('{');\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object; // empty object\n                }\n                while (ch) {\n                    key = string();\n                    white();\n                    next(':');\n                    if (Object.hasOwnProperty.call(object, key)) {\n                        error('Duplicate key \"' + key + '\"');\n                    }\n                    object[key] = value();\n                    white();\n                    if (ch === '}') {\n                        next('}');\n                        return object;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error('Bad object');\n        };\n\n    value = function() {\n        // Parse a JSON value. It could be an object, an array, a string,\n        // a number, or a word.\n        white();\n        switch (ch) {\n            case '{':\n                return object();\n            case '[':\n                return array();\n            case '\"':\n                return string();\n            case '-':\n                return number();\n            default:\n                return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the\n    // above functions and variables.\n    return function(source) {\n        var result;\n\n        text = source;\n        at = 0;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error('Syntax error');\n        }\n\n        return result;\n    };\n})();\n\n_.base64Encode = function(data) {\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n        ac = 0,\n        enc = '',\n        tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    data = _.utf8Encode(data);\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1 << 16 | o2 << 8 | o3;\n\n        h1 = bits >> 18 & 0x3f;\n        h2 = bits >> 12 & 0x3f;\n        h3 = bits >> 6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n            break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n            break;\n    }\n\n    return enc;\n};\n\n_.utf8Encode = function(string) {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n\n    var utftext = '',\n        start,\n        end;\n    var stringl = 0,\n        n;\n\n    start = end = 0;\n    stringl = string.length;\n\n    for (n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n\n        if (c1 < 128) {\n            end++;\n        } else if ((c1 > 127) && (c1 < 2048)) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128);\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end);\n            }\n            utftext += enc;\n            start = end = n + 1;\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length);\n    }\n\n    return utftext;\n};\n\n_.UUID = (function() {\n\n    // Time/ticks information\n    // 1*new Date() is a cross browser version of Date.now()\n    var T = function() {\n        var d = 1 * new Date(),\n            i = 0;\n\n        // this while loop figures how many browser ticks go by\n        // before 1*new Date() returns a new number, ie the amount\n        // of ticks that go by per millisecond\n        while (d == 1 * new Date()) {\n            i++;\n        }\n\n        return d.toString(16) + i.toString(16);\n    };\n\n    // Math.Random entropy\n    var R = function() {\n        return Math.random().toString(16).replace('.', '');\n    };\n\n    // User agent entropy\n    // This function takes the user agent string, and then xors\n    // together each sequence of 8 bytes.  This produces a final\n    // sequence of 8 bytes which it returns as hex.\n    var UA = function() {\n        var ua = userAgent,\n            i, ch, buffer = [],\n            ret = 0;\n\n        function xor(result, byte_array) {\n            var j, tmp = 0;\n            for (j = 0; j < byte_array.length; j++) {\n                tmp |= (buffer[j] << j * 8);\n            }\n            return result ^ tmp;\n        }\n\n        for (i = 0; i < ua.length; i++) {\n            ch = ua.charCodeAt(i);\n            buffer.unshift(ch & 0xFF);\n            if (buffer.length >= 4) {\n                ret = xor(ret, buffer);\n                buffer = [];\n            }\n        }\n\n        if (buffer.length > 0) {\n            ret = xor(ret, buffer);\n        }\n\n        return ret.toString(16);\n    };\n\n    return function() {\n        var se = (screen.height * screen.width).toString(16);\n        return (T() + '-' + R() + '-' + UA() + '-' + se + '-' + T());\n    };\n})();\n\n// _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false tracking data\nvar BLOCKED_UA_STRS = [\n    'ahrefsbot',\n    'baiduspider',\n    'bingbot',\n    'bingpreview',\n    'facebookexternal',\n    'petalbot',\n    'pinterest',\n    'screaming frog',\n    'yahoo! slurp',\n    'yandexbot',\n\n    // a whole bunch of goog-specific crawlers\n    // https://developers.google.com/search/docs/advanced/crawling/overview-google-crawlers\n    'adsbot-google',\n    'apis-google',\n    'duplexweb-google',\n    'feedfetcher-google',\n    'google favicon',\n    'google web preview',\n    'google-read-aloud',\n    'googlebot',\n    'googleweblight',\n    'mediapartners-google',\n    'storebot-google'\n];\n_.isBlockedUA = function(ua) {\n    var i;\n    ua = ua.toLowerCase();\n    for (i = 0; i < BLOCKED_UA_STRS.length; i++) {\n        if (ua.indexOf(BLOCKED_UA_STRS[i]) !== -1) {\n            return true;\n        }\n    }\n    return false;\n};\n\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\n_.HTTPBuildQuery = function(formdata, arg_separator) {\n    var use_val, use_key, tmp_arr = [];\n\n    if (_.isUndefined(arg_separator)) {\n        arg_separator = '&';\n    }\n\n    _.each(formdata, function(val, key) {\n        use_val = encodeURIComponent(val.toString());\n        use_key = encodeURIComponent(key);\n        tmp_arr[tmp_arr.length] = use_key + '=' + use_val;\n    });\n\n    return tmp_arr.join(arg_separator);\n};\n\n_.getQueryParam = function(url, param) {\n    // Expects a raw URL\n\n    param = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n    var regexS = '[\\\\?&]' + param + '=([^&#]*)',\n        regex = new RegExp(regexS),\n        results = regex.exec(url);\n    if (results === null || (results && typeof(results[1]) !== 'string' && results[1].length)) {\n        return '';\n    } else {\n        var result = results[1];\n        try {\n            result = decodeURIComponent(result);\n        } catch(err) {\n            console.error('Skipping decoding for malformed query param: ' + result);\n        }\n        return result.replace(/\\+/g, ' ');\n    }\n};\n\n\n// _.cookie\n// Methods partially borrowed from quirksmode.org/js/cookies.html\n_.cookie = {\n    get: function(name) {\n        var nameEQ = name + '=';\n        var ca = document$1.cookie.split(';');\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == ' ') {\n                c = c.substring(1, c.length);\n            }\n            if (c.indexOf(nameEQ) === 0) {\n                return decodeURIComponent(c.substring(nameEQ.length, c.length));\n            }\n        }\n        return null;\n    },\n\n    parse: function(name) {\n        var cookie;\n        try {\n            cookie = _.JSONDecode(_.cookie.get(name)) || {};\n        } catch (err) {\n            // noop\n        }\n        return cookie;\n    },\n\n    set_seconds: function(name, value, seconds, is_cross_subdomain, is_secure, is_cross_site, domain_override) {\n        var cdomain = '',\n            expires = '',\n            secure = '';\n\n        if (domain_override) {\n            cdomain = '; domain=' + domain_override;\n        } else if (is_cross_subdomain) {\n            var domain = extract_domain(document$1.location.hostname);\n            cdomain = domain ? '; domain=.' + domain : '';\n        }\n\n        if (seconds) {\n            var date = new Date();\n            date.setTime(date.getTime() + (seconds * 1000));\n            expires = '; expires=' + date.toGMTString();\n        }\n\n        if (is_cross_site) {\n            is_secure = true;\n            secure = '; SameSite=None';\n        }\n        if (is_secure) {\n            secure += '; secure';\n        }\n\n        document$1.cookie = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n    },\n\n    set: function(name, value, days, is_cross_subdomain, is_secure, is_cross_site, domain_override) {\n        var cdomain = '', expires = '', secure = '';\n\n        if (domain_override) {\n            cdomain = '; domain=' + domain_override;\n        } else if (is_cross_subdomain) {\n            var domain = extract_domain(document$1.location.hostname);\n            cdomain = domain ? '; domain=.' + domain : '';\n        }\n\n        if (days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            expires = '; expires=' + date.toGMTString();\n        }\n\n        if (is_cross_site) {\n            is_secure = true;\n            secure = '; SameSite=None';\n        }\n        if (is_secure) {\n            secure += '; secure';\n        }\n\n        var new_cookie_val = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n        document$1.cookie = new_cookie_val;\n        return new_cookie_val;\n    },\n\n    remove: function(name, is_cross_subdomain, domain_override) {\n        _.cookie.set(name, '', -1, is_cross_subdomain, false, false, domain_override);\n    }\n};\n\nvar _localStorageSupported = null;\nvar localStorageSupported = function(storage, forceCheck) {\n    if (_localStorageSupported !== null && !forceCheck) {\n        return _localStorageSupported;\n    }\n\n    var supported = true;\n    try {\n        storage = storage || window.localStorage;\n        var key = '__mplss_' + cheap_guid(8),\n            val = 'xyz';\n        storage.setItem(key, val);\n        if (storage.getItem(key) !== val) {\n            supported = false;\n        }\n        storage.removeItem(key);\n    } catch (err) {\n        supported = false;\n    }\n\n    _localStorageSupported = supported;\n    return supported;\n};\n\n// _.localStorage\n_.localStorage = {\n    is_supported: function(force_check) {\n        var supported = localStorageSupported(null, force_check);\n        if (!supported) {\n            console.error('localStorage unsupported; falling back to cookie store');\n        }\n        return supported;\n    },\n\n    error: function(msg) {\n        console.error('localStorage error: ' + msg);\n    },\n\n    get: function(name) {\n        try {\n            return window.localStorage.getItem(name);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n        return null;\n    },\n\n    parse: function(name) {\n        try {\n            return _.JSONDecode(_.localStorage.get(name)) || {};\n        } catch (err) {\n            // noop\n        }\n        return null;\n    },\n\n    set: function(name, value) {\n        try {\n            window.localStorage.setItem(name, value);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n    },\n\n    remove: function(name) {\n        try {\n            window.localStorage.removeItem(name);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n    }\n};\n\n_.register_event = (function() {\n    // written by Dean Edwards, 2005\n    // with input from Tino Zijdel - crisp@xs4all.nl\n    // with input from Carl Sverre - mail@carlsverre.com\n    // with input from Mixpanel\n    // http://dean.edwards.name/weblog/2005/10/add-event/\n    // https://gist.github.com/1930440\n\n    /**\n     * @param {Object} element\n     * @param {string} type\n     * @param {function(...*)} handler\n     * @param {boolean=} oldSchool\n     * @param {boolean=} useCapture\n     */\n    var register_event = function(element, type, handler, oldSchool, useCapture) {\n        if (!element) {\n            console.error('No valid element provided to register_event');\n            return;\n        }\n\n        if (element.addEventListener && !oldSchool) {\n            element.addEventListener(type, handler, !!useCapture);\n        } else {\n            var ontype = 'on' + type;\n            var old_handler = element[ontype]; // can be undefined\n            element[ontype] = makeHandler(element, handler, old_handler);\n        }\n    };\n\n    function makeHandler(element, new_handler, old_handlers) {\n        var handler = function(event) {\n            event = event || fixEvent(window.event);\n\n            // this basically happens in firefox whenever another script\n            // overwrites the onload callback and doesn't pass the event\n            // object to previously defined callbacks.  All the browsers\n            // that don't define window.event implement addEventListener\n            // so the dom_loaded handler will still be fired as usual.\n            if (!event) {\n                return undefined;\n            }\n\n            var ret = true;\n            var old_result, new_result;\n\n            if (_.isFunction(old_handlers)) {\n                old_result = old_handlers(event);\n            }\n            new_result = new_handler.call(element, event);\n\n            if ((false === old_result) || (false === new_result)) {\n                ret = false;\n            }\n\n            return ret;\n        };\n\n        return handler;\n    }\n\n    function fixEvent(event) {\n        if (event) {\n            event.preventDefault = fixEvent.preventDefault;\n            event.stopPropagation = fixEvent.stopPropagation;\n        }\n        return event;\n    }\n    fixEvent.preventDefault = function() {\n        this.returnValue = false;\n    };\n    fixEvent.stopPropagation = function() {\n        this.cancelBubble = true;\n    };\n\n    return register_event;\n})();\n\n\nvar TOKEN_MATCH_REGEX = new RegExp('^(\\\\w*)\\\\[(\\\\w+)([=~\\\\|\\\\^\\\\$\\\\*]?)=?\"?([^\\\\]\"]*)\"?\\\\]$');\n\n_.dom_query = (function() {\n    /* document.getElementsBySelector(selector)\n    - returns an array of element objects from the current document\n    matching the CSS selector. Selectors can contain element names,\n    class names and ids and can be nested. For example:\n\n    elements = document.getElementsBySelector('div#main p a.external')\n\n    Will return an array of all 'a' elements with 'external' in their\n    class attribute that are contained inside 'p' elements that are\n    contained inside the 'div' element which has id=\"main\"\n\n    New in version 0.4: Support for CSS2 and CSS3 attribute selectors:\n    See http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\n    Version 0.4 - Simon Willison, March 25th 2003\n    -- Works in Phoenix 0.5, Mozilla 1.3, Opera 7, Internet Explorer 6, Internet Explorer 5 on Windows\n    -- Opera 7 fails\n\n    Version 0.5 - Carl Sverre, Jan 7th 2013\n    -- Now uses jQuery-esque `hasClass` for testing class name\n    equality.  This fixes a bug related to '-' characters being\n    considered not part of a 'word' in regex.\n    */\n\n    function getAllChildren(e) {\n        // Returns all children of element. Workaround required for IE5/Windows. Ugh.\n        return e.all ? e.all : e.getElementsByTagName('*');\n    }\n\n    var bad_whitespace = /[\\t\\r\\n]/g;\n\n    function hasClass(elem, selector) {\n        var className = ' ' + selector + ' ';\n        return ((' ' + elem.className + ' ').replace(bad_whitespace, ' ').indexOf(className) >= 0);\n    }\n\n    function getElementsBySelector(selector) {\n        // Attempt to fail gracefully in lesser browsers\n        if (!document$1.getElementsByTagName) {\n            return [];\n        }\n        // Split selector in to tokens\n        var tokens = selector.split(' ');\n        var token, bits, tagName, found, foundCount, i, j, k, elements, currentContextIndex;\n        var currentContext = [document$1];\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i].replace(/^\\s+/, '').replace(/\\s+$/, '');\n            if (token.indexOf('#') > -1) {\n                // Token is an ID selector\n                bits = token.split('#');\n                tagName = bits[0];\n                var id = bits[1];\n                var element = document$1.getElementById(id);\n                if (!element || (tagName && element.nodeName.toLowerCase() != tagName)) {\n                    // element not found or tag with that ID not found, return false\n                    return [];\n                }\n                // Set currentContext to contain just this element\n                currentContext = [element];\n                continue; // Skip to next token\n            }\n            if (token.indexOf('.') > -1) {\n                // Token contains a class selector\n                bits = token.split('.');\n                tagName = bits[0];\n                var className = bits[1];\n                if (!tagName) {\n                    tagName = '*';\n                }\n                // Get elements matching tag, filter them for class selector\n                found = [];\n                foundCount = 0;\n                for (j = 0; j < currentContext.length; j++) {\n                    if (tagName == '*') {\n                        elements = getAllChildren(currentContext[j]);\n                    } else {\n                        elements = currentContext[j].getElementsByTagName(tagName);\n                    }\n                    for (k = 0; k < elements.length; k++) {\n                        found[foundCount++] = elements[k];\n                    }\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                for (j = 0; j < found.length; j++) {\n                    if (found[j].className &&\n                        _.isString(found[j].className) && // some SVG elements have classNames which are not strings\n                        hasClass(found[j], className)\n                    ) {\n                        currentContext[currentContextIndex++] = found[j];\n                    }\n                }\n                continue; // Skip to next token\n            }\n            // Code to deal with attribute selectors\n            var token_match = token.match(TOKEN_MATCH_REGEX);\n            if (token_match) {\n                tagName = token_match[1];\n                var attrName = token_match[2];\n                var attrOperator = token_match[3];\n                var attrValue = token_match[4];\n                if (!tagName) {\n                    tagName = '*';\n                }\n                // Grab all of the tagName elements within current context\n                found = [];\n                foundCount = 0;\n                for (j = 0; j < currentContext.length; j++) {\n                    if (tagName == '*') {\n                        elements = getAllChildren(currentContext[j]);\n                    } else {\n                        elements = currentContext[j].getElementsByTagName(tagName);\n                    }\n                    for (k = 0; k < elements.length; k++) {\n                        found[foundCount++] = elements[k];\n                    }\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                var checkFunction; // This function will be used to filter the elements\n                switch (attrOperator) {\n                    case '=': // Equality\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName) == attrValue);\n                        };\n                        break;\n                    case '~': // Match one of space seperated words\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).match(new RegExp('\\\\b' + attrValue + '\\\\b')));\n                        };\n                        break;\n                    case '|': // Match start with value followed by optional hyphen\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).match(new RegExp('^' + attrValue + '-?')));\n                        };\n                        break;\n                    case '^': // Match starts with value\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).indexOf(attrValue) === 0);\n                        };\n                        break;\n                    case '$': // Match ends with value - fails with \"Warning\" in Opera 7\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).lastIndexOf(attrValue) == e.getAttribute(attrName).length - attrValue.length);\n                        };\n                        break;\n                    case '*': // Match ends with value\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).indexOf(attrValue) > -1);\n                        };\n                        break;\n                    default:\n                        // Just test for existence of attribute\n                        checkFunction = function(e) {\n                            return e.getAttribute(attrName);\n                        };\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                for (j = 0; j < found.length; j++) {\n                    if (checkFunction(found[j])) {\n                        currentContext[currentContextIndex++] = found[j];\n                    }\n                }\n                // alert('Attribute Selector: '+tagName+' '+attrName+' '+attrOperator+' '+attrValue);\n                continue; // Skip to next token\n            }\n            // If we get here, token is JUST an element (not a class or ID selector)\n            tagName = token;\n            found = [];\n            foundCount = 0;\n            for (j = 0; j < currentContext.length; j++) {\n                elements = currentContext[j].getElementsByTagName(tagName);\n                for (k = 0; k < elements.length; k++) {\n                    found[foundCount++] = elements[k];\n                }\n            }\n            currentContext = found;\n        }\n        return currentContext;\n    }\n\n    return function(query) {\n        if (_.isElement(query)) {\n            return [query];\n        } else if (_.isObject(query) && !_.isUndefined(query.length)) {\n            return query;\n        } else {\n            return getElementsBySelector.call(this, query);\n        }\n    };\n})();\n\n_.info = {\n    campaignParams: function() {\n        var campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term'.split(' '),\n            kw = '',\n            params = {};\n        _.each(campaign_keywords, function(kwkey) {\n            kw = _.getQueryParam(document$1.URL, kwkey);\n            if (kw.length) {\n                params[kwkey] = kw;\n            }\n        });\n\n        return params;\n    },\n\n    searchEngine: function(referrer) {\n        if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n            return 'google';\n        } else if (referrer.search('https?://(.*)bing.com') === 0) {\n            return 'bing';\n        } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n            return 'yahoo';\n        } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n            return 'duckduckgo';\n        } else {\n            return null;\n        }\n    },\n\n    searchInfo: function(referrer) {\n        var search = _.info.searchEngine(referrer),\n            param = (search != 'yahoo') ? 'q' : 'p',\n            ret = {};\n\n        if (search !== null) {\n            ret['$search_engine'] = search;\n\n            var keyword = _.getQueryParam(referrer, param);\n            if (keyword.length) {\n                ret['mp_keyword'] = keyword;\n            }\n        }\n\n        return ret;\n    },\n\n    /**\n     * This function detects which browser is running this script.\n     * The order of the checks are important since many user agents\n     * include key words used in later checks.\n     */\n    browser: function(user_agent, vendor, opera) {\n        vendor = vendor || ''; // vendor is undefined for at least IE9\n        if (opera || _.includes(user_agent, ' OPR/')) {\n            if (_.includes(user_agent, 'Mini')) {\n                return 'Opera Mini';\n            }\n            return 'Opera';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry';\n        } else if (_.includes(user_agent, 'IEMobile') || _.includes(user_agent, 'WPDesktop')) {\n            return 'Internet Explorer Mobile';\n        } else if (_.includes(user_agent, 'SamsungBrowser/')) {\n            // https://developer.samsung.com/internet/user-agent-string-format\n            return 'Samsung Internet';\n        } else if (_.includes(user_agent, 'Edge') || _.includes(user_agent, 'Edg/')) {\n            return 'Microsoft Edge';\n        } else if (_.includes(user_agent, 'FBIOS')) {\n            return 'Facebook Mobile';\n        } else if (_.includes(user_agent, 'Chrome')) {\n            return 'Chrome';\n        } else if (_.includes(user_agent, 'CriOS')) {\n            return 'Chrome iOS';\n        } else if (_.includes(user_agent, 'UCWEB') || _.includes(user_agent, 'UCBrowser')) {\n            return 'UC Browser';\n        } else if (_.includes(user_agent, 'FxiOS')) {\n            return 'Firefox iOS';\n        } else if (_.includes(vendor, 'Apple')) {\n            if (_.includes(user_agent, 'Mobile')) {\n                return 'Mobile Safari';\n            }\n            return 'Safari';\n        } else if (_.includes(user_agent, 'Android')) {\n            return 'Android Mobile';\n        } else if (_.includes(user_agent, 'Konqueror')) {\n            return 'Konqueror';\n        } else if (_.includes(user_agent, 'Firefox')) {\n            return 'Firefox';\n        } else if (_.includes(user_agent, 'MSIE') || _.includes(user_agent, 'Trident/')) {\n            return 'Internet Explorer';\n        } else if (_.includes(user_agent, 'Gecko')) {\n            return 'Mozilla';\n        } else {\n            return '';\n        }\n    },\n\n    /**\n     * This function detects which browser version is running this script,\n     * parsing major and minor version (e.g., 42.1). User agent strings from:\n     * http://www.useragentstring.com/pages/useragentstring.php\n     */\n    browserVersion: function(userAgent, vendor, opera) {\n        var browser = _.info.browser(userAgent, vendor, opera);\n        var versionRegexs = {\n            'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n            'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n            'Chrome': /Chrome\\/(\\d+(\\.\\d+)?)/,\n            'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n            'UC Browser' : /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n            'Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            'Opera': /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n            'Firefox': /Firefox\\/(\\d+(\\.\\d+)?)/,\n            'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n            'Konqueror': /Konqueror:(\\d+(\\.\\d+)?)/,\n            'BlackBerry': /BlackBerry (\\d+(\\.\\d+)?)/,\n            'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n            'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n            'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n            'Mozilla': /rv:(\\d+(\\.\\d+)?)/\n        };\n        var regex = versionRegexs[browser];\n        if (regex === undefined) {\n            return null;\n        }\n        var matches = userAgent.match(regex);\n        if (!matches) {\n            return null;\n        }\n        return parseFloat(matches[matches.length - 2]);\n    },\n\n    os: function() {\n        var a = userAgent;\n        if (/Windows/i.test(a)) {\n            if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n                return 'Windows Phone';\n            }\n            return 'Windows';\n        } else if (/(iPhone|iPad|iPod)/.test(a)) {\n            return 'iOS';\n        } else if (/Android/.test(a)) {\n            return 'Android';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n            return 'BlackBerry';\n        } else if (/Mac/i.test(a)) {\n            return 'Mac OS X';\n        } else if (/Linux/.test(a)) {\n            return 'Linux';\n        } else if (/CrOS/.test(a)) {\n            return 'Chrome OS';\n        } else {\n            return '';\n        }\n    },\n\n    device: function(user_agent) {\n        if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n            return 'Windows Phone';\n        } else if (/iPad/.test(user_agent)) {\n            return 'iPad';\n        } else if (/iPod/.test(user_agent)) {\n            return 'iPod Touch';\n        } else if (/iPhone/.test(user_agent)) {\n            return 'iPhone';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry';\n        } else if (/Android/.test(user_agent)) {\n            return 'Android';\n        } else {\n            return '';\n        }\n    },\n\n    referringDomain: function(referrer) {\n        var split = referrer.split('/');\n        if (split.length >= 3) {\n            return split[2];\n        }\n        return '';\n    },\n\n    properties: function() {\n        return _.extend(_.strip_empty_properties({\n            '$os': _.info.os(),\n            '$browser': _.info.browser(userAgent, navigator.vendor, windowOpera),\n            '$referrer': document$1.referrer,\n            '$referring_domain': _.info.referringDomain(document$1.referrer),\n            '$device': _.info.device(userAgent)\n        }), {\n            '$current_url': window$1.location.href,\n            '$browser_version': _.info.browserVersion(userAgent, navigator.vendor, windowOpera),\n            '$screen_height': screen.height,\n            '$screen_width': screen.width,\n            'mp_lib': 'web',\n            '$lib_version': Config.LIB_VERSION,\n            '$insert_id': cheap_guid(),\n            'time': _.timestamp() / 1000 // epoch time in seconds\n        });\n    },\n\n    people_properties: function() {\n        return _.extend(_.strip_empty_properties({\n            '$os': _.info.os(),\n            '$browser': _.info.browser(userAgent, navigator.vendor, windowOpera)\n        }), {\n            '$browser_version': _.info.browserVersion(userAgent, navigator.vendor, windowOpera)\n        });\n    },\n\n    pageviewInfo: function(page) {\n        return _.strip_empty_properties({\n            'mp_page': page,\n            'mp_referrer': document$1.referrer,\n            'mp_browser': _.info.browser(userAgent, navigator.vendor, windowOpera),\n            'mp_platform': _.info.os()\n        });\n    }\n};\n\nvar cheap_guid = function(maxlen) {\n    var guid = Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10);\n    return maxlen ? guid.substring(0, maxlen) : guid;\n};\n\n// naive way to extract domain name (example.com) from full hostname (my.sub.example.com)\nvar SIMPLE_DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]*\\.[a-z]+$/i;\n// this next one attempts to account for some ccSLDs, e.g. extracting oxford.ac.uk from www.oxford.ac.uk\nvar DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i;\n/**\n * Attempts to extract main domain name from full hostname, using a few blunt heuristics. For\n * common TLDs like .com/.org that always have a simple SLD.TLD structure (example.com), we\n * simply extract the last two .-separated parts of the hostname (SIMPLE_DOMAIN_MATCH_REGEX).\n * For others, we attempt to account for short ccSLD+TLD combos (.ac.uk) with the legacy\n * DOMAIN_MATCH_REGEX (kept to maintain backwards compatibility with existing Mixpanel\n * integrations). The only _reliable_ way to extract domain from hostname is with an up-to-date\n * list like at https://publicsuffix.org/ so for cases that this helper fails at, the SDK\n * offers the 'cookie_domain' config option to set it explicitly.\n * @example\n * extract_domain('my.sub.example.com')\n * // 'example.com'\n */\nvar extract_domain = function(hostname) {\n    var domain_regex = DOMAIN_MATCH_REGEX;\n    var parts = hostname.split('.');\n    var tld = parts[parts.length - 1];\n    if (tld.length > 4 || tld === 'com' || tld === 'org') {\n        domain_regex = SIMPLE_DOMAIN_MATCH_REGEX;\n    }\n    var matches = hostname.match(domain_regex);\n    return matches ? matches[0] : '';\n};\n\nvar JSONStringify = null;\nvar JSONParse = null;\nif (typeof JSON !== 'undefined') {\n    JSONStringify = JSON.stringify;\n    JSONParse = JSON.parse;\n}\nJSONStringify = JSONStringify || _.JSONEncode;\nJSONParse = JSONParse || _.JSONDecode;\n\n// EXPORTS (for closure compiler)\n_['toArray']                = _.toArray;\n_['isObject']               = _.isObject;\n_['JSONEncode']             = _.JSONEncode;\n_['JSONDecode']             = _.JSONDecode;\n_['isBlockedUA']            = _.isBlockedUA;\n_['isEmptyObject']          = _.isEmptyObject;\n_['info']                   = _.info;\n_['info']['device']         = _.info.device;\n_['info']['browser']        = _.info.browser;\n_['info']['browserVersion'] = _.info.browserVersion;\n_['info']['properties']     = _.info.properties;\n\n/**\n * DomTracker Object\n * @constructor\n */\nvar DomTracker = function() {};\n\n\n// interface\nDomTracker.prototype.create_properties = function() {};\nDomTracker.prototype.event_handler = function() {};\nDomTracker.prototype.after_track_handler = function() {};\n\nDomTracker.prototype.init = function(mixpanel_instance) {\n    this.mp = mixpanel_instance;\n    return this;\n};\n\n/**\n * @param {Object|string} query\n * @param {string} event_name\n * @param {Object=} properties\n * @param {function=} user_callback\n */\nDomTracker.prototype.track = function(query, event_name, properties, user_callback) {\n    var that = this;\n    var elements = _.dom_query(query);\n\n    if (elements.length === 0) {\n        console.error('The DOM query (' + query + ') returned 0 elements');\n        return;\n    }\n\n    _.each(elements, function(element) {\n        _.register_event(element, this.override_event, function(e) {\n            var options = {};\n            var props = that.create_properties(properties, this);\n            var timeout = that.mp.get_config('track_links_timeout');\n\n            that.event_handler(e, this, options);\n\n            // in case the mixpanel servers don't get back to us in time\n            window.setTimeout(that.track_callback(user_callback, props, options, true), timeout);\n\n            // fire the tracking event\n            that.mp.track(event_name, props, that.track_callback(user_callback, props, options));\n        });\n    }, this);\n\n    return true;\n};\n\n/**\n * @param {function} user_callback\n * @param {Object} props\n * @param {boolean=} timeout_occured\n */\nDomTracker.prototype.track_callback = function(user_callback, props, options, timeout_occured) {\n    timeout_occured = timeout_occured || false;\n    var that = this;\n\n    return function() {\n        // options is referenced from both callbacks, so we can have\n        // a 'lock' of sorts to ensure only one fires\n        if (options.callback_fired) { return; }\n        options.callback_fired = true;\n\n        if (user_callback && user_callback(timeout_occured, props) === false) {\n            // user can prevent the default functionality by\n            // returning false from their callback\n            return;\n        }\n\n        that.after_track_handler(props, options, timeout_occured);\n    };\n};\n\nDomTracker.prototype.create_properties = function(properties, element) {\n    var props;\n\n    if (typeof(properties) === 'function') {\n        props = properties(element);\n    } else {\n        props = _.extend({}, properties);\n    }\n\n    return props;\n};\n\n/**\n * LinkTracker Object\n * @constructor\n * @extends DomTracker\n */\nvar LinkTracker = function() {\n    this.override_event = 'click';\n};\n_.inherit(LinkTracker, DomTracker);\n\nLinkTracker.prototype.create_properties = function(properties, element) {\n    var props = LinkTracker.superclass.create_properties.apply(this, arguments);\n\n    if (element.href) { props['url'] = element.href; }\n\n    return props;\n};\n\nLinkTracker.prototype.event_handler = function(evt, element, options) {\n    options.new_tab = (\n        evt.which === 2 ||\n        evt.metaKey ||\n        evt.ctrlKey ||\n        element.target === '_blank'\n    );\n    options.href = element.href;\n\n    if (!options.new_tab) {\n        evt.preventDefault();\n    }\n};\n\nLinkTracker.prototype.after_track_handler = function(props, options) {\n    if (options.new_tab) { return; }\n\n    setTimeout(function() {\n        window.location = options.href;\n    }, 0);\n};\n\n/**\n * FormTracker Object\n * @constructor\n * @extends DomTracker\n */\nvar FormTracker = function() {\n    this.override_event = 'submit';\n};\n_.inherit(FormTracker, DomTracker);\n\nFormTracker.prototype.event_handler = function(evt, element, options) {\n    options.element = element;\n    evt.preventDefault();\n};\n\nFormTracker.prototype.after_track_handler = function(props, options) {\n    setTimeout(function() {\n        options.element.submit();\n    }, 0);\n};\n\n// eslint-disable-line camelcase\n\nvar logger$2 = console_with_prefix('lock');\n\n/**\n * SharedLock: a mutex built on HTML5 localStorage, to ensure that only one browser\n * window/tab at a time will be able to access shared resources.\n *\n * Based on the Alur and Taubenfeld fast lock\n * (http://www.cs.rochester.edu/research/synchronization/pseudocode/fastlock.html)\n * with an added timeout to ensure there will be eventual progress in the event\n * that a window is closed in the middle of the callback.\n *\n * Implementation based on the original version by David Wolever (https://github.com/wolever)\n * at https://gist.github.com/wolever/5fd7573d1ef6166e8f8c4af286a69432.\n *\n * @example\n * const myLock = new SharedLock('some-key');\n * myLock.withLock(function() {\n *   console.log('I hold the mutex!');\n * });\n *\n * @constructor\n */\nvar SharedLock = function(key, options) {\n    options = options || {};\n\n    this.storageKey = key;\n    this.storage = options.storage || window.localStorage;\n    this.pollIntervalMS = options.pollIntervalMS || 100;\n    this.timeoutMS = options.timeoutMS || 2000;\n};\n\n// pass in a specific pid to test contention scenarios; otherwise\n// it is chosen randomly for each acquisition attempt\nSharedLock.prototype.withLock = function(lockedCB, errorCB, pid) {\n    if (!pid && typeof errorCB !== 'function') {\n        pid = errorCB;\n        errorCB = null;\n    }\n\n    var i = pid || (new Date().getTime() + '|' + Math.random());\n    var startTime = new Date().getTime();\n\n    var key = this.storageKey;\n    var pollIntervalMS = this.pollIntervalMS;\n    var timeoutMS = this.timeoutMS;\n    var storage = this.storage;\n\n    var keyX = key + ':X';\n    var keyY = key + ':Y';\n    var keyZ = key + ':Z';\n\n    var reportError = function(err) {\n        errorCB && errorCB(err);\n    };\n\n    var delay = function(cb) {\n        if (new Date().getTime() - startTime > timeoutMS) {\n            logger$2.error('Timeout waiting for mutex on ' + key + '; clearing lock. [' + i + ']');\n            storage.removeItem(keyZ);\n            storage.removeItem(keyY);\n            loop();\n            return;\n        }\n        setTimeout(function() {\n            try {\n                cb();\n            } catch(err) {\n                reportError(err);\n            }\n        }, pollIntervalMS * (Math.random() + 0.1));\n    };\n\n    var waitFor = function(predicate, cb) {\n        if (predicate()) {\n            cb();\n        } else {\n            delay(function() {\n                waitFor(predicate, cb);\n            });\n        }\n    };\n\n    var getSetY = function() {\n        var valY = storage.getItem(keyY);\n        if (valY && valY !== i) { // if Y == i then this process already has the lock (useful for test cases)\n            return false;\n        } else {\n            storage.setItem(keyY, i);\n            if (storage.getItem(keyY) === i) {\n                return true;\n            } else {\n                if (!localStorageSupported(storage, true)) {\n                    throw new Error('localStorage support dropped while acquiring lock');\n                }\n                return false;\n            }\n        }\n    };\n\n    var loop = function() {\n        storage.setItem(keyX, i);\n\n        waitFor(getSetY, function() {\n            if (storage.getItem(keyX) === i) {\n                criticalSection();\n                return;\n            }\n\n            delay(function() {\n                if (storage.getItem(keyY) !== i) {\n                    loop();\n                    return;\n                }\n                waitFor(function() {\n                    return !storage.getItem(keyZ);\n                }, criticalSection);\n            });\n        });\n    };\n\n    var criticalSection = function() {\n        storage.setItem(keyZ, '1');\n        try {\n            lockedCB();\n        } finally {\n            storage.removeItem(keyZ);\n            if (storage.getItem(keyY) === i) {\n                storage.removeItem(keyY);\n            }\n            if (storage.getItem(keyX) === i) {\n                storage.removeItem(keyX);\n            }\n        }\n    };\n\n    try {\n        if (localStorageSupported(storage, true)) {\n            loop();\n        } else {\n            throw new Error('localStorage support check failed');\n        }\n    } catch(err) {\n        reportError(err);\n    }\n};\n\n// eslint-disable-line camelcase\n\nvar logger$1 = console_with_prefix('batch');\n\n/**\n * RequestQueue: queue for batching API requests with localStorage backup for retries.\n * Maintains an in-memory queue which represents the source of truth for the current\n * page, but also writes all items out to a copy in the browser's localStorage, which\n * can be read on subsequent pageloads and retried. For batchability, all the request\n * items in the queue should be of the same type (events, people updates, group updates)\n * so they can be sent in a single request to the same API endpoint.\n *\n * LocalStorage keying and locking: In order for reloads and subsequent pageloads of\n * the same site to access the same persisted data, they must share the same localStorage\n * key (for instance based on project token and queue type). Therefore access to the\n * localStorage entry is guarded by an asynchronous mutex (SharedLock) to prevent\n * simultaneously open windows/tabs from overwriting each other's data (which would lead\n * to data loss in some situations).\n * @constructor\n */\nvar RequestQueue = function(storageKey, options) {\n    options = options || {};\n    this.storageKey = storageKey;\n    this.storage = options.storage || window.localStorage;\n    this.reportError = options.errorReporter || _.bind(logger$1.error, logger$1);\n    this.lock = new SharedLock(storageKey, {storage: this.storage});\n\n    this.pid = options.pid || null; // pass pid to test out storage lock contention scenarios\n\n    this.memQueue = [];\n};\n\n/**\n * Add one item to queues (memory and localStorage). The queued entry includes\n * the given item along with an auto-generated ID and a \"flush-after\" timestamp.\n * It is expected that the item will be sent over the network and dequeued\n * before the flush-after time; if this doesn't happen it is considered orphaned\n * (e.g., the original tab where it was enqueued got closed before it could be\n * sent) and the item can be sent by any tab that finds it in localStorage.\n *\n * The final callback param is called with a param indicating success or\n * failure of the enqueue operation; it is asynchronous because the localStorage\n * lock is asynchronous.\n */\nRequestQueue.prototype.enqueue = function(item, flushInterval, cb) {\n    var queueEntry = {\n        'id': cheap_guid(),\n        'flushAfter': new Date().getTime() + flushInterval * 2,\n        'payload': item\n    };\n\n    this.lock.withLock(_.bind(function lockAcquired() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue.push(queueEntry);\n            succeeded = this.saveToStorage(storedQueue);\n            if (succeeded) {\n                // only add to in-memory queue when storage succeeds\n                this.memQueue.push(queueEntry);\n            }\n        } catch(err) {\n            this.reportError('Error enqueueing item', item);\n            succeeded = false;\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), _.bind(function lockFailure(err) {\n        this.reportError('Error acquiring storage lock', err);\n        if (cb) {\n            cb(false);\n        }\n    }, this), this.pid);\n};\n\n/**\n * Read out the given number of queue entries. If this.memQueue\n * has fewer than batchSize items, then look for \"orphaned\" items\n * in the persisted queue (items where the 'flushAfter' time has\n * already passed).\n */\nRequestQueue.prototype.fillBatch = function(batchSize) {\n    var batch = this.memQueue.slice(0, batchSize);\n    if (batch.length < batchSize) {\n        // don't need lock just to read events; localStorage is thread-safe\n        // and the worst that could happen is a duplicate send of some\n        // orphaned events, which will be deduplicated on the server side\n        var storedQueue = this.readFromStorage();\n        if (storedQueue.length) {\n            // item IDs already in batch; don't duplicate out of storage\n            var idsInBatch = {}; // poor man's Set\n            _.each(batch, function(item) { idsInBatch[item['id']] = true; });\n\n            for (var i = 0; i < storedQueue.length; i++) {\n                var item = storedQueue[i];\n                if (new Date().getTime() > item['flushAfter'] && !idsInBatch[item['id']]) {\n                    item.orphaned = true;\n                    batch.push(item);\n                    if (batch.length >= batchSize) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    return batch;\n};\n\n/**\n * Remove items with matching 'id' from array (immutably)\n * also remove any item without a valid id (e.g., malformed\n * storage entries).\n */\nvar filterOutIDsAndInvalid = function(items, idSet) {\n    var filteredItems = [];\n    _.each(items, function(item) {\n        if (item['id'] && !idSet[item['id']]) {\n            filteredItems.push(item);\n        }\n    });\n    return filteredItems;\n};\n\n/**\n * Remove items with matching IDs from both in-memory queue\n * and persisted queue\n */\nRequestQueue.prototype.removeItemsByID = function(ids, cb) {\n    var idSet = {}; // poor man's Set\n    _.each(ids, function(id) { idSet[id] = true; });\n\n    this.memQueue = filterOutIDsAndInvalid(this.memQueue, idSet);\n\n    var removeFromStorage = _.bind(function() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue = filterOutIDsAndInvalid(storedQueue, idSet);\n            succeeded = this.saveToStorage(storedQueue);\n\n            // an extra check: did storage report success but somehow\n            // the items are still there?\n            if (succeeded) {\n                storedQueue = this.readFromStorage();\n                for (var i = 0; i < storedQueue.length; i++) {\n                    var item = storedQueue[i];\n                    if (item['id'] && !!idSet[item['id']]) {\n                        this.reportError('Item not removed from storage');\n                        return false;\n                    }\n                }\n            }\n        } catch(err) {\n            this.reportError('Error removing items', ids);\n            succeeded = false;\n        }\n        return succeeded;\n    }, this);\n\n    this.lock.withLock(function lockAcquired() {\n        var succeeded = removeFromStorage();\n        if (cb) {\n            cb(succeeded);\n        }\n    }, _.bind(function lockFailure(err) {\n        var succeeded = false;\n        this.reportError('Error acquiring storage lock', err);\n        if (!localStorageSupported(this.storage, true)) {\n            // Looks like localStorage writes have stopped working sometime after\n            // initialization (probably full), and so nobody can acquire locks\n            // anymore. Consider it temporarily safe to remove items without the\n            // lock, since nobody's writing successfully anyway.\n            succeeded = removeFromStorage();\n            if (!succeeded) {\n                // OK, we couldn't even write out the smaller queue. Try clearing it\n                // entirely.\n                try {\n                    this.storage.removeItem(this.storageKey);\n                } catch(err) {\n                    this.reportError('Error clearing queue', err);\n                }\n            }\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), this.pid);\n};\n\n// internal helper for RequestQueue.updatePayloads\nvar updatePayloads = function(existingItems, itemsToUpdate) {\n    var newItems = [];\n    _.each(existingItems, function(item) {\n        var id = item['id'];\n        if (id in itemsToUpdate) {\n            var newPayload = itemsToUpdate[id];\n            if (newPayload !== null) {\n                item['payload'] = newPayload;\n                newItems.push(item);\n            }\n        } else {\n            // no update\n            newItems.push(item);\n        }\n    });\n    return newItems;\n};\n\n/**\n * Update payloads of given items in both in-memory queue and\n * persisted queue. Items set to null are removed from queues.\n */\nRequestQueue.prototype.updatePayloads = function(itemsToUpdate, cb) {\n    this.memQueue = updatePayloads(this.memQueue, itemsToUpdate);\n    this.lock.withLock(_.bind(function lockAcquired() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue = updatePayloads(storedQueue, itemsToUpdate);\n            succeeded = this.saveToStorage(storedQueue);\n        } catch(err) {\n            this.reportError('Error updating items', itemsToUpdate);\n            succeeded = false;\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), _.bind(function lockFailure(err) {\n        this.reportError('Error acquiring storage lock', err);\n        if (cb) {\n            cb(false);\n        }\n    }, this), this.pid);\n};\n\n/**\n * Read and parse items array from localStorage entry, handling\n * malformed/missing data if necessary.\n */\nRequestQueue.prototype.readFromStorage = function() {\n    var storageEntry;\n    try {\n        storageEntry = this.storage.getItem(this.storageKey);\n        if (storageEntry) {\n            storageEntry = JSONParse(storageEntry);\n            if (!_.isArray(storageEntry)) {\n                this.reportError('Invalid storage entry:', storageEntry);\n                storageEntry = null;\n            }\n        }\n    } catch (err) {\n        this.reportError('Error retrieving queue', err);\n        storageEntry = null;\n    }\n    return storageEntry || [];\n};\n\n/**\n * Serialize the given items array to localStorage.\n */\nRequestQueue.prototype.saveToStorage = function(queue) {\n    try {\n        this.storage.setItem(this.storageKey, JSONStringify(queue));\n        return true;\n    } catch (err) {\n        this.reportError('Error saving queue', err);\n        return false;\n    }\n};\n\n/**\n * Clear out queues (memory and localStorage).\n */\nRequestQueue.prototype.clear = function() {\n    this.memQueue = [];\n    this.storage.removeItem(this.storageKey);\n};\n\n// eslint-disable-line camelcase\n\n// maximum interval between request retries after exponential backoff\nvar MAX_RETRY_INTERVAL_MS = 10 * 60 * 1000; // 10 minutes\n\nvar logger = console_with_prefix('batch');\n\n/**\n * RequestBatcher: manages the queueing, flushing, retry etc of requests of one\n * type (events, people, groups).\n * Uses RequestQueue to manage the backing store.\n * @constructor\n */\nvar RequestBatcher = function(storageKey, options) {\n    this.errorReporter = options.errorReporter;\n    this.queue = new RequestQueue(storageKey, {\n        errorReporter: _.bind(this.reportError, this),\n        storage: options.storage\n    });\n\n    this.libConfig = options.libConfig;\n    this.sendRequest = options.sendRequestFunc;\n    this.beforeSendHook = options.beforeSendHook;\n    this.stopAllBatching = options.stopAllBatchingFunc;\n\n    // seed variable batch size + flush interval with configured values\n    this.batchSize = this.libConfig['batch_size'];\n    this.flushInterval = this.libConfig['batch_flush_interval_ms'];\n\n    this.stopped = !this.libConfig['batch_autostart'];\n    this.consecutiveRemovalFailures = 0;\n};\n\n/**\n * Add one item to queue.\n */\nRequestBatcher.prototype.enqueue = function(item, cb) {\n    this.queue.enqueue(item, this.flushInterval, cb);\n};\n\n/**\n * Start flushing batches at the configured time interval. Must call\n * this method upon SDK init in order to send anything over the network.\n */\nRequestBatcher.prototype.start = function() {\n    this.stopped = false;\n    this.consecutiveRemovalFailures = 0;\n    this.flush();\n};\n\n/**\n * Stop flushing batches. Can be restarted by calling start().\n */\nRequestBatcher.prototype.stop = function() {\n    this.stopped = true;\n    if (this.timeoutID) {\n        clearTimeout(this.timeoutID);\n        this.timeoutID = null;\n    }\n};\n\n/**\n * Clear out queue.\n */\nRequestBatcher.prototype.clear = function() {\n    this.queue.clear();\n};\n\n/**\n * Restore batch size configuration to whatever is set in the main SDK.\n */\nRequestBatcher.prototype.resetBatchSize = function() {\n    this.batchSize = this.libConfig['batch_size'];\n};\n\n/**\n * Restore flush interval time configuration to whatever is set in the main SDK.\n */\nRequestBatcher.prototype.resetFlush = function() {\n    this.scheduleFlush(this.libConfig['batch_flush_interval_ms']);\n};\n\n/**\n * Schedule the next flush in the given number of milliseconds.\n */\nRequestBatcher.prototype.scheduleFlush = function(flushMS) {\n    this.flushInterval = flushMS;\n    if (!this.stopped) { // don't schedule anymore if batching has been stopped\n        this.timeoutID = setTimeout(_.bind(this.flush, this), this.flushInterval);\n    }\n};\n\n/**\n * Flush one batch to network. Depending on success/failure modes, it will either\n * remove the batch from the queue or leave it in for retry, and schedule the next\n * flush. In cases of most network or API failures, it will back off exponentially\n * when retrying.\n * @param {Object} [options]\n * @param {boolean} [options.sendBeacon] - whether to send batch with\n * navigator.sendBeacon (only useful for sending batches before page unloads, as\n * sendBeacon offers no callbacks or status indications)\n */\nRequestBatcher.prototype.flush = function(options) {\n    try {\n\n        if (this.requestInProgress) {\n            logger.log('Flush: Request already in progress');\n            return;\n        }\n\n        options = options || {};\n        var timeoutMS = this.libConfig['batch_request_timeout_ms'];\n        var startTime = new Date().getTime();\n        var currentBatchSize = this.batchSize;\n        var batch = this.queue.fillBatch(currentBatchSize);\n        var dataForRequest = [];\n        var transformedItems = {};\n        _.each(batch, function(item) {\n            var payload = item['payload'];\n            if (this.beforeSendHook && !item.orphaned) {\n                payload = this.beforeSendHook(payload);\n            }\n            if (payload) {\n                dataForRequest.push(payload);\n            }\n            transformedItems[item['id']] = payload;\n        }, this);\n        if (dataForRequest.length < 1) {\n            this.resetFlush();\n            return; // nothing to do\n        }\n\n        this.requestInProgress = true;\n\n        var batchSendCallback = _.bind(function(res) {\n            this.requestInProgress = false;\n\n            try {\n\n                // handle API response in a try-catch to make sure we can reset the\n                // flush operation if something goes wrong\n\n                var removeItemsFromQueue = false;\n                if (options.unloading) {\n                    // update persisted data to include hook transformations\n                    this.queue.updatePayloads(transformedItems);\n                } else if (\n                    _.isObject(res) &&\n                    res.error === 'timeout' &&\n                    new Date().getTime() - startTime >= timeoutMS\n                ) {\n                    this.reportError('Network timeout; retrying');\n                    this.flush();\n                } else if (\n                    _.isObject(res) &&\n                    res.xhr_req &&\n                    (res.xhr_req['status'] >= 500 || res.xhr_req['status'] === 429 || res.error === 'timeout')\n                ) {\n                    // network or API error, or 429 Too Many Requests, retry\n                    var retryMS = this.flushInterval * 2;\n                    var headers = res.xhr_req['responseHeaders'];\n                    if (headers) {\n                        var retryAfter = headers['Retry-After'];\n                        if (retryAfter) {\n                            retryMS = (parseInt(retryAfter, 10) * 1000) || retryMS;\n                        }\n                    }\n                    retryMS = Math.min(MAX_RETRY_INTERVAL_MS, retryMS);\n                    this.reportError('Error; retry in ' + retryMS + ' ms');\n                    this.scheduleFlush(retryMS);\n                } else if (_.isObject(res) && res.xhr_req && res.xhr_req['status'] === 413) {\n                    // 413 Payload Too Large\n                    if (batch.length > 1) {\n                        var halvedBatchSize = Math.max(1, Math.floor(currentBatchSize / 2));\n                        this.batchSize = Math.min(this.batchSize, halvedBatchSize, batch.length - 1);\n                        this.reportError('413 response; reducing batch size to ' + this.batchSize);\n                        this.resetFlush();\n                    } else {\n                        this.reportError('Single-event request too large; dropping', batch);\n                        this.resetBatchSize();\n                        removeItemsFromQueue = true;\n                    }\n                } else {\n                    // successful network request+response; remove each item in batch from queue\n                    // (even if it was e.g. a 400, in which case retrying won't help)\n                    removeItemsFromQueue = true;\n                }\n\n                if (removeItemsFromQueue) {\n                    this.queue.removeItemsByID(\n                        _.map(batch, function(item) { return item['id']; }),\n                        _.bind(function(succeeded) {\n                            if (succeeded) {\n                                this.consecutiveRemovalFailures = 0;\n                                this.flush(); // handle next batch if the queue isn't empty\n                            } else {\n                                this.reportError('Failed to remove items from queue');\n                                if (++this.consecutiveRemovalFailures > 5) {\n                                    this.reportError('Too many queue failures; disabling batching system.');\n                                    this.stopAllBatching();\n                                } else {\n                                    this.resetFlush();\n                                }\n                            }\n                        }, this)\n                    );\n                }\n\n            } catch(err) {\n                this.reportError('Error handling API response', err);\n                this.resetFlush();\n            }\n        }, this);\n        var requestOptions = {\n            method: 'POST',\n            verbose: true,\n            ignore_json_errors: true, // eslint-disable-line camelcase\n            timeout_ms: timeoutMS // eslint-disable-line camelcase\n        };\n        if (options.unloading) {\n            requestOptions.transport = 'sendBeacon';\n        }\n        logger.log('MIXPANEL REQUEST:', dataForRequest);\n        this.sendRequest(dataForRequest, requestOptions, batchSendCallback);\n\n    } catch(err) {\n        this.reportError('Error flushing request queue', err);\n        this.resetFlush();\n    }\n};\n\n/**\n * Log error to global logger and optional user-defined logger.\n */\nRequestBatcher.prototype.reportError = function(msg, err) {\n    logger.error.apply(logger.error, arguments);\n    if (this.errorReporter) {\n        try {\n            if (!(err instanceof Error)) {\n                err = new Error(msg);\n            }\n            this.errorReporter(msg, err);\n        } catch(err) {\n            logger.error(err);\n        }\n    }\n};\n\n/**\n * A function used to track a Mixpanel event (e.g. MixpanelLib.track)\n * @callback trackFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after tracking the event.\n */\n\n/** Public **/\n\nvar GDPR_DEFAULT_PERSISTENCE_PREFIX = '__mp_opt_in_out_';\n\n/**\n * Opt the user in to data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {trackFunction} [options.track] - function used for tracking a Mixpanel event to record the opt-in action\n * @param {string} [options.trackEventName] - event name to be used for tracking the opt-in action\n * @param {Object} [options.trackProperties] - set of properties to be tracked along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction optIn(token, options) {\n    _optInOut(true, token, options);\n}\n\n/**\n * Opt the user out of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\nfunction optOut(token, options) {\n    _optInOut(false, token, options);\n}\n\n/**\n * Check whether the user has opted in to data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\nfunction hasOptedIn(token, options) {\n    return _getStorageValue(token, options) === '1';\n}\n\n/**\n * Check whether the user has opted out of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {boolean} [options.ignoreDnt] - flag to ignore browser DNT settings and always return false\n * @returns {boolean} whether the user has opted out of the given opt type\n */\nfunction hasOptedOut(token, options) {\n    if (_hasDoNotTrackFlagOn(options)) {\n        console.warn('This browser has \"Do Not Track\" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the \"Do Not Track\" browser setting, initialize the Mixpanel instance with the config \"ignore_dnt: true\"');\n        return true;\n    }\n    var optedOut = _getStorageValue(token, options) === '0';\n    if (optedOut) {\n        console.warn('You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data.');\n    }\n    return optedOut;\n}\n\n/**\n * Wrap a MixpanelLib method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelLib(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this.get_config(name);\n    });\n}\n\n/**\n * Wrap a MixpanelPeople method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelPeople(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this._get_config(name);\n    });\n}\n\n/**\n * Wrap a MixpanelGroup method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelGroup(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this._get_config(name);\n    });\n}\n\n/**\n * Clear the user's opt in/out status of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction clearOptInOut(token, options) {\n    options = options || {};\n    _getStorage(options).remove(\n        _getStorageKey(token, options), !!options.crossSubdomainCookie, options.cookieDomain\n    );\n}\n\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either _.cookie or _.localstorage\n */\nfunction _getStorage(options) {\n    options = options || {};\n    return options.persistenceType === 'localStorage' ? _.localStorage : _.cookie;\n}\n\n/**\n * Get the name of the cookie that is used for the given opt type (tracking, cookie, etc.)\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\nfunction _getStorageKey(token, options) {\n    options = options || {};\n    return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token;\n}\n\n/**\n * Get the value of the cookie that is used for the given opt type (tracking, cookie, etc.)\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\nfunction _getStorageValue(token, options) {\n    return _getStorage(options).get(_getStorageKey(token, options));\n}\n\n/**\n * Check whether the user has set the DNT/doNotTrack setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @param {boolean} [options.ignoreDnt] - flag to ignore browser DNT settings and always return false\n * @returns {boolean} whether the DNT setting is true\n */\nfunction _hasDoNotTrackFlagOn(options) {\n    if (options && options.ignoreDnt) {\n        return false;\n    }\n    var win = (options && options.window) || window$1;\n    var nav = win['navigator'] || {};\n    var hasDntOn = false;\n\n    _.each([\n        nav['doNotTrack'], // standard\n        nav['msDoNotTrack'],\n        win['doNotTrack']\n    ], function(dntValue) {\n        if (_.includes([true, 1, '1', 'yes'], dntValue)) {\n            hasDntOn = true;\n        }\n    });\n\n    return hasDntOn;\n}\n\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {trackFunction} [options.track] - function used for tracking a Mixpanel event to record the opt-in action\n * @param {string} [options.trackEventName] - event name to be used for tracking the opt-in action\n * @param {Object} [options.trackProperties] - set of properties to be tracked along with the opt-in action\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction _optInOut(optValue, token, options) {\n    if (!_.isString(token) || !token.length) {\n        console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token');\n        return;\n    }\n\n    options = options || {};\n\n    _getStorage(options).set(\n        _getStorageKey(token, options),\n        optValue ? 1 : 0,\n        _.isNumber(options.cookieExpiration) ? options.cookieExpiration : null,\n        !!options.crossSubdomainCookie,\n        !!options.secureCookie,\n        !!options.crossSiteCookie,\n        options.cookieDomain\n    );\n\n    if (options.track && optValue) { // only track event if opting in (optValue=true)\n        options.track(options.trackEventName || '$opt_in', options.trackProperties, {\n            'send_immediately': true\n        });\n    }\n}\n\n/**\n * Wrap a method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param {function} getConfigValue - getter function for the Mixpanel API token and other options to be used with opt-out check\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction _addOptOutCheck(method, getConfigValue) {\n    return function() {\n        var optedOut = false;\n\n        try {\n            var token = getConfigValue.call(this, 'token');\n            var ignoreDnt = getConfigValue.call(this, 'ignore_dnt');\n            var persistenceType = getConfigValue.call(this, 'opt_out_tracking_persistence_type');\n            var persistencePrefix = getConfigValue.call(this, 'opt_out_tracking_cookie_prefix');\n            var win = getConfigValue.call(this, 'window'); // used to override window during browser tests\n\n            if (token) { // if there was an issue getting the token, continue method execution as normal\n                optedOut = hasOptedOut(token, {\n                    ignoreDnt: ignoreDnt,\n                    persistenceType: persistenceType,\n                    persistencePrefix: persistencePrefix,\n                    window: win\n                });\n            }\n        } catch(err) {\n            console.error('Unexpected error when checking tracking opt-out status: ' + err);\n        }\n\n        if (!optedOut) {\n            return method.apply(this, arguments);\n        }\n\n        var callback = arguments[arguments.length - 1];\n        if (typeof(callback) === 'function') {\n            callback(0);\n        }\n\n        return;\n    };\n}\n\n/** @const */ var SET_ACTION      = '$set';\n/** @const */ var SET_ONCE_ACTION = '$set_once';\n/** @const */ var UNSET_ACTION    = '$unset';\n/** @const */ var ADD_ACTION      = '$add';\n/** @const */ var APPEND_ACTION   = '$append';\n/** @const */ var UNION_ACTION    = '$union';\n/** @const */ var REMOVE_ACTION   = '$remove';\n/** @const */ var DELETE_ACTION   = '$delete';\n\n// Common internal methods for mixpanel.people and mixpanel.group APIs.\n// These methods shouldn't involve network I/O.\nvar apiActions = {\n    set_action: function(prop, to) {\n        var data = {};\n        var $set = {};\n        if (_.isObject(prop)) {\n            _.each(prop, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $set[k] = v;\n                }\n            }, this);\n        } else {\n            $set[prop] = to;\n        }\n\n        data[SET_ACTION] = $set;\n        return data;\n    },\n\n    unset_action: function(prop) {\n        var data = {};\n        var $unset = [];\n        if (!_.isArray(prop)) {\n            prop = [prop];\n        }\n\n        _.each(prop, function(k) {\n            if (!this._is_reserved_property(k)) {\n                $unset.push(k);\n            }\n        }, this);\n\n        data[UNSET_ACTION] = $unset;\n        return data;\n    },\n\n    set_once_action: function(prop, to) {\n        var data = {};\n        var $set_once = {};\n        if (_.isObject(prop)) {\n            _.each(prop, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $set_once[k] = v;\n                }\n            }, this);\n        } else {\n            $set_once[prop] = to;\n        }\n        data[SET_ONCE_ACTION] = $set_once;\n        return data;\n    },\n\n    union_action: function(list_name, values) {\n        var data = {};\n        var $union = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $union[k] = _.isArray(v) ? v : [v];\n                }\n            }, this);\n        } else {\n            $union[list_name] = _.isArray(values) ? values : [values];\n        }\n        data[UNION_ACTION] = $union;\n        return data;\n    },\n\n    append_action: function(list_name, value) {\n        var data = {};\n        var $append = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $append[k] = v;\n                }\n            }, this);\n        } else {\n            $append[list_name] = value;\n        }\n        data[APPEND_ACTION] = $append;\n        return data;\n    },\n\n    remove_action: function(list_name, value) {\n        var data = {};\n        var $remove = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $remove[k] = v;\n                }\n            }, this);\n        } else {\n            $remove[list_name] = value;\n        }\n        data[REMOVE_ACTION] = $remove;\n        return data;\n    },\n\n    delete_action: function() {\n        var data = {};\n        data[DELETE_ACTION] = '';\n        return data;\n    }\n};\n\n/**\n * Mixpanel Group Object\n * @constructor\n */\nvar MixpanelGroup = function() {};\n\n_.extend(MixpanelGroup.prototype, apiActions);\n\nMixpanelGroup.prototype._init = function(mixpanel_instance, group_key, group_id) {\n    this._mixpanel = mixpanel_instance;\n    this._group_key = group_key;\n    this._group_id = group_id;\n};\n\n/**\n * Set properties on a group.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').set('Location', '405 Howard');\n *\n *     // or set multiple properties at once\n *     mixpanel.get_group('company', 'mixpanel').set({\n *          'Location': '405 Howard',\n *          'Founded' : 2009,\n *     });\n *     // properties can be strings, integers, dates, or lists\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.set = addOptOutCheckMixpanelGroup(function(prop, to, callback) {\n    var data = this.set_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/**\n * Set properties on a group, only if they do not yet exist.\n * This will not overwrite previous group property values, unlike\n * group.set().\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').set_once('Location', '405 Howard');\n *\n *     // or set multiple properties at once\n *     mixpanel.get_group('company', 'mixpanel').set_once({\n *          'Location': '405 Howard',\n *          'Founded' : 2009,\n *     });\n *     // properties can be strings, integers, lists or dates\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.set_once = addOptOutCheckMixpanelGroup(function(prop, to, callback) {\n    var data = this.set_once_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/**\n * Unset properties on a group permanently.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').unset('Founded');\n *\n * @param {String} prop The name of the property.\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.unset = addOptOutCheckMixpanelGroup(function(prop, callback) {\n    var data = this.unset_action(prop);\n    return this._send_request(data, callback);\n});\n\n/**\n * Merge a given list with a list-valued group property, excluding duplicate values.\n *\n * ### Usage:\n *\n *     // merge a value to a list, creating it if needed\n *     mixpanel.get_group('company', 'mixpanel').union('Location', ['San Francisco', 'London']);\n *\n * @param {String} list_name Name of the property.\n * @param {Array} values Values to merge with the given property\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.union = addOptOutCheckMixpanelGroup(function(list_name, values, callback) {\n    if (_.isObject(list_name)) {\n        callback = values;\n    }\n    var data = this.union_action(list_name, values);\n    return this._send_request(data, callback);\n});\n\n/**\n * Permanently delete a group.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').delete();\n *\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype['delete'] = addOptOutCheckMixpanelGroup(function(callback) {\n    // bracket notation above prevents a minification error related to reserved words\n    var data = this.delete_action();\n    return this._send_request(data, callback);\n});\n\n/**\n * Remove a property from a group. The value will be ignored if doesn't exist.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').remove('Location', 'London');\n *\n * @param {String} list_name Name of the property.\n * @param {Object} value Value to remove from the given group property\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.remove = addOptOutCheckMixpanelGroup(function(list_name, value, callback) {\n    var data = this.remove_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\nMixpanelGroup.prototype._send_request = function(data, callback) {\n    data['$group_key'] = this._group_key;\n    data['$group_id'] = this._group_id;\n    data['$token'] = this._get_config('token');\n\n    var date_encoded_data = _.encodeDates(data);\n    return this._mixpanel._track_or_batch({\n        type: 'groups',\n        data: date_encoded_data,\n        endpoint: this._get_config('api_host') + '/groups/',\n        batcher: this._mixpanel.request_batchers.groups\n    }, callback);\n};\n\nMixpanelGroup.prototype._is_reserved_property = function(prop) {\n    return prop === '$group_key' || prop === '$group_id';\n};\n\nMixpanelGroup.prototype._get_config = function(conf) {\n    return this._mixpanel.get_config(conf);\n};\n\nMixpanelGroup.prototype.toString = function() {\n    return this._mixpanel.toString() + '.group.' + this._group_key + '.' + this._group_id;\n};\n\n// MixpanelGroup Exports\nMixpanelGroup.prototype['remove']   = MixpanelGroup.prototype.remove;\nMixpanelGroup.prototype['set']      = MixpanelGroup.prototype.set;\nMixpanelGroup.prototype['set_once'] = MixpanelGroup.prototype.set_once;\nMixpanelGroup.prototype['union']    = MixpanelGroup.prototype.union;\nMixpanelGroup.prototype['unset']    = MixpanelGroup.prototype.unset;\nMixpanelGroup.prototype['toString'] = MixpanelGroup.prototype.toString;\n\n/**\n * Mixpanel People Object\n * @constructor\n */\nvar MixpanelPeople = function() {};\n\n_.extend(MixpanelPeople.prototype, apiActions);\n\nMixpanelPeople.prototype._init = function(mixpanel_instance) {\n    this._mixpanel = mixpanel_instance;\n};\n\n/*\n* Set properties on a user record.\n*\n* ### Usage:\n*\n*     mixpanel.people.set('gender', 'm');\n*\n*     // or set multiple properties at once\n*     mixpanel.people.set({\n*         'Company': 'Acme',\n*         'Plan': 'Premium',\n*         'Upgrade date': new Date()\n*     });\n*     // properties can be strings, integers, dates, or lists\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.set = addOptOutCheckMixpanelPeople(function(prop, to, callback) {\n    var data = this.set_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    // make sure that the referrer info has been updated and saved\n    if (this._get_config('save_referrer')) {\n        this._mixpanel['persistence'].update_referrer_info(document.referrer);\n    }\n\n    // update $set object with default people properties\n    data[SET_ACTION] = _.extend(\n        {},\n        _.info.people_properties(),\n        this._mixpanel['persistence'].get_referrer_info(),\n        data[SET_ACTION]\n    );\n    return this._send_request(data, callback);\n});\n\n/*\n* Set properties on a user record, only if they do not yet exist.\n* This will not overwrite previous people property values, unlike\n* people.set().\n*\n* ### Usage:\n*\n*     mixpanel.people.set_once('First Login Date', new Date());\n*\n*     // or set multiple properties at once\n*     mixpanel.people.set_once({\n*         'First Login Date': new Date(),\n*         'Starting Plan': 'Premium'\n*     });\n*\n*     // properties can be strings, integers or dates\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.set_once = addOptOutCheckMixpanelPeople(function(prop, to, callback) {\n    var data = this.set_once_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/*\n* Unset properties on a user record (permanently removes the properties and their values from a profile).\n*\n* ### Usage:\n*\n*     mixpanel.people.unset('gender');\n*\n*     // or unset multiple properties at once\n*     mixpanel.people.unset(['gender', 'Company']);\n*\n* @param {Array|String} prop If a string, this is the name of the property. If an array, this is a list of property names.\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.unset = addOptOutCheckMixpanelPeople(function(prop, callback) {\n    var data = this.unset_action(prop);\n    return this._send_request(data, callback);\n});\n\n/*\n* Increment/decrement numeric people analytics properties.\n*\n* ### Usage:\n*\n*     mixpanel.people.increment('page_views', 1);\n*\n*     // or, for convenience, if you're just incrementing a counter by\n*     // 1, you can simply do\n*     mixpanel.people.increment('page_views');\n*\n*     // to decrement a counter, pass a negative number\n*     mixpanel.people.increment('credits_left', -1);\n*\n*     // like mixpanel.people.set(), you can increment multiple\n*     // properties at once:\n*     mixpanel.people.increment({\n*         counter1: 1,\n*         counter2: 6\n*     });\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and numeric values.\n* @param {Number} [by] An amount to increment the given property\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.increment = addOptOutCheckMixpanelPeople(function(prop, by, callback) {\n    var data = {};\n    var $add = {};\n    if (_.isObject(prop)) {\n        _.each(prop, function(v, k) {\n            if (!this._is_reserved_property(k)) {\n                if (isNaN(parseFloat(v))) {\n                    console.error('Invalid increment value passed to mixpanel.people.increment - must be a number');\n                    return;\n                } else {\n                    $add[k] = v;\n                }\n            }\n        }, this);\n        callback = by;\n    } else {\n        // convenience: mixpanel.people.increment('property'); will\n        // increment 'property' by 1\n        if (_.isUndefined(by)) {\n            by = 1;\n        }\n        $add[prop] = by;\n    }\n    data[ADD_ACTION] = $add;\n\n    return this._send_request(data, callback);\n});\n\n/*\n* Append a value to a list-valued people analytics property.\n*\n* ### Usage:\n*\n*     // append a value to a list, creating it if needed\n*     mixpanel.people.append('pages_visited', 'homepage');\n*\n*     // like mixpanel.people.set(), you can append multiple\n*     // properties at once:\n*     mixpanel.people.append({\n*         list1: 'bob',\n*         list2: 123\n*     });\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] value An item to append to the list\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.append = addOptOutCheckMixpanelPeople(function(list_name, value, callback) {\n    if (_.isObject(list_name)) {\n        callback = value;\n    }\n    var data = this.append_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\n/*\n* Remove a value from a list-valued people analytics property.\n*\n* ### Usage:\n*\n*     mixpanel.people.remove('School', 'UCB');\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] value Item to remove from the list\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.remove = addOptOutCheckMixpanelPeople(function(list_name, value, callback) {\n    if (_.isObject(list_name)) {\n        callback = value;\n    }\n    var data = this.remove_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\n/*\n* Merge a given list with a list-valued people analytics property,\n* excluding duplicate values.\n*\n* ### Usage:\n*\n*     // merge a value to a list, creating it if needed\n*     mixpanel.people.union('pages_visited', 'homepage');\n*\n*     // like mixpanel.people.set(), you can append multiple\n*     // properties at once:\n*     mixpanel.people.union({\n*         list1: 'bob',\n*         list2: 123\n*     });\n*\n*     // like mixpanel.people.append(), you can append multiple\n*     // values to the same list:\n*     mixpanel.people.union({\n*         list1: ['bob', 'billy']\n*     });\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] Value / values to merge with the given property\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.union = addOptOutCheckMixpanelPeople(function(list_name, values, callback) {\n    if (_.isObject(list_name)) {\n        callback = values;\n    }\n    var data = this.union_action(list_name, values);\n    return this._send_request(data, callback);\n});\n\n/*\n* Record that you have charged the current user a certain amount\n* of money. Charges recorded with track_charge() will appear in the\n* Mixpanel revenue report.\n*\n* ### Usage:\n*\n*     // charge a user $50\n*     mixpanel.people.track_charge(50);\n*\n*     // charge a user $30.50 on the 2nd of january\n*     mixpanel.people.track_charge(30.50, {\n*         '$time': new Date('jan 1 2012')\n*     });\n*\n* @param {Number} amount The amount of money charged to the current user\n* @param {Object} [properties] An associative array of properties associated with the charge\n* @param {Function} [callback] If provided, the callback will be called when the server responds\n*/\nMixpanelPeople.prototype.track_charge = addOptOutCheckMixpanelPeople(function(amount, properties, callback) {\n    if (!_.isNumber(amount)) {\n        amount = parseFloat(amount);\n        if (isNaN(amount)) {\n            console.error('Invalid value passed to mixpanel.people.track_charge - must be a number');\n            return;\n        }\n    }\n\n    return this.append('$transactions', _.extend({\n        '$amount': amount\n    }, properties), callback);\n});\n\n/*\n* Permanently clear all revenue report transactions from the\n* current user's people analytics profile.\n*\n* ### Usage:\n*\n*     mixpanel.people.clear_charges();\n*\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.clear_charges = function(callback) {\n    return this.set('$transactions', [], callback);\n};\n\n/*\n* Permanently deletes the current people analytics profile from\n* Mixpanel (using the current distinct_id).\n*\n* ### Usage:\n*\n*     // remove the all data you have stored about the current user\n*     mixpanel.people.delete_user();\n*\n*/\nMixpanelPeople.prototype.delete_user = function() {\n    if (!this._identify_called()) {\n        console.error('mixpanel.people.delete_user() requires you to call identify() first');\n        return;\n    }\n    var data = {'$delete': this._mixpanel.get_distinct_id()};\n    return this._send_request(data);\n};\n\nMixpanelPeople.prototype.toString = function() {\n    return this._mixpanel.toString() + '.people';\n};\n\nMixpanelPeople.prototype._send_request = function(data, callback) {\n    data['$token'] = this._get_config('token');\n    data['$distinct_id'] = this._mixpanel.get_distinct_id();\n    var device_id = this._mixpanel.get_property('$device_id');\n    var user_id = this._mixpanel.get_property('$user_id');\n    var had_persisted_distinct_id = this._mixpanel.get_property('$had_persisted_distinct_id');\n    if (device_id) {\n        data['$device_id'] = device_id;\n    }\n    if (user_id) {\n        data['$user_id'] = user_id;\n    }\n    if (had_persisted_distinct_id) {\n        data['$had_persisted_distinct_id'] = had_persisted_distinct_id;\n    }\n\n    var date_encoded_data = _.encodeDates(data);\n\n    if (!this._identify_called()) {\n        this._enqueue(data);\n        if (!_.isUndefined(callback)) {\n            if (this._get_config('verbose')) {\n                callback({status: -1, error: null});\n            } else {\n                callback(-1);\n            }\n        }\n        return _.truncate(date_encoded_data, 255);\n    }\n\n    return this._mixpanel._track_or_batch({\n        type: 'people',\n        data: date_encoded_data,\n        endpoint: this._get_config('api_host') + '/engage/',\n        batcher: this._mixpanel.request_batchers.people\n    }, callback);\n};\n\nMixpanelPeople.prototype._get_config = function(conf_var) {\n    return this._mixpanel.get_config(conf_var);\n};\n\nMixpanelPeople.prototype._identify_called = function() {\n    return this._mixpanel._flags.identify_called === true;\n};\n\n// Queue up engage operations if identify hasn't been called yet.\nMixpanelPeople.prototype._enqueue = function(data) {\n    if (SET_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(SET_ACTION, data);\n    } else if (SET_ONCE_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(SET_ONCE_ACTION, data);\n    } else if (UNSET_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(UNSET_ACTION, data);\n    } else if (ADD_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(ADD_ACTION, data);\n    } else if (APPEND_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(APPEND_ACTION, data);\n    } else if (REMOVE_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(REMOVE_ACTION, data);\n    } else if (UNION_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(UNION_ACTION, data);\n    } else {\n        console.error('Invalid call to _enqueue():', data);\n    }\n};\n\nMixpanelPeople.prototype._flush_one_queue = function(action, action_method, callback, queue_to_params_fn) {\n    var _this = this;\n    var queued_data = _.extend({}, this._mixpanel['persistence']._get_queue(action));\n    var action_params = queued_data;\n\n    if (!_.isUndefined(queued_data) && _.isObject(queued_data) && !_.isEmptyObject(queued_data)) {\n        _this._mixpanel['persistence']._pop_from_people_queue(action, queued_data);\n        if (queue_to_params_fn) {\n            action_params = queue_to_params_fn(queued_data);\n        }\n        action_method.call(_this, action_params, function(response, data) {\n            // on bad response, we want to add it back to the queue\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(action, queued_data);\n            }\n            if (!_.isUndefined(callback)) {\n                callback(response, data);\n            }\n        });\n    }\n};\n\n// Flush queued engage operations - order does not matter,\n// and there are network level race conditions anyway\nMixpanelPeople.prototype._flush = function(\n    _set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback\n) {\n    var _this = this;\n    var $append_queue = this._mixpanel['persistence']._get_queue(APPEND_ACTION);\n    var $remove_queue = this._mixpanel['persistence']._get_queue(REMOVE_ACTION);\n\n    this._flush_one_queue(SET_ACTION, this.set, _set_callback);\n    this._flush_one_queue(SET_ONCE_ACTION, this.set_once, _set_once_callback);\n    this._flush_one_queue(UNSET_ACTION, this.unset, _unset_callback, function(queue) { return _.keys(queue); });\n    this._flush_one_queue(ADD_ACTION, this.increment, _add_callback);\n    this._flush_one_queue(UNION_ACTION, this.union, _union_callback);\n\n    // we have to fire off each $append individually since there is\n    // no concat method server side\n    if (!_.isUndefined($append_queue) && _.isArray($append_queue) && $append_queue.length) {\n        var $append_item;\n        var append_callback = function(response, data) {\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(APPEND_ACTION, $append_item);\n            }\n            if (!_.isUndefined(_append_callback)) {\n                _append_callback(response, data);\n            }\n        };\n        for (var i = $append_queue.length - 1; i >= 0; i--) {\n            $append_item = $append_queue.pop();\n            if (!_.isEmptyObject($append_item)) {\n                _this.append($append_item, append_callback);\n            }\n        }\n        // Save the shortened append queue\n        _this._mixpanel['persistence'].save();\n    }\n\n    // same for $remove\n    if (!_.isUndefined($remove_queue) && _.isArray($remove_queue) && $remove_queue.length) {\n        var $remove_item;\n        var remove_callback = function(response, data) {\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(REMOVE_ACTION, $remove_item);\n            }\n            if (!_.isUndefined(_remove_callback)) {\n                _remove_callback(response, data);\n            }\n        };\n        for (var j = $remove_queue.length - 1; j >= 0; j--) {\n            $remove_item = $remove_queue.pop();\n            if (!_.isEmptyObject($remove_item)) {\n                _this.remove($remove_item, remove_callback);\n            }\n        }\n        _this._mixpanel['persistence'].save();\n    }\n};\n\nMixpanelPeople.prototype._is_reserved_property = function(prop) {\n    return prop === '$distinct_id' || prop === '$token' || prop === '$device_id' || prop === '$user_id' || prop === '$had_persisted_distinct_id';\n};\n\n// MixpanelPeople Exports\nMixpanelPeople.prototype['set']           = MixpanelPeople.prototype.set;\nMixpanelPeople.prototype['set_once']      = MixpanelPeople.prototype.set_once;\nMixpanelPeople.prototype['unset']         = MixpanelPeople.prototype.unset;\nMixpanelPeople.prototype['increment']     = MixpanelPeople.prototype.increment;\nMixpanelPeople.prototype['append']        = MixpanelPeople.prototype.append;\nMixpanelPeople.prototype['remove']        = MixpanelPeople.prototype.remove;\nMixpanelPeople.prototype['union']         = MixpanelPeople.prototype.union;\nMixpanelPeople.prototype['track_charge']  = MixpanelPeople.prototype.track_charge;\nMixpanelPeople.prototype['clear_charges'] = MixpanelPeople.prototype.clear_charges;\nMixpanelPeople.prototype['delete_user']   = MixpanelPeople.prototype.delete_user;\nMixpanelPeople.prototype['toString']      = MixpanelPeople.prototype.toString;\n\n/*\n * Constants\n */\n/** @const */ var SET_QUEUE_KEY          = '__mps';\n/** @const */ var SET_ONCE_QUEUE_KEY     = '__mpso';\n/** @const */ var UNSET_QUEUE_KEY        = '__mpus';\n/** @const */ var ADD_QUEUE_KEY          = '__mpa';\n/** @const */ var APPEND_QUEUE_KEY       = '__mpap';\n/** @const */ var REMOVE_QUEUE_KEY       = '__mpr';\n/** @const */ var UNION_QUEUE_KEY        = '__mpu';\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\n/** @const */ var PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id';\n/** @const */ var ALIAS_ID_KEY           = '__alias';\n/** @const */ var EVENT_TIMERS_KEY       = '__timers';\n/** @const */ var RESERVED_PROPERTIES = [\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    UNSET_QUEUE_KEY,\n    ADD_QUEUE_KEY,\n    APPEND_QUEUE_KEY,\n    REMOVE_QUEUE_KEY,\n    UNION_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    EVENT_TIMERS_KEY\n];\n\n/**\n * Mixpanel Persistence Object\n * @constructor\n */\nvar MixpanelPersistence = function(config) {\n    this['props'] = {};\n    this.campaign_params_saved = false;\n\n    if (config['persistence_name']) {\n        this.name = 'mp_' + config['persistence_name'];\n    } else {\n        this.name = 'mp_' + config['token'] + '_mixpanel';\n    }\n\n    var storage_type = config['persistence'];\n    if (storage_type !== 'cookie' && storage_type !== 'localStorage') {\n        console.critical('Unknown persistence type ' + storage_type + '; falling back to cookie');\n        storage_type = config['persistence'] = 'cookie';\n    }\n\n    if (storage_type === 'localStorage' && _.localStorage.is_supported()) {\n        this.storage = _.localStorage;\n    } else {\n        this.storage = _.cookie;\n    }\n\n    this.load();\n    this.update_config(config);\n    this.upgrade(config);\n    this.save();\n};\n\nMixpanelPersistence.prototype.properties = function() {\n    var p = {};\n    // Filter out reserved properties\n    _.each(this['props'], function(v, k) {\n        if (!_.include(RESERVED_PROPERTIES, k)) {\n            p[k] = v;\n        }\n    });\n    return p;\n};\n\nMixpanelPersistence.prototype.load = function() {\n    if (this.disabled) { return; }\n\n    var entry = this.storage.parse(this.name);\n\n    if (entry) {\n        this['props'] = _.extend({}, entry);\n    }\n};\n\nMixpanelPersistence.prototype.upgrade = function(config) {\n    var upgrade_from_old_lib = config['upgrade'],\n        old_cookie_name,\n        old_cookie;\n\n    if (upgrade_from_old_lib) {\n        old_cookie_name = 'mp_super_properties';\n        // Case where they had a custom cookie name before.\n        if (typeof(upgrade_from_old_lib) === 'string') {\n            old_cookie_name = upgrade_from_old_lib;\n        }\n\n        old_cookie = this.storage.parse(old_cookie_name);\n\n        // remove the cookie\n        this.storage.remove(old_cookie_name);\n        this.storage.remove(old_cookie_name, true);\n\n        if (old_cookie) {\n            this['props'] = _.extend(\n                this['props'],\n                old_cookie['all'],\n                old_cookie['events']\n            );\n        }\n    }\n\n    if (!config['cookie_name'] && config['name'] !== 'mixpanel') {\n        // special case to handle people with cookies of the form\n        // mp_TOKEN_INSTANCENAME from the first release of this library\n        old_cookie_name = 'mp_' + config['token'] + '_' + config['name'];\n        old_cookie = this.storage.parse(old_cookie_name);\n\n        if (old_cookie) {\n            this.storage.remove(old_cookie_name);\n            this.storage.remove(old_cookie_name, true);\n\n            // Save the prop values that were in the cookie from before -\n            // this should only happen once as we delete the old one.\n            this.register_once(old_cookie);\n        }\n    }\n\n    if (this.storage === _.localStorage) {\n        old_cookie = _.cookie.parse(this.name);\n\n        _.cookie.remove(this.name);\n        _.cookie.remove(this.name, true);\n\n        if (old_cookie) {\n            this.register_once(old_cookie);\n        }\n    }\n};\n\nMixpanelPersistence.prototype.save = function() {\n    if (this.disabled) { return; }\n    this.storage.set(\n        this.name,\n        _.JSONEncode(this['props']),\n        this.expire_days,\n        this.cross_subdomain,\n        this.secure,\n        this.cross_site,\n        this.cookie_domain\n    );\n};\n\nMixpanelPersistence.prototype.remove = function() {\n    // remove both domain and subdomain cookies\n    this.storage.remove(this.name, false, this.cookie_domain);\n    this.storage.remove(this.name, true, this.cookie_domain);\n};\n\n// removes the storage entry and deletes all loaded data\n// forced name for tests\nMixpanelPersistence.prototype.clear = function() {\n    this.remove();\n    this['props'] = {};\n};\n\n/**\n* @param {Object} props\n* @param {*=} default_value\n* @param {number=} days\n*/\nMixpanelPersistence.prototype.register_once = function(props, default_value, days) {\n    if (_.isObject(props)) {\n        if (typeof(default_value) === 'undefined') { default_value = 'None'; }\n        this.expire_days = (typeof(days) === 'undefined') ? this.default_expiry : days;\n\n        _.each(props, function(val, prop) {\n            if (!this['props'].hasOwnProperty(prop) || this['props'][prop] === default_value) {\n                this['props'][prop] = val;\n            }\n        }, this);\n\n        this.save();\n\n        return true;\n    }\n    return false;\n};\n\n/**\n* @param {Object} props\n* @param {number=} days\n*/\nMixpanelPersistence.prototype.register = function(props, days) {\n    if (_.isObject(props)) {\n        this.expire_days = (typeof(days) === 'undefined') ? this.default_expiry : days;\n\n        _.extend(this['props'], props);\n\n        this.save();\n\n        return true;\n    }\n    return false;\n};\n\nMixpanelPersistence.prototype.unregister = function(prop) {\n    if (prop in this['props']) {\n        delete this['props'][prop];\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.update_campaign_params = function() {\n    if (!this.campaign_params_saved) {\n        this.register_once(_.info.campaignParams());\n        this.campaign_params_saved = true;\n    }\n};\n\nMixpanelPersistence.prototype.update_search_keyword = function(referrer) {\n    this.register(_.info.searchInfo(referrer));\n};\n\n// EXPORTED METHOD, we test this directly.\nMixpanelPersistence.prototype.update_referrer_info = function(referrer) {\n    // If referrer doesn't exist, we want to note the fact that it was type-in traffic.\n    this.register_once({\n        '$initial_referrer': referrer || '$direct',\n        '$initial_referring_domain': _.info.referringDomain(referrer) || '$direct'\n    }, '');\n};\n\nMixpanelPersistence.prototype.get_referrer_info = function() {\n    return _.strip_empty_properties({\n        '$initial_referrer': this['props']['$initial_referrer'],\n        '$initial_referring_domain': this['props']['$initial_referring_domain']\n    });\n};\n\n// safely fills the passed in object with stored properties,\n// does not override any properties defined in both\n// returns the passed in object\nMixpanelPersistence.prototype.safe_merge = function(props) {\n    _.each(this['props'], function(val, prop) {\n        if (!(prop in props)) {\n            props[prop] = val;\n        }\n    });\n\n    return props;\n};\n\nMixpanelPersistence.prototype.update_config = function(config) {\n    this.default_expiry = this.expire_days = config['cookie_expiration'];\n    this.set_disabled(config['disable_persistence']);\n    this.set_cookie_domain(config['cookie_domain']);\n    this.set_cross_site(config['cross_site_cookie']);\n    this.set_cross_subdomain(config['cross_subdomain_cookie']);\n    this.set_secure(config['secure_cookie']);\n};\n\nMixpanelPersistence.prototype.set_disabled = function(disabled) {\n    this.disabled = disabled;\n    if (this.disabled) {\n        this.remove();\n    } else {\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cookie_domain = function(cookie_domain) {\n    if (cookie_domain !== this.cookie_domain) {\n        this.remove();\n        this.cookie_domain = cookie_domain;\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cross_site = function(cross_site) {\n    if (cross_site !== this.cross_site) {\n        this.cross_site = cross_site;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cross_subdomain = function(cross_subdomain) {\n    if (cross_subdomain !== this.cross_subdomain) {\n        this.cross_subdomain = cross_subdomain;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.get_cross_subdomain = function() {\n    return this.cross_subdomain;\n};\n\nMixpanelPersistence.prototype.set_secure = function(secure) {\n    if (secure !== this.secure) {\n        this.secure = secure ? true : false;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._add_to_people_queue = function(queue, data) {\n    var q_key = this._get_queue_key(queue),\n        q_data = data[queue],\n        set_q = this._get_or_create_queue(SET_ACTION),\n        set_once_q = this._get_or_create_queue(SET_ONCE_ACTION),\n        unset_q = this._get_or_create_queue(UNSET_ACTION),\n        add_q = this._get_or_create_queue(ADD_ACTION),\n        union_q = this._get_or_create_queue(UNION_ACTION),\n        remove_q = this._get_or_create_queue(REMOVE_ACTION, []),\n        append_q = this._get_or_create_queue(APPEND_ACTION, []);\n\n    if (q_key === SET_QUEUE_KEY) {\n        // Update the set queue - we can override any existing values\n        _.extend(set_q, q_data);\n        // if there was a pending increment, override it\n        // with the set.\n        this._pop_from_people_queue(ADD_ACTION, q_data);\n        // if there was a pending union, override it\n        // with the set.\n        this._pop_from_people_queue(UNION_ACTION, q_data);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === SET_ONCE_QUEUE_KEY) {\n        // only queue the data if there is not already a set_once call for it.\n        _.each(q_data, function(v, k) {\n            if (!(k in set_once_q)) {\n                set_once_q[k] = v;\n            }\n        });\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === UNSET_QUEUE_KEY) {\n        _.each(q_data, function(prop) {\n\n            // undo previously-queued actions on this key\n            _.each([set_q, set_once_q, add_q, union_q], function(enqueued_obj) {\n                if (prop in enqueued_obj) {\n                    delete enqueued_obj[prop];\n                }\n            });\n            _.each(append_q, function(append_obj) {\n                if (prop in append_obj) {\n                    delete append_obj[prop];\n                }\n            });\n\n            unset_q[prop] = true;\n\n        });\n    } else if (q_key === ADD_QUEUE_KEY) {\n        _.each(q_data, function(v, k) {\n            // If it exists in the set queue, increment\n            // the value\n            if (k in set_q) {\n                set_q[k] += v;\n            } else {\n                // If it doesn't exist, update the add\n                // queue\n                if (!(k in add_q)) {\n                    add_q[k] = 0;\n                }\n                add_q[k] += v;\n            }\n        }, this);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === UNION_QUEUE_KEY) {\n        _.each(q_data, function(v, k) {\n            if (_.isArray(v)) {\n                if (!(k in union_q)) {\n                    union_q[k] = [];\n                }\n                // We may send duplicates, the server will dedup them.\n                union_q[k] = union_q[k].concat(v);\n            }\n        });\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === REMOVE_QUEUE_KEY) {\n        remove_q.push(q_data);\n        this._pop_from_people_queue(APPEND_ACTION, q_data);\n    } else if (q_key === APPEND_QUEUE_KEY) {\n        append_q.push(q_data);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    }\n\n    console.log('MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):');\n    console.log(data);\n\n    this.save();\n};\n\nMixpanelPersistence.prototype._pop_from_people_queue = function(queue, data) {\n    var q = this._get_queue(queue);\n    if (!_.isUndefined(q)) {\n        _.each(data, function(v, k) {\n            if (queue === APPEND_ACTION || queue === REMOVE_ACTION) {\n                // list actions: only remove if both k+v match\n                // e.g. remove should not override append in a case like\n                // append({foo: 'bar'}); remove({foo: 'qux'})\n                _.each(q, function(queued_action) {\n                    if (queued_action[k] === v) {\n                        delete queued_action[k];\n                    }\n                });\n            } else {\n                delete q[k];\n            }\n        }, this);\n\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._get_queue_key = function(queue) {\n    if (queue === SET_ACTION) {\n        return SET_QUEUE_KEY;\n    } else if (queue === SET_ONCE_ACTION) {\n        return SET_ONCE_QUEUE_KEY;\n    } else if (queue === UNSET_ACTION) {\n        return UNSET_QUEUE_KEY;\n    } else if (queue === ADD_ACTION) {\n        return ADD_QUEUE_KEY;\n    } else if (queue === APPEND_ACTION) {\n        return APPEND_QUEUE_KEY;\n    } else if (queue === REMOVE_ACTION) {\n        return REMOVE_QUEUE_KEY;\n    } else if (queue === UNION_ACTION) {\n        return UNION_QUEUE_KEY;\n    } else {\n        console.error('Invalid queue:', queue);\n    }\n};\n\nMixpanelPersistence.prototype._get_queue = function(queue) {\n    return this['props'][this._get_queue_key(queue)];\n};\nMixpanelPersistence.prototype._get_or_create_queue = function(queue, default_val) {\n    var key = this._get_queue_key(queue);\n    default_val = _.isUndefined(default_val) ? {} : default_val;\n\n    return this['props'][key] || (this['props'][key] = default_val);\n};\n\nMixpanelPersistence.prototype.set_event_timer = function(event_name, timestamp) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {};\n    timers[event_name] = timestamp;\n    this['props'][EVENT_TIMERS_KEY] = timers;\n    this.save();\n};\n\nMixpanelPersistence.prototype.remove_event_timer = function(event_name) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {};\n    var timestamp = timers[event_name];\n    if (!_.isUndefined(timestamp)) {\n        delete this['props'][EVENT_TIMERS_KEY][event_name];\n        this.save();\n    }\n    return timestamp;\n};\n\n/*\n * Mixpanel JS Library\n *\n * Copyright 2012, Mixpanel, Inc. All Rights Reserved\n * http://mixpanel.com/\n *\n * Includes portions of Underscore.js\n * http://documentcloud.github.com/underscore/\n * (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.\n * Released under the MIT License.\n */\n\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @output_file_name mixpanel-2.8.min.js\n// ==/ClosureCompiler==\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\nvar init_type;       // MODULE or SNIPPET loader\nvar mixpanel_master; // main mixpanel instance / object\nvar INIT_MODULE  = 0;\nvar INIT_SNIPPET = 1;\n\nvar IDENTITY_FUNC = function(x) {return x;};\nvar NOOP_FUNC = function() {};\n\n/** @const */ var PRIMARY_INSTANCE_NAME = 'mixpanel';\n/** @const */ var PAYLOAD_TYPE_BASE64   = 'base64';\n/** @const */ var PAYLOAD_TYPE_JSON     = 'json';\n\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\nvar USE_XHR = (window$1.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest());\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nvar ENQUEUE_REQUESTS = !USE_XHR && (userAgent.indexOf('MSIE') === -1) && (userAgent.indexOf('Mozilla') === -1);\n\n// save reference to navigator.sendBeacon so it can be minified\nvar sendBeacon = null;\nif (navigator['sendBeacon']) {\n    sendBeacon = function() {\n        // late reference to navigator.sendBeacon to allow patching/spying\n        return navigator['sendBeacon'].apply(navigator, arguments);\n    };\n}\n\n/*\n * Module-level globals\n */\nvar DEFAULT_CONFIG = {\n    'api_host':                          'https://api-js.mixpanel.com',\n    'api_method':                        'POST',\n    'api_transport':                     'XHR',\n    'api_payload_format':                PAYLOAD_TYPE_BASE64,\n    'app_host':                          'https://mixpanel.com',\n    'cdn':                               'https://cdn.mxpnl.com',\n    'cross_site_cookie':                 false,\n    'cross_subdomain_cookie':            true,\n    'error_reporter':                    NOOP_FUNC,\n    'persistence':                       'cookie',\n    'persistence_name':                  '',\n    'cookie_domain':                     '',\n    'cookie_name':                       '',\n    'loaded':                            NOOP_FUNC,\n    'store_google':                      true,\n    'save_referrer':                     true,\n    'test':                              false,\n    'verbose':                           false,\n    'img':                               false,\n    'debug':                             false,\n    'track_links_timeout':               300,\n    'cookie_expiration':                 365,\n    'upgrade':                           false,\n    'disable_persistence':               false,\n    'disable_cookie':                    false,\n    'secure_cookie':                     false,\n    'ip':                                true,\n    'opt_out_tracking_by_default':       false,\n    'opt_out_persistence_by_default':    false,\n    'opt_out_tracking_persistence_type': 'localStorage',\n    'opt_out_tracking_cookie_prefix':    null,\n    'property_blacklist':                [],\n    'xhr_headers':                       {}, // { header: value, header2: value }\n    'ignore_dnt':                        false,\n    'batch_requests':                    true,\n    'batch_size':                        50,\n    'batch_flush_interval_ms':           5000,\n    'batch_request_timeout_ms':          90000,\n    'batch_autostart':                   true,\n    'hooks':                             {}\n};\n\nvar DOM_LOADED = false;\n\n/**\n * Mixpanel Library Object\n * @constructor\n */\nvar MixpanelLib = function() {};\n\n\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of MixpanelLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.mixpanel as well as any additional instances\n * declared before this file has loaded).\n */\nvar create_mplib = function(token, config, name) {\n    var instance,\n        target = (name === PRIMARY_INSTANCE_NAME) ? mixpanel_master : mixpanel_master[name];\n\n    if (target && init_type === INIT_MODULE) {\n        instance = target;\n    } else {\n        if (target && !_.isArray(target)) {\n            console.error('You have already initialized ' + name);\n            return;\n        }\n        instance = new MixpanelLib();\n    }\n\n    instance._cached_groups = {}; // cache groups in a pool\n\n    instance._init(token, config, name);\n\n    instance['people'] = new MixpanelPeople();\n    instance['people']._init(instance);\n\n    // if any instance on the page has debug = true, we set the\n    // global debug to be true\n    Config.DEBUG = Config.DEBUG || instance.get_config('debug');\n\n    // if target is not defined, we called init after the lib already\n    // loaded, so there won't be an array of things to execute\n    if (!_.isUndefined(target) && _.isArray(target)) {\n        // Crunch through the people queue first - we queue this data up &\n        // flush on identify, so it's better to do all these operations first\n        instance._execute_array.call(instance['people'], target['people']);\n        instance._execute_array(target);\n    }\n\n    return instance;\n};\n\n// Initialization methods\n\n/**\n * This function initializes a new instance of the Mixpanel tracking object.\n * All new instances are added to the main mixpanel object as sub properties (such as\n * mixpanel.library_name) and also returned by this function. To define a\n * second instance on the page, you would call:\n *\n *     mixpanel.init('new token', { your: 'config' }, 'library_name');\n *\n * and use it like so:\n *\n *     mixpanel.library_name.track(...);\n *\n * @param {String} token   Your Mixpanel API token\n * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/mixpanel/mixpanel-js/blob/8b2e1f7b/src/mixpanel-core.js#L87-L110\">See a list of default config options</a>.\n * @param {String} [name]    The name for the new mixpanel instance that you want created\n */\nMixpanelLib.prototype.init = function (token, config, name) {\n    if (_.isUndefined(name)) {\n        this.report_error('You must name your new library: init(token, config, name)');\n        return;\n    }\n    if (name === PRIMARY_INSTANCE_NAME) {\n        this.report_error('You must initialize the main mixpanel object right after you include the Mixpanel js snippet');\n        return;\n    }\n\n    var instance = create_mplib(token, config, name);\n    mixpanel_master[name] = instance;\n    instance._loaded();\n\n    return instance;\n};\n\n// mixpanel._init(token:string, config:object, name:string)\n//\n// This function sets up the current instance of the mixpanel\n// library.  The difference between this method and the init(...)\n// method is this one initializes the actual instance, whereas the\n// init(...) method sets up a new library and calls _init on it.\n//\nMixpanelLib.prototype._init = function(token, config, name) {\n    config = config || {};\n\n    this['__loaded'] = true;\n    this['config'] = {};\n\n    var variable_features = {};\n\n    // default to JSON payload for standard mixpanel.com API hosts\n    if (!('api_payload_format' in config)) {\n        var api_host = config['api_host'] || DEFAULT_CONFIG['api_host'];\n        if (api_host.match(/\\.mixpanel\\.com$/)) {\n            variable_features['api_payload_format'] = PAYLOAD_TYPE_JSON;\n        }\n    }\n\n    this.set_config(_.extend({}, DEFAULT_CONFIG, variable_features, config, {\n        'name': name,\n        'token': token,\n        'callback_fn': ((name === PRIMARY_INSTANCE_NAME) ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc'\n    }));\n\n    this['_jsc'] = NOOP_FUNC;\n\n    this.__dom_loaded_queue = [];\n    this.__request_queue = [];\n    this.__disabled_events = [];\n    this._flags = {\n        'disable_all_events': false,\n        'identify_called': false\n    };\n\n    // set up request queueing/batching\n    this.request_batchers = {};\n    this._batch_requests = this.get_config('batch_requests');\n    if (this._batch_requests) {\n        if (!_.localStorage.is_supported(true) || !USE_XHR) {\n            this._batch_requests = false;\n            console.log('Turning off Mixpanel request-queueing; needs XHR and localStorage support');\n        } else {\n            this.init_batchers();\n            if (sendBeacon && window$1.addEventListener) {\n                // Before page closes or hides (user tabs away etc), attempt to flush any events\n                // queued up via navigator.sendBeacon. Since sendBeacon doesn't report success/failure,\n                // events will not be removed from the persistent store; if the site is loaded again,\n                // the events will be flushed again on startup and deduplicated on the Mixpanel server\n                // side.\n                // There is no reliable way to capture only page close events, so we lean on the\n                // visibilitychange and pagehide events as recommended at\n                // https://developer.mozilla.org/en-US/docs/Web/API/Window/unload_event#usage_notes.\n                // These events fire when the user clicks away from the current page/tab, so will occur\n                // more frequently than page unload, but are the only mechanism currently for capturing\n                // this scenario somewhat reliably.\n                var flush_on_unload = _.bind(function() {\n                    if (!this.request_batchers.events.stopped) {\n                        this.request_batchers.events.flush({unloading: true});\n                    }\n                }, this);\n                window$1.addEventListener('pagehide', function(ev) {\n                    if (ev['persisted']) {\n                        flush_on_unload();\n                    }\n                });\n                window$1.addEventListener('visibilitychange', function() {\n                    if (document$1['visibilityState'] === 'hidden') {\n                        flush_on_unload();\n                    }\n                });\n            }\n        }\n    }\n\n    this['persistence'] = this['cookie'] = new MixpanelPersistence(this['config']);\n    this.unpersisted_superprops = {};\n    this._gdpr_init();\n\n    var uuid = _.UUID();\n    if (!this.get_distinct_id()) {\n        // There is no need to set the distinct id\n        // or the device id if something was already stored\n        // in the persitence\n        this.register_once({\n            'distinct_id': uuid,\n            '$device_id': uuid\n        }, '');\n    }\n};\n\n// Private methods\n\nMixpanelLib.prototype._loaded = function() {\n    this.get_config('loaded')(this);\n    this._set_default_superprops();\n};\n\n// update persistence with info on referrer, UTM params, etc\nMixpanelLib.prototype._set_default_superprops = function() {\n    this['persistence'].update_search_keyword(document$1.referrer);\n    if (this.get_config('store_google')) {\n        this['persistence'].update_campaign_params();\n    }\n    if (this.get_config('save_referrer')) {\n        this['persistence'].update_referrer_info(document$1.referrer);\n    }\n};\n\nMixpanelLib.prototype._dom_loaded = function() {\n    _.each(this.__dom_loaded_queue, function(item) {\n        this._track_dom.apply(this, item);\n    }, this);\n\n    if (!this.has_opted_out_tracking()) {\n        _.each(this.__request_queue, function(item) {\n            this._send_request.apply(this, item);\n        }, this);\n    }\n\n    delete this.__dom_loaded_queue;\n    delete this.__request_queue;\n};\n\nMixpanelLib.prototype._track_dom = function(DomClass, args) {\n    if (this.get_config('img')) {\n        this.report_error('You can\\'t use DOM tracking functions with img = true.');\n        return false;\n    }\n\n    if (!DOM_LOADED) {\n        this.__dom_loaded_queue.push([DomClass, args]);\n        return false;\n    }\n\n    var dt = new DomClass().init(this);\n    return dt.track.apply(dt, args);\n};\n\n/**\n * _prepare_callback() should be called by callers of _send_request for use\n * as the callback argument.\n *\n * If there is no callback, this returns null.\n * If we are going to make XHR/XDR requests, this returns a function.\n * If we are going to use script tags, this returns a string to use as the\n * callback GET param.\n */\nMixpanelLib.prototype._prepare_callback = function(callback, data) {\n    if (_.isUndefined(callback)) {\n        return null;\n    }\n\n    if (USE_XHR) {\n        var callback_function = function(response) {\n            callback(response, data);\n        };\n        return callback_function;\n    } else {\n        // if the user gives us a callback, we store as a random\n        // property on this instances jsc function and update our\n        // callback string to reflect that.\n        var jsc = this['_jsc'];\n        var randomized_cb = '' + Math.floor(Math.random() * 100000000);\n        var callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']';\n        jsc[randomized_cb] = function(response) {\n            delete jsc[randomized_cb];\n            callback(response, data);\n        };\n        return callback_string;\n    }\n};\n\nMixpanelLib.prototype._send_request = function(url, data, options, callback) {\n    var succeeded = true;\n\n    if (ENQUEUE_REQUESTS) {\n        this.__request_queue.push(arguments);\n        return succeeded;\n    }\n\n    var DEFAULT_OPTIONS = {\n        method: this.get_config('api_method'),\n        transport: this.get_config('api_transport'),\n        verbose: this.get_config('verbose')\n    };\n    var body_data = null;\n\n    if (!callback && (_.isFunction(options) || typeof options === 'string')) {\n        callback = options;\n        options = null;\n    }\n    options = _.extend(DEFAULT_OPTIONS, options || {});\n    if (!USE_XHR) {\n        options.method = 'GET';\n    }\n    var use_post = options.method === 'POST';\n    var use_sendBeacon = sendBeacon && use_post && options.transport.toLowerCase() === 'sendbeacon';\n\n    // needed to correctly format responses\n    var verbose_mode = options.verbose;\n    if (data['verbose']) { verbose_mode = true; }\n\n    if (this.get_config('test')) { data['test'] = 1; }\n    if (verbose_mode) { data['verbose'] = 1; }\n    if (this.get_config('img')) { data['img'] = 1; }\n    if (!USE_XHR) {\n        if (callback) {\n            data['callback'] = callback;\n        } else if (verbose_mode || this.get_config('test')) {\n            // Verbose output (from verbose mode, or an error in test mode) is a json blob,\n            // which by itself is not valid javascript. Without a callback, this verbose output will\n            // cause an error when returned via jsonp, so we force a no-op callback param.\n            // See the ECMA script spec: http://www.ecma-international.org/ecma-262/5.1/#sec-12.4\n            data['callback'] = '(function(){})';\n        }\n    }\n\n    data['ip'] = this.get_config('ip')?1:0;\n    data['_'] = new Date().getTime().toString();\n\n    if (use_post) {\n        body_data = 'data=' + encodeURIComponent(data['data']);\n        delete data['data'];\n    }\n\n    url += '?' + _.HTTPBuildQuery(data);\n\n    var lib = this;\n    if ('img' in data) {\n        var img = document$1.createElement('img');\n        img.src = url;\n        document$1.body.appendChild(img);\n    } else if (use_sendBeacon) {\n        try {\n            succeeded = sendBeacon(url, body_data);\n        } catch (e) {\n            lib.report_error(e);\n            succeeded = false;\n        }\n        try {\n            if (callback) {\n                callback(succeeded ? 1 : 0);\n            }\n        } catch (e) {\n            lib.report_error(e);\n        }\n    } else if (USE_XHR) {\n        try {\n            var req = new XMLHttpRequest();\n            req.open(options.method, url, true);\n\n            var headers = this.get_config('xhr_headers');\n            if (use_post) {\n                headers['Content-Type'] = 'application/x-www-form-urlencoded';\n            }\n            _.each(headers, function(headerValue, headerName) {\n                req.setRequestHeader(headerName, headerValue);\n            });\n\n            if (options.timeout_ms && typeof req.timeout !== 'undefined') {\n                req.timeout = options.timeout_ms;\n                var start_time = new Date().getTime();\n            }\n\n            // send the mp_optout cookie\n            // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n            req.withCredentials = true;\n            req.onreadystatechange = function () {\n                if (req.readyState === 4) { // XMLHttpRequest.DONE == 4, except in safari 4\n                    if (req.status === 200) {\n                        if (callback) {\n                            if (verbose_mode) {\n                                var response;\n                                try {\n                                    response = _.JSONDecode(req.responseText);\n                                } catch (e) {\n                                    lib.report_error(e);\n                                    if (options.ignore_json_errors) {\n                                        response = req.responseText;\n                                    } else {\n                                        return;\n                                    }\n                                }\n                                callback(response);\n                            } else {\n                                callback(Number(req.responseText));\n                            }\n                        }\n                    } else {\n                        var error;\n                        if (\n                            req.timeout &&\n                            !req.status &&\n                            new Date().getTime() - start_time >= req.timeout\n                        ) {\n                            error = 'timeout';\n                        } else {\n                            error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText;\n                        }\n                        lib.report_error(error);\n                        if (callback) {\n                            if (verbose_mode) {\n                                callback({status: 0, error: error, xhr_req: req});\n                            } else {\n                                callback(0);\n                            }\n                        }\n                    }\n                }\n            };\n            req.send(body_data);\n        } catch (e) {\n            lib.report_error(e);\n            succeeded = false;\n        }\n    } else {\n        var script = document$1.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.defer = true;\n        script.src = url;\n        var s = document$1.getElementsByTagName('script')[0];\n        s.parentNode.insertBefore(script, s);\n    }\n\n    return succeeded;\n};\n\n/**\n * _execute_array() deals with processing any mixpanel function\n * calls that were called before the Mixpanel library were loaded\n * (and are thus stored in an array so they can be called later)\n *\n * Note: we fire off all the mixpanel function calls && user defined\n * functions BEFORE we fire off mixpanel tracking calls. This is so\n * identify/register/set_config calls can properly modify early\n * tracking calls.\n *\n * @param {Array} array\n */\nMixpanelLib.prototype._execute_array = function(array) {\n    var fn_name, alias_calls = [], other_calls = [], tracking_calls = [];\n    _.each(array, function(item) {\n        if (item) {\n            fn_name = item[0];\n            if (_.isArray(fn_name)) {\n                tracking_calls.push(item); // chained call e.g. mixpanel.get_group().set()\n            } else if (typeof(item) === 'function') {\n                item.call(this);\n            } else if (_.isArray(item) && fn_name === 'alias') {\n                alias_calls.push(item);\n            } else if (_.isArray(item) && fn_name.indexOf('track') !== -1 && typeof(this[fn_name]) === 'function') {\n                tracking_calls.push(item);\n            } else {\n                other_calls.push(item);\n            }\n        }\n    }, this);\n\n    var execute = function(calls, context) {\n        _.each(calls, function(item) {\n            if (_.isArray(item[0])) {\n                // chained call\n                var caller = context;\n                _.each(item, function(call) {\n                    caller = caller[call[0]].apply(caller, call.slice(1));\n                });\n            } else {\n                this[item[0]].apply(this, item.slice(1));\n            }\n        }, context);\n    };\n\n    execute(alias_calls, this);\n    execute(other_calls, this);\n    execute(tracking_calls, this);\n};\n\n// request queueing utils\n\nMixpanelLib.prototype.are_batchers_initialized = function() {\n    return !!this.request_batchers.events;\n};\n\nMixpanelLib.prototype.init_batchers = function() {\n    var token = this.get_config('token');\n    if (!this.are_batchers_initialized()) {\n        var batcher_for = _.bind(function(attrs) {\n            return new RequestBatcher(\n                '__mpq_' + token + attrs.queue_suffix,\n                {\n                    libConfig: this['config'],\n                    sendRequestFunc: _.bind(function(data, options, cb) {\n                        this._send_request(\n                            this.get_config('api_host') + attrs.endpoint,\n                            this._encode_data_for_request(data),\n                            options,\n                            this._prepare_callback(cb, data)\n                        );\n                    }, this),\n                    beforeSendHook: _.bind(function(item) {\n                        return this._run_hook('before_send_' + attrs.type, item);\n                    }, this),\n                    errorReporter: this.get_config('error_reporter'),\n                    stopAllBatchingFunc: _.bind(this.stop_batch_senders, this)\n                }\n            );\n        }, this);\n        this.request_batchers = {\n            events: batcher_for({type: 'events', endpoint: '/track/', queue_suffix: '_ev'}),\n            people: batcher_for({type: 'people', endpoint: '/engage/', queue_suffix: '_pp'}),\n            groups: batcher_for({type: 'groups', endpoint: '/groups/', queue_suffix: '_gr'})\n        };\n    }\n    if (this.get_config('batch_autostart')) {\n        this.start_batch_senders();\n    }\n};\n\nMixpanelLib.prototype.start_batch_senders = function() {\n    if (this.are_batchers_initialized()) {\n        this._batch_requests = true;\n        _.each(this.request_batchers, function(batcher) {\n            batcher.start();\n        });\n    }\n};\n\nMixpanelLib.prototype.stop_batch_senders = function() {\n    this._batch_requests = false;\n    _.each(this.request_batchers, function(batcher) {\n        batcher.stop();\n        batcher.clear();\n    });\n};\n\n/**\n * push() keeps the standard async-array-push\n * behavior around after the lib is loaded.\n * This is only useful for external integrations that\n * do not wish to rely on our convenience methods\n * (created in the snippet).\n *\n * ### Usage:\n *     mixpanel.push(['register', { a: 'b' }]);\n *\n * @param {Array} item A [function_name, args...] array to be executed\n */\nMixpanelLib.prototype.push = function(item) {\n    this._execute_array([item]);\n};\n\n/**\n * Disable events on the Mixpanel object. If passed no arguments,\n * this function disables tracking of any event. If passed an\n * array of event names, those events will be disabled, but other\n * events will continue to be tracked.\n *\n * Note: this function does not stop other mixpanel functions from\n * firing, such as register() or people.set().\n *\n * @param {Array} [events] An array of event names to disable\n */\nMixpanelLib.prototype.disable = function(events) {\n    if (typeof(events) === 'undefined') {\n        this._flags.disable_all_events = true;\n    } else {\n        this.__disabled_events = this.__disabled_events.concat(events);\n    }\n};\n\nMixpanelLib.prototype._encode_data_for_request = function(data) {\n    var encoded_data = _.JSONEncode(data);\n    if (this.get_config('api_payload_format') === PAYLOAD_TYPE_BASE64) {\n        encoded_data = _.base64Encode(encoded_data);\n    }\n    return {'data': encoded_data};\n};\n\n// internal method for handling track vs batch-enqueue logic\nMixpanelLib.prototype._track_or_batch = function(options, callback) {\n    var truncated_data = _.truncate(options.data, 255);\n    var endpoint = options.endpoint;\n    var batcher = options.batcher;\n    var should_send_immediately = options.should_send_immediately;\n    var send_request_options = options.send_request_options || {};\n    callback = callback || NOOP_FUNC;\n\n    var request_enqueued_or_initiated = true;\n    var send_request_immediately = _.bind(function() {\n        if (!send_request_options.skip_hooks) {\n            truncated_data = this._run_hook('before_send_' + options.type, truncated_data);\n        }\n        if (truncated_data) {\n            console.log('MIXPANEL REQUEST:');\n            console.log(truncated_data);\n            return this._send_request(\n                endpoint,\n                this._encode_data_for_request(truncated_data),\n                send_request_options,\n                this._prepare_callback(callback, truncated_data)\n            );\n        } else {\n            return null;\n        }\n    }, this);\n\n    if (this._batch_requests && !should_send_immediately) {\n        batcher.enqueue(truncated_data, function(succeeded) {\n            if (succeeded) {\n                callback(1, truncated_data);\n            } else {\n                send_request_immediately();\n            }\n        });\n    } else {\n        request_enqueued_or_initiated = send_request_immediately();\n    }\n\n    return request_enqueued_or_initiated && truncated_data;\n};\n\n/**\n * Track an event. This is the most important and\n * frequently used Mixpanel function.\n *\n * ### Usage:\n *\n *     // track an event named 'Registered'\n *     mixpanel.track('Registered', {'Gender': 'Male', 'Age': 21});\n *\n *     // track an event using navigator.sendBeacon\n *     mixpanel.track('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n *\n * To track link clicks or form submissions, see track_links() or track_forms().\n *\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Object} [options] Optional configuration for this track request.\n * @param {String} [options.transport] Transport method for network request ('xhr' or 'sendBeacon').\n * @param {Boolean} [options.send_immediately] Whether to bypass batching/queueing and send track request immediately.\n * @param {Function} [callback] If provided, the callback function will be called after tracking the event.\n * @returns {Boolean|Object} If the tracking request was successfully initiated/queued, an object\n * with the tracking payload sent to the API server is returned; otherwise false.\n */\nMixpanelLib.prototype.track = addOptOutCheckMixpanelLib(function(event_name, properties, options, callback) {\n    if (!callback && typeof options === 'function') {\n        callback = options;\n        options = null;\n    }\n    options = options || {};\n    var transport = options['transport']; // external API, don't minify 'transport' prop\n    if (transport) {\n        options.transport = transport; // 'transport' prop name can be minified internally\n    }\n    var should_send_immediately = options['send_immediately'];\n    if (typeof callback !== 'function') {\n        callback = NOOP_FUNC;\n    }\n\n    if (_.isUndefined(event_name)) {\n        this.report_error('No event name provided to mixpanel.track');\n        return;\n    }\n\n    if (this._event_is_disabled(event_name)) {\n        callback(0);\n        return;\n    }\n\n    // set defaults\n    properties = properties || {};\n    properties['token'] = this.get_config('token');\n\n    // set $duration if time_event was previously called for this event\n    var start_timestamp = this['persistence'].remove_event_timer(event_name);\n    if (!_.isUndefined(start_timestamp)) {\n        var duration_in_ms = new Date().getTime() - start_timestamp;\n        properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3));\n    }\n\n    this._set_default_superprops();\n\n    // note: extend writes to the first object, so lets make sure we\n    // don't write to the persistence properties object and info\n    // properties object by passing in a new object\n\n    // update properties with pageview info and super-properties\n    properties = _.extend(\n        {},\n        _.info.properties(),\n        this['persistence'].properties(),\n        this.unpersisted_superprops,\n        properties\n    );\n\n    var property_blacklist = this.get_config('property_blacklist');\n    if (_.isArray(property_blacklist)) {\n        _.each(property_blacklist, function(blacklisted_prop) {\n            delete properties[blacklisted_prop];\n        });\n    } else {\n        this.report_error('Invalid value for property_blacklist config: ' + property_blacklist);\n    }\n\n    var data = {\n        'event': event_name,\n        'properties': properties\n    };\n    var ret = this._track_or_batch({\n        type: 'events',\n        data: data,\n        endpoint: this.get_config('api_host') + '/track/',\n        batcher: this.request_batchers.events,\n        should_send_immediately: should_send_immediately,\n        send_request_options: options\n    }, callback);\n\n    return ret;\n});\n\n/**\n * Register the current user into one/many groups.\n *\n * ### Usage:\n *\n *      mixpanel.set_group('company', ['mixpanel', 'google']) // an array of IDs\n *      mixpanel.set_group('company', 'mixpanel')\n *      mixpanel.set_group('company', 128746312)\n *\n * @param {String} group_key Group key\n * @param {Array|String|Number} group_ids An array of group IDs, or a singular group ID\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n *\n */\nMixpanelLib.prototype.set_group = addOptOutCheckMixpanelLib(function(group_key, group_ids, callback) {\n    if (!_.isArray(group_ids)) {\n        group_ids = [group_ids];\n    }\n    var prop = {};\n    prop[group_key] = group_ids;\n    this.register(prop);\n    return this['people'].set(group_key, group_ids, callback);\n});\n\n/**\n * Add a new group for this user.\n *\n * ### Usage:\n *\n *      mixpanel.add_group('company', 'mixpanel')\n *\n * @param {String} group_key Group key\n * @param {*} group_id A valid Mixpanel property type\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.add_group = addOptOutCheckMixpanelLib(function(group_key, group_id, callback) {\n    var old_values = this.get_property(group_key);\n    if (old_values === undefined) {\n        var prop = {};\n        prop[group_key] = [group_id];\n        this.register(prop);\n    } else {\n        if (old_values.indexOf(group_id) === -1) {\n            old_values.push(group_id);\n            this.register(prop);\n        }\n    }\n    return this['people'].union(group_key, group_id, callback);\n});\n\n/**\n * Remove a group from this user.\n *\n * ### Usage:\n *\n *      mixpanel.remove_group('company', 'mixpanel')\n *\n * @param {String} group_key Group key\n * @param {*} group_id A valid Mixpanel property type\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.remove_group = addOptOutCheckMixpanelLib(function(group_key, group_id, callback) {\n    var old_value = this.get_property(group_key);\n    // if the value doesn't exist, the persistent store is unchanged\n    if (old_value !== undefined) {\n        var idx = old_value.indexOf(group_id);\n        if (idx > -1) {\n            old_value.splice(idx, 1);\n            this.register({group_key: old_value});\n        }\n        if (old_value.length === 0) {\n            this.unregister(group_key);\n        }\n    }\n    return this['people'].remove(group_key, group_id, callback);\n});\n\n/**\n * Track an event with specific groups.\n *\n * ### Usage:\n *\n *      mixpanel.track_with_groups('purchase', {'product': 'iphone'}, {'University': ['UCB', 'UCLA']})\n *\n * @param {String} event_name The name of the event (see `mixpanel.track()`)\n * @param {Object=} properties A set of properties to include with the event you're sending (see `mixpanel.track()`)\n * @param {Object=} groups An object mapping group name keys to one or more values\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.track_with_groups = addOptOutCheckMixpanelLib(function(event_name, properties, groups, callback) {\n    var tracking_props = _.extend({}, properties || {});\n    _.each(groups, function(v, k) {\n        if (v !== null && v !== undefined) {\n            tracking_props[k] = v;\n        }\n    });\n    return this.track(event_name, tracking_props, callback);\n});\n\nMixpanelLib.prototype._create_map_key = function (group_key, group_id) {\n    return group_key + '_' + JSON.stringify(group_id);\n};\n\nMixpanelLib.prototype._remove_group_from_cache = function (group_key, group_id) {\n    delete this._cached_groups[this._create_map_key(group_key, group_id)];\n};\n\n/**\n * Look up reference to a Mixpanel group\n *\n * ### Usage:\n *\n *       mixpanel.get_group(group_key, group_id)\n *\n * @param {String} group_key Group key\n * @param {Object} group_id A valid Mixpanel property type\n * @returns {Object} A MixpanelGroup identifier\n */\nMixpanelLib.prototype.get_group = function (group_key, group_id) {\n    var map_key = this._create_map_key(group_key, group_id);\n    var group = this._cached_groups[map_key];\n    if (group === undefined || group._group_key !== group_key || group._group_id !== group_id) {\n        group = new MixpanelGroup();\n        group._init(this, group_key, group_id);\n        this._cached_groups[map_key] = group;\n    }\n    return group;\n};\n\n/**\n * Track mp_page_view event. This is now ignored by the server.\n *\n * @param {String} [page] The url of the page to record. If you don't include this, it defaults to the current url.\n * @deprecated\n */\nMixpanelLib.prototype.track_pageview = function(page) {\n    if (_.isUndefined(page)) {\n        page = document$1.location.href;\n    }\n    this.track('mp_page_view', _.info.pageviewInfo(page));\n};\n\n/**\n * Track clicks on a set of document elements. Selector must be a\n * valid query. Elements must exist on the page at the time track_links is called.\n *\n * ### Usage:\n *\n *     // track click for link id #nav\n *     mixpanel.track_links('#nav', 'Clicked Nav Link');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the Mixpanel\n * servers to respond. If they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been tracked.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to mixpanel as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to track\n * @param {Object|Function} [properties] A properties object or function that returns a dictionary of properties when passed a DOMElement\n */\nMixpanelLib.prototype.track_links = function() {\n    return this._track_dom.call(this, LinkTracker, arguments);\n};\n\n/**\n * Track form submissions. Selector must be a valid query.\n *\n * ### Usage:\n *\n *     // track submission for form id 'register'\n *     mixpanel.track_forms('#register', 'Created Account');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the mixpanel\n * servers to respond, if they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been tracked.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to mixpanel as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to track\n * @param {Object|Function} [properties] This can be a set of properties, or a function that returns a set of properties after being passed a DOMElement\n */\nMixpanelLib.prototype.track_forms = function() {\n    return this._track_dom.call(this, FormTracker, arguments);\n};\n\n/**\n * Time an event by including the time between this call and a\n * later 'track' call for the same event in the properties sent\n * with the event.\n *\n * ### Usage:\n *\n *     // time an event named 'Registered'\n *     mixpanel.time_event('Registered');\n *     mixpanel.track('Registered', {'Gender': 'Male', 'Age': 21});\n *\n * When called for a particular event name, the next track call for that event\n * name will include the elapsed time between the 'time_event' and 'track'\n * calls. This value is stored as seconds in the '$duration' property.\n *\n * @param {String} event_name The name of the event.\n */\nMixpanelLib.prototype.time_event = function(event_name) {\n    if (_.isUndefined(event_name)) {\n        this.report_error('No event name provided to mixpanel.time_event');\n        return;\n    }\n\n    if (this._event_is_disabled(event_name)) {\n        return;\n    }\n\n    this['persistence'].set_event_timer(event_name,  new Date().getTime());\n};\n\nvar REGISTER_DEFAULTS = {\n    'persistent': true\n};\n/**\n * Helper to parse options param for register methods, maintaining\n * legacy support for plain \"days\" param instead of options object\n * @param {Number|Object} [days_or_options] 'days' option (Number), or Options object for register methods\n * @returns {Object} options object\n */\nvar options_for_register = function(days_or_options) {\n    var options;\n    if (_.isObject(days_or_options)) {\n        options = days_or_options;\n    } else if (!_.isUndefined(days_or_options)) {\n        options = {'days': days_or_options};\n    } else {\n        options = {};\n    }\n    return _.extend({}, REGISTER_DEFAULTS, options);\n};\n\n/**\n * Register a set of super properties, which are included with all\n * events. This will overwrite previous super property values.\n *\n * ### Usage:\n *\n *     // register 'Gender' as a super property\n *     mixpanel.register({'Gender': 'Female'});\n *\n *     // register several super properties when a user signs up\n *     mixpanel.register({\n *         'Email': 'jdoe@example.com',\n *         'Account Type': 'Free'\n *     });\n *\n *     // register only for the current pageload\n *     mixpanel.register({'Name': 'Pat'}, {persistent: false});\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {Number|Object} [days_or_options] Options object or number of days since the user's last visit to store the super properties (only valid for persisted props)\n * @param {boolean} [days_or_options.days] - number of days since the user's last visit to store the super properties (only valid for persisted props)\n * @param {boolean} [days_or_options.persistent=true] - whether to put in persistent storage (cookie/localStorage)\n */\nMixpanelLib.prototype.register = function(props, days_or_options) {\n    var options = options_for_register(days_or_options);\n    if (options['persistent']) {\n        this['persistence'].register(props, options['days']);\n    } else {\n        _.extend(this.unpersisted_superprops, props);\n    }\n};\n\n/**\n * Register a set of super properties only once. This will not\n * overwrite previous super property values, unlike register().\n *\n * ### Usage:\n *\n *     // register a super property for the first time only\n *     mixpanel.register_once({\n *         'First Login Date': new Date().toISOString()\n *     });\n *\n *     // register once, only for the current pageload\n *     mixpanel.register_once({\n *         'First interaction time': new Date().toISOString()\n *     }, 'None', {persistent: false});\n *\n * ### Notes:\n *\n * If default_value is specified, current super properties\n * with that value will be overwritten.\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n * @param {Number|Object} [days_or_options] Options object or number of days since the user's last visit to store the super properties (only valid for persisted props)\n * @param {boolean} [days_or_options.days] - number of days since the user's last visit to store the super properties (only valid for persisted props)\n * @param {boolean} [days_or_options.persistent=true] - whether to put in persistent storage (cookie/localStorage)\n */\nMixpanelLib.prototype.register_once = function(props, default_value, days_or_options) {\n    var options = options_for_register(days_or_options);\n    if (options['persistent']) {\n        this['persistence'].register_once(props, default_value, options['days']);\n    } else {\n        if (typeof(default_value) === 'undefined') {\n            default_value = 'None';\n        }\n        _.each(props, function(val, prop) {\n            if (!this.unpersisted_superprops.hasOwnProperty(prop) || this.unpersisted_superprops[prop] === default_value) {\n                this.unpersisted_superprops[prop] = val;\n            }\n        }, this);\n    }\n};\n\n/**\n * Delete a super property stored with the current user.\n *\n * @param {String} property The name of the super property to remove\n * @param {Object} [options]\n * @param {boolean} [options.persistent=true] - whether to look in persistent storage (cookie/localStorage)\n */\nMixpanelLib.prototype.unregister = function(property, options) {\n    options = options_for_register(options);\n    if (options['persistent']) {\n        this['persistence'].unregister(property);\n    } else {\n        delete this.unpersisted_superprops[property];\n    }\n};\n\nMixpanelLib.prototype._register_single = function(prop, value) {\n    var props = {};\n    props[prop] = value;\n    this.register(props);\n};\n\n/**\n * Identify a user with a unique ID to track user activity across\n * devices, tie a user to their events, and create a user profile.\n * If you never call this method, unique visitors are tracked using\n * a UUID generated the first time they visit the site.\n *\n * Call identify when you know the identity of the current user,\n * typically after login or signup. We recommend against using\n * identify for anonymous visitors to your site.\n *\n * ### Notes:\n * If your project has\n * <a href=\"https://help.mixpanel.com/hc/en-us/articles/360039133851\">ID Merge</a>\n * enabled, the identify method will connect pre- and\n * post-authentication events when appropriate.\n *\n * If your project does not have ID Merge enabled, identify will\n * change the user's local distinct_id to the unique ID you pass.\n * Events tracked prior to authentication will not be connected\n * to the same user identity. If ID Merge is disabled, alias can\n * be used to connect pre- and post-registration events.\n *\n * @param {String} [unique_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n */\nMixpanelLib.prototype.identify = function(\n    new_distinct_id, _set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback\n) {\n    // Optional Parameters\n    //  _set_callback:function  A callback to be run if and when the People set queue is flushed\n    //  _add_callback:function  A callback to be run if and when the People add queue is flushed\n    //  _append_callback:function  A callback to be run if and when the People append queue is flushed\n    //  _set_once_callback:function  A callback to be run if and when the People set_once queue is flushed\n    //  _union_callback:function  A callback to be run if and when the People union queue is flushed\n    //  _unset_callback:function  A callback to be run if and when the People unset queue is flushed\n\n    var previous_distinct_id = this.get_distinct_id();\n    this.register({'$user_id': new_distinct_id});\n\n    if (!this.get_property('$device_id')) {\n        // The persisted distinct id might not actually be a device id at all\n        // it might be a distinct id of the user from before\n        var device_id = previous_distinct_id;\n        this.register_once({\n            '$had_persisted_distinct_id': true,\n            '$device_id': device_id\n        }, '');\n    }\n\n    // identify only changes the distinct id if it doesn't match either the existing or the alias;\n    // if it's new, blow away the alias as well.\n    if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n        this.unregister(ALIAS_ID_KEY);\n        this.register({'distinct_id': new_distinct_id});\n    }\n    this._flags.identify_called = true;\n    // Flush any queued up people requests\n    this['people']._flush(_set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback);\n\n    // send an $identify event any time the distinct_id is changing - logic on the server\n    // will determine whether or not to do anything with it.\n    if (new_distinct_id !== previous_distinct_id) {\n        this.track('$identify', {\n            'distinct_id': new_distinct_id,\n            '$anon_distinct_id': previous_distinct_id\n        }, {skip_hooks: true});\n    }\n};\n\n/**\n * Clears super properties and generates a new random distinct_id for this instance.\n * Useful for clearing data when a user logs out.\n */\nMixpanelLib.prototype.reset = function() {\n    this['persistence'].clear();\n    this._flags.identify_called = false;\n    var uuid = _.UUID();\n    this.register_once({\n        'distinct_id': uuid,\n        '$device_id': uuid\n    }, '');\n};\n\n/**\n * Returns the current distinct id of the user. This is either the id automatically\n * generated by the library or the id that has been passed by a call to identify().\n *\n * ### Notes:\n *\n * get_distinct_id() can only be called after the Mixpanel library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // set distinct_id after the mixpanel library has loaded\n *     mixpanel.init('YOUR PROJECT TOKEN', {\n *         loaded: function(mixpanel) {\n *             distinct_id = mixpanel.get_distinct_id();\n *         }\n *     });\n */\nMixpanelLib.prototype.get_distinct_id = function() {\n    return this.get_property('distinct_id');\n};\n\n/**\n * The alias method creates an alias which Mixpanel will use to\n * remap one id to another. Multiple aliases can point to the\n * same identifier.\n *\n * The following is a valid use of alias:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // You can add multiple id aliases to the existing ID\n *     mixpanel.alias('newer_id', 'existing_id');\n *\n * Aliases can also be chained - the following is a valid example:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // chain newer_id - new_id - existing_id\n *     mixpanel.alias('newer_id', 'new_id');\n *\n * Aliases cannot point to multiple identifiers - the following\n * example will not work:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // this is invalid as 'new_id' already points to 'existing_id'\n *     mixpanel.alias('new_id', 'newer_id');\n *\n * ### Notes:\n *\n * If your project does not have\n * <a href=\"https://help.mixpanel.com/hc/en-us/articles/360039133851\">ID Merge</a>\n * enabled, the best practice is to call alias once when a unique\n * ID is first created for a user (e.g., when a user first registers\n * for an account). Do not use alias multiple times for a single\n * user without ID Merge enabled.\n *\n * @param {String} alias A unique identifier that you want to use for this user in the future.\n * @param {String} [original] The current identifier being used for this user.\n */\nMixpanelLib.prototype.alias = function(alias, original) {\n    // If the $people_distinct_id key exists in persistence, there has been a previous\n    // mixpanel.people.identify() call made for this user. It is VERY BAD to make an alias with\n    // this ID, as it will duplicate users.\n    if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n        this.report_error('Attempting to create alias for existing People user - aborting.');\n        return -2;\n    }\n\n    var _this = this;\n    if (_.isUndefined(original)) {\n        original = this.get_distinct_id();\n    }\n    if (alias !== original) {\n        this._register_single(ALIAS_ID_KEY, alias);\n        return this.track('$create_alias', {\n            'alias': alias,\n            'distinct_id': original\n        }, {\n            skip_hooks: true\n        }, function() {\n            // Flush the people queue\n            _this.identify(alias);\n        });\n    } else {\n        this.report_error('alias matches current distinct_id - skipping api call.');\n        this.identify(alias);\n        return -1;\n    }\n};\n\n/**\n * Provide a string to recognize the user by. The string passed to\n * this method will appear in the Mixpanel Streams product rather\n * than an automatically generated name. Name tags do not have to\n * be unique.\n *\n * This value will only be included in Streams data.\n *\n * @param {String} name_tag A human readable name for the user\n * @deprecated\n */\nMixpanelLib.prototype.name_tag = function(name_tag) {\n    this._register_single('mp_name_tag', name_tag);\n};\n\n/**\n * Update the configuration of a mixpanel library instance.\n *\n * The default config is:\n *\n *     {\n *       // HTTP method for tracking requests\n *       api_method: 'POST'\n *\n *       // transport for sending requests ('XHR' or 'sendBeacon')\n *       // NB: sendBeacon should only be used for scenarios such as\n *       // page unload where a \"best-effort\" attempt to send is\n *       // acceptable; the sendBeacon API does not support callbacks\n *       // or any way to know the result of the request. Mixpanel\n *       // tracking via sendBeacon will not support any event-\n *       // batching or retry mechanisms.\n *       api_transport: 'XHR'\n *\n *       // turn on request-batching/queueing/retry\n *       batch_requests: false,\n *\n *       // maximum number of events/updates to send in a single\n *       // network request\n *       batch_size: 50,\n *\n *       // milliseconds to wait between sending batch requests\n *       batch_flush_interval_ms: 5000,\n *\n *       // milliseconds to wait for network responses to batch requests\n *       // before they are considered timed-out and retried\n *       batch_request_timeout_ms: 90000,\n *\n *       // override value for cookie domain, only useful for ensuring\n *       // correct cross-subdomain cookies on unusual domains like\n *       // subdomain.mainsite.avocat.fr; NB this cannot be used to\n *       // set cookies on a different domain than the current origin\n *       cookie_domain: ''\n *\n *       // super properties cookie expiration (in days)\n *       cookie_expiration: 365\n *\n *       // if true, cookie will be set with SameSite=None; Secure\n *       // this is only useful in special situations, like embedded\n *       // 3rd-party iframes that set up a Mixpanel instance\n *       cross_site_cookie: false\n *\n *       // super properties span subdomains\n *       cross_subdomain_cookie: true\n *\n *       // debug mode\n *       debug: false\n *\n *       // if this is true, the mixpanel cookie or localStorage entry\n *       // will be deleted, and no user persistence will take place\n *       disable_persistence: false\n *\n *       // if this is true, Mixpanel will automatically determine\n *       // City, Region and Country data using the IP address of\n *       //the client\n *       ip: true\n *\n *       // opt users out of tracking by this Mixpanel instance by default\n *       opt_out_tracking_by_default: false\n *\n *       // opt users out of browser data storage by this Mixpanel instance by default\n *       opt_out_persistence_by_default: false\n *\n *       // persistence mechanism used by opt-in/opt-out methods - cookie\n *       // or localStorage - falls back to cookie if localStorage is unavailable\n *       opt_out_tracking_persistence_type: 'localStorage'\n *\n *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n *       opt_out_tracking_cookie_prefix: null\n *\n *       // type of persistent store for super properties (cookie/\n *       // localStorage) if set to 'localStorage', any existing\n *       // mixpanel cookie value with the same persistence_name\n *       // will be transferred to localStorage and deleted\n *       persistence: 'cookie'\n *\n *       // name for super properties persistent store\n *       persistence_name: ''\n *\n *       // names of properties/superproperties which should never\n *       // be sent with track() calls\n *       property_blacklist: []\n *\n *       // if this is true, mixpanel cookies will be marked as\n *       // secure, meaning they will only be transmitted over https\n *       secure_cookie: false\n *\n *       // the amount of time track_links will\n *       // wait for Mixpanel's servers to respond\n *       track_links_timeout: 300\n *\n *       // if you set upgrade to be true, the library will check for\n *       // a cookie from our old js library and import super\n *       // properties from it, then the old cookie is deleted\n *       // The upgrade config option only works in the initialization,\n *       // so make sure you set it when you create the library.\n *       upgrade: false\n *\n *       // extra HTTP request headers to set for each API request, in\n *       // the format {'Header-Name': value}\n *       xhr_headers: {}\n *\n *       // whether to ignore or respect the web browser's Do Not Track setting\n *       ignore_dnt: false\n *     }\n *\n *\n * @param {Object} config A dictionary of new configuration values to update\n */\nMixpanelLib.prototype.set_config = function(config) {\n    if (_.isObject(config)) {\n        _.extend(this['config'], config);\n\n        var new_batch_size = config['batch_size'];\n        if (new_batch_size) {\n            _.each(this.request_batchers, function(batcher) {\n                batcher.resetBatchSize();\n            });\n        }\n\n        if (!this.get_config('persistence_name')) {\n            this['config']['persistence_name'] = this['config']['cookie_name'];\n        }\n        if (!this.get_config('disable_persistence')) {\n            this['config']['disable_persistence'] = this['config']['disable_cookie'];\n        }\n\n        if (this['persistence']) {\n            this['persistence'].update_config(this['config']);\n        }\n        Config.DEBUG = Config.DEBUG || this.get_config('debug');\n    }\n};\n\n/**\n * returns the current config object for the library.\n */\nMixpanelLib.prototype.get_config = function(prop_name) {\n    return this['config'][prop_name];\n};\n\n/**\n * Fetch a hook function from config, with safe default, and run it\n * against the given arguments\n * @param {string} hook_name which hook to retrieve\n * @returns {any|null} return value of user-provided hook, or null if nothing was returned\n */\nMixpanelLib.prototype._run_hook = function(hook_name) {\n    var ret = (this['config']['hooks'][hook_name] || IDENTITY_FUNC).apply(this, slice.call(arguments, 1));\n    if (typeof ret === 'undefined') {\n        this.report_error(hook_name + ' hook did not return a value');\n        ret = null;\n    }\n    return ret;\n};\n\n/**\n * Returns the value of the super property named property_name. If no such\n * property is set, get_property() will return the undefined value.\n *\n * ### Notes:\n *\n * get_property() can only be called after the Mixpanel library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // grab value for 'user_id' after the mixpanel library has loaded\n *     mixpanel.init('YOUR PROJECT TOKEN', {\n *         loaded: function(mixpanel) {\n *             user_id = mixpanel.get_property('user_id');\n *         }\n *     });\n *\n * @param {String} property_name The name of the super property you want to retrieve\n */\nMixpanelLib.prototype.get_property = function(property_name) {\n    return this['persistence']['props'][property_name];\n};\n\nMixpanelLib.prototype.toString = function() {\n    var name = this.get_config('name');\n    if (name !== PRIMARY_INSTANCE_NAME) {\n        name = PRIMARY_INSTANCE_NAME + '.' + name;\n    }\n    return name;\n};\n\nMixpanelLib.prototype._event_is_disabled = function(event_name) {\n    return _.isBlockedUA(userAgent) ||\n        this._flags.disable_all_events ||\n        _.include(this.__disabled_events, event_name);\n};\n\n// perform some housekeeping around GDPR opt-in/out state\nMixpanelLib.prototype._gdpr_init = function() {\n    var is_localStorage_requested = this.get_config('opt_out_tracking_persistence_type') === 'localStorage';\n\n    // try to convert opt-in/out cookies to localStorage if possible\n    if (is_localStorage_requested && _.localStorage.is_supported()) {\n        if (!this.has_opted_in_tracking() && this.has_opted_in_tracking({'persistence_type': 'cookie'})) {\n            this.opt_in_tracking({'enable_persistence': false});\n        }\n        if (!this.has_opted_out_tracking() && this.has_opted_out_tracking({'persistence_type': 'cookie'})) {\n            this.opt_out_tracking({'clear_persistence': false});\n        }\n        this.clear_opt_in_out_tracking({\n            'persistence_type': 'cookie',\n            'enable_persistence': false\n        });\n    }\n\n    // check whether the user has already opted out - if so, clear & disable persistence\n    if (this.has_opted_out_tracking()) {\n        this._gdpr_update_persistence({'clear_persistence': true});\n\n    // check whether we should opt out by default\n    // note: we don't clear persistence here by default since opt-out default state is often\n    //       used as an initial state while GDPR information is being collected\n    } else if (!this.has_opted_in_tracking() && (\n        this.get_config('opt_out_tracking_by_default') || _.cookie.get('mp_optout')\n    )) {\n        _.cookie.remove('mp_optout');\n        this.opt_out_tracking({\n            'clear_persistence': this.get_config('opt_out_persistence_by_default')\n        });\n    }\n};\n\n/**\n * Enable or disable persistence based on options\n * only enable/disable if persistence is not already in this state\n * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n */\nMixpanelLib.prototype._gdpr_update_persistence = function(options) {\n    var disabled;\n    if (options && options['clear_persistence']) {\n        disabled = true;\n    } else if (options && options['enable_persistence']) {\n        disabled = false;\n    } else {\n        return;\n    }\n\n    if (!this.get_config('disable_persistence') && this['persistence'].disabled !== disabled) {\n        this['persistence'].set_disabled(disabled);\n    }\n\n    if (disabled) {\n        _.each(this.request_batchers, function(batcher) {\n            batcher.clear();\n        });\n    }\n};\n\n// call a base gdpr function after constructing the appropriate token and options args\nMixpanelLib.prototype._gdpr_call_func = function(func, options) {\n    options = _.extend({\n        'track': _.bind(this.track, this),\n        'persistence_type': this.get_config('opt_out_tracking_persistence_type'),\n        'cookie_prefix': this.get_config('opt_out_tracking_cookie_prefix'),\n        'cookie_expiration': this.get_config('cookie_expiration'),\n        'cross_site_cookie': this.get_config('cross_site_cookie'),\n        'cross_subdomain_cookie': this.get_config('cross_subdomain_cookie'),\n        'cookie_domain': this.get_config('cookie_domain'),\n        'secure_cookie': this.get_config('secure_cookie'),\n        'ignore_dnt': this.get_config('ignore_dnt')\n    }, options);\n\n    // check if localStorage can be used for recording opt out status, fall back to cookie if not\n    if (!_.localStorage.is_supported()) {\n        options['persistence_type'] = 'cookie';\n    }\n\n    return func(this.get_config('token'), {\n        track: options['track'],\n        trackEventName: options['track_event_name'],\n        trackProperties: options['track_properties'],\n        persistenceType: options['persistence_type'],\n        persistencePrefix: options['cookie_prefix'],\n        cookieDomain: options['cookie_domain'],\n        cookieExpiration: options['cookie_expiration'],\n        crossSiteCookie: options['cross_site_cookie'],\n        crossSubdomainCookie: options['cross_subdomain_cookie'],\n        secureCookie: options['secure_cookie'],\n        ignoreDnt: options['ignore_dnt']\n    });\n};\n\n/**\n * Opt the user in to data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // opt user in\n *     mixpanel.opt_in_tracking();\n *\n *     // opt user in with specific event name, properties, cookie configuration\n *     mixpanel.opt_in_tracking({\n *         track_event_name: 'User opted in',\n *         track_event_properties: {\n *             'Email': 'jdoe@example.com'\n *         },\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {function} [options.track] Function used for tracking a Mixpanel event to record the opt-in action (default is this Mixpanel instance's track method)\n * @param {string} [options.track_event_name=$opt_in] Event name to be used for tracking the opt-in action\n * @param {Object} [options.track_properties] Set of properties to be tracked along with the opt-in action\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.opt_in_tracking = function(options) {\n    options = _.extend({\n        'enable_persistence': true\n    }, options);\n\n    this._gdpr_call_func(optIn, options);\n    this._gdpr_update_persistence(options);\n};\n\n/**\n * Opt the user out of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // opt user out\n *     mixpanel.opt_out_tracking();\n *\n *     // opt user out with different cookie configuration from Mixpanel instance\n *     mixpanel.opt_out_tracking({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.delete_user=true] If true, will delete the currently identified user's profile and clear all charges after opting the user out\n * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.opt_out_tracking = function(options) {\n    options = _.extend({\n        'clear_persistence': true,\n        'delete_user': true\n    }, options);\n\n    // delete user and clear charges since these methods may be disabled by opt-out\n    if (options['delete_user'] && this['people'] && this['people']._identify_called()) {\n        this['people'].delete_user();\n        this['people'].clear_charges();\n    }\n\n    this._gdpr_call_func(optOut, options);\n    this._gdpr_update_persistence(options);\n};\n\n/**\n * Check whether the user has opted in to data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     var has_opted_in = mixpanel.has_opted_in_tracking();\n *     // use has_opted_in value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-in status\n */\nMixpanelLib.prototype.has_opted_in_tracking = function(options) {\n    return this._gdpr_call_func(hasOptedIn, options);\n};\n\n/**\n * Check whether the user has opted out of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     var has_opted_out = mixpanel.has_opted_out_tracking();\n *     // use has_opted_out value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-out status\n */\nMixpanelLib.prototype.has_opted_out_tracking = function(options) {\n    return this._gdpr_call_func(hasOptedOut, options);\n};\n\n/**\n * Clear the user's opt in/out status of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // clear user's opt-in/out status\n *     mixpanel.clear_opt_in_out_tracking();\n *\n *     // clear user's opt-in/out status with specific cookie configuration - should match\n *     // configuration used when opt_in_tracking/opt_out_tracking methods were called.\n *     mixpanel.clear_opt_in_out_tracking({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.clear_opt_in_out_tracking = function(options) {\n    options = _.extend({\n        'enable_persistence': true\n    }, options);\n\n    this._gdpr_call_func(clearOptInOut, options);\n    this._gdpr_update_persistence(options);\n};\n\nMixpanelLib.prototype.report_error = function(msg, err) {\n    console.error.apply(console.error, arguments);\n    try {\n        if (!err && !(msg instanceof Error)) {\n            msg = new Error(msg);\n        }\n        this.get_config('error_reporter')(msg, err);\n    } catch(err) {\n        console.error(err);\n    }\n};\n\n// EXPORTS (for closure compiler)\n\n// MixpanelLib Exports\nMixpanelLib.prototype['init']                               = MixpanelLib.prototype.init;\nMixpanelLib.prototype['reset']                              = MixpanelLib.prototype.reset;\nMixpanelLib.prototype['disable']                            = MixpanelLib.prototype.disable;\nMixpanelLib.prototype['time_event']                         = MixpanelLib.prototype.time_event;\nMixpanelLib.prototype['track']                              = MixpanelLib.prototype.track;\nMixpanelLib.prototype['track_links']                        = MixpanelLib.prototype.track_links;\nMixpanelLib.prototype['track_forms']                        = MixpanelLib.prototype.track_forms;\nMixpanelLib.prototype['track_pageview']                     = MixpanelLib.prototype.track_pageview;\nMixpanelLib.prototype['register']                           = MixpanelLib.prototype.register;\nMixpanelLib.prototype['register_once']                      = MixpanelLib.prototype.register_once;\nMixpanelLib.prototype['unregister']                         = MixpanelLib.prototype.unregister;\nMixpanelLib.prototype['identify']                           = MixpanelLib.prototype.identify;\nMixpanelLib.prototype['alias']                              = MixpanelLib.prototype.alias;\nMixpanelLib.prototype['name_tag']                           = MixpanelLib.prototype.name_tag;\nMixpanelLib.prototype['set_config']                         = MixpanelLib.prototype.set_config;\nMixpanelLib.prototype['get_config']                         = MixpanelLib.prototype.get_config;\nMixpanelLib.prototype['get_property']                       = MixpanelLib.prototype.get_property;\nMixpanelLib.prototype['get_distinct_id']                    = MixpanelLib.prototype.get_distinct_id;\nMixpanelLib.prototype['toString']                           = MixpanelLib.prototype.toString;\nMixpanelLib.prototype['opt_out_tracking']                   = MixpanelLib.prototype.opt_out_tracking;\nMixpanelLib.prototype['opt_in_tracking']                    = MixpanelLib.prototype.opt_in_tracking;\nMixpanelLib.prototype['has_opted_out_tracking']             = MixpanelLib.prototype.has_opted_out_tracking;\nMixpanelLib.prototype['has_opted_in_tracking']              = MixpanelLib.prototype.has_opted_in_tracking;\nMixpanelLib.prototype['clear_opt_in_out_tracking']          = MixpanelLib.prototype.clear_opt_in_out_tracking;\nMixpanelLib.prototype['get_group']                          = MixpanelLib.prototype.get_group;\nMixpanelLib.prototype['set_group']                          = MixpanelLib.prototype.set_group;\nMixpanelLib.prototype['add_group']                          = MixpanelLib.prototype.add_group;\nMixpanelLib.prototype['remove_group']                       = MixpanelLib.prototype.remove_group;\nMixpanelLib.prototype['track_with_groups']                  = MixpanelLib.prototype.track_with_groups;\nMixpanelLib.prototype['start_batch_senders']                = MixpanelLib.prototype.start_batch_senders;\nMixpanelLib.prototype['stop_batch_senders']                 = MixpanelLib.prototype.stop_batch_senders;\n\n// MixpanelPersistence Exports\nMixpanelPersistence.prototype['properties']            = MixpanelPersistence.prototype.properties;\nMixpanelPersistence.prototype['update_search_keyword'] = MixpanelPersistence.prototype.update_search_keyword;\nMixpanelPersistence.prototype['update_referrer_info']  = MixpanelPersistence.prototype.update_referrer_info;\nMixpanelPersistence.prototype['get_cross_subdomain']   = MixpanelPersistence.prototype.get_cross_subdomain;\nMixpanelPersistence.prototype['clear']                 = MixpanelPersistence.prototype.clear;\n\n\nvar instances = {};\nvar extend_mp = function() {\n    // add all the sub mixpanel instances\n    _.each(instances, function(instance, name) {\n        if (name !== PRIMARY_INSTANCE_NAME) { mixpanel_master[name] = instance; }\n    });\n\n    // add private functions as _\n    mixpanel_master['_'] = _;\n};\n\nvar override_mp_init_func = function() {\n    // we override the snippets init function to handle the case where a\n    // user initializes the mixpanel library after the script loads & runs\n    mixpanel_master['init'] = function(token, config, name) {\n        if (name) {\n            // initialize a sub library\n            if (!mixpanel_master[name]) {\n                mixpanel_master[name] = instances[name] = create_mplib(token, config, name);\n                mixpanel_master[name]._loaded();\n            }\n            return mixpanel_master[name];\n        } else {\n            var instance = mixpanel_master;\n\n            if (instances[PRIMARY_INSTANCE_NAME]) {\n                // main mixpanel lib already initialized\n                instance = instances[PRIMARY_INSTANCE_NAME];\n            } else if (token) {\n                // intialize the main mixpanel lib\n                instance = create_mplib(token, config, PRIMARY_INSTANCE_NAME);\n                instance._loaded();\n                instances[PRIMARY_INSTANCE_NAME] = instance;\n            }\n\n            mixpanel_master = instance;\n            if (init_type === INIT_SNIPPET) {\n                window$1[PRIMARY_INSTANCE_NAME] = mixpanel_master;\n            }\n            extend_mp();\n        }\n    };\n};\n\nvar add_dom_loaded_handler = function() {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if (dom_loaded_handler.done) { return; }\n        dom_loaded_handler.done = true;\n\n        DOM_LOADED = true;\n        ENQUEUE_REQUESTS = false;\n\n        _.each(instances, function(inst) {\n            inst._dom_loaded();\n        });\n    }\n\n    function do_scroll_check() {\n        try {\n            document$1.documentElement.doScroll('left');\n        } catch(e) {\n            setTimeout(do_scroll_check, 1);\n            return;\n        }\n\n        dom_loaded_handler();\n    }\n\n    if (document$1.addEventListener) {\n        if (document$1.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler();\n        } else {\n            document$1.addEventListener('DOMContentLoaded', dom_loaded_handler, false);\n        }\n    } else if (document$1.attachEvent) {\n        // IE\n        document$1.attachEvent('onreadystatechange', dom_loaded_handler);\n\n        // check to make sure we arn't in a frame\n        var toplevel = false;\n        try {\n            toplevel = window$1.frameElement === null;\n        } catch(e) {\n            // noop\n        }\n\n        if (document$1.documentElement.doScroll && toplevel) {\n            do_scroll_check();\n        }\n    }\n\n    // fallback handler, always will work\n    _.register_event(window$1, 'load', dom_loaded_handler, true);\n};\n\nfunction init_as_module() {\n    init_type = INIT_MODULE;\n    mixpanel_master = new MixpanelLib();\n\n    override_mp_init_func();\n    mixpanel_master['init']();\n    add_dom_loaded_handler();\n\n    return mixpanel_master;\n}\n\nvar mixpanel = init_as_module();\n\nmodule.exports = mixpanel;","export const APP_MODE = import.meta.env.PUBLIC_APP_MODE\n\nexport const isDevelopment = import.meta.env.DEV || APP_MODE === 'development'\n\n","import type { Config } from 'mixpanel-browser'\nimport { APP_MODE, isDevelopment } from '.'\n\nexport const isMixpanelAvailable = Boolean(import.meta.env.PUBLIC_MIXPANEL_KEY)\n\nexport const isMixpanelActive = (!isDevelopment || localStorage.getItem('mixpanelStatus') === 'active')\n\nexport const MIXPANEL_KEY = import.meta.env.PUBLIC_MIXPANEL_KEY\n\nconst isDebug = APP_MODE ? APP_MODE === 'development' : import.meta.env.DEV \n\nexport const mixPanelDefaultConfig: Partial<Config> = {\n  debug: isDebug\n}\n\n\n","import mixpanel, { Config } from \"mixpanel-browser\";\nimport { MIXPANEL_KEY, isMixpanelActive, isMixpanelAvailable, mixPanelDefaultConfig } from \"../config/mixpanel\";\n\n\nconst mixpanelInstance = isMixpanelAvailable ? mixpanel : undefined\n\nexport enum MixPanelEvents {\n  VISIT = 'visito la web',\n  CLICK = 'hizo click en cta',\n  FORM = 'envio formulario'\n}\n\nexport const ctaText = {\n  whatsapp: 'para comunicarse a traves de whatsapp'\n}\n\nconst blackListObsevers: any = []\n\nexport class MixPanelLocal {\n  private static instance?: MixPanelLocal;\n  private static localInstance = isMixpanelActive? mixpanelInstance : undefined\n\n  private constructor(options: Partial<Config>){\n    mixpanelInstance?.init( MIXPANEL_KEY, options)\n  }\n\n  static defaultInstance(options?: Partial<Config>){\n    MixPanelLocal.instance ??= new MixPanelLocal({\n      ...mixPanelDefaultConfig,\n      ...options\n    })\n\n    return MixPanelLocal.instance\n  }\n\n  trackCta(description: string){\n    MixPanelLocal.localInstance?.track(MixPanelEvents.CLICK, {\n      description\n    })\n  }\n\n  trackVisit(description?: string){\n    MixPanelLocal.localInstance?.track(MixPanelEvents.VISIT, {\n      description\n    })\n  }\n\n  activate(){\n    MixPanelLocal.localInstance = mixpanelInstance\n  }\n\n  deactivate(observer: unknown){\n    if(blackListObsevers.some((blakList: any) => observer instanceof blakList ))\n      throw new Error('not allowd')\n\n    MixPanelLocal.localInstance = undefined\n  }\n}\n\nexport const mixPanelLocal = MixPanelLocal.defaultInstance\n","import { mixPanelLocal } from \"./services/Mixpanel\"\n\naddEventListener('load', ()=>{\n  if(!localStorage.getItem('theme'))\n    localStorage.setItem('theme', 'dark')\n\n  mixPanelLocal()\n    .trackVisit()\n})\n","/**\n * Based on Kendo UI Core expression code <https://github.com/telerik/kendo-ui-core#license-information>\n */\n'use strict'\n\nfunction Cache(maxSize) {\n  this._maxSize = maxSize\n  this.clear()\n}\nCache.prototype.clear = function () {\n  this._size = 0\n  this._values = Object.create(null)\n}\nCache.prototype.get = function (key) {\n  return this._values[key]\n}\nCache.prototype.set = function (key, value) {\n  this._size >= this._maxSize && this.clear()\n  if (!(key in this._values)) this._size++\n\n  return (this._values[key] = value)\n}\n\nvar SPLIT_REGEX = /[^.^\\]^[]+|(?=\\[\\]|\\.\\.)/g,\n  DIGIT_REGEX = /^\\d+$/,\n  LEAD_DIGIT_REGEX = /^\\d/,\n  SPEC_CHAR_REGEX = /[~`!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g,\n  CLEAN_QUOTES_REGEX = /^\\s*(['\"]?)(.*?)(\\1)\\s*$/,\n  MAX_CACHE_SIZE = 512\n\nvar pathCache = new Cache(MAX_CACHE_SIZE),\n  setCache = new Cache(MAX_CACHE_SIZE),\n  getCache = new Cache(MAX_CACHE_SIZE)\n\nvar config\n\nmodule.exports = {\n  Cache: Cache,\n\n  split: split,\n\n  normalizePath: normalizePath,\n\n  setter: function (path) {\n    var parts = normalizePath(path)\n\n    return (\n      setCache.get(path) ||\n      setCache.set(path, function setter(obj, value) {\n        var index = 0\n        var len = parts.length\n        var data = obj\n\n        while (index < len - 1) {\n          var part = parts[index]\n          if (\n            part === '__proto__' ||\n            part === 'constructor' ||\n            part === 'prototype'\n          ) {\n            return obj\n          }\n\n          data = data[parts[index++]]\n        }\n        data[parts[index]] = value\n      })\n    )\n  },\n\n  getter: function (path, safe) {\n    var parts = normalizePath(path)\n    return (\n      getCache.get(path) ||\n      getCache.set(path, function getter(data) {\n        var index = 0,\n          len = parts.length\n        while (index < len) {\n          if (data != null || !safe) data = data[parts[index++]]\n          else return\n        }\n        return data\n      })\n    )\n  },\n\n  join: function (segments) {\n    return segments.reduce(function (path, part) {\n      return (\n        path +\n        (isQuoted(part) || DIGIT_REGEX.test(part)\n          ? '[' + part + ']'\n          : (path ? '.' : '') + part)\n      )\n    }, '')\n  },\n\n  forEach: function (path, cb, thisArg) {\n    forEach(Array.isArray(path) ? path : split(path), cb, thisArg)\n  },\n}\n\nfunction normalizePath(path) {\n  return (\n    pathCache.get(path) ||\n    pathCache.set(\n      path,\n      split(path).map(function (part) {\n        return part.replace(CLEAN_QUOTES_REGEX, '$2')\n      })\n    )\n  )\n}\n\nfunction split(path) {\n  return path.match(SPLIT_REGEX) || ['']\n}\n\nfunction forEach(parts, iter, thisArg) {\n  var len = parts.length,\n    part,\n    idx,\n    isArray,\n    isBracket\n\n  for (idx = 0; idx < len; idx++) {\n    part = parts[idx]\n\n    if (part) {\n      if (shouldBeQuoted(part)) {\n        part = '\"' + part + '\"'\n      }\n\n      isBracket = isQuoted(part)\n      isArray = !isBracket && /^\\d+$/.test(part)\n\n      iter.call(thisArg, part, isBracket, isArray, idx, parts)\n    }\n  }\n}\n\nfunction isQuoted(str) {\n  return (\n    typeof str === 'string' && str && [\"'\", '\"'].indexOf(str.charAt(0)) !== -1\n  )\n}\n\nfunction hasLeadingNumber(part) {\n  return part.match(LEAD_DIGIT_REGEX) && !part.match(DIGIT_REGEX)\n}\n\nfunction hasSpecialChars(part) {\n  return SPEC_CHAR_REGEX.test(part)\n}\n\nfunction shouldBeQuoted(part) {\n  return !isQuoted(part) && (hasLeadingNumber(part) || hasSpecialChars(part))\n}\n","const reWords = /[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+|(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*/g\n\nconst words = (str) => str.match(reWords) || []\n\nconst upperFirst = (str) => str[0].toUpperCase() + str.slice(1)\n\nconst join = (str, d) => words(str).join(d).toLowerCase()\n\nconst camelCase = (str) =>\n  words(str).reduce(\n    (acc, next) =>\n      `${acc}${\n        !acc\n          ? next.toLowerCase()\n          : next[0].toUpperCase() + next.slice(1).toLowerCase()\n      }`,\n    '',\n  )\n\nconst pascalCase = (str) => upperFirst(camelCase(str))\n\nconst snakeCase = (str) => join(str, '_')\n\nconst kebabCase = (str) => join(str, '-')\n\nconst sentenceCase = (str) => upperFirst(join(str, ' '))\n\nconst titleCase = (str) => words(str).map(upperFirst).join(' ')\n\nmodule.exports = {\n  words,\n  upperFirst,\n  camelCase,\n  pascalCase,\n  snakeCase,\n  kebabCase,\n  sentenceCase,\n  titleCase,\n}\n","\n/**\n * Topological sorting function\n *\n * @param {Array} edges\n * @returns {Array}\n */\n\nmodule.exports = function(edges) {\n  return toposort(uniqueNodes(edges), edges)\n}\n\nmodule.exports.array = toposort\n\nfunction toposort(nodes, edges) {\n  var cursor = nodes.length\n    , sorted = new Array(cursor)\n    , visited = {}\n    , i = cursor\n    // Better data structures make algorithm much faster.\n    , outgoingEdges = makeOutgoingEdges(edges)\n    , nodesHash = makeNodesHash(nodes)\n\n  // check for unknown nodes\n  edges.forEach(function(edge) {\n    if (!nodesHash.has(edge[0]) || !nodesHash.has(edge[1])) {\n      throw new Error('Unknown node. There is an unknown node in the supplied edges.')\n    }\n  })\n\n  while (i--) {\n    if (!visited[i]) visit(nodes[i], i, new Set())\n  }\n\n  return sorted\n\n  function visit(node, i, predecessors) {\n    if(predecessors.has(node)) {\n      var nodeRep\n      try {\n        nodeRep = \", node was:\" + JSON.stringify(node)\n      } catch(e) {\n        nodeRep = \"\"\n      }\n      throw new Error('Cyclic dependency' + nodeRep)\n    }\n\n    if (!nodesHash.has(node)) {\n      throw new Error('Found unknown node. Make sure to provided all involved nodes. Unknown node: '+JSON.stringify(node))\n    }\n\n    if (visited[i]) return;\n    visited[i] = true\n\n    var outgoing = outgoingEdges.get(node) || new Set()\n    outgoing = Array.from(outgoing)\n\n    if (i = outgoing.length) {\n      predecessors.add(node)\n      do {\n        var child = outgoing[--i]\n        visit(child, nodesHash.get(child), predecessors)\n      } while (i)\n      predecessors.delete(node)\n    }\n\n    sorted[--cursor] = node\n  }\n}\n\nfunction uniqueNodes(arr){\n  var res = new Set()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var edge = arr[i]\n    res.add(edge[0])\n    res.add(edge[1])\n  }\n  return Array.from(res)\n}\n\nfunction makeOutgoingEdges(arr){\n  var edges = new Map()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var edge = arr[i]\n    if (!edges.has(edge[0])) edges.set(edge[0], new Set())\n    if (!edges.has(edge[1])) edges.set(edge[1], new Set())\n    edges.get(edge[0]).add(edge[1])\n  }\n  return edges\n}\n\nfunction makeNodesHash(arr){\n  var res = new Map()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    res.set(arr[i], i)\n  }\n  return res\n}\n","import { getter, forEach, split, normalizePath, join } from 'property-expr';\nimport { camelCase, snakeCase } from 'tiny-case';\nimport toposort from 'toposort';\n\nconst toString = Object.prototype.toString;\nconst errorToString = Error.prototype.toString;\nconst regExpToString = RegExp.prototype.toString;\nconst symbolToString = typeof Symbol !== 'undefined' ? Symbol.prototype.toString : () => '';\nconst SYMBOL_REGEXP = /^Symbol\\((.*)\\)(.*)$/;\nfunction printNumber(val) {\n  if (val != +val) return 'NaN';\n  const isNegativeZero = val === 0 && 1 / val < 0;\n  return isNegativeZero ? '-0' : '' + val;\n}\nfunction printSimpleValue(val, quoteStrings = false) {\n  if (val == null || val === true || val === false) return '' + val;\n  const typeOf = typeof val;\n  if (typeOf === 'number') return printNumber(val);\n  if (typeOf === 'string') return quoteStrings ? `\"${val}\"` : val;\n  if (typeOf === 'function') return '[Function ' + (val.name || 'anonymous') + ']';\n  if (typeOf === 'symbol') return symbolToString.call(val).replace(SYMBOL_REGEXP, 'Symbol($1)');\n  const tag = toString.call(val).slice(8, -1);\n  if (tag === 'Date') return isNaN(val.getTime()) ? '' + val : val.toISOString(val);\n  if (tag === 'Error' || val instanceof Error) return '[' + errorToString.call(val) + ']';\n  if (tag === 'RegExp') return regExpToString.call(val);\n  return null;\n}\nfunction printValue(value, quoteStrings) {\n  let result = printSimpleValue(value, quoteStrings);\n  if (result !== null) return result;\n  return JSON.stringify(value, function (key, value) {\n    let result = printSimpleValue(this[key], quoteStrings);\n    if (result !== null) return result;\n    return value;\n  }, 2);\n}\n\nfunction toArray(value) {\n  return value == null ? [] : [].concat(value);\n}\n\nlet strReg = /\\$\\{\\s*(\\w+)\\s*\\}/g;\nclass ValidationError extends Error {\n  static formatError(message, params) {\n    const path = params.label || params.path || 'this';\n    if (path !== params.path) params = Object.assign({}, params, {\n      path\n    });\n    if (typeof message === 'string') return message.replace(strReg, (_, key) => printValue(params[key]));\n    if (typeof message === 'function') return message(params);\n    return message;\n  }\n  static isError(err) {\n    return err && err.name === 'ValidationError';\n  }\n  constructor(errorOrErrors, value, field, type) {\n    super();\n    this.value = void 0;\n    this.path = void 0;\n    this.type = void 0;\n    this.errors = void 0;\n    this.params = void 0;\n    this.inner = void 0;\n    this.name = 'ValidationError';\n    this.value = value;\n    this.path = field;\n    this.type = type;\n    this.errors = [];\n    this.inner = [];\n    toArray(errorOrErrors).forEach(err => {\n      if (ValidationError.isError(err)) {\n        this.errors.push(...err.errors);\n        this.inner = this.inner.concat(err.inner.length ? err.inner : err);\n      } else {\n        this.errors.push(err);\n      }\n    });\n    this.message = this.errors.length > 1 ? `${this.errors.length} errors occurred` : this.errors[0];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, ValidationError);\n  }\n}\n\nlet mixed = {\n  default: '${path} is invalid',\n  required: '${path} is a required field',\n  defined: '${path} must be defined',\n  notNull: '${path} cannot be null',\n  oneOf: '${path} must be one of the following values: ${values}',\n  notOneOf: '${path} must not be one of the following values: ${values}',\n  notType: ({\n    path,\n    type,\n    value,\n    originalValue\n  }) => {\n    const castMsg = originalValue != null && originalValue !== value ? ` (cast from the value \\`${printValue(originalValue, true)}\\`).` : '.';\n    return type !== 'mixed' ? `${path} must be a \\`${type}\\` type, ` + `but the final value was: \\`${printValue(value, true)}\\`` + castMsg : `${path} must match the configured type. ` + `The validated value was: \\`${printValue(value, true)}\\`` + castMsg;\n  }\n};\nlet string = {\n  length: '${path} must be exactly ${length} characters',\n  min: '${path} must be at least ${min} characters',\n  max: '${path} must be at most ${max} characters',\n  matches: '${path} must match the following: \"${regex}\"',\n  email: '${path} must be a valid email',\n  url: '${path} must be a valid URL',\n  uuid: '${path} must be a valid UUID',\n  trim: '${path} must be a trimmed string',\n  lowercase: '${path} must be a lowercase string',\n  uppercase: '${path} must be a upper case string'\n};\nlet number = {\n  min: '${path} must be greater than or equal to ${min}',\n  max: '${path} must be less than or equal to ${max}',\n  lessThan: '${path} must be less than ${less}',\n  moreThan: '${path} must be greater than ${more}',\n  positive: '${path} must be a positive number',\n  negative: '${path} must be a negative number',\n  integer: '${path} must be an integer'\n};\nlet date = {\n  min: '${path} field must be later than ${min}',\n  max: '${path} field must be at earlier than ${max}'\n};\nlet boolean = {\n  isValue: '${path} field must be ${value}'\n};\nlet object = {\n  noUnknown: '${path} field has unspecified keys: ${unknown}'\n};\nlet array = {\n  min: '${path} field must have at least ${min} items',\n  max: '${path} field must have less than or equal to ${max} items',\n  length: '${path} must have ${length} items'\n};\nlet tuple = {\n  notType: params => {\n    const {\n      path,\n      value,\n      spec\n    } = params;\n    const typeLen = spec.types.length;\n    if (Array.isArray(value)) {\n      if (value.length < typeLen) return `${path} tuple value has too few items, expected a length of ${typeLen} but got ${value.length} for value: \\`${printValue(value, true)}\\``;\n      if (value.length > typeLen) return `${path} tuple value has too many items, expected a length of ${typeLen} but got ${value.length} for value: \\`${printValue(value, true)}\\``;\n    }\n    return ValidationError.formatError(mixed.notType, params);\n  }\n};\nvar locale = Object.assign(Object.create(null), {\n  mixed,\n  string,\n  number,\n  date,\n  object,\n  array,\n  boolean\n});\n\nconst isSchema = obj => obj && obj.__isYupSchema__;\n\nclass Condition {\n  static fromOptions(refs, config) {\n    if (!config.then && !config.otherwise) throw new TypeError('either `then:` or `otherwise:` is required for `when()` conditions');\n    let {\n      is,\n      then,\n      otherwise\n    } = config;\n    let check = typeof is === 'function' ? is : (...values) => values.every(value => value === is);\n    return new Condition(refs, (values, schema) => {\n      var _branch;\n      let branch = check(...values) ? then : otherwise;\n      return (_branch = branch == null ? void 0 : branch(schema)) != null ? _branch : schema;\n    });\n  }\n  constructor(refs, builder) {\n    this.fn = void 0;\n    this.refs = refs;\n    this.refs = refs;\n    this.fn = builder;\n  }\n  resolve(base, options) {\n    let values = this.refs.map(ref =>\n    // TODO: ? operator here?\n    ref.getValue(options == null ? void 0 : options.value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context));\n    let schema = this.fn(values, base, options);\n    if (schema === undefined ||\n    // @ts-ignore this can be base\n    schema === base) {\n      return base;\n    }\n    if (!isSchema(schema)) throw new TypeError('conditions must return a schema object');\n    return schema.resolve(options);\n  }\n}\n\nconst prefixes = {\n  context: '$',\n  value: '.'\n};\nfunction create$9(key, options) {\n  return new Reference(key, options);\n}\nclass Reference {\n  constructor(key, options = {}) {\n    this.key = void 0;\n    this.isContext = void 0;\n    this.isValue = void 0;\n    this.isSibling = void 0;\n    this.path = void 0;\n    this.getter = void 0;\n    this.map = void 0;\n    if (typeof key !== 'string') throw new TypeError('ref must be a string, got: ' + key);\n    this.key = key.trim();\n    if (key === '') throw new TypeError('ref must be a non-empty string');\n    this.isContext = this.key[0] === prefixes.context;\n    this.isValue = this.key[0] === prefixes.value;\n    this.isSibling = !this.isContext && !this.isValue;\n    let prefix = this.isContext ? prefixes.context : this.isValue ? prefixes.value : '';\n    this.path = this.key.slice(prefix.length);\n    this.getter = this.path && getter(this.path, true);\n    this.map = options.map;\n  }\n  getValue(value, parent, context) {\n    let result = this.isContext ? context : this.isValue ? value : parent;\n    if (this.getter) result = this.getter(result || {});\n    if (this.map) result = this.map(result);\n    return result;\n  }\n\n  /**\n   *\n   * @param {*} value\n   * @param {Object} options\n   * @param {Object=} options.context\n   * @param {Object=} options.parent\n   */\n  cast(value, options) {\n    return this.getValue(value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context);\n  }\n  resolve() {\n    return this;\n  }\n  describe() {\n    return {\n      type: 'ref',\n      key: this.key\n    };\n  }\n  toString() {\n    return `Ref(${this.key})`;\n  }\n  static isRef(value) {\n    return value && value.__isYupRef;\n  }\n}\n\n// @ts-ignore\nReference.prototype.__isYupRef = true;\n\nconst isAbsent = value => value == null;\n\nfunction createValidation(config) {\n  function validate({\n    value,\n    path = '',\n    options,\n    originalValue,\n    schema\n  }, panic, next) {\n    const {\n      name,\n      test,\n      params,\n      message,\n      skipAbsent\n    } = config;\n    let {\n      parent,\n      context,\n      abortEarly = schema.spec.abortEarly\n    } = options;\n    function resolve(item) {\n      return Reference.isRef(item) ? item.getValue(value, parent, context) : item;\n    }\n    function createError(overrides = {}) {\n      const nextParams = Object.assign({\n        value,\n        originalValue,\n        label: schema.spec.label,\n        path: overrides.path || path,\n        spec: schema.spec\n      }, params, overrides.params);\n      for (const key of Object.keys(nextParams)) nextParams[key] = resolve(nextParams[key]);\n      const error = new ValidationError(ValidationError.formatError(overrides.message || message, nextParams), value, nextParams.path, overrides.type || name);\n      error.params = nextParams;\n      return error;\n    }\n    const invalid = abortEarly ? panic : next;\n    let ctx = {\n      path,\n      parent,\n      type: name,\n      from: options.from,\n      createError,\n      resolve,\n      options,\n      originalValue,\n      schema\n    };\n    const handleResult = validOrError => {\n      if (ValidationError.isError(validOrError)) invalid(validOrError);else if (!validOrError) invalid(createError());else next(null);\n    };\n    const handleError = err => {\n      if (ValidationError.isError(err)) invalid(err);else panic(err);\n    };\n    const shouldSkip = skipAbsent && isAbsent(value);\n    if (!options.sync) {\n      try {\n        Promise.resolve(!shouldSkip ? test.call(ctx, value, ctx) : true).then(handleResult, handleError);\n      } catch (err) {\n        handleError(err);\n      }\n      return;\n    }\n    let result;\n    try {\n      var _result;\n      result = !shouldSkip ? test.call(ctx, value, ctx) : true;\n      if (typeof ((_result = result) == null ? void 0 : _result.then) === 'function') {\n        throw new Error(`Validation test of type: \"${ctx.type}\" returned a Promise during a synchronous validate. ` + `This test will finish after the validate call has returned`);\n      }\n    } catch (err) {\n      handleError(err);\n      return;\n    }\n    handleResult(result);\n  }\n  validate.OPTIONS = config;\n  return validate;\n}\n\nfunction getIn(schema, path, value, context = value) {\n  let parent, lastPart, lastPartDebug;\n\n  // root path: ''\n  if (!path) return {\n    parent,\n    parentPath: path,\n    schema\n  };\n  forEach(path, (_part, isBracket, isArray) => {\n    let part = isBracket ? _part.slice(1, _part.length - 1) : _part;\n    schema = schema.resolve({\n      context,\n      parent,\n      value\n    });\n    let isTuple = schema.type === 'tuple';\n    let idx = isArray ? parseInt(part, 10) : 0;\n    if (schema.innerType || isTuple) {\n      if (isTuple && !isArray) throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part \"${lastPartDebug}\" must contain an index to the tuple element, e.g. \"${lastPartDebug}[0]\"`);\n      if (value && idx >= value.length) {\n        throw new Error(`Yup.reach cannot resolve an array item at index: ${_part}, in the path: ${path}. ` + `because there is no value at that index. `);\n      }\n      parent = value;\n      value = value && value[idx];\n      schema = isTuple ? schema.spec.types[idx] : schema.innerType;\n    }\n\n    // sometimes the array index part of a path doesn't exist: \"nested.arr.child\"\n    // in these cases the current part is the next schema and should be processed\n    // in this iteration. For cases where the index signature is included this\n    // check will fail and we'll handle the `child` part on the next iteration like normal\n    if (!isArray) {\n      if (!schema.fields || !schema.fields[part]) throw new Error(`The schema does not contain the path: ${path}. ` + `(failed at: ${lastPartDebug} which is a type: \"${schema.type}\")`);\n      parent = value;\n      value = value && value[part];\n      schema = schema.fields[part];\n    }\n    lastPart = part;\n    lastPartDebug = isBracket ? '[' + _part + ']' : '.' + _part;\n  });\n  return {\n    schema,\n    parent,\n    parentPath: lastPart\n  };\n}\nfunction reach(obj, path, value, context) {\n  return getIn(obj, path, value, context).schema;\n}\n\nclass ReferenceSet extends Set {\n  describe() {\n    const description = [];\n    for (const item of this.values()) {\n      description.push(Reference.isRef(item) ? item.describe() : item);\n    }\n    return description;\n  }\n  resolveAll(resolve) {\n    let result = [];\n    for (const item of this.values()) {\n      result.push(resolve(item));\n    }\n    return result;\n  }\n  clone() {\n    return new ReferenceSet(this.values());\n  }\n  merge(newItems, removeItems) {\n    const next = this.clone();\n    newItems.forEach(value => next.add(value));\n    removeItems.forEach(value => next.delete(value));\n    return next;\n  }\n}\n\n// tweaked from https://github.com/Kelin2025/nanoclone/blob/0abeb7635bda9b68ef2277093f76dbe3bf3948e1/src/index.js\nfunction clone(src, seen = new Map()) {\n  if (isSchema(src) || !src || typeof src !== 'object') return src;\n  if (seen.has(src)) return seen.get(src);\n  let copy;\n  if (src instanceof Date) {\n    // Date\n    copy = new Date(src.getTime());\n    seen.set(src, copy);\n  } else if (src instanceof RegExp) {\n    // RegExp\n    copy = new RegExp(src);\n    seen.set(src, copy);\n  } else if (Array.isArray(src)) {\n    // Array\n    copy = new Array(src.length);\n    seen.set(src, copy);\n    for (let i = 0; i < src.length; i++) copy[i] = clone(src[i], seen);\n  } else if (src instanceof Map) {\n    // Map\n    copy = new Map();\n    seen.set(src, copy);\n    for (const [k, v] of src.entries()) copy.set(k, clone(v, seen));\n  } else if (src instanceof Set) {\n    // Set\n    copy = new Set();\n    seen.set(src, copy);\n    for (const v of src) copy.add(clone(v, seen));\n  } else if (src instanceof Object) {\n    // Object\n    copy = {};\n    seen.set(src, copy);\n    for (const [k, v] of Object.entries(src)) copy[k] = clone(v, seen);\n  } else {\n    throw Error(`Unable to clone ${src}`);\n  }\n  return copy;\n}\n\nclass Schema {\n  constructor(options) {\n    this.type = void 0;\n    this.deps = [];\n    this.tests = void 0;\n    this.transforms = void 0;\n    this.conditions = [];\n    this._mutate = void 0;\n    this.internalTests = {};\n    this._whitelist = new ReferenceSet();\n    this._blacklist = new ReferenceSet();\n    this.exclusiveTests = Object.create(null);\n    this._typeCheck = void 0;\n    this.spec = void 0;\n    this.tests = [];\n    this.transforms = [];\n    this.withMutation(() => {\n      this.typeError(mixed.notType);\n    });\n    this.type = options.type;\n    this._typeCheck = options.check;\n    this.spec = Object.assign({\n      strip: false,\n      strict: false,\n      abortEarly: true,\n      recursive: true,\n      nullable: false,\n      optional: true,\n      coerce: true\n    }, options == null ? void 0 : options.spec);\n    this.withMutation(s => {\n      s.nonNullable();\n    });\n  }\n\n  // TODO: remove\n  get _type() {\n    return this.type;\n  }\n  clone(spec) {\n    if (this._mutate) {\n      if (spec) Object.assign(this.spec, spec);\n      return this;\n    }\n\n    // if the nested value is a schema we can skip cloning, since\n    // they are already immutable\n    const next = Object.create(Object.getPrototypeOf(this));\n\n    // @ts-expect-error this is readonly\n    next.type = this.type;\n    next._typeCheck = this._typeCheck;\n    next._whitelist = this._whitelist.clone();\n    next._blacklist = this._blacklist.clone();\n    next.internalTests = Object.assign({}, this.internalTests);\n    next.exclusiveTests = Object.assign({}, this.exclusiveTests);\n\n    // @ts-expect-error this is readonly\n    next.deps = [...this.deps];\n    next.conditions = [...this.conditions];\n    next.tests = [...this.tests];\n    next.transforms = [...this.transforms];\n    next.spec = clone(Object.assign({}, this.spec, spec));\n    return next;\n  }\n  label(label) {\n    let next = this.clone();\n    next.spec.label = label;\n    return next;\n  }\n  meta(...args) {\n    if (args.length === 0) return this.spec.meta;\n    let next = this.clone();\n    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);\n    return next;\n  }\n  withMutation(fn) {\n    let before = this._mutate;\n    this._mutate = true;\n    let result = fn(this);\n    this._mutate = before;\n    return result;\n  }\n  concat(schema) {\n    if (!schema || schema === this) return this;\n    if (schema.type !== this.type && this.type !== 'mixed') throw new TypeError(`You cannot \\`concat()\\` schema's of different types: ${this.type} and ${schema.type}`);\n    let base = this;\n    let combined = schema.clone();\n    const mergedSpec = Object.assign({}, base.spec, combined.spec);\n    combined.spec = mergedSpec;\n    combined.internalTests = Object.assign({}, base.internalTests, combined.internalTests);\n\n    // manually merge the blacklist/whitelist (the other `schema` takes\n    // precedence in case of conflicts)\n    combined._whitelist = base._whitelist.merge(schema._whitelist, schema._blacklist);\n    combined._blacklist = base._blacklist.merge(schema._blacklist, schema._whitelist);\n\n    // start with the current tests\n    combined.tests = base.tests;\n    combined.exclusiveTests = base.exclusiveTests;\n\n    // manually add the new tests to ensure\n    // the deduping logic is consistent\n    combined.withMutation(next => {\n      schema.tests.forEach(fn => {\n        next.test(fn.OPTIONS);\n      });\n    });\n    combined.transforms = [...base.transforms, ...combined.transforms];\n    return combined;\n  }\n  isType(v) {\n    if (v == null) {\n      if (this.spec.nullable && v === null) return true;\n      if (this.spec.optional && v === undefined) return true;\n      return false;\n    }\n    return this._typeCheck(v);\n  }\n  resolve(options) {\n    let schema = this;\n    if (schema.conditions.length) {\n      let conditions = schema.conditions;\n      schema = schema.clone();\n      schema.conditions = [];\n      schema = conditions.reduce((prevSchema, condition) => condition.resolve(prevSchema, options), schema);\n      schema = schema.resolve(options);\n    }\n    return schema;\n  }\n  resolveOptions(options) {\n    var _options$strict, _options$abortEarly, _options$recursive;\n    return Object.assign({}, options, {\n      from: options.from || [],\n      strict: (_options$strict = options.strict) != null ? _options$strict : this.spec.strict,\n      abortEarly: (_options$abortEarly = options.abortEarly) != null ? _options$abortEarly : this.spec.abortEarly,\n      recursive: (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive\n    });\n  }\n\n  /**\n   * Run the configured transform pipeline over an input value.\n   */\n\n  cast(value, options = {}) {\n    let resolvedSchema = this.resolve(Object.assign({\n      value\n    }, options));\n    let allowOptionality = options.assert === 'ignore-optionality';\n    let result = resolvedSchema._cast(value, options);\n    if (options.assert !== false && !resolvedSchema.isType(result)) {\n      if (allowOptionality && isAbsent(result)) {\n        return result;\n      }\n      let formattedValue = printValue(value);\n      let formattedResult = printValue(result);\n      throw new TypeError(`The value of ${options.path || 'field'} could not be cast to a value ` + `that satisfies the schema type: \"${resolvedSchema.type}\". \\n\\n` + `attempted value: ${formattedValue} \\n` + (formattedResult !== formattedValue ? `result of cast: ${formattedResult}` : ''));\n    }\n    return result;\n  }\n  _cast(rawValue, _options) {\n    let value = rawValue === undefined ? rawValue : this.transforms.reduce((prevValue, fn) => fn.call(this, prevValue, rawValue, this), rawValue);\n    if (value === undefined) {\n      value = this.getDefault();\n    }\n    return value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let {\n      path,\n      originalValue = _value,\n      strict = this.spec.strict\n    } = options;\n    let value = _value;\n    if (!strict) {\n      value = this._cast(value, Object.assign({\n        assert: false\n      }, options));\n    }\n    let initialTests = [];\n    for (let test of Object.values(this.internalTests)) {\n      if (test) initialTests.push(test);\n    }\n    this.runTests({\n      path,\n      value,\n      originalValue,\n      options,\n      tests: initialTests\n    }, panic, initialErrors => {\n      // even if we aren't ending early we can't proceed further if the types aren't correct\n      if (initialErrors.length) {\n        return next(initialErrors, value);\n      }\n      this.runTests({\n        path,\n        value,\n        originalValue,\n        options,\n        tests: this.tests\n      }, panic, next);\n    });\n  }\n\n  /**\n   * Executes a set of validations, either schema, produced Tests or a nested\n   * schema validate result.\n   */\n  runTests(runOptions, panic, next) {\n    let fired = false;\n    let {\n      tests,\n      value,\n      originalValue,\n      path,\n      options\n    } = runOptions;\n    let panicOnce = arg => {\n      if (fired) return;\n      fired = true;\n      panic(arg, value);\n    };\n    let nextOnce = arg => {\n      if (fired) return;\n      fired = true;\n      next(arg, value);\n    };\n    let count = tests.length;\n    let nestedErrors = [];\n    if (!count) return nextOnce([]);\n    let args = {\n      value,\n      originalValue,\n      path,\n      options,\n      schema: this\n    };\n    for (let i = 0; i < tests.length; i++) {\n      const test = tests[i];\n      test(args, panicOnce, function finishTestRun(err) {\n        if (err) {\n          nestedErrors = nestedErrors.concat(err);\n        }\n        if (--count <= 0) {\n          nextOnce(nestedErrors);\n        }\n      });\n    }\n  }\n  asNestedTest({\n    key,\n    index,\n    parent,\n    parentPath,\n    originalParent,\n    options\n  }) {\n    const k = key != null ? key : index;\n    if (k == null) {\n      throw TypeError('Must include `key` or `index` for nested validations');\n    }\n    const isIndex = typeof k === 'number';\n    let value = parent[k];\n    const testOptions = Object.assign({}, options, {\n      // Nested validations fields are always strict:\n      //    1. parent isn't strict so the casting will also have cast inner values\n      //    2. parent is strict in which case the nested values weren't cast either\n      strict: true,\n      parent,\n      value,\n      originalValue: originalParent[k],\n      // FIXME: tests depend on `index` being passed around deeply,\n      //   we should not let the options.key/index bleed through\n      key: undefined,\n      // index: undefined,\n      [isIndex ? 'index' : 'key']: k,\n      path: isIndex || k.includes('.') ? `${parentPath || ''}[${value ? k : `\"${k}\"`}]` : (parentPath ? `${parentPath}.` : '') + key\n    });\n    return (_, panic, next) => this.resolve(testOptions)._validate(value, testOptions, panic, next);\n  }\n  validate(value, options) {\n    let schema = this.resolve(Object.assign({}, options, {\n      value\n    }));\n    return new Promise((resolve, reject) => schema._validate(value, options, (error, parsed) => {\n      if (ValidationError.isError(error)) error.value = parsed;\n      reject(error);\n    }, (errors, validated) => {\n      if (errors.length) reject(new ValidationError(errors, validated));else resolve(validated);\n    }));\n  }\n  validateSync(value, options) {\n    let schema = this.resolve(Object.assign({}, options, {\n      value\n    }));\n    let result;\n    schema._validate(value, Object.assign({}, options, {\n      sync: true\n    }), (error, parsed) => {\n      if (ValidationError.isError(error)) error.value = parsed;\n      throw error;\n    }, (errors, validated) => {\n      if (errors.length) throw new ValidationError(errors, value);\n      result = validated;\n    });\n    return result;\n  }\n  isValid(value, options) {\n    return this.validate(value, options).then(() => true, err => {\n      if (ValidationError.isError(err)) return false;\n      throw err;\n    });\n  }\n  isValidSync(value, options) {\n    try {\n      this.validateSync(value, options);\n      return true;\n    } catch (err) {\n      if (ValidationError.isError(err)) return false;\n      throw err;\n    }\n  }\n  _getDefault() {\n    let defaultValue = this.spec.default;\n    if (defaultValue == null) {\n      return defaultValue;\n    }\n    return typeof defaultValue === 'function' ? defaultValue.call(this) : clone(defaultValue);\n  }\n  getDefault(options\n  // If schema is defaulted we know it's at least not undefined\n  ) {\n    let schema = this.resolve(options || {});\n    return schema._getDefault();\n  }\n  default(def) {\n    if (arguments.length === 0) {\n      return this._getDefault();\n    }\n    let next = this.clone({\n      default: def\n    });\n    return next;\n  }\n  strict(isStrict = true) {\n    return this.clone({\n      strict: isStrict\n    });\n  }\n  nullability(nullable, message) {\n    const next = this.clone({\n      nullable\n    });\n    next.internalTests.nullable = createValidation({\n      message,\n      name: 'nullable',\n      test(value) {\n        return value === null ? this.schema.spec.nullable : true;\n      }\n    });\n    return next;\n  }\n  optionality(optional, message) {\n    const next = this.clone({\n      optional\n    });\n    next.internalTests.optionality = createValidation({\n      message,\n      name: 'optionality',\n      test(value) {\n        return value === undefined ? this.schema.spec.optional : true;\n      }\n    });\n    return next;\n  }\n  optional() {\n    return this.optionality(true);\n  }\n  defined(message = mixed.defined) {\n    return this.optionality(false, message);\n  }\n  nullable() {\n    return this.nullability(true);\n  }\n  nonNullable(message = mixed.notNull) {\n    return this.nullability(false, message);\n  }\n  required(message = mixed.required) {\n    return this.clone().withMutation(next => next.nonNullable(message).defined(message));\n  }\n  notRequired() {\n    return this.clone().withMutation(next => next.nullable().optional());\n  }\n  transform(fn) {\n    let next = this.clone();\n    next.transforms.push(fn);\n    return next;\n  }\n\n  /**\n   * Adds a test function to the schema's queue of tests.\n   * tests can be exclusive or non-exclusive.\n   *\n   * - exclusive tests, will replace any existing tests of the same name.\n   * - non-exclusive: can be stacked\n   *\n   * If a non-exclusive test is added to a schema with an exclusive test of the same name\n   * the exclusive test is removed and further tests of the same name will be stacked.\n   *\n   * If an exclusive test is added to a schema with non-exclusive tests of the same name\n   * the previous tests are removed and further tests of the same name will replace each other.\n   */\n\n  test(...args) {\n    let opts;\n    if (args.length === 1) {\n      if (typeof args[0] === 'function') {\n        opts = {\n          test: args[0]\n        };\n      } else {\n        opts = args[0];\n      }\n    } else if (args.length === 2) {\n      opts = {\n        name: args[0],\n        test: args[1]\n      };\n    } else {\n      opts = {\n        name: args[0],\n        message: args[1],\n        test: args[2]\n      };\n    }\n    if (opts.message === undefined) opts.message = mixed.default;\n    if (typeof opts.test !== 'function') throw new TypeError('`test` is a required parameters');\n    let next = this.clone();\n    let validate = createValidation(opts);\n    let isExclusive = opts.exclusive || opts.name && next.exclusiveTests[opts.name] === true;\n    if (opts.exclusive) {\n      if (!opts.name) throw new TypeError('Exclusive tests must provide a unique `name` identifying the test');\n    }\n    if (opts.name) next.exclusiveTests[opts.name] = !!opts.exclusive;\n    next.tests = next.tests.filter(fn => {\n      if (fn.OPTIONS.name === opts.name) {\n        if (isExclusive) return false;\n        if (fn.OPTIONS.test === validate.OPTIONS.test) return false;\n      }\n      return true;\n    });\n    next.tests.push(validate);\n    return next;\n  }\n  when(keys, options) {\n    if (!Array.isArray(keys) && typeof keys !== 'string') {\n      options = keys;\n      keys = '.';\n    }\n    let next = this.clone();\n    let deps = toArray(keys).map(key => new Reference(key));\n    deps.forEach(dep => {\n      // @ts-ignore readonly array\n      if (dep.isSibling) next.deps.push(dep.key);\n    });\n    next.conditions.push(typeof options === 'function' ? new Condition(deps, options) : Condition.fromOptions(deps, options));\n    return next;\n  }\n  typeError(message) {\n    let next = this.clone();\n    next.internalTests.typeError = createValidation({\n      message,\n      name: 'typeError',\n      test(value) {\n        if (!isAbsent(value) && !this.schema._typeCheck(value)) return this.createError({\n          params: {\n            type: this.schema.type\n          }\n        });\n        return true;\n      }\n    });\n    return next;\n  }\n  oneOf(enums, message = mixed.oneOf) {\n    let next = this.clone();\n    enums.forEach(val => {\n      next._whitelist.add(val);\n      next._blacklist.delete(val);\n    });\n    next.internalTests.whiteList = createValidation({\n      message,\n      name: 'oneOf',\n      skipAbsent: true,\n      test(value) {\n        let valids = this.schema._whitelist;\n        let resolved = valids.resolveAll(this.resolve);\n        return resolved.includes(value) ? true : this.createError({\n          params: {\n            values: Array.from(valids).join(', '),\n            resolved\n          }\n        });\n      }\n    });\n    return next;\n  }\n  notOneOf(enums, message = mixed.notOneOf) {\n    let next = this.clone();\n    enums.forEach(val => {\n      next._blacklist.add(val);\n      next._whitelist.delete(val);\n    });\n    next.internalTests.blacklist = createValidation({\n      message,\n      name: 'notOneOf',\n      test(value) {\n        let invalids = this.schema._blacklist;\n        let resolved = invalids.resolveAll(this.resolve);\n        if (resolved.includes(value)) return this.createError({\n          params: {\n            values: Array.from(invalids).join(', '),\n            resolved\n          }\n        });\n        return true;\n      }\n    });\n    return next;\n  }\n  strip(strip = true) {\n    let next = this.clone();\n    next.spec.strip = strip;\n    return next;\n  }\n\n  /**\n   * Return a serialized description of the schema including validations, flags, types etc.\n   *\n   * @param options Provide any needed context for resolving runtime schema alterations (lazy, when conditions, etc).\n   */\n  describe(options) {\n    const next = (options ? this.resolve(options) : this).clone();\n    const {\n      label,\n      meta,\n      optional,\n      nullable\n    } = next.spec;\n    const description = {\n      meta,\n      label,\n      optional,\n      nullable,\n      default: next.getDefault(options),\n      type: next.type,\n      oneOf: next._whitelist.describe(),\n      notOneOf: next._blacklist.describe(),\n      tests: next.tests.map(fn => ({\n        name: fn.OPTIONS.name,\n        params: fn.OPTIONS.params\n      })).filter((n, idx, list) => list.findIndex(c => c.name === n.name) === idx)\n    };\n    return description;\n  }\n}\n// @ts-expect-error\nSchema.prototype.__isYupSchema__ = true;\nfor (const method of ['validate', 'validateSync']) Schema.prototype[`${method}At`] = function (path, value, options = {}) {\n  const {\n    parent,\n    parentPath,\n    schema\n  } = getIn(this, path, value, options.context);\n  return schema[method](parent && parent[parentPath], Object.assign({}, options, {\n    parent,\n    path\n  }));\n};\nfor (const alias of ['equals', 'is']) Schema.prototype[alias] = Schema.prototype.oneOf;\nfor (const alias of ['not', 'nope']) Schema.prototype[alias] = Schema.prototype.notOneOf;\n\nconst returnsTrue = () => true;\nfunction create$8(spec) {\n  return new MixedSchema(spec);\n}\nclass MixedSchema extends Schema {\n  constructor(spec) {\n    super(typeof spec === 'function' ? {\n      type: 'mixed',\n      check: spec\n    } : Object.assign({\n      type: 'mixed',\n      check: returnsTrue\n    }, spec));\n  }\n}\ncreate$8.prototype = MixedSchema.prototype;\n\nfunction create$7() {\n  return new BooleanSchema();\n}\nclass BooleanSchema extends Schema {\n  constructor() {\n    super({\n      type: 'boolean',\n      check(v) {\n        if (v instanceof Boolean) v = v.valueOf();\n        return typeof v === 'boolean';\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (ctx.spec.coerce && !ctx.isType(value)) {\n          if (/^(true|1)$/i.test(String(value))) return true;\n          if (/^(false|0)$/i.test(String(value))) return false;\n        }\n        return value;\n      });\n    });\n  }\n  isTrue(message = boolean.isValue) {\n    return this.test({\n      message,\n      name: 'is-value',\n      exclusive: true,\n      params: {\n        value: 'true'\n      },\n      test(value) {\n        return isAbsent(value) || value === true;\n      }\n    });\n  }\n  isFalse(message = boolean.isValue) {\n    return this.test({\n      message,\n      name: 'is-value',\n      exclusive: true,\n      params: {\n        value: 'false'\n      },\n      test(value) {\n        return isAbsent(value) || value === false;\n      }\n    });\n  }\n  default(def) {\n    return super.default(def);\n  }\n  defined(msg) {\n    return super.defined(msg);\n  }\n  optional() {\n    return super.optional();\n  }\n  required(msg) {\n    return super.required(msg);\n  }\n  notRequired() {\n    return super.notRequired();\n  }\n  nullable() {\n    return super.nullable();\n  }\n  nonNullable(msg) {\n    return super.nonNullable(msg);\n  }\n  strip(v) {\n    return super.strip(v);\n  }\n}\ncreate$7.prototype = BooleanSchema.prototype;\n\n// Taken from HTML spec: https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address\nlet rEmail =\n// eslint-disable-next-line\n/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\nlet rUrl =\n// eslint-disable-next-line\n/^((https?|ftp):)?\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i;\n\n// eslint-disable-next-line\nlet rUUID = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nlet isTrimmed = value => isAbsent(value) || value === value.trim();\nlet objStringTag = {}.toString();\nfunction create$6() {\n  return new StringSchema();\n}\nclass StringSchema extends Schema {\n  constructor() {\n    super({\n      type: 'string',\n      check(value) {\n        if (value instanceof String) value = value.valueOf();\n        return typeof value === 'string';\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce || ctx.isType(value)) return value;\n\n        // don't ever convert arrays\n        if (Array.isArray(value)) return value;\n        const strValue = value != null && value.toString ? value.toString() : value;\n\n        // no one wants plain objects converted to [Object object]\n        if (strValue === objStringTag) return value;\n        return strValue;\n      });\n    });\n  }\n  required(message) {\n    return super.required(message).withMutation(schema => schema.test({\n      message: message || mixed.required,\n      name: 'required',\n      skipAbsent: true,\n      test: value => !!value.length\n    }));\n  }\n  notRequired() {\n    return super.notRequired().withMutation(schema => {\n      schema.tests = schema.tests.filter(t => t.OPTIONS.name !== 'required');\n      return schema;\n    });\n  }\n  length(length, message = string.length) {\n    return this.test({\n      message,\n      name: 'length',\n      exclusive: true,\n      params: {\n        length\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length === this.resolve(length);\n      }\n    });\n  }\n  min(min, message = string.min) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message = string.max) {\n    return this.test({\n      name: 'max',\n      exclusive: true,\n      message,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length <= this.resolve(max);\n      }\n    });\n  }\n  matches(regex, options) {\n    let excludeEmptyString = false;\n    let message;\n    let name;\n    if (options) {\n      if (typeof options === 'object') {\n        ({\n          excludeEmptyString = false,\n          message,\n          name\n        } = options);\n      } else {\n        message = options;\n      }\n    }\n    return this.test({\n      name: name || 'matches',\n      message: message || string.matches,\n      params: {\n        regex\n      },\n      skipAbsent: true,\n      test: value => value === '' && excludeEmptyString || value.search(regex) !== -1\n    });\n  }\n  email(message = string.email) {\n    return this.matches(rEmail, {\n      name: 'email',\n      message,\n      excludeEmptyString: true\n    });\n  }\n  url(message = string.url) {\n    return this.matches(rUrl, {\n      name: 'url',\n      message,\n      excludeEmptyString: true\n    });\n  }\n  uuid(message = string.uuid) {\n    return this.matches(rUUID, {\n      name: 'uuid',\n      message,\n      excludeEmptyString: false\n    });\n  }\n\n  //-- transforms --\n  ensure() {\n    return this.default('').transform(val => val === null ? '' : val);\n  }\n  trim(message = string.trim) {\n    return this.transform(val => val != null ? val.trim() : val).test({\n      message,\n      name: 'trim',\n      test: isTrimmed\n    });\n  }\n  lowercase(message = string.lowercase) {\n    return this.transform(value => !isAbsent(value) ? value.toLowerCase() : value).test({\n      message,\n      name: 'string_case',\n      exclusive: true,\n      skipAbsent: true,\n      test: value => isAbsent(value) || value === value.toLowerCase()\n    });\n  }\n  uppercase(message = string.uppercase) {\n    return this.transform(value => !isAbsent(value) ? value.toUpperCase() : value).test({\n      message,\n      name: 'string_case',\n      exclusive: true,\n      skipAbsent: true,\n      test: value => isAbsent(value) || value === value.toUpperCase()\n    });\n  }\n}\ncreate$6.prototype = StringSchema.prototype;\n\n//\n// String Interfaces\n//\n\nlet isNaN$1 = value => value != +value;\nfunction create$5() {\n  return new NumberSchema();\n}\nclass NumberSchema extends Schema {\n  constructor() {\n    super({\n      type: 'number',\n      check(value) {\n        if (value instanceof Number) value = value.valueOf();\n        return typeof value === 'number' && !isNaN$1(value);\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce) return value;\n        let parsed = value;\n        if (typeof parsed === 'string') {\n          parsed = parsed.replace(/\\s/g, '');\n          if (parsed === '') return NaN;\n          // don't use parseFloat to avoid positives on alpha-numeric strings\n          parsed = +parsed;\n        }\n        if (ctx.isType(parsed)) return parsed;\n        return parseFloat(parsed);\n      });\n    });\n  }\n  min(min, message = number.min) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message = number.max) {\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value <= this.resolve(max);\n      }\n    });\n  }\n  lessThan(less, message = number.lessThan) {\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        less\n      },\n      skipAbsent: true,\n      test(value) {\n        return value < this.resolve(less);\n      }\n    });\n  }\n  moreThan(more, message = number.moreThan) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        more\n      },\n      skipAbsent: true,\n      test(value) {\n        return value > this.resolve(more);\n      }\n    });\n  }\n  positive(msg = number.positive) {\n    return this.moreThan(0, msg);\n  }\n  negative(msg = number.negative) {\n    return this.lessThan(0, msg);\n  }\n  integer(message = number.integer) {\n    return this.test({\n      name: 'integer',\n      message,\n      skipAbsent: true,\n      test: val => Number.isInteger(val)\n    });\n  }\n  truncate() {\n    return this.transform(value => !isAbsent(value) ? value | 0 : value);\n  }\n  round(method) {\n    var _method;\n    let avail = ['ceil', 'floor', 'round', 'trunc'];\n    method = ((_method = method) == null ? void 0 : _method.toLowerCase()) || 'round';\n\n    // this exists for symemtry with the new Math.trunc\n    if (method === 'trunc') return this.truncate();\n    if (avail.indexOf(method.toLowerCase()) === -1) throw new TypeError('Only valid options for round() are: ' + avail.join(', '));\n    return this.transform(value => !isAbsent(value) ? Math[method](value) : value);\n  }\n}\ncreate$5.prototype = NumberSchema.prototype;\n\n//\n// Number Interfaces\n//\n\n/* eslint-disable */\n/**\n *\n * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>\n * NON-CONFORMANT EDITION.\n * © 2011 Colin Snover <http://zetafleet.com>\n * Released under MIT license.\n */\n\n//              1 YYYY                 2 MM        3 DD              4 HH     5 mm        6 ss            7 msec         8 Z 9 ±    10 tzHH    11 tzmm\nvar isoReg = /^(\\d{4}|[+\\-]\\d{6})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:[ T]?(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\nfunction parseIsoDate(date) {\n  var numericKeys = [1, 4, 5, 6, 7, 10, 11],\n    minutesOffset = 0,\n    timestamp,\n    struct;\n  if (struct = isoReg.exec(date)) {\n    // avoid NaN timestamps caused by “undefined” values being passed to Date.UTC\n    for (var i = 0, k; k = numericKeys[i]; ++i) struct[k] = +struct[k] || 0;\n\n    // allow undefined days and months\n    struct[2] = (+struct[2] || 1) - 1;\n    struct[3] = +struct[3] || 1;\n\n    // allow arbitrary sub-second precision beyond milliseconds\n    struct[7] = struct[7] ? String(struct[7]).substr(0, 3) : 0;\n\n    // timestamps without timezone identifiers should be considered local time\n    if ((struct[8] === undefined || struct[8] === '') && (struct[9] === undefined || struct[9] === '')) timestamp = +new Date(struct[1], struct[2], struct[3], struct[4], struct[5], struct[6], struct[7]);else {\n      if (struct[8] !== 'Z' && struct[9] !== undefined) {\n        minutesOffset = struct[10] * 60 + struct[11];\n        if (struct[9] === '+') minutesOffset = 0 - minutesOffset;\n      }\n      timestamp = Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + minutesOffset, struct[6], struct[7]);\n    }\n  } else timestamp = Date.parse ? Date.parse(date) : NaN;\n  return timestamp;\n}\n\n// @ts-ignore\nlet invalidDate = new Date('');\nlet isDate = obj => Object.prototype.toString.call(obj) === '[object Date]';\nfunction create$4() {\n  return new DateSchema();\n}\nclass DateSchema extends Schema {\n  constructor() {\n    super({\n      type: 'date',\n      check(v) {\n        return isDate(v) && !isNaN(v.getTime());\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce || ctx.isType(value)) return value;\n        value = parseIsoDate(value);\n\n        // 0 is a valid timestamp equivalent to 1970-01-01T00:00:00Z(unix epoch) or before.\n        return !isNaN(value) ? new Date(value) : DateSchema.INVALID_DATE;\n      });\n    });\n  }\n  prepareParam(ref, name) {\n    let param;\n    if (!Reference.isRef(ref)) {\n      let cast = this.cast(ref);\n      if (!this._typeCheck(cast)) throw new TypeError(`\\`${name}\\` must be a Date or a value that can be \\`cast()\\` to a Date`);\n      param = cast;\n    } else {\n      param = ref;\n    }\n    return param;\n  }\n  min(min, message = date.min) {\n    let limit = this.prepareParam(min, 'min');\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value >= this.resolve(limit);\n      }\n    });\n  }\n  max(max, message = date.max) {\n    let limit = this.prepareParam(max, 'max');\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value <= this.resolve(limit);\n      }\n    });\n  }\n}\nDateSchema.INVALID_DATE = invalidDate;\ncreate$4.prototype = DateSchema.prototype;\ncreate$4.INVALID_DATE = invalidDate;\n\n// @ts-expect-error\nfunction sortFields(fields, excludedEdges = []) {\n  let edges = [];\n  let nodes = new Set();\n  let excludes = new Set(excludedEdges.map(([a, b]) => `${a}-${b}`));\n  function addNode(depPath, key) {\n    let node = split(depPath)[0];\n    nodes.add(node);\n    if (!excludes.has(`${key}-${node}`)) edges.push([key, node]);\n  }\n  for (const key of Object.keys(fields)) {\n    let value = fields[key];\n    nodes.add(key);\n    if (Reference.isRef(value) && value.isSibling) addNode(value.path, key);else if (isSchema(value) && 'deps' in value) value.deps.forEach(path => addNode(path, key));\n  }\n  return toposort.array(Array.from(nodes), edges).reverse();\n}\n\nfunction findIndex(arr, err) {\n  let idx = Infinity;\n  arr.some((key, ii) => {\n    var _err$path;\n    if ((_err$path = err.path) != null && _err$path.includes(key)) {\n      idx = ii;\n      return true;\n    }\n  });\n  return idx;\n}\nfunction sortByKeyOrder(keys) {\n  return (a, b) => {\n    return findIndex(keys, a) - findIndex(keys, b);\n  };\n}\n\nconst parseJson = (value, _, ctx) => {\n  if (typeof value !== 'string') {\n    return value;\n  }\n  let parsed = value;\n  try {\n    parsed = JSON.parse(value);\n  } catch (err) {\n    /* */\n  }\n  return ctx.isType(parsed) ? parsed : value;\n};\n\n// @ts-ignore\nfunction deepPartial(schema) {\n  if ('fields' in schema) {\n    const partial = {};\n    for (const [key, fieldSchema] of Object.entries(schema.fields)) {\n      partial[key] = deepPartial(fieldSchema);\n    }\n    return schema.setFields(partial);\n  }\n  if (schema.type === 'array') {\n    const nextArray = schema.optional();\n    if (nextArray.innerType) nextArray.innerType = deepPartial(nextArray.innerType);\n    return nextArray;\n  }\n  if (schema.type === 'tuple') {\n    return schema.optional().clone({\n      types: schema.spec.types.map(deepPartial)\n    });\n  }\n  if ('optional' in schema) {\n    return schema.optional();\n  }\n  return schema;\n}\nconst deepHas = (obj, p) => {\n  const path = [...normalizePath(p)];\n  if (path.length === 1) return path[0] in obj;\n  let last = path.pop();\n  let parent = getter(join(path), true)(obj);\n  return !!(parent && last in parent);\n};\nlet isObject = obj => Object.prototype.toString.call(obj) === '[object Object]';\nfunction unknown(ctx, value) {\n  let known = Object.keys(ctx.fields);\n  return Object.keys(value).filter(key => known.indexOf(key) === -1);\n}\nconst defaultSort = sortByKeyOrder([]);\nfunction create$3(spec) {\n  return new ObjectSchema(spec);\n}\nclass ObjectSchema extends Schema {\n  constructor(spec) {\n    super({\n      type: 'object',\n      check(value) {\n        return isObject(value) || typeof value === 'function';\n      }\n    });\n    this.fields = Object.create(null);\n    this._sortErrors = defaultSort;\n    this._nodes = [];\n    this._excludedEdges = [];\n    this.withMutation(() => {\n      if (spec) {\n        this.shape(spec);\n      }\n    });\n  }\n  _cast(_value, options = {}) {\n    var _options$stripUnknown;\n    let value = super._cast(_value, options);\n\n    //should ignore nulls here\n    if (value === undefined) return this.getDefault();\n    if (!this._typeCheck(value)) return value;\n    let fields = this.fields;\n    let strip = (_options$stripUnknown = options.stripUnknown) != null ? _options$stripUnknown : this.spec.noUnknown;\n    let props = [].concat(this._nodes, Object.keys(value).filter(v => !this._nodes.includes(v)));\n    let intermediateValue = {}; // is filled during the transform below\n    let innerOptions = Object.assign({}, options, {\n      parent: intermediateValue,\n      __validating: options.__validating || false\n    });\n    let isChanged = false;\n    for (const prop of props) {\n      let field = fields[prop];\n      let exists = (prop in value);\n      if (field) {\n        let fieldValue;\n        let inputValue = value[prop];\n\n        // safe to mutate since this is fired in sequence\n        innerOptions.path = (options.path ? `${options.path}.` : '') + prop;\n        field = field.resolve({\n          value: inputValue,\n          context: options.context,\n          parent: intermediateValue\n        });\n        let fieldSpec = field instanceof Schema ? field.spec : undefined;\n        let strict = fieldSpec == null ? void 0 : fieldSpec.strict;\n        if (fieldSpec != null && fieldSpec.strip) {\n          isChanged = isChanged || prop in value;\n          continue;\n        }\n        fieldValue = !options.__validating || !strict ?\n        // TODO: use _cast, this is double resolving\n        field.cast(value[prop], innerOptions) : value[prop];\n        if (fieldValue !== undefined) {\n          intermediateValue[prop] = fieldValue;\n        }\n      } else if (exists && !strip) {\n        intermediateValue[prop] = value[prop];\n      }\n      if (exists !== prop in intermediateValue || intermediateValue[prop] !== value[prop]) {\n        isChanged = true;\n      }\n    }\n    return isChanged ? intermediateValue : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let {\n      from = [],\n      originalValue = _value,\n      recursive = this.spec.recursive\n    } = options;\n    options.from = [{\n      schema: this,\n      value: originalValue\n    }, ...from];\n    // this flag is needed for handling `strict` correctly in the context of\n    // validation vs just casting. e.g strict() on a field is only used when validating\n    options.__validating = true;\n    options.originalValue = originalValue;\n    super._validate(_value, options, panic, (objectErrors, value) => {\n      if (!recursive || !isObject(value)) {\n        next(objectErrors, value);\n        return;\n      }\n      originalValue = originalValue || value;\n      let tests = [];\n      for (let key of this._nodes) {\n        let field = this.fields[key];\n        if (!field || Reference.isRef(field)) {\n          continue;\n        }\n        tests.push(field.asNestedTest({\n          options,\n          key,\n          parent: value,\n          parentPath: options.path,\n          originalParent: originalValue\n        }));\n      }\n      this.runTests({\n        tests,\n        value,\n        originalValue,\n        options\n      }, panic, fieldErrors => {\n        next(fieldErrors.sort(this._sortErrors).concat(objectErrors), value);\n      });\n    });\n  }\n  clone(spec) {\n    const next = super.clone(spec);\n    next.fields = Object.assign({}, this.fields);\n    next._nodes = this._nodes;\n    next._excludedEdges = this._excludedEdges;\n    next._sortErrors = this._sortErrors;\n    return next;\n  }\n  concat(schema) {\n    let next = super.concat(schema);\n    let nextFields = next.fields;\n    for (let [field, schemaOrRef] of Object.entries(this.fields)) {\n      const target = nextFields[field];\n      nextFields[field] = target === undefined ? schemaOrRef : target;\n    }\n    return next.withMutation(s => s.setFields(nextFields, this._excludedEdges));\n  }\n  _getDefault() {\n    if ('default' in this.spec) {\n      return super._getDefault();\n    }\n\n    // if there is no default set invent one\n    if (!this._nodes.length) {\n      return undefined;\n    }\n    let dft = {};\n    this._nodes.forEach(key => {\n      const field = this.fields[key];\n      dft[key] = field && 'getDefault' in field ? field.getDefault() : undefined;\n    });\n    return dft;\n  }\n  setFields(shape, excludedEdges) {\n    let next = this.clone();\n    next.fields = shape;\n    next._nodes = sortFields(shape, excludedEdges);\n    next._sortErrors = sortByKeyOrder(Object.keys(shape));\n    // XXX: this carries over edges which may not be what you want\n    if (excludedEdges) next._excludedEdges = excludedEdges;\n    return next;\n  }\n  shape(additions, excludes = []) {\n    return this.clone().withMutation(next => {\n      let edges = next._excludedEdges;\n      if (excludes.length) {\n        if (!Array.isArray(excludes[0])) excludes = [excludes];\n        edges = [...next._excludedEdges, ...excludes];\n      }\n\n      // XXX: excludes here is wrong\n      return next.setFields(Object.assign(next.fields, additions), edges);\n    });\n  }\n  partial() {\n    const partial = {};\n    for (const [key, schema] of Object.entries(this.fields)) {\n      partial[key] = 'optional' in schema && schema.optional instanceof Function ? schema.optional() : schema;\n    }\n    return this.setFields(partial);\n  }\n  deepPartial() {\n    const next = deepPartial(this);\n    return next;\n  }\n  pick(keys) {\n    const picked = {};\n    for (const key of keys) {\n      if (this.fields[key]) picked[key] = this.fields[key];\n    }\n    return this.setFields(picked);\n  }\n  omit(keys) {\n    const fields = Object.assign({}, this.fields);\n    for (const key of keys) {\n      delete fields[key];\n    }\n    return this.setFields(fields);\n  }\n  from(from, to, alias) {\n    let fromGetter = getter(from, true);\n    return this.transform(obj => {\n      if (!obj) return obj;\n      let newObj = obj;\n      if (deepHas(obj, from)) {\n        newObj = Object.assign({}, obj);\n        if (!alias) delete newObj[from];\n        newObj[to] = fromGetter(obj);\n      }\n      return newObj;\n    });\n  }\n\n  /** Parse an input JSON string to an object */\n  json() {\n    return this.transform(parseJson);\n  }\n  noUnknown(noAllow = true, message = object.noUnknown) {\n    if (typeof noAllow !== 'boolean') {\n      message = noAllow;\n      noAllow = true;\n    }\n    let next = this.test({\n      name: 'noUnknown',\n      exclusive: true,\n      message: message,\n      test(value) {\n        if (value == null) return true;\n        const unknownKeys = unknown(this.schema, value);\n        return !noAllow || unknownKeys.length === 0 || this.createError({\n          params: {\n            unknown: unknownKeys.join(', ')\n          }\n        });\n      }\n    });\n    next.spec.noUnknown = noAllow;\n    return next;\n  }\n  unknown(allow = true, message = object.noUnknown) {\n    return this.noUnknown(!allow, message);\n  }\n  transformKeys(fn) {\n    return this.transform(obj => {\n      if (!obj) return obj;\n      const result = {};\n      for (const key of Object.keys(obj)) result[fn(key)] = obj[key];\n      return result;\n    });\n  }\n  camelCase() {\n    return this.transformKeys(camelCase);\n  }\n  snakeCase() {\n    return this.transformKeys(snakeCase);\n  }\n  constantCase() {\n    return this.transformKeys(key => snakeCase(key).toUpperCase());\n  }\n  describe(options) {\n    let base = super.describe(options);\n    base.fields = {};\n    for (const [key, value] of Object.entries(this.fields)) {\n      var _innerOptions;\n      let innerOptions = options;\n      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {\n        innerOptions = Object.assign({}, innerOptions, {\n          parent: innerOptions.value,\n          value: innerOptions.value[key]\n        });\n      }\n      base.fields[key] = value.describe(innerOptions);\n    }\n    return base;\n  }\n}\ncreate$3.prototype = ObjectSchema.prototype;\n\nfunction create$2(type) {\n  return new ArraySchema(type);\n}\nclass ArraySchema extends Schema {\n  constructor(type) {\n    super({\n      type: 'array',\n      check(v) {\n        return Array.isArray(v);\n      }\n    });\n\n    // `undefined` specifically means uninitialized, as opposed to \"no subtype\"\n    this.innerType = void 0;\n    this.innerType = type;\n  }\n  _cast(_value, _opts) {\n    const value = super._cast(_value, _opts);\n\n    // should ignore nulls here\n    if (!this._typeCheck(value) || !this.innerType) {\n      return value;\n    }\n    let isChanged = false;\n    const castArray = value.map((v, idx) => {\n      const castElement = this.innerType.cast(v, Object.assign({}, _opts, {\n        path: `${_opts.path || ''}[${idx}]`\n      }));\n      if (castElement !== v) {\n        isChanged = true;\n      }\n      return castElement;\n    });\n    return isChanged ? castArray : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    var _options$recursive;\n    // let sync = options.sync;\n    // let path = options.path;\n    let innerType = this.innerType;\n    // let endEarly = options.abortEarly ?? this.spec.abortEarly;\n    let recursive = (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive;\n    options.originalValue != null ? options.originalValue : _value;\n    super._validate(_value, options, panic, (arrayErrors, value) => {\n      var _options$originalValu2;\n      if (!recursive || !innerType || !this._typeCheck(value)) {\n        next(arrayErrors, value);\n        return;\n      }\n\n      // #950 Ensure that sparse array empty slots are validated\n      let tests = new Array(value.length);\n      for (let index = 0; index < value.length; index++) {\n        var _options$originalValu;\n        tests[index] = innerType.asNestedTest({\n          options,\n          index,\n          parent: value,\n          parentPath: options.path,\n          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value\n        });\n      }\n      this.runTests({\n        value,\n        tests,\n        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,\n        options\n      }, panic, innerTypeErrors => next(innerTypeErrors.concat(arrayErrors), value));\n    });\n  }\n  clone(spec) {\n    const next = super.clone(spec);\n    // @ts-expect-error readonly\n    next.innerType = this.innerType;\n    return next;\n  }\n\n  /** Parse an input JSON string to an object */\n  json() {\n    return this.transform(parseJson);\n  }\n  concat(schema) {\n    let next = super.concat(schema);\n\n    // @ts-expect-error readonly\n    next.innerType = this.innerType;\n    if (schema.innerType)\n      // @ts-expect-error readonly\n      next.innerType = next.innerType ?\n      // @ts-expect-error Lazy doesn't have concat and will break\n      next.innerType.concat(schema.innerType) : schema.innerType;\n    return next;\n  }\n  of(schema) {\n    // FIXME: this should return a new instance of array without the default to be\n    let next = this.clone();\n    if (!isSchema(schema)) throw new TypeError('`array.of()` sub-schema must be a valid yup schema not: ' + printValue(schema));\n\n    // @ts-expect-error readonly\n    next.innerType = schema;\n    return next;\n  }\n  length(length, message = array.length) {\n    return this.test({\n      message,\n      name: 'length',\n      exclusive: true,\n      params: {\n        length\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length === this.resolve(length);\n      }\n    });\n  }\n  min(min, message) {\n    message = message || array.min;\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      // FIXME(ts): Array<typeof T>\n      test(value) {\n        return value.length >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message) {\n    message = message || array.max;\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length <= this.resolve(max);\n      }\n    });\n  }\n  ensure() {\n    return this.default(() => []).transform((val, original) => {\n      // We don't want to return `null` for nullable schema\n      if (this._typeCheck(val)) return val;\n      return original == null ? [] : [].concat(original);\n    });\n  }\n  compact(rejector) {\n    let reject = !rejector ? v => !!v : (v, i, a) => !rejector(v, i, a);\n    return this.transform(values => values != null ? values.filter(reject) : values);\n  }\n  describe(options) {\n    let base = super.describe();\n    if (this.innerType) {\n      var _innerOptions;\n      let innerOptions = options;\n      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {\n        innerOptions = Object.assign({}, innerOptions, {\n          parent: innerOptions.value,\n          value: innerOptions.value[0]\n        });\n      }\n      base.innerType = this.innerType.describe(options);\n    }\n    return base;\n  }\n}\ncreate$2.prototype = ArraySchema.prototype;\n\n// @ts-ignore\nfunction create$1(schemas) {\n  return new TupleSchema(schemas);\n}\nclass TupleSchema extends Schema {\n  constructor(schemas) {\n    super({\n      type: 'tuple',\n      spec: {\n        types: schemas\n      },\n      check(v) {\n        const types = this.spec.types;\n        return Array.isArray(v) && v.length === types.length;\n      }\n    });\n    this.withMutation(() => {\n      this.typeError(tuple.notType);\n    });\n  }\n  _cast(inputValue, options) {\n    const {\n      types\n    } = this.spec;\n    const value = super._cast(inputValue, options);\n    if (!this._typeCheck(value)) {\n      return value;\n    }\n    let isChanged = false;\n    const castArray = types.map((type, idx) => {\n      const castElement = type.cast(value[idx], Object.assign({}, options, {\n        path: `${options.path || ''}[${idx}]`\n      }));\n      if (castElement !== value[idx]) isChanged = true;\n      return castElement;\n    });\n    return isChanged ? castArray : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let itemTypes = this.spec.types;\n    super._validate(_value, options, panic, (tupleErrors, value) => {\n      var _options$originalValu2;\n      // intentionally not respecting recursive\n      if (!this._typeCheck(value)) {\n        next(tupleErrors, value);\n        return;\n      }\n      let tests = [];\n      for (let [index, itemSchema] of itemTypes.entries()) {\n        var _options$originalValu;\n        tests[index] = itemSchema.asNestedTest({\n          options,\n          index,\n          parent: value,\n          parentPath: options.path,\n          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value\n        });\n      }\n      this.runTests({\n        value,\n        tests,\n        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,\n        options\n      }, panic, innerTypeErrors => next(innerTypeErrors.concat(tupleErrors), value));\n    });\n  }\n}\ncreate$1.prototype = TupleSchema.prototype;\n\nfunction create(builder) {\n  return new Lazy(builder);\n}\nclass Lazy {\n  constructor(builder) {\n    this.type = 'lazy';\n    this.__isYupSchema__ = true;\n    this.spec = void 0;\n    this._resolve = (value, options = {}) => {\n      let schema = this.builder(value, options);\n      if (!isSchema(schema)) throw new TypeError('lazy() functions must return a valid schema');\n      if (this.spec.optional) schema = schema.optional();\n      return schema.resolve(options);\n    };\n    this.builder = builder;\n    this.spec = {\n      meta: undefined,\n      optional: false\n    };\n  }\n  clone(spec) {\n    const next = new Lazy(this.builder);\n    next.spec = Object.assign({}, this.spec, spec);\n    return next;\n  }\n  optionality(optional) {\n    const next = this.clone({\n      optional\n    });\n    return next;\n  }\n  optional() {\n    return this.optionality(true);\n  }\n  resolve(options) {\n    return this._resolve(options.value, options);\n  }\n  cast(value, options) {\n    return this._resolve(value, options).cast(value, options);\n  }\n  asNestedTest(config) {\n    let {\n      key,\n      index,\n      parent,\n      options\n    } = config;\n    let value = parent[index != null ? index : key];\n    return this._resolve(value, Object.assign({}, options, {\n      value,\n      parent\n    })).asNestedTest(config);\n  }\n  validate(value, options) {\n    return this._resolve(value, options).validate(value, options);\n  }\n  validateSync(value, options) {\n    return this._resolve(value, options).validateSync(value, options);\n  }\n  validateAt(path, value, options) {\n    return this._resolve(value, options).validateAt(path, value, options);\n  }\n  validateSyncAt(path, value, options) {\n    return this._resolve(value, options).validateSyncAt(path, value, options);\n  }\n  isValid(value, options) {\n    return this._resolve(value, options).isValid(value, options);\n  }\n  isValidSync(value, options) {\n    return this._resolve(value, options).isValidSync(value, options);\n  }\n  describe(options) {\n    return options ? this.resolve(options).describe(options) : {\n      type: 'lazy',\n      meta: this.spec.meta,\n      label: undefined\n    };\n  }\n  meta(...args) {\n    if (args.length === 0) return this.spec.meta;\n    let next = this.clone();\n    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);\n    return next;\n  }\n}\n\nfunction setLocale(custom) {\n  Object.keys(custom).forEach(type => {\n    // @ts-ignore\n    Object.keys(custom[type]).forEach(method => {\n      // @ts-ignore\n      locale[type][method] = custom[type][method];\n    });\n  });\n}\n\nfunction addMethod(schemaType, name, fn) {\n  if (!schemaType || !isSchema(schemaType.prototype)) throw new TypeError('You must provide a yup schema constructor function');\n  if (typeof name !== 'string') throw new TypeError('A Method name must be provided');\n  if (typeof fn !== 'function') throw new TypeError('Method function must be provided');\n  schemaType.prototype[name] = fn;\n}\n\nexport { ArraySchema, BooleanSchema, DateSchema, MixedSchema, NumberSchema, ObjectSchema, Schema, StringSchema, TupleSchema, ValidationError, addMethod, create$2 as array, create$7 as bool, create$7 as boolean, create$4 as date, getIn, isSchema, create as lazy, create$8 as mixed, create$5 as number, create$3 as object, reach, create$9 as ref, setLocale, create$6 as string, create$1 as tuple };\n","import { number, object, string } from 'yup'\n\nexport const schema = object().shape({\n  name: string().required(),\n  email: string().required().email(),\n  phone: number().required()/* .test( phone => Number.isNaN(Number(phone))) */\n})\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n//# sourceMappingURL=helper.js.map","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        super.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - the name of the function to invoke\n     */\n    invoke(functionName, invokeOptions = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, body: functionArgs } = invokeOptions;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n//# sourceMappingURL=FunctionsClient.js.map","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","import crossFetch from 'cross-fetch';\nexport default class PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.allowEmpty = builder.allowEmpty;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = crossFetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then(async (res) => {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = await res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                const body = await res.text();\n                try {\n                    error = JSON.parse(body);\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (Array.isArray(error) && res.status === 404) {\n                        data = [];\n                        error = null;\n                        status = 200;\n                        statusText = 'OK';\n                    }\n                }\n                catch (_d) {\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (res.status === 404 && body === '') {\n                        status = 204;\n                        statusText = 'No Content';\n                    }\n                    else {\n                        error = {\n                            message: body,\n                        };\n                    }\n                }\n                if (error && this.allowEmpty && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        });\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => ({\n                error: {\n                    message: `FetchError: ${fetchError.message}`,\n                    details: '',\n                    hint: '',\n                    code: fetchError.code || '',\n                },\n                data: null,\n                count: null,\n                status: 0,\n                statusText: '',\n            }));\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n//# sourceMappingURL=PostgrestBuilder.js.map","import PostgrestBuilder from './PostgrestBuilder';\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    /**\n     * Order the query result by `column`.\n     *\n     * You can call this method multiple times to order by multiple columns.\n     *\n     * You can order foreign tables, but it doesn't affect the ordering of the\n     * current table.\n     *\n     * @param column - The column to order by\n     * @param options - Named parameters\n     * @param options.ascending - If `true`, the result will be in ascending order\n     * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n     * `null`s appear last.\n     * @param options.foreignTable - Set this to order a foreign table by foreign\n     * columns\n     */\n    order(column, { ascending = true, nullsFirst, foreignTable, } = {}) {\n        const key = foreignTable ? `${foreignTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `from` and `to` inclusively.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        this.allowEmpty = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = this.headers['Accept'];\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     */\n    returns() {\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestTransformBuilder.js.map","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    /**\n     * Match only rows where `column` is equal to `value`.\n     *\n     * To check if the value of `column` is NULL, you should use `.is()` instead.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is not equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` IS `value`.\n     *\n     * For non-boolean columns, this is only relevant for checking if the value of\n     * `column` is NULL by setting `value` to `null`.\n     *\n     * For boolean columns, you can also set `value` to `true` or `false` and it\n     * will behave the same way as `.eq()`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is included in the `values` array.\n     *\n     * @param column - The column to filter on\n     * @param values - The values array to filter with\n     */\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * `column` contains every element appearing in `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * every element appearing in `column` is contained by `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is greater than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or greater than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is less than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or less than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where `column` is\n     * mutually exclusive to `range` and there can be no element between the two\n     * ranges.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for array and range columns. Match only rows where\n     * `column` and `value` have an element in common.\n     *\n     * @param column - The array or range column to filter on\n     * @param value - The array or range value to filter with\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for text and tsvector columns. Match only rows where\n     * `column` matches the query string in `query`.\n     *\n     * @param column - The text or tsvector column to filter on\n     * @param query - The query text to match with\n     * @param options - Named parameters\n     * @param options.config - The text search configuration to use\n     * @param options.type - Change how the `query` text is interpreted\n     */\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Match only rows where each column in `query` keys is equal to its\n     * associated value. Shorthand for multiple `.eq()`s.\n     *\n     * @param query - The object to filter with, with column names as keys mapped\n     * to their filter values\n     */\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    /**\n     * Match only rows which doesn't satisfy the filter.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to be negated to filter with, following\n     * PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param foreignTable - Set this to filter on foreign tables instead of the\n     * current table\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = foreignTable ? `${foreignTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy the filter. This is an escape hatch - you\n     * should use the specific filter methods wherever possible.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to filter with, following PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestFilterBuilder.js.map","import PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    insert(values, { count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestQueryBuilder.js.map","export const version = '1.4.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n//# sourceMappingURL=constants.js.map","import PostgrestQueryBuilder from './PostgrestQueryBuilder';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nimport { DEFAULT_HEADERS } from './constants';\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head) {\n            method = 'HEAD';\n            Object.entries(args).forEach(([name, value]) => {\n                url.searchParams.append(name, `${value}`);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url,\n            headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestClient.js.map","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","export const version = '2.6.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n//# sourceMappingURL=constants.js.map","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n//# sourceMappingURL=timer.js.map","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n//# sourceMappingURL=push.js.map","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n//# sourceMappingURL=RealtimePresence.js.map","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} stringValue The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n//# sourceMappingURL=transformers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    /**\n     * listen to Postgres changes.\n     */\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n **/\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence }, } = this.params;\n            this._onError((e) => callback && callback('CHANNEL_ERROR', e));\n            this._onClose(() => callback && callback('CLOSED'));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n            };\n            if (this.socket.accessToken) {\n                accessTokenPayload.access_token = this.socket.accessToken;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', ({ postgres_changes: serverPostgresFilters, }) => {\n                var _a;\n                this.socket.accessToken &&\n                    this.socket.setAuth(this.socket.accessToken);\n                if (serverPostgresFilters === undefined) {\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = serverPostgresFilters && serverPostgresFilters[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback &&\n                                callback('CHANNEL_ERROR', new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback &&\n                    callback('CHANNEL_ERROR', new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback && callback('TIMED_OUT');\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    track(payload, opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'track',\n                payload,\n            }, opts.timeout || this.timeout);\n        });\n    }\n    untrack(opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'untrack',\n            }, opts);\n        });\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    send(payload, opts = {}) {\n        return new Promise((resolve) => {\n            var _a, _b, _c;\n            const push = this._push(payload.type, payload, opts.timeout || this.timeout);\n            if (push.rateLimited) {\n                resolve('rate limited');\n            }\n            if (payload.type === 'broadcast' &&\n                !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                resolve('ok');\n            }\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => resolve('timed out'));\n        });\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n//# sourceMappingURL=RealtimeChannel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.eventsPerSecondLimitMs = 100;\n        this.inThrottle = false;\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const eventsPerSecond = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.eventsPerSecond;\n        if (eventsPerSecond)\n            this.eventsPerSecondLimitMs = Math.floor(1000 / eventsPerSecond);\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this._endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    /**\n     * Returns all created channels\n     */\n    getChannels() {\n        return this.channels;\n    }\n    /**\n     * Unsubscribes and removes a single channel\n     * @param channel A RealtimeChannel instance\n     */\n    removeChannel(channel) {\n        return channel.unsubscribe().then((status) => {\n            if (this.channels.length === 0) {\n                this.disconnect();\n            }\n            return status;\n        });\n    }\n    /**\n     * Unsubscribes and removes all channels\n     */\n    removeAllChannels() {\n        return Promise.all(this.channels.map((channel) => channel.unsubscribe())).then((values) => {\n            this.disconnect();\n            return values;\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overridden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Returns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        if (!this.isConnected()) {\n            this.connect();\n        }\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            if (['broadcast', 'presence', 'postgres_changes'].includes(event)) {\n                const isThrottled = this._throttle(callback)();\n                if (isThrottled) {\n                    return 'rate limited';\n                }\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ access_token: token });\n            if (channel.joinedOnce && channel._isJoined()) {\n                channel._push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Returns the URL of the websocket.\n     *\n     * @internal\n     */\n    _endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    _onConnOpen() {\n        this.log('transport', `connected to ${this._endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    /** @internal */\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /** @internal */\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n    /** @internal */\n    _throttle(callback, eventsPerSecondLimitMs = this.eventsPerSecondLimitMs) {\n        return () => {\n            if (this.inThrottle)\n                return true;\n            callback();\n            if (eventsPerSecondLimitMs > 0) {\n                this.inThrottle = true;\n                setTimeout(() => {\n                    this.inThrottle = false;\n                }, eventsPerSecondLimitMs);\n            }\n            return false;\n        };\n    }\n}\n//# sourceMappingURL=RealtimeClient.js.map","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        return (yield import('cross-fetch')).Response;\n    }\n    return Response;\n});\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res) {\n        error.json().then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError } from '../lib/errors';\nimport { get, post, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, {\n                    method,\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, Object.assign({ expiresIn }, ((options === null || options === void 0 ? void 0 : options.transform) ? { transform: options.transform } : {})), { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file from a private bucket. For public buckets, make a request to the URL returned from `getPublicUrl` instead.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    download(path, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n            const renderPath = wantsTransformation ? 'render/image/authenticated' : 'object';\n            const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n            const queryString = transformationQuery ? `?${transformationQuery}` : '';\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/${renderPath}/${_path}${queryString}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download Triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const _queryString = [];\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `download=${options.download === true ? '' : options.download}`\n            : '';\n        if (downloadQueryParam !== '') {\n            _queryString.push(downloadQueryParam);\n        }\n        const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n        const renderPath = wantsTransformation ? 'render/image' : 'object';\n        const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n        if (transformationQuery !== '') {\n            _queryString.push(transformationQuery);\n        }\n        let queryString = _queryString.join('&');\n        if (queryString !== '') {\n            queryString = `?${queryString}`;\n        }\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/${renderPath}/public/${_path}${queryString}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n    transformOptsToQueryString(transform) {\n        const params = [];\n        if (transform.width) {\n            params.push(`width=${transform.width}`);\n        }\n        if (transform.height) {\n            params.push(`height=${transform.height}`);\n        }\n        if (transform.resize) {\n            params.push(`resize=${transform.resize}`);\n        }\n        if (transform.format) {\n            params.push(`format=${transform.format}`);\n        }\n        if (transform.quality) {\n            params.push(`quality=${transform.quality}`);\n        }\n        return params.join('&');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map","// generated by genversion\nexport const version = '2.3.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = { public: false }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=StorageBucketApi.js.map","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n//# sourceMappingURL=StorageClient.js.map","export const version = '2.8.0';\n//# sourceMappingURL=version.js.map","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n//# sourceMappingURL=fetch.js.map","export function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    return {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions),\n    };\n}\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof document !== 'undefined';\nconst localStorageWriteTests = {\n    tested: false,\n    writable: false,\n};\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n    if (!isBrowser()) {\n        return false;\n    }\n    try {\n        if (typeof globalThis.localStorage !== 'object') {\n            return false;\n        }\n    }\n    catch (e) {\n        // DOM exception when accessing `localStorage`\n        return false;\n    }\n    if (localStorageWriteTests.tested) {\n        return localStorageWriteTests.writable;\n    }\n    const randomKey = `lswt-${Math.random()}${Math.random()}`;\n    try {\n        globalThis.localStorage.setItem(randomKey, randomKey);\n        globalThis.localStorage.removeItem(randomKey);\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = true;\n    }\n    catch (e) {\n        // localStorage can't be written to\n        // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = false;\n    }\n    return localStorageWriteTests.writable;\n};\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.setItem(key, JSON.stringify(data));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = yield storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.removeItem(key);\n});\nexport function decodeBase64URL(value) {\n    const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let base64 = '';\n    let chr1, chr2, chr3;\n    let enc1, enc2, enc3, enc4;\n    let i = 0;\n    value = value.replace('-', '+').replace('_', '/');\n    while (i < value.length) {\n        enc1 = key.indexOf(value.charAt(i++));\n        enc2 = key.indexOf(value.charAt(i++));\n        enc3 = key.indexOf(value.charAt(i++));\n        enc4 = key.indexOf(value.charAt(i++));\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n        base64 = base64 + String.fromCharCode(chr1);\n        if (enc3 != 64 && chr2 != 0) {\n            base64 = base64 + String.fromCharCode(chr2);\n        }\n        if (enc4 != 64 && chr3 != 0) {\n            base64 = base64 + String.fromCharCode(chr3);\n        }\n    }\n    return base64;\n}\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\nexport function decodeJWTPayload(token) {\n    // Regex checks for base64url format\n    const base64UrlRegex = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i;\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new Error('JWT is not valid: not a JWT structure');\n    }\n    if (!base64UrlRegex.test(parts[1])) {\n        throw new Error('JWT is not valid: payload is not in base64url format');\n    }\n    const base64Url = parts[1];\n    return JSON.parse(decodeBase64URL(base64Url));\n}\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport function sleep(time) {\n    return new Promise((accept) => {\n        setTimeout(() => accept(null), time);\n    });\n}\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable(fn, isRetryable) {\n    const promise = new Promise((accept, reject) => {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        (() => __awaiter(this, void 0, void 0, function* () {\n            for (let attempt = 0; attempt < Infinity; attempt++) {\n                try {\n                    const result = yield fn(attempt);\n                    if (!isRetryable(attempt, null, result)) {\n                        accept(result);\n                        return;\n                    }\n                }\n                catch (e) {\n                    if (!isRetryable(attempt, e)) {\n                        reject(e);\n                        return;\n                    }\n                }\n            }\n        }))();\n    });\n    return promise;\n}\n//# sourceMappingURL=helpers.js.map","export class AuthError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n        this.status = status;\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status) {\n        super(message, status);\n        this.name = 'AuthApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport function isAuthApiError(error) {\n    return isAuthError(error) && error.name === 'AuthApiError';\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status) {\n        super(message);\n        this.name = name;\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status);\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const NETWORK_ERROR_CODES = [502, 503, 504];\n    if (!looksLikeFetchResponse(error)) {\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n    }\n    else if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n    }\n    else {\n        // got a response from server that is not in the 500...599 range - should not retry\n        error\n            .json()\n            .then((err) => {\n            reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((e) => {\n            // not a valid json response\n            reject(new AuthUnknownError(_getErrorMessage(e), e));\n        });\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport function _request(fetcher, method, url, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n        if (options === null || options === void 0 ? void 0 : options.jwt) {\n            headers['Authorization'] = `Bearer ${options.jwt}`;\n        }\n        const qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            qs['redirect_to'] = options.redirectTo;\n        }\n        const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n        const data = yield _handleRequest(fetcher, method, url + queryString, { headers, noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson }, {}, options === null || options === void 0 ? void 0 : options.body);\n        return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n    });\n}\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        session.expires_at = expiresAt(data.expires_in);\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\nexport function _noResolveJsonResponse(data) {\n    return data;\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _noResolveJsonResponse, _request, _userResponse, } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield _request(this.fetch, 'POST', `${this.url}/logout`, {\n                    headers: this.headers,\n                    jwt,\n                    noResolveJson: true,\n                });\n                return { data: null, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo A URL or mobile deeplink to send the user to after they are confirmed.\n     * @param options.data Optional user metadata\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/invite`, {\n                    body: { email, data: options.data },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    generateLink(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { options } = params, rest = __rest(params, [\"options\"]);\n                const body = Object.assign(Object.assign({}, rest), options);\n                if ('newEmail' in rest) {\n                    // replace newEmail with new_email in request body\n                    body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                    delete body['newEmail'];\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                    body: body,\n                    headers: this.headers,\n                    xform: _generateLinkResponse,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return {\n                        data: {\n                            properties: null,\n                            user: null,\n                        },\n                        error,\n                    };\n                }\n                throw error;\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     * @param params An object which supports `page` and `perPage` as numbers, to alter the paginated results.\n     */\n    listUsers(params) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const pagination = { nextPage: null, lastPage: 0, total: 0 };\n                const response = yield _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                    query: {\n                        page: (_b = (_a = params === null || params === void 0 ? void 0 : params.page) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '',\n                        per_page: (_d = (_c = params === null || params === void 0 ? void 0 : params.perPage) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : '',\n                    },\n                    xform: _noResolveJsonResponse,\n                });\n                if (response.error)\n                    throw response.error;\n                const users = yield response.json();\n                const total = (_e = response.headers.get('x-total-count')) !== null && _e !== void 0 ? _e : 0;\n                const links = (_g = (_f = response.headers.get('link')) === null || _f === void 0 ? void 0 : _f.split(',')) !== null && _g !== void 0 ? _g : [];\n                if (links.length > 0) {\n                    links.forEach((link) => {\n                        const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1));\n                        const rel = JSON.parse(link.split(';')[1].split('=')[1]);\n                        pagination[`${rel}Page`] = page;\n                    });\n                    pagination.total = parseInt(total);\n                }\n                return { data: Object.assign(Object.assign({}, users), pagination), error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { users: [] }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     * @param shouldSoftDelete If true, then the user will be soft-deleted from the auth schema.\n     * Defaults to false for backward compatibility.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    deleteUser(id, shouldSoftDelete = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                    headers: this.headers,\n                    body: {\n                        should_soft_delete: shouldSoftDelete,\n                    },\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _listFactors(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                    headers: this.headers,\n                    xform: (factors) => {\n                        return { data: { factors }, error: null };\n                    },\n                });\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _deleteFactor(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=GoTrueAdminApi.js.map","// Generated by genversion.\nexport const version = '2.12.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\n//# sourceMappingURL=constants.js.map","import { supportsLocalStorage } from './helpers';\nconst localStorageAdapter = {\n    getItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\nexport default localStorageAdapter;\n//# sourceMappingURL=local-storage.js.map","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n//# sourceMappingURL=polyfills.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN, GOTRUE_URL, STORAGE_KEY } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthInvalidCredentialsError, AuthRetryableFetchError, AuthSessionMissingError, AuthUnknownError, isAuthApiError, isAuthError, } from './lib/errors';\nimport { _request, _sessionResponse, _userResponse, _ssoResponse } from './lib/fetch';\nimport { decodeJWTPayload, Deferred, getItemAsync, getParameterByName, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, retryable, sleep, } from './lib/helpers';\nimport localStorageAdapter from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n};\n/** Current session will be checked for refresh at this interval. */\nconst AUTO_REFRESH_TICK_DURATION = 10 * 1000;\n/**\n * A token refresh will be attempted this many ticks before the current session expires. */\nconst AUTO_REFRESH_TICK_THRESHOLD = 3;\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        this.stateChangeEmitters = new Map();\n        this.autoRefreshTicker = null;\n        this.visibilityChangedCallback = null;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        /**\n         * Used to broadcast state change events to other tabs listening.\n         */\n        this.broadcastChannel = null;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.inMemorySession = null;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.storage = settings.storage || localStorageAdapter;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n        if (isBrowser() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) {\n            this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey);\n            this.broadcastChannel.addEventListener('message', (event) => {\n                this._notifyAllSubscribers(event.data.event, event.data.session, false); // broadcast = false so we don't get an endless loop of messages\n            });\n        }\n        this.initialize();\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    initialize() {\n        if (!this.initializePromise) {\n            this.initializePromise = this._initialize();\n        }\n        return this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    _initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.initializePromise) {\n                return this.initializePromise;\n            }\n            try {\n                if (this.detectSessionInUrl && this._isImplicitGrantFlow()) {\n                    const { data, error } = yield this._getSessionFromUrl();\n                    if (error) {\n                        // failed login attempt via url,\n                        // remove old session as in verifyOtp, signUp and signInWith*\n                        yield this._removeSession();\n                        return { error };\n                    }\n                    const { session, redirectType } = data;\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                    if (redirectType === 'recovery') {\n                        this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                    }\n                    return { error: null };\n                }\n                // no login attempt via callback url try to recover session from storage\n                yield this._recoverAndRefresh();\n                return { error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { error };\n                }\n                return {\n                    error: new AuthUnknownError('Unexpected error during initialization', error),\n                };\n            }\n            finally {\n                yield this._handleVisibilityChange();\n            }\n        });\n    }\n    /**\n     * Creates a new user.\n     *\n     * Be aware that if a user account exists in the system you may get back an\n     * error message that attempts to hide this information from the user.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUp(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                const session = data.session;\n                const user = data.user;\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     *\n     * Be aware that you may get back an error message that will not distingish\n     * between the cases where the account does not exist or that the\n     * email/phone and password combination is wrong or that the account can only\n     * be accessed via social login.\n     */\n    signInWithPassword(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     */\n    signInWithOAuth(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            return this._handleProviderSignIn(credentials.provider, {\n                redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n                skipBrowserRedirect: (_d = credentials.options) === null || _d === void 0 ? void 0 : _d.skipBrowserRedirect,\n            });\n        });\n    }\n    /**\n     * Allows signing in with an ID token issued by certain supported providers.\n     * The ID token is verified for validity and a new session is established.\n     *\n     * @experimental\n     */\n    signInWithIdToken(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            try {\n                const { options, provider, token, nonce } = credentials;\n                const res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n                    headers: this.headers,\n                    body: {\n                        provider,\n                        id_token: token,\n                        nonce,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponse,\n                });\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     *\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or, that the account\n     * can only be accessed via social login.\n     */\n    signInWithOtp(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                if ('email' in credentials) {\n                    const { email, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                if ('phone' in credentials) {\n                    const { phone, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                            create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     */\n    verifyOtp(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/verify`, {\n                    headers: this.headers,\n                    body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: (_a = params.options) === null || _a === void 0 ? void 0 : _a.captchaToken } }),\n                    redirectTo: (_b = params.options) === null || _b === void 0 ? void 0 : _b.redirectTo,\n                    xform: _sessionResponse,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on token verification.';\n                }\n                const session = data.session;\n                const user = data.user;\n                if (session === null || session === void 0 ? void 0 : session.access_token) {\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     *\n     * This API is experimental and availability is conditional on correct\n     * settings on the Auth service.\n     *\n     * @experimental\n     */\n    signInWithSSO(params) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                return yield _request(this.fetch, 'POST', `${this.url}/sso`, {\n                    body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                        ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                        : null)), { skip_http_redirect: true }),\n                    headers: this.headers,\n                    xform: _ssoResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     */\n    getSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure we've read the session from the url if there is one\n            // save to just await, as long we make sure _initialize() never throws\n            yield this.initializePromise;\n            let currentSession = null;\n            if (this.persistSession) {\n                const maybeSession = yield getItemAsync(this.storage, this.storageKey);\n                if (maybeSession !== null) {\n                    if (this._isValidSession(maybeSession)) {\n                        currentSession = maybeSession;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n            }\n            else {\n                currentSession = this.inMemorySession;\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at <= Date.now() / 1000\n                : false;\n            if (!hasExpired) {\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        });\n    }\n    /**\n     * Gets the current user details if there is an existing session.\n     * @param jwt Takes in an optional access token jwt. If no jwt is provided, getUser() will attempt to get the jwt from the current session.\n     */\n    getUser(jwt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!jwt) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    // Default to Authorization header if there is no existing session\n                    jwt = (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                }\n                return yield _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates user data for a logged in user.\n     */\n    updateUser(attributes, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                const { data, error: userError } = yield _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    body: attributes,\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Decodes a JWT (without performing any validation).\n     */\n    _decodeJWT(jwt) {\n        return decodeJWTPayload(jwt);\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token or access token in the current session is invalid, an error will be thrown.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    setSession(currentSession) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession.access_token || !currentSession.refresh_token) {\n                    throw new AuthSessionMissingError();\n                }\n                const timeNow = Date.now() / 1000;\n                let expiresAt = timeNow;\n                let hasExpired = true;\n                let session = null;\n                const payload = decodeJWTPayload(currentSession.access_token);\n                if (payload.exp) {\n                    expiresAt = payload.exp;\n                    hasExpired = expiresAt <= timeNow;\n                }\n                if (hasExpired) {\n                    const { session: refreshedSession, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                    if (error) {\n                        return { data: { user: null, session: null }, error: error };\n                    }\n                    if (!refreshedSession) {\n                        return { data: { user: null, session: null }, error: null };\n                    }\n                    session = refreshedSession;\n                }\n                else {\n                    const { data, error } = yield this.getUser(currentSession.access_token);\n                    if (error) {\n                        throw error;\n                    }\n                    session = {\n                        access_token: currentSession.access_token,\n                        refresh_token: currentSession.refresh_token,\n                        user: data.user,\n                        token_type: 'bearer',\n                        expires_in: expiresAt - timeNow,\n                        expires_at: expiresAt,\n                    };\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    refreshSession(currentSession) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    _getSessionFromUrl() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new AuthImplicitGrantRedirectError('No browser detected.');\n                if (!this._isImplicitGrantFlow()) {\n                    throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                }\n                const error_description = getParameterByName('error_description');\n                if (error_description) {\n                    const error_code = getParameterByName('error_code');\n                    if (!error_code)\n                        throw new AuthImplicitGrantRedirectError('No error_code detected.');\n                    const error = getParameterByName('error');\n                    if (!error)\n                        throw new AuthImplicitGrantRedirectError('No error detected.');\n                    throw new AuthImplicitGrantRedirectError(error_description, { error, code: error_code });\n                }\n                const provider_token = getParameterByName('provider_token');\n                const provider_refresh_token = getParameterByName('provider_refresh_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new AuthImplicitGrantRedirectError('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new AuthImplicitGrantRedirectError('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new AuthImplicitGrantRedirectError('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new AuthImplicitGrantRedirectError('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { data, error } = yield this.getUser(access_token);\n                if (error)\n                    throw error;\n                const user = data.user;\n                const session = {\n                    provider_token,\n                    provider_refresh_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user,\n                };\n                const redirectType = getParameterByName('type');\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: { session, redirectType }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, redirectType: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantFlow() {\n        return (isBrowser() &&\n            (Boolean(getParameterByName('access_token')) ||\n                Boolean(getParameterByName('error_description'))));\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = yield this.admin.signOut(accessToken);\n                if (error) {\n                    // ignore 404s since user might not exist anymore\n                    // ignore 401s since an invalid or expired JWT should sign out the current session\n                    if (!(isAuthApiError(error) && (error.status === 404 || error.status === 401))) {\n                        return { error };\n                    }\n                }\n            }\n            yield this._removeSession();\n            this._notifyAllSubscribers('SIGNED_OUT', null);\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this.stateChangeEmitters.set(id, subscription);\n        return { data: { subscription } };\n    }\n    /**\n     * Sends a password reset request to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/recover`, {\n                    body: { email, gotrue_meta_security: { captcha_token: options.captchaToken } },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    _refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const startedAt = Date.now();\n                // will attempt to refresh the token with exponential backoff\n                return yield retryable((attempt) => __awaiter(this, void 0, void 0, function* () {\n                    yield sleep(attempt * 200); // 0, 200, 400, 800, ...\n                    return yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                        body: { refresh_token: refreshToken },\n                        headers: this.headers,\n                        xform: _sessionResponse,\n                    });\n                }), (attempt, _, result) => result &&\n                    result.error &&\n                    result.error instanceof AuthRetryableFetchError &&\n                    // retryable only if the request can be sent before the backoff overflows the tick duration\n                    Date.now() + (attempt + 1) * 200 - startedAt < AUTO_REFRESH_TICK_DURATION);\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    _handleProviderSignIn(provider, options = {}) {\n        const url = this._getUrlForProvider(provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n            queryParams: options.queryParams,\n        });\n        // try to open on the browser\n        if (isBrowser() && !options.skipBrowserRedirect) {\n            window.location.assign(url);\n        }\n        return { data: { provider, url }, error: null };\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const currentSession = yield getItemAsync(this.storage, this.storageKey);\n                if (!this._isValidSession(currentSession)) {\n                    if (currentSession !== null) {\n                        yield this._removeSession();\n                    }\n                    return;\n                }\n                const timeNow = Math.round(Date.now() / 1000);\n                if (((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            yield this._removeSession();\n                        }\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n                else {\n                    if (this.persistSession) {\n                        yield this._saveSession(currentSession);\n                    }\n                    this._notifyAllSubscribers('SIGNED_IN', currentSession);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return;\n            }\n        });\n    }\n    _callRefreshToken(refreshToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // refreshing is already in progress\n            if (this.refreshingDeferred) {\n                return this.refreshingDeferred.promise;\n            }\n            try {\n                this.refreshingDeferred = new Deferred();\n                if (!refreshToken) {\n                    throw new AuthSessionMissingError();\n                }\n                const { data, error } = yield this._refreshAccessToken(refreshToken);\n                if (error)\n                    throw error;\n                if (!data.session)\n                    throw new AuthSessionMissingError();\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n                const result = { session: data.session, error: null };\n                this.refreshingDeferred.resolve(result);\n                return result;\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    const result = { session: null, error };\n                    (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                    return result;\n                }\n                (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n                throw error;\n            }\n            finally {\n                this.refreshingDeferred = null;\n            }\n        });\n    }\n    _notifyAllSubscribers(event, session, broadcast = true) {\n        if (this.broadcastChannel && broadcast) {\n            this.broadcastChannel.postMessage({ event, session });\n        }\n        this.stateChangeEmitters.forEach((x) => x.callback(event, session));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.persistSession) {\n                this.inMemorySession = session;\n            }\n            if (this.persistSession && session.expires_at) {\n                yield this._persistSession(session);\n            }\n        });\n    }\n    _persistSession(currentSession) {\n        return setItemAsync(this.storage, this.storageKey, currentSession);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.persistSession) {\n                yield removeItemAsync(this.storage, this.storageKey);\n            }\n            else {\n                this.inMemorySession = null;\n            }\n        });\n    }\n    /**\n     * Removes any registered visibilitychange callback.\n     *\n     * {@see #startAutoRefresh}\n     * {@see #stopAutoRefresh}\n     */\n    _removeVisibilityChangedCallback() {\n        const callback = this.visibilityChangedCallback;\n        this.visibilityChangedCallback = null;\n        try {\n            if (callback && isBrowser() && (window === null || window === void 0 ? void 0 : window.removeEventListener)) {\n                window.removeEventListener('visibilitychange', callback);\n            }\n        }\n        catch (e) {\n            console.error('removing visibilitychange callback failed', e);\n        }\n    }\n    /**\n     * This is the private implementation of {@link #startAutoRefresh}. Use this\n     * within the library.\n     */\n    _startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._stopAutoRefresh();\n            const ticker = setInterval(() => this._autoRefreshTokenTick(), AUTO_REFRESH_TICK_DURATION);\n            this.autoRefreshTicker = ticker;\n            if (ticker && typeof ticker === 'object' && typeof ticker.unref === 'function') {\n                // ticker is a NodeJS Timeout object that has an `unref` method\n                // https://nodejs.org/api/timers.html#timeoutunref\n                // When auto refresh is used in NodeJS (like for testing) the\n                // `setInterval` is preventing the process from being marked as\n                // finished and tests run endlessly. This can be prevented by calling\n                // `unref()` on the returned object.\n                ticker.unref();\n            }\n            // run the tick immediately\n            yield this._autoRefreshTokenTick();\n        });\n    }\n    /**\n     * This is the private implementation of {@link #stopAutoRefresh}. Use this\n     * within the library.\n     */\n    _stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ticker = this.autoRefreshTicker;\n            this.autoRefreshTicker = null;\n            if (ticker) {\n                clearInterval(ticker);\n            }\n        });\n    }\n    /**\n     * Starts an auto-refresh process in the background. The session is checked\n     * every few seconds. Close to the time of expiration a process is started to\n     * refresh the session. If refreshing fails it will be retried for as long as\n     * necessary.\n     *\n     * If you set the {@link GoTrueClientOptions#autoRefreshToken} you don't need\n     * to call this function, it will be called for you.\n     *\n     * On browsers the refresh process works only when the tab/window is in the\n     * foreground to conserve resources as well as prevent race conditions and\n     * flooding auth with requests. If you call this method any managed\n     * visibility change callback will be removed and you must manage visibility\n     * changes on your own.\n     *\n     * On non-browser platforms the refresh process works *continuously* in the\n     * background, which may not be desireable. You should hook into your\n     * platform's foreground indication mechanism and call these methods\n     * appropriately to conserve resources.\n     *\n     * {@see #stopAutoRefresh}\n     */\n    startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._startAutoRefresh();\n        });\n    }\n    /**\n     * Stops an active auto refresh process running in the background (if any).\n     *\n     * If you call this method any managed visibility change callback will be\n     * removed and you must manage visibility changes on your own.\n     *\n     * See {@link #startAutoRefresh} for more details.\n     */\n    stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._stopAutoRefresh();\n        });\n    }\n    /**\n     * Runs the auto refresh token tick.\n     */\n    _autoRefreshTokenTick() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const now = Date.now();\n            try {\n                const { data: { session }, } = yield this.getSession();\n                if (!session || !session.refresh_token || !session.expires_at) {\n                    return;\n                }\n                // session will expire in this many ticks (or has already expired if <= 0)\n                const expiresInTicks = Math.floor((session.expires_at * 1000 - now) / AUTO_REFRESH_TICK_DURATION);\n                if (expiresInTicks < AUTO_REFRESH_TICK_THRESHOLD) {\n                    yield this._callRefreshToken(session.refresh_token);\n                }\n            }\n            catch (e) {\n                console.error('Auto refresh tick failed with error. This is likely a transient error.', e);\n            }\n        });\n    }\n    /**\n     * Registers callbacks on the browser / platform, which in-turn run\n     * algorithms when the browser window/tab are in foreground. On non-browser\n     * platforms it assumes always foreground.\n     */\n    _handleVisibilityChange() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n                if (this.autoRefreshToken) {\n                    // in non-browser environments the refresh token ticker runs always\n                    this.startAutoRefresh();\n                }\n                return false;\n            }\n            try {\n                this.visibilityChangedCallback = () => __awaiter(this, void 0, void 0, function* () { return yield this._onVisibilityChanged(false); });\n                window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', this.visibilityChangedCallback);\n                // now immediately call the visbility changed callback to setup with the\n                // current visbility state\n                yield this._onVisibilityChanged(true); // initial call\n            }\n            catch (error) {\n                console.error('_handleVisibilityChange', error);\n            }\n        });\n    }\n    /**\n     * Callback registered with `window.addEventListener('visibilitychange')`.\n     */\n    _onVisibilityChanged(isInitial) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (document.visibilityState === 'visible') {\n                if (!isInitial) {\n                    // initial visibility change setup is handled in another flow under #initialize()\n                    yield this.initializePromise;\n                    yield this._recoverAndRefresh();\n                }\n                if (this.autoRefreshToken) {\n                    // in browser environments the refresh token ticker runs only on focused tabs\n                    // which prevents race conditions\n                    this._startAutoRefresh();\n                }\n            }\n            else if (document.visibilityState === 'hidden') {\n                if (this.autoRefreshToken) {\n                    this._stopAutoRefresh();\n                }\n            }\n        });\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    _getUrlForProvider(provider, options) {\n        const urlParams = [`provider=${encodeURIComponent(provider)}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.queryParams) {\n            const query = new URLSearchParams(options.queryParams);\n            urlParams.push(query.toString());\n        }\n        return `${this.url}/authorize?${urlParams.join('&')}`;\n    }\n    _unenroll(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#enroll}\n     */\n    _enroll(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors`, {\n                    body: {\n                        friendly_name: params.friendlyName,\n                        factor_type: params.factorType,\n                        issuer: params.issuer,\n                    },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                if ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code) {\n                    data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#verify}\n     */\n    _verify(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                    body: { code: params.code, challenge_id: params.challengeId },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                yield this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n                this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challenge}\n     */\n    _challenge(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challengeAndVerify}\n     */\n    _challengeAndVerify(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: challengeData, error: challengeError } = yield this._challenge({\n                factorId: params.factorId,\n            });\n            if (challengeError) {\n                return { data: null, error: challengeError };\n            }\n            return yield this._verify({\n                factorId: params.factorId,\n                challengeId: challengeData.id,\n                code: params.code,\n            });\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#listFactors}\n     */\n    _listFactors() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { user }, error: userError, } = yield this.getUser();\n            if (userError) {\n                return { data: null, error: userError };\n            }\n            const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n            const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n            return {\n                data: {\n                    all: factors,\n                    totp,\n                },\n                error: null,\n            };\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n     */\n    _getAuthenticatorAssuranceLevel() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            if (!session) {\n                return {\n                    data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                    error: null,\n                };\n            }\n            const payload = this._decodeJWT(session.access_token);\n            let currentLevel = null;\n            if (payload.aal) {\n                currentLevel = payload.aal;\n            }\n            let nextLevel = currentLevel;\n            const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n            if (verifiedFactors.length > 0) {\n                nextLevel = 'aal2';\n            }\n            const currentAuthenticationMethods = payload.amr || [];\n            return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n        });\n    }\n}\n//# sourceMappingURL=GoTrueClient.js.map","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n//# sourceMappingURL=SupabaseAuthClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_HEADERS } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { stripTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nconst DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nconst DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nconst DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n};\nconst DEFAULT_REALTIME_OPTIONS = {};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace(/^http/i, 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        const isPlatform = _supabaseUrl.match(/(supabase\\.co)|(supabase\\.in)/);\n        if (isPlatform) {\n            const urlParts = _supabaseUrl.split('.');\n            this.functionsUrl = `${urlParts[0]}.functions.${urlParts[1]}.${urlParts[2]}`;\n        }\n        else {\n            this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        }\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${new URL(this.authUrl).hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_b = (_a = settings.auth) === null || _a === void 0 ? void 0 : _a.storageKey) !== null && _b !== void 0 ? _b : '';\n        this.headers = (_d = (_c = settings.global) === null || _c === void 0 ? void 0 : _c.headers) !== null && _d !== void 0 ? _d : {};\n        this.auth = this._initSupabaseAuthClient((_e = settings.auth) !== null && _e !== void 0 ? _e : {}, this.headers, (_f = settings.global) === null || _f === void 0 ? void 0 : _f.fetch);\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), (_g = settings.global) === null || _g === void 0 ? void 0 : _g.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this.rest = new PostgrestClient(`${_supabaseUrl}/rest/v1`, {\n            headers: this.headers,\n            schema: (_h = settings.db) === null || _h === void 0 ? void 0 : _h.schema,\n            fetch: this.fetch,\n        });\n        this._listenForAuthEvents();\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this.headers, this.fetch);\n    }\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param args  The parameters to pass to the function call.\n     * @param options.head   When set to true, no data will be returned.\n     * @param options.count  Count algorithm to use to count rows in a table.\n     *\n     */\n    rpc(fn, args = {}, options) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            fetch,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token !== null && token !== void 0 ? token : null);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n            this.changedAccessToken = undefined;\n        }\n    }\n}\n//# sourceMappingURL=SupabaseClient.js.map","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n//# sourceMappingURL=index.js.map","import { isDevelopment } from \".\"\n\nexport const TOKEN = import.meta.env.PUBLIC_SUPABASE_TOKEN\nexport const API = import.meta.env.PUBLIC_SUPABASE_API\n\nexport const isSupabaseActive = Boolean(TOKEN && API) &&\n  (!isDevelopment || localStorage.getItem('supabaseStatus') === 'active')\n","import { createClient } from \"@supabase/supabase-js\"\nimport { API, TOKEN, isSupabaseActive } from \"../config/supabase\"\nimport type { IContact } from \"../controllers/Contact\"\n\n\nexport class SupabaseContactLocal {\n  private static thisInstance? : SupabaseContactLocal\n  localClient\n\n  private constructor(options?: any){\n    this.localClient = isSupabaseActive ? \n      createClient(API, TOKEN, options) : undefined\n\n  }\n\n  static defaultInstance(){\n    SupabaseContactLocal.thisInstance ??= new SupabaseContactLocal()\n\n    return SupabaseContactLocal.thisInstance\n  }\n\n  sendFormContact(data: IContact){\n    if(localStorage.getItem('alreadySended') === 'true')\n      return \n  \n    return this.localClient?.from('interested')\n      .insert(data)\n      .then(({ error })=> {\n        if(error)\n          return\n        \n        localStorage.setItem('alredySended', 'true')\n\n        return data\n      }, (reason)=> reason)\n      \n  }\n}\n\nexport const supabseLocal = SupabaseContactLocal.defaultInstance\n","import { ValidationError } from \"yup\";\nimport { schema } from \"./schema.validaiton\";\nimport { supabseLocal } from \"../../ts/services/Supabse\";\nimport type { IContact } from \"../../ts/controllers/Contact\";\n\nfunction handleValidationError(error: unknown){\n  if(error instanceof ValidationError)\n    return error.inner.map(({ path })=> path)\n}\n\nexport async function sendForm(data: Record<string, unknown>){\n  try {\n    const validatedData : IContact = schema\n      .validateSync(data, { abortEarly: false })\n    \n    // TODO: add Sentry or another way to catch errors\n    // TODO: this retunrs a thenavailable not a promise, should convert ?\n    // this means that when ther is a error we will not notice\n    supabseLocal()\n      .sendFormContact(validatedData)\n\n  } catch (error) {\n    const errors = handleValidationError(error)\n    console.error(error, errors)\n\n    return errors\n  }\n}\n","  import { $ , $$ } from '../../ts/utils'\n  import { sendForm } from './main'\n\n  function click(element?: Element | null){\n    if(element instanceof HTMLElement)\n      element.click()\n  }\n\n\n  $('[data-form=\"contact\"]')?.addEventListener('submit', async function(this: Element, event){\n    event.preventDefault()\n\n    if(!(this instanceof HTMLFormElement))\n      return\n\n    const form = new FormData(this)\n\n    const pojo: Record<string, unknown> = {}\n    \n    form.forEach((value, key)=>{\n      pojo[key] = value\n    })\n\n    const invalidFields = await sendForm(pojo)\n\n    if(invalidFields?.length)\n      return invalidFields.forEach(path =>{\n        const element = $(`[name=\"${path}\"`, this as HTMLFormElement)\n        \n        if(element instanceof HTMLInputElement)\n          element.classList.add('border-error')\n      })\n\n    $$('input', this).forEach(element => element.classList.remove('border-error'))\n\n    click($(`label[for=\"subscription\"]`))\n\n  })\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9jb21wb25lbnRzL0NvbnRhY3QvQ29udGFjdC5hc3RybyJdLCAic291cmNlc0NvbnRlbnQiOiBbIi0tLVxuaW1wb3J0IEluZm9TdWJzY3JpcHRpb24gZnJvbSAnLi4vSW5mb1N1YnNjcmlwdGlvbi9JbmZvU3Vic2NyaXB0aW9uLmFzdHJvJztcbmltcG9ydCBEZWFmdWx0SW5wdXQgZnJvbSAnLi9EZWFmdWx0SW5wdXQuYXN0cm8nO1xuaW1wb3J0IHsgZm9ybUZpZWxkcyB9IGZyb20gJy4vbW9kdWxlLmpzb24nXG4tLS1cblxuXHUwMDNjZm9ybSBjbGFzcz1cImZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIGdhcC04IG1kOnB4LTIwIHAtMTJcIiBpZD1cImNvbnRhY3RcIiBkYXRhLWZvcm09XCJjb250YWN0XCJcdTAwM2VcbiAgXHUwMDNjaDIgY2xhc3M9XCJ0ZXh0LTR4bCBtZDp0ZXh0LTZ4bCBmb250LWJvbGQgcC0xMlwiXHUwMDNlQ29udMOhY3Rhbm9zXHUwMDNjL2gyXHUwMDNlXG4gIHtcbiAgICBmb3JtRmllbGRzLm1hcCgoeyBsYWJlbCwgbmFtZSwgdHlwZSB9KT1cdTAwM2UoXG4gICAgICBcdTAwM2NEZWFmdWx0SW5wdXQgbGFiZWw9e2xhYmVsfSBuYW1lPXtuYW1lfSB0eXBlPXt0eXBlIGFzIGFueX0vXHUwMDNlXG4gICAgKSlcbiAgfVxuICBcdTAwM2NidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IG1heC13LXhsIHctZnVsbFwiXHUwMDNlRW52aWFyXHUwMDNjL2J1dHRvblx1MDAzZVxuXHUwMDNjL2Zvcm1cdTAwM2VcblxuXHUwMDNjSW5mb1N1YnNjcmlwdGlvbiBpZD1cInN1YnNjcmlwdGlvblwiL1x1MDAzZVxuXG5cdTAwM2NzY3JpcHRcdTAwM2VcbiAgaW1wb3J0IHsgJCAsICQkIH0gZnJvbSAnLi4vLi4vdHMvdXRpbHMnXG4gIGltcG9ydCB7IHNlbmRGb3JtIH0gZnJvbSAnLi9tYWluJ1xuXG4gIGZ1bmN0aW9uIGNsaWNrKGVsZW1lbnQ/OiBFbGVtZW50IHwgbnVsbCl7XG4gICAgaWYoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxuICAgICAgZWxlbWVudC5jbGljaygpXG4gIH1cblxuXG4gICQoJ1tkYXRhLWZvcm09XCJjb250YWN0XCJdJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIGZ1bmN0aW9uKHRoaXM6IEVsZW1lbnQsIGV2ZW50KXtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpKVxuICAgICAgcmV0dXJuXG5cbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKHRoaXMpXG5cbiAgICBjb25zdCBwb2pvOiBSZWNvcmRcdTAwM2NzdHJpbmcsIHVua25vd25cdTAwM2UgPSB7fVxuICAgIFxuICAgIGZvcm0uZm9yRWFjaCgodmFsdWUsIGtleSk9XHUwMDNle1xuICAgICAgcG9qb1trZXldID0gdmFsdWVcbiAgICB9KVxuXG4gICAgY29uc3QgaW52YWxpZEZpZWxkcyA9IGF3YWl0IHNlbmRGb3JtKHBvam8pXG5cbiAgICBpZihpbnZhbGlkRmllbGRzPy5sZW5ndGgpXG4gICAgICByZXR1cm4gaW52YWxpZEZpZWxkcy5mb3JFYWNoKHBhdGggPVx1MDAzZXtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9ICQoYFtuYW1lPVwiJHtwYXRofVwiYCwgdGhpcyBhcyBIVE1MRm9ybUVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICBpZihlbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudClcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1lcnJvcicpXG4gICAgICB9KVxuXG4gICAgJCQoJ2lucHV0JywgdGhpcykuZm9yRWFjaChlbGVtZW50ID1cdTAwM2UgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZXJyb3InKSlcblxuICAgIGNsaWNrKCQoYGxhYmVsW2Zvcj1cInN1YnNjcmlwdGlvblwiXWApKVxuXG4gIH0pXG5cdTAwM2Mvc2NyaXB0XHUwMDNlIl0sICJtYXBwaW5ncyI6ICJBQW1CQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQztBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pCO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDWDtBQUNBLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQzNDO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0M7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVCLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMxQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BFO0FBQ0EsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5QyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlDLE1BQU0sQ0FBQztBQUNQO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakY7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hDO0FBQ0EsRUFBRSxDQUFDO0FBQUE7IiwgIm5hbWVzIjogW10gfQ==","  import { $ } from '../../ts/utils'\n\n  $('#dev-dismiss')?.addEventListener('click', ()=>{\n    $('.toast.alert')?.classList.toggle('hidden')\n  })\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9jb21wb25lbnRzL0RldmVsb3BlckFsZXJ0L0RldmVsb3BlckFsZXJ0LmFzdHJvIl0sICJzb3VyY2VzQ29udGVudCI6IFsiLS0tXG5pbXBvcnQgRGV2ZWxvcGVyU2V0dGluZyBmcm9tIFwiLi4vRGV2ZWxvcGVyU2V0dGluZ3MvRGV2ZWxvcGVyU2V0dGluZy5hc3Ryb1wiXG5cbi0tLVxuXG5cdTAwM2NkaXYgY2xhc3M9XCJ0b2FzdCBhbGVydCBob3ZlcjohYmctdmlvbGV0LTYwMCB6LTUwXCJcdTAwM2VcbiAgXHUwMDNjc3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBjbGFzcz1cInN0cm9rZS1pbmZvIGZsZXgtc2hyaW5rLTAgdy02IGgtNlwiXHUwMDNlXHUwMDNjcGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk0xMyAxNmgtMXYtNGgtMW0xLTRoLjAxTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiXHUwMDNlXHUwMDNjL3BhdGhcdTAwM2VcdTAwM2Mvc3ZnXHUwMDNlXG4gIFx1MDAzY3BcdTAwM2VFc3RvIHNvbG8gc2UgbW9zdHJhcmEgc2kgZXN0YXMgZW4gbW9kbyBkZXZcdTAwM2MvcFx1MDAzZVxuICBcdTAwM2NwXHUwMDNlUHJlc2lvbmEgXHUwMDNja2JkIGNsYXNzPVwia2JkXCJcdTAwM2VjdHJsXHUwMDNjL2tiZFx1MDAzZSArIFx1MDAzY2tiZCBjbGFzcz1cImtiZFwiXHUwMDNla1x1MDAzYy9rYmRcdTAwM2UgcGFyYSB2ZXIgbGFzIG9wY2lvbmVzXHUwMDNjL3BcdTAwM2VcbiAgXHUwMDNjYnV0dG9uIGlkPVwiZGV2LWRpc21pc3NcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiXHUwMDNlRGlzbWlzc1x1MDAzYy9idXR0b25cdTAwM2Vcblx1MDAzYy9kaXZcdTAwM2VcblxuXHUwMDNjRGV2ZWxvcGVyU2V0dGluZyAvXHUwMDNlXG5cblx1MDAzY3NjcmlwdFx1MDAzZVxuICBpbXBvcnQgeyAkIH0gZnJvbSAnLi4vLi4vdHMvdXRpbHMnXG5cbiAgJCgnI2Rldi1kaXNtaXNzJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9XHUwMDNle1xuICAgICQoJy50b2FzdC5hbGVydCcpPy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICB9KVxuXHUwMDNjL3NjcmlwdFx1MDAzZSJdLCAibWFwcGluZ3MiOiAiQUFlQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkM7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25ELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hELEVBQUUsQ0FBQztBQUFBOyIsICJuYW1lcyI6IFtdIH0=","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar win$1 = window;\nvar raf = win$1.requestAnimationFrame || win$1.webkitRequestAnimationFrame || win$1.mozRequestAnimationFrame || win$1.msRequestAnimationFrame || function (cb) {\n  return setTimeout(cb, 16);\n};\n\nvar win = window;\nvar caf = win.cancelAnimationFrame || win.mozCancelAnimationFrame || function (id) {\n  clearTimeout(id);\n};\n\nfunction extend() {\n  var obj,\n      name,\n      copy,\n      target = arguments[0] || {},\n      i = 1,\n      length = arguments.length;\n\n  for (; i < length; i++) {\n    if ((obj = arguments[i]) !== null) {\n      for (name in obj) {\n        copy = obj[name];\n\n        if (target === copy) {\n          continue;\n        } else if (copy !== undefined) {\n          target[name] = copy;\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction checkStorageValue(value) {\n  return ['true', 'false'].indexOf(value) >= 0 ? JSON.parse(value) : value;\n}\n\nfunction setLocalStorage(storage, key, value, access) {\n  if (access) {\n    try {\n      storage.setItem(key, value);\n    } catch (e) {}\n  }\n\n  return value;\n}\n\nfunction getSlideId() {\n  var id = window.tnsId;\n  window.tnsId = !id ? 1 : id + 1;\n  return 'tns' + window.tnsId;\n}\n\nfunction getBody() {\n  var doc = document,\n      body = doc.body;\n\n  if (!body) {\n    body = doc.createElement('body');\n    body.fake = true;\n  }\n\n  return body;\n}\n\nvar docElement = document.documentElement;\n\nfunction setFakeBody(body) {\n  var docOverflow = '';\n\n  if (body.fake) {\n    docOverflow = docElement.style.overflow; //avoid crashing IE8, if background image is used\n\n    body.style.background = ''; //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n\n    body.style.overflow = docElement.style.overflow = 'hidden';\n    docElement.appendChild(body);\n  }\n\n  return docOverflow;\n}\n\nfunction resetFakeBody(body, docOverflow) {\n  if (body.fake) {\n    body.remove();\n    docElement.style.overflow = docOverflow; // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n    // eslint-disable-next-line\n\n    docElement.offsetHeight;\n  }\n}\n\n// get css-calc \nfunction calc() {\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      result = false;\n  body.appendChild(div);\n\n  try {\n    var str = '(10px * 10)',\n        vals = ['calc' + str, '-moz-calc' + str, '-webkit-calc' + str],\n        val;\n\n    for (var i = 0; i < 3; i++) {\n      val = vals[i];\n      div.style.width = val;\n\n      if (div.offsetWidth === 100) {\n        result = val.replace(str, '');\n        break;\n      }\n    }\n  } catch (e) {}\n\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return result;\n}\n\n// get subpixel support value\nfunction percentageLayout() {\n  // check subpixel layout supporting\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      wrapper = doc.createElement('div'),\n      outer = doc.createElement('div'),\n      str = '',\n      count = 70,\n      perPage = 3,\n      supported = false;\n  wrapper.className = \"tns-t-subp2\";\n  outer.className = \"tns-t-ct\";\n\n  for (var i = 0; i < count; i++) {\n    str += '<div></div>';\n  }\n\n  outer.innerHTML = str;\n  wrapper.appendChild(outer);\n  body.appendChild(wrapper);\n  supported = Math.abs(wrapper.getBoundingClientRect().left - outer.children[count - perPage].getBoundingClientRect().left) < 2;\n  body.fake ? resetFakeBody(body, docOverflow) : wrapper.remove();\n  return supported;\n}\n\nfunction mediaquerySupport() {\n  if (window.matchMedia || window.msMatchMedia) {\n    return true;\n  }\n\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      style = doc.createElement('style'),\n      rule = '@media all and (min-width:1px){.tns-mq-test{position:absolute}}',\n      position;\n  style.type = 'text/css';\n  div.className = 'tns-mq-test';\n  body.appendChild(style);\n  body.appendChild(div);\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = rule;\n  } else {\n    style.appendChild(doc.createTextNode(rule));\n  }\n\n  position = window.getComputedStyle ? window.getComputedStyle(div).position : div.currentStyle['position'];\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return position === \"absolute\";\n}\n\n// create and append style sheet\nfunction createStyleSheet(media, nonce) {\n  // Create the <style> tag\n  var style = document.createElement(\"style\"); // style.setAttribute(\"type\", \"text/css\");\n  // Add a media (and/or media query) here if you'd like!\n  // style.setAttribute(\"media\", \"screen\")\n  // style.setAttribute(\"media\", \"only screen and (max-width : 1024px)\")\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } // Add nonce attribute for Content Security Policy\n\n\n  if (nonce) {\n    style.setAttribute(\"nonce\", nonce);\n  } // WebKit hack :(\n  // style.appendChild(document.createTextNode(\"\"));\n  // Add the <style> element to the page\n\n\n  document.querySelector('head').appendChild(style);\n  return style.sheet ? style.sheet : style.styleSheet;\n}\n\n// cross browsers addRule method\nfunction addCSSRule(sheet, selector, rules, index) {\n  // return raf(function() {\n  'insertRule' in sheet ? sheet.insertRule(selector + '{' + rules + '}', index) : sheet.addRule(selector, rules, index); // });\n}\n\n// cross browsers addRule method\nfunction removeCSSRule(sheet, index) {\n  // return raf(function() {\n  'deleteRule' in sheet ? sheet.deleteRule(index) : sheet.removeRule(index); // });\n}\n\nfunction getCssRulesLength(sheet) {\n  var rule = 'insertRule' in sheet ? sheet.cssRules : sheet.rules;\n  return rule.length;\n}\n\nfunction toDegree(y, x) {\n  return Math.atan2(y, x) * (180 / Math.PI);\n}\n\nfunction getTouchDirection(angle, range) {\n  var direction = false,\n      gap = Math.abs(90 - Math.abs(angle));\n\n  if (gap >= 90 - range) {\n    direction = 'horizontal';\n  } else if (gap <= range) {\n    direction = 'vertical';\n  }\n\n  return direction;\n}\n\n// https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\nfunction forEach(arr, callback, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    callback.call(scope, arr[i], i);\n  }\n}\n\nvar classListSupport = ('classList' in document.createElement('_'));\n\nvar hasClass = classListSupport ? function (el, str) {\n  return el.classList.contains(str);\n} : function (el, str) {\n  return el.className.indexOf(str) >= 0;\n};\n\nvar addClass = classListSupport ? function (el, str) {\n  if (!hasClass(el, str)) {\n    el.classList.add(str);\n  }\n} : function (el, str) {\n  if (!hasClass(el, str)) {\n    el.className += ' ' + str;\n  }\n};\n\nvar removeClass = classListSupport ? function (el, str) {\n  if (hasClass(el, str)) {\n    el.classList.remove(str);\n  }\n} : function (el, str) {\n  if (hasClass(el, str)) {\n    el.className = el.className.replace(str, '');\n  }\n};\n\nfunction hasAttr(el, attr) {\n  return el.hasAttribute(attr);\n}\n\nfunction getAttr(el, attr) {\n  return el.getAttribute(attr);\n}\n\nfunction isNodeList(el) {\n  // Only NodeList has the \"item()\" function\n  return typeof el.item !== \"undefined\";\n}\n\nfunction setAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n\n  if (Object.prototype.toString.call(attrs) !== '[object Object]') {\n    return;\n  }\n\n  for (var i = els.length; i--;) {\n    for (var key in attrs) {\n      els[i].setAttribute(key, attrs[key]);\n    }\n  }\n}\n\nfunction removeAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n  attrs = attrs instanceof Array ? attrs : [attrs];\n  var attrLength = attrs.length;\n\n  for (var i = els.length; i--;) {\n    for (var j = attrLength; j--;) {\n      els[i].removeAttribute(attrs[j]);\n    }\n  }\n}\n\nfunction arrayFromNodeList(nl) {\n  var arr = [];\n\n  for (var i = 0, l = nl.length; i < l; i++) {\n    arr.push(nl[i]);\n  }\n\n  return arr;\n}\n\nfunction hideElement(el, forceHide) {\n  if (el.style.display !== 'none') {\n    el.style.display = 'none';\n  }\n}\n\nfunction showElement(el, forceHide) {\n  if (el.style.display === 'none') {\n    el.style.display = '';\n  }\n}\n\nfunction isVisible(el) {\n  return window.getComputedStyle(el).display !== 'none';\n}\n\nfunction whichProperty(props) {\n  if (typeof props === 'string') {\n    var arr = [props],\n        Props = props.charAt(0).toUpperCase() + props.substr(1),\n        prefixes = ['Webkit', 'Moz', 'ms', 'O'];\n    prefixes.forEach(function (prefix) {\n      if (prefix !== 'ms' || props === 'transform') {\n        arr.push(prefix + Props);\n      }\n    });\n    props = arr;\n  }\n\n  var el = document.createElement('fakeelement');\n      props.length;\n\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n\n    if (el.style[prop] !== undefined) {\n      return prop;\n    }\n  }\n\n  return false; // explicit for ie9-\n}\n\nfunction has3DTransforms(tf) {\n  if (!tf) {\n    return false;\n  }\n\n  if (!window.getComputedStyle) {\n    return false;\n  }\n\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      el = doc.createElement('p'),\n      has3d,\n      cssTF = tf.length > 9 ? '-' + tf.slice(0, -9).toLowerCase() + '-' : '';\n  cssTF += 'transform'; // Add it to the body to get the computed style\n\n  body.insertBefore(el, null);\n  el.style[tf] = 'translate3d(1px,1px,1px)';\n  has3d = window.getComputedStyle(el).getPropertyValue(cssTF);\n  body.fake ? resetFakeBody(body, docOverflow) : el.remove();\n  return has3d !== undefined && has3d.length > 0 && has3d !== \"none\";\n}\n\n// get transitionend, animationend based on transitionDuration\n// @propin: string\n// @propOut: string, first-letter uppercase\n// Usage: getEndProperty('WebkitTransitionDuration', 'Transition') => webkitTransitionEnd\nfunction getEndProperty(propIn, propOut) {\n  var endProp = false;\n\n  if (/^Webkit/.test(propIn)) {\n    endProp = 'webkit' + propOut + 'End';\n  } else if (/^O/.test(propIn)) {\n    endProp = 'o' + propOut + 'End';\n  } else if (propIn) {\n    endProp = propOut.toLowerCase() + 'end';\n  }\n\n  return endProp;\n}\n\n// Test via a getter in the options object to see if the passive property is accessed\nvar supportsPassive = false;\n\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function () {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener(\"test\", null, opts);\n} catch (e) {}\n\nvar passiveOption = supportsPassive ? {\n  passive: true\n} : false;\n\nfunction addEvents(el, obj, preventScrolling) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 && !preventScrolling ? passiveOption : false;\n    el.addEventListener(prop, obj[prop], option);\n  }\n}\n\nfunction removeEvents(el, obj) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 ? passiveOption : false;\n    el.removeEventListener(prop, obj[prop], option);\n  }\n}\n\nfunction Events() {\n  return {\n    topics: {},\n    on: function (eventName, fn) {\n      this.topics[eventName] = this.topics[eventName] || [];\n      this.topics[eventName].push(fn);\n    },\n    off: function (eventName, fn) {\n      if (this.topics[eventName]) {\n        for (var i = 0; i < this.topics[eventName].length; i++) {\n          if (this.topics[eventName][i] === fn) {\n            this.topics[eventName].splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    emit: function (eventName, data) {\n      data.type = eventName;\n\n      if (this.topics[eventName]) {\n        this.topics[eventName].forEach(function (fn) {\n          fn(data, eventName);\n        });\n      }\n    }\n  };\n}\n\nfunction jsTransform(element, attr, prefix, postfix, to, duration, callback) {\n  var tick = Math.min(duration, 10),\n      unit = to.indexOf('%') >= 0 ? '%' : 'px',\n      to = to.replace(unit, ''),\n      from = Number(element.style[attr].replace(prefix, '').replace(postfix, '').replace(unit, '')),\n      positionTick = (to - from) / duration * tick;\n  setTimeout(moveElement, tick);\n\n  function moveElement() {\n    duration -= tick;\n    from += positionTick;\n    element.style[attr] = prefix + from + unit + postfix;\n\n    if (duration > 0) {\n      setTimeout(moveElement, tick);\n    } else {\n      callback();\n    }\n  }\n}\n\n// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n\n    return keys;\n  };\n} // ChildNode.remove\n\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\nvar tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n      win = window,\n      KEYS = {\n    ENTER: 13,\n    SPACE: 32,\n    LEFT: 37,\n    RIGHT: 39\n  },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n\n    try {\n      tnsStorage = win.localStorage;\n\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      } // update browserInfo\n\n\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess); // get element nodes from selectors\n\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n\n        return;\n      }\n    }\n  }); // make sure at least 1 slide\n\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n\n    return;\n  } // update options\n\n\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n\n    for (var key in responsive) {\n      var val = responsive[key]; // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n\n    responsive = responsiveTem;\n    responsiveTem = null;\n  } // update options\n\n\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      } // update responsive options\n\n\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n\n  if (!carousel) {\n    updateOptions(options);\n  } // === define and set variables ===\n\n\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n\n  if (responsive) {\n    setBreakpointZone();\n  }\n\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  } // fixedWidth: viewport > rightBoundary > indexMax\n\n\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions,\n      // collection of slide positions\n  slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = !carousel || !loop ? true : false,\n      // transform\n  transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n  getIndexMax = function () {\n    if (fixedWidth) {\n      return function () {\n        return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n      };\n    } else if (autoWidth) {\n      return function () {\n        for (var i = 0; i < slideCountNew; i++) {\n          if (slidePositions[i] >= -rightBoundary) {\n            return i;\n          }\n        }\n      };\n    } else {\n      return function () {\n        if (center && carousel && !loop) {\n          return slideCount - 1;\n        } else {\n          return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n        }\n      };\n    }\n  }(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index;\n      getCurrentSlide();\n      var indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n  newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n    'click': onControlsClick,\n    'keydown': onControlsKeydown\n  },\n      navEvents = {\n    'click': onNavClick,\n    'keydown': onNavKeydown\n  },\n      hoverEvents = {\n    'mouseover': mouseoverPause,\n    'mouseout': mouseoutRestart\n  },\n      visibilityEvent = {\n    'visibilitychange': onVisibilityChange\n  },\n      docmentKeydownEvent = {\n    'keydown': onDocumentKeydown\n  },\n      touchEvents = {\n    'touchstart': onPanStart,\n    'touchmove': onPanMove,\n    'touchend': onPanEnd,\n    'touchcancel': onPanEnd\n  },\n      dragEvents = {\n    'mousedown': onPanStart,\n    'mousemove': onPanMove,\n    'mouseup': onPanEnd,\n    'mouseleave': onPanEnd\n  },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n    'load': onImgLoaded,\n    'error': onImgFailed\n  },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false; // controls\n\n\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  } // nav\n\n\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  } // autoplay\n\n\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ? function (a, b) {\n      return a.x - b.x;\n    } : function (a, b) {\n      return a.y - b.y;\n    };\n  } // disable slider when slidecount <= items\n\n\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n\n  initStructure();\n  initSheet();\n  initSliderTransform(); // === COMMON FUNCTIONS === //\n\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n\n    while (tem < 0) {\n      tem += slideCount;\n    }\n\n    return tem % slideCount + 1;\n  }\n\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n\n    if (carousel) {\n      i -= cloneCount;\n    }\n\n    while (i < 0) {\n      i += slideCount;\n    }\n\n    return Math.floor(i % slideCount);\n  }\n\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n        result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items); // set active nav to the last one when reaches the right edge\n\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n\n    return result;\n  }\n\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1; // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n\n      if (!arr.length) {\n        arr.push(0);\n      }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n\n    var div = doc.createElement('div'),\n        rect,\n        width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  } // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n\n\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n\n    return str;\n  }\n\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n\n    width = 'width:' + width; // inner slider: overwrite outer slider styles\n\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle(gutterTem) {\n    var str = ''; // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure() {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner';\n        hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw'; // set container properties\n\n    if (container.id === '') {\n      container.id = slideId;\n    }\n\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses; // add constrain layer for carousel\n\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container); // add id, class, aria attributes\n    // before clone slides\n\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    }); // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img'); // add img load event listener\n\n      forEach(imgs, function (img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src; // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      }); // set imgsComplete\n\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      }); // reset imgs for auto height: check visible imgs only\n\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      } // update slider tools and events\n\n\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n\n        if (freezable) {\n          freeze = getFreeze();\n        }\n\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    } // set container transform property\n\n\n    if (carousel) {\n      doContainerTransformSilent();\n    } // update slider tools and events\n\n\n    initTools();\n    initEvents();\n  }\n\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // #### LAYOUT\n    // ## INLINE-BLOCK VS FLOAT\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n\n\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    } // ## BASIC STYLES\n\n\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      } // inner wrapper styles\n\n\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet)); // container styles\n\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      } // slide styles\n\n\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      } // set gallery items transition-duration\n\n\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      } // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration(); // inner wrapper styles\n\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight); // container styles\n\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      } // slide styles\n\n\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      } // append to the last line\n\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    } // ## MEDIAQUERIES\n\n\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp); // middle wrapper string\n\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        } // inner wrapper string\n\n\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        } // container string\n\n\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        } // slide string\n\n\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        } // set gallery items transition-duration\n\n\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        } // add up\n\n\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools() {\n    // == slides ==\n    updateSlideStatus(); // == live region ==\n\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current'); // == autoplayInit ==\n\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      } // add event\n\n\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n\n      if (autoplay) {\n        startAutoplay();\n\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    } // == navInit ==\n\n\n    if (hasNav) {\n      // will not hide the navs in case they're thumbnails\n\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        }); // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility(); // add transition\n\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass); // add events\n\n      addEvents(navContainer, navEvents);\n    } // == controlsInit ==\n\n\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus(); // add events\n\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    } // hide tools if needed\n\n\n    disableUI();\n  }\n\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n\n    doLazyLoad();\n\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n\n    events.on('indexChanged', additionalUpdates);\n\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n\n    isOn = true;\n  }\n\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    } // remove win event listeners\n\n\n    removeEvents(win, {\n      'resize': onResize\n    }); // arrowKeys, controls, nav\n\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    } // autoplay\n\n\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    } // container\n\n\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    } // cache Object values in options && reset HTML\n\n\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    }); // reset variables\n\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = panStart = rafIndex = getDist = touch = mouseDrag = null; // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n\n    isOn = false;\n  } // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n\n\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone; // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    } // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n\n\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    } // update options\n\n\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n\n        needContainerTransform = true;\n      }\n    }\n\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n\n\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          } // slide styles\n\n\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter); // remove the last line and\n          // add new styles\n\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      } // auto height\n\n\n      if (autoHeight) {\n        doAutoHeight();\n      }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  } // === INITIALIZATION FUNCTIONS === //\n\n\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone() {\n    breakpointZone = 0;\n\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  } // (slideBy, indexMin, indexMax) => index\n\n\n  var updateIndex = function () {\n    return loop ? carousel ? // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n          rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy; // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } : // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } : // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    } // remove edge padding from inner wrapper\n\n\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    } // add class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    disableUI();\n    frozen = true;\n  }\n\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    } // restore edge padding for inner wrapper\n    // for mordern browsers\n\n\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    } // remove class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    enableUI();\n    frozen = false;\n  }\n\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // vertical slider\n\n\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // update tools\n\n\n    disableUI();\n    disabled = true;\n  }\n\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    } // update tools\n\n\n    enableUI();\n    disabled = false;\n  }\n\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    var start = index,\n        end,\n        rangestart,\n        rangeend; // get range start, range end for autoWidth and fixedWidth\n\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    } // get start, end\n    // - check auto width\n\n\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      }); // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n\n          addEvents(img, eve);\n          addEvents(img, imgEvents); // update src\n\n          img.src = getAttr(img, 'data-src'); // update srcset\n\n          var srcset = getAttr(img, 'data-srcset');\n\n          if (srcset) {\n            img.srcset = srcset;\n          }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n\n    return imgs;\n  } // check if all visible images are loaded\n  // and update container height if it's done\n\n\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    } // check image classes\n\n\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n\n\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    }); // execute callback function if selected images are all complete\n\n    if (!imgs.length) {\n      return cb();\n    } // otherwise execute this functiona again\n\n\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  } // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n\n\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  } // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n\n\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      } // add the end edge\n\n\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  } // update slide\n\n\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        } // hide slides\n\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  } // gallery: update slide position\n\n\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      } // remove outlet animation\n\n\n      removeClass(item, animateOut);\n    } // removing '.tns-moving'\n\n\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  } // set tabindex on Nav\n\n\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  } // set 'disabled' to true on controls when reach the edges\n\n\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = index <= indexMin ? true : false,\n        disableNext = !rewind && index >= indexMax ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  } // set duration\n\n\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n        result = viewport + gap - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n\n    if (result > 0) {\n      result = 0;\n    }\n\n    return result;\n  }\n\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var val;\n\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n\n        if (center) {\n          num -= getCenterGap();\n        }\n\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i]; // set item positions\n\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  } // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n\n\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform(); // run fallback function manually\n        // when duration is 0 / container is hidden\n\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn); // run fallback function manually\n      // when transition or animation not supported / duration is 0\n\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    } // render when slider was moved (touch or drag) even though index may not change\n\n\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n\n      if (autoHeight) {\n        doAutoHeight();\n      } // pause autoplay when click or keydown from user\n\n\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n\n      running = true;\n      transformCore();\n    }\n  }\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n\n\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  } // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n\n\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i]; // set item positions\n\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n\n\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n\n        running = false;\n        indexCached = index;\n      }\n    }\n  } // # ACTIONS\n\n\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    } // prev slideBy\n\n\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1); // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1); // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n\n          indexGap = targetIndex - absIndex;\n        }\n      } // gallery: make sure new page won't overlap with current page\n\n\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap; // make sure index is in range\n\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      } // if index is changed, start rendering\n\n\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  } // on controls click\n\n\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n\n      if (autoWidth) {\n        index = Math.floor(index);\n      } // pass e when click control buttons or keydown\n\n\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  } // on nav click\n\n\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e),\n        navIndex; // find the clicked nav item\n\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n\n        navClicked = -1; // reset navClicked\n      }\n    }\n  } // autoplay functions\n\n\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay() {\n    setAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n\n  function stopAutoplay() {\n    stopAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  } // programaitcally play/pause the slider\n\n\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  } // keydown events on document\n\n\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  } // on key control\n\n\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  } // set focus\n\n\n  function setFocus(el) {\n    el.focus();\n  } // on key nav\n\n\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    } // var code = e.keyCode,\n\n\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n\n    panStart = true;\n\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n\n    caf(rafIndex);\n\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n\n      if (carousel) {\n        resetDuration(container, '');\n      }\n\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    } // reset\n\n\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  } // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n\n\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n\n\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      } // cache pages\n\n\n      pagesCached = pages;\n    }\n  }\n\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n\nexports.tns = tns;\n","var functionThrottle = throttle;\n\nfunction throttle(fn, interval, options) {\n  var timeoutId = null;\n  var throttledFn = null;\n  var leading = (options && options.leading);\n  var trailing = (options && options.trailing);\n\n  if (leading == null) {\n    leading = true; // default\n  }\n\n  if (trailing == null) {\n    trailing = !leading; //default\n  }\n\n  if (leading == true) {\n    trailing = false; // forced because there should be invocation per call\n  }\n\n  var cancel = function() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  var flush = function() {\n    var call = throttledFn;\n    cancel();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var throttleWrapper = function() {\n    var callNow = leading && !timeoutId;\n    var context = this;\n    var args = arguments;\n\n    throttledFn = function() {\n      return fn.apply(context, args);\n    };\n\n    if (!timeoutId) {\n      timeoutId = setTimeout(function() {\n        timeoutId = null;\n\n        if (trailing) {\n          return throttledFn();\n        }\n      }, interval);\n    }\n\n    if (callNow) {\n      callNow = false;\n      return throttledFn();\n    }\n  };\n\n  throttleWrapper.cancel = cancel;\n  throttleWrapper.flush = flush;\n\n  return throttleWrapper;\n}\n\nexport {functionThrottle as default};\n","export function lensToggleSlider (_slider: any) : [boolean, ()=>any]{\n  let slider = _slider\n  let isDestroyed = false\n  function toggleSlider(){\n    if((window.screen.width  > 680) && slider.destroy && !isDestroyed){\n      isDestroyed =  true\n      return slider.destroy()\n    }\n\n    if(isDestroyed && (window.innerWidth <= 680)){\n      isDestroyed = false\n      slider = slider.rebuild()\n    }\n  }\n\n  return [slider, toggleSlider]\n\n}\n","  import { tns } from 'tiny-slider'\n  import throtle from 'just-throttle'\n\n  import { lensToggleSlider } from './main'\n\n  const slider = tns({\n    container: '#carousel',\n    items: 1,\n    controls: false,\n    gutter: 0,\n    nav: false\n  })\n\n  const [, toggleSlider ] = lensToggleSlider(slider)\n\n  toggleSlider()\n\n\n  addEventListener('resize', throtle(()=>{\n    toggleSlider()\n\n  }, 200, {leading: true}))\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9sYXlvdXRzL01heWJlQ2Fyb3VzZWwuYXN0cm8iXSwgInNvdXJjZXNDb250ZW50IjogWyJcdTAwM2NkaXYgaWQ9XCJjYXJvdXNlbFwiIGNsYXNzPVwicm91bmRlZC1ib3ggdy1mdWxsIGZsZXggbWQ6ZmxleC13cmFwIGNvbnRlbnQtY2VudGVyIGp1c3RpZnktY2VudGVyIG1kOmdhcC0xMlwiIFx1MDAzZVxuICBcdTAwM2NzbG90IC9cdTAwM2Vcblx1MDAzYy9kaXZcdTAwM2VcblxuXHUwMDNjc2NyaXB0XHUwMDNlXG4gIGltcG9ydCB7IHRucyB9IGZyb20gJ3Rpbnktc2xpZGVyJ1xuICBpbXBvcnQgdGhyb3RsZSBmcm9tICdqdXN0LXRocm90dGxlJ1xuXG4gIGltcG9ydCB7IGxlbnNUb2dnbGVTbGlkZXIgfSBmcm9tICcuL21haW4nXG5cbiAgY29uc3Qgc2xpZGVyID0gdG5zKHtcbiAgICBjb250YWluZXI6ICcjY2Fyb3VzZWwnLFxuICAgIGl0ZW1zOiAxLFxuICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICBndXR0ZXI6IDAsXG4gICAgbmF2OiBmYWxzZVxuICB9KVxuXG4gIGNvbnN0IFssIHRvZ2dsZVNsaWRlciBdID0gbGVuc1RvZ2dsZVNsaWRlcihzbGlkZXIpXG5cbiAgdG9nZ2xlU2xpZGVyKClcblxuXG4gIGFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRocm90bGUoKCk9XHUwMDNle1xuICAgIHRvZ2dsZVNsaWRlcigpXG5cbiAgfSwgMjAwLCB7bGVhZGluZzogdHJ1ZX0pKVxuXHUwMDNjL3NjcmlwdFx1MDAzZSJdLCAibWFwcGluZ3MiOiAiQUFLQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQztBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFDO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0FBQ1osSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDYixJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNiLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQ7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDZjtBQUNBO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCO0FBQ0EsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUFBOyIsICJuYW1lcyI6IFtdIH0=","/**! \n * hotkeys-js v3.10.1 \n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies. \n * \n * Copyright (c) 2022 kenny wong <wowohoo@qq.com> \n * http://jaywcjlove.github.io/hotkeys \n * Licensed under the MIT license \n */\n\nvar isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\nfunction addEvent(object, event, method, useCapture) {\n  if (object.addEventListener) {\n    object.addEventListener(event, method, useCapture);\n  } else if (object.attachEvent) {\n    object.attachEvent(\"on\".concat(event), function () {\n      method(window.event);\n    });\n  }\n} // 修饰键转换成对应的键码\n\n\nfunction getMods(modifier, key) {\n  var mods = key.slice(0, key.length - 1);\n\n  for (var i = 0; i < mods.length; i++) {\n    mods[i] = modifier[mods[i].toLowerCase()];\n  }\n\n  return mods;\n} // 处理传的key字符串转换成数组\n\n\nfunction getKeys(key) {\n  if (typeof key !== 'string') key = '';\n  key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n  var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n  var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n  for (; index >= 0;) {\n    keys[index - 1] += ',';\n    keys.splice(index, 1);\n    index = keys.lastIndexOf('');\n  }\n\n  return keys;\n} // 比较修饰键的数组\n\n\nfunction compareArray(a1, a2) {\n  var arr1 = a1.length >= a2.length ? a1 : a2;\n  var arr2 = a1.length >= a2.length ? a2 : a1;\n  var isIndex = true;\n\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n  }\n\n  return isIndex;\n}\n\nvar _keyMap = {\n  backspace: 8,\n  '⌫': 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  '↩': 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '⇪': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': isff ? 173 : 189,\n  '=': isff ? 61 : 187,\n  ';': isff ? 59 : 186,\n  '\\'': 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220\n}; // Modifier Keys\n\nvar _modifier = {\n  // shiftKey\n  '⇧': 16,\n  shift: 16,\n  // altKey\n  '⌥': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '⌃': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '⌘': 91,\n  cmd: 91,\n  command: 91\n};\nvar modifierMap = {\n  16: 'shiftKey',\n  18: 'altKey',\n  17: 'ctrlKey',\n  91: 'metaKey',\n  shiftKey: 16,\n  ctrlKey: 17,\n  altKey: 18,\n  metaKey: 91\n};\nvar _mods = {\n  16: false,\n  18: false,\n  17: false,\n  91: false\n};\nvar _handlers = {}; // F1~F12 special key\n\nfor (var k = 1; k < 20; k++) {\n  _keyMap[\"f\".concat(k)] = 111 + k;\n}\n\nvar _downKeys = []; // 记录摁下的绑定键\n\nvar winListendFocus = false; // window是否已经监听了focus事件\n\nvar _scope = 'all'; // 默认热键范围\n\nvar elementHasBindEvent = []; // 已绑定事件的节点记录\n// 返回键码\n\nvar code = function code(x) {\n  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n};\n\nvar getKey = function getKey(x) {\n  return Object.keys(_keyMap).find(function (k) {\n    return _keyMap[k] === x;\n  });\n};\n\nvar getModifier = function getModifier(x) {\n  return Object.keys(_modifier).find(function (k) {\n    return _modifier[k] === x;\n  });\n}; // 设置获取当前范围（默认为'所有'）\n\n\nfunction setScope(scope) {\n  _scope = scope || 'all';\n} // 获取当前范围\n\n\nfunction getScope() {\n  return _scope || 'all';\n} // 获取摁下绑定键的键值\n\n\nfunction getPressedKeyCodes() {\n  return _downKeys.slice(0);\n}\n\nfunction getPressedKeyString() {\n  return _downKeys.map(function (c) {\n    return getKey(c) || getModifier(c) || String.fromCharCode(c);\n  });\n} // 表单控件控件判断 返回 Boolean\n// hotkey is effective only when filter return true\n\n\nfunction filter(event) {\n  var target = event.target || event.srcElement;\n  var tagName = target.tagName;\n  var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n  if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n    flag = false;\n  }\n\n  return flag;\n} // 判断摁下的键是否为某个键，返回true或者false\n\n\nfunction isPressed(keyCode) {\n  if (typeof keyCode === 'string') {\n    keyCode = code(keyCode); // 转换成键码\n  }\n\n  return _downKeys.indexOf(keyCode) !== -1;\n} // 循环删除handlers中的所有 scope(范围)\n\n\nfunction deleteScope(scope, newScope) {\n  var handlers;\n  var i; // 没有指定scope，获取scope\n\n  if (!scope) scope = getScope();\n\n  for (var key in _handlers) {\n    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n      handlers = _handlers[key];\n\n      for (i = 0; i < handlers.length;) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n      }\n    }\n  } // 如果scope被删除，将scope重置为all\n\n\n  if (getScope() === scope) setScope(newScope || 'all');\n} // 清除修饰键\n\n\nfunction clearModifier(event) {\n  var key = event.keyCode || event.which || event.charCode;\n\n  var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n  if (i >= 0) {\n    _downKeys.splice(i, 1);\n  } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n  if (event.key && event.key.toLowerCase() === 'meta') {\n    _downKeys.splice(0, _downKeys.length);\n  } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n  if (key === 93 || key === 224) key = 91;\n\n  if (key in _mods) {\n    _mods[key] = false; // 将修饰键重置为false\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = false;\n    }\n  }\n}\n\nfunction unbind(keysInfo) {\n  // unbind(), unbind all keys\n  if (typeof keysInfo === 'undefined') {\n    Object.keys(_handlers).forEach(function (key) {\n      return delete _handlers[key];\n    });\n  } else if (Array.isArray(keysInfo)) {\n    // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n    keysInfo.forEach(function (info) {\n      if (info.key) eachUnbind(info);\n    });\n  } else if (typeof keysInfo === 'object') {\n    // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n    if (keysInfo.key) eachUnbind(keysInfo);\n  } else if (typeof keysInfo === 'string') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // support old method\n    // eslint-disable-line\n    var scope = args[0],\n        method = args[1];\n\n    if (typeof scope === 'function') {\n      method = scope;\n      scope = '';\n    }\n\n    eachUnbind({\n      key: keysInfo,\n      scope: scope,\n      method: method,\n      splitKey: '+'\n    });\n  }\n} // 解除绑定某个范围的快捷键\n\n\nvar eachUnbind = function eachUnbind(_ref) {\n  var key = _ref.key,\n      scope = _ref.scope,\n      method = _ref.method,\n      _ref$splitKey = _ref.splitKey,\n      splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n  var multipleKeys = getKeys(key);\n  multipleKeys.forEach(function (originKey) {\n    var unbindKeys = originKey.split(splitKey);\n    var len = unbindKeys.length;\n    var lastKey = unbindKeys[len - 1];\n    var keyCode = lastKey === '*' ? '*' : code(lastKey);\n    if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n    if (!scope) scope = getScope();\n    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n    _handlers[keyCode] = _handlers[keyCode].filter(function (record) {\n      // 通过函数判断，是否解除绑定，函数相等直接返回\n      var isMatchingMethod = method ? record.method === method : true;\n      return !(isMatchingMethod && record.scope === scope && compareArray(record.mods, mods));\n    });\n  });\n}; // 对监听对应快捷键的回调函数进行处理\n\n\nfunction eventHandler(event, handler, scope, element) {\n  if (handler.element !== element) {\n    return;\n  }\n\n  var modifiersMatch; // 看它是否在当前范围\n\n  if (handler.scope === scope || handler.scope === 'all') {\n    // 检查是否匹配修饰符（如果有返回true）\n    modifiersMatch = handler.mods.length > 0;\n\n    for (var y in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n          modifiersMatch = false;\n        }\n      }\n    } // 调用处理程序，如果是修饰键不做处理\n\n\n    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n      if (handler.method(event, handler) === false) {\n        if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.cancelBubble) event.cancelBubble = true;\n      }\n    }\n  }\n} // 处理keydown事件\n\n\nfunction dispatch(event, element) {\n  var asterisk = _handlers['*'];\n  var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n  if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n  // Webkit左右 command 键值不一样\n\n  if (key === 93 || key === 224) key = 91;\n  /**\n   * Collect bound keys\n   * If an Input Method Editor is processing key input and the event is keydown, return 229.\n   * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n   * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n   */\n\n  if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n  /**\n   * Jest test cases are required.\n   * ===============================\n   */\n\n  ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n    var keyNum = modifierMap[keyName];\n\n    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n      _downKeys.push(keyNum);\n    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n      _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n    } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n      /**\n       * Fix if Command is pressed:\n       * ===============================\n       */\n      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n      }\n    }\n  });\n  /**\n   * -------------------------------\n   */\n\n  if (key in _mods) {\n    _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = true;\n    }\n\n    if (!asterisk) return;\n  } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n  for (var e in _mods) {\n    if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n      _mods[e] = event[modifierMap[e]];\n    }\n  }\n  /**\n   * https://github.com/jaywcjlove/hotkeys/pull/129\n   * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n   * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n   * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n   */\n\n\n  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n    if (_downKeys.indexOf(17) === -1) {\n      _downKeys.push(17);\n    }\n\n    if (_downKeys.indexOf(18) === -1) {\n      _downKeys.push(18);\n    }\n\n    _mods[17] = true;\n    _mods[18] = true;\n  } // 获取范围 默认为 `all`\n\n\n  var scope = getScope(); // 对任何快捷键都需要做的处理\n\n  if (asterisk) {\n    for (var i = 0; i < asterisk.length; i++) {\n      if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n        eventHandler(event, asterisk[i], scope, element);\n      }\n    }\n  } // key 不在 _handlers 中返回\n\n\n  if (!(key in _handlers)) return;\n\n  for (var _i = 0; _i < _handlers[key].length; _i++) {\n    if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n      if (_handlers[key][_i].key) {\n        var record = _handlers[key][_i];\n        var splitKey = record.splitKey;\n        var keyShortcut = record.key.split(splitKey);\n        var _downKeysCurrent = []; // 记录当前按键键值\n\n        for (var a = 0; a < keyShortcut.length; a++) {\n          _downKeysCurrent.push(code(keyShortcut[a]));\n        }\n\n        if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n          // 找到处理内容\n          eventHandler(event, record, scope, element);\n        }\n      }\n    }\n  }\n} // 判断 element 是否已经绑定事件\n\n\nfunction isElementBind(element) {\n  return elementHasBindEvent.indexOf(element) > -1;\n}\n\nfunction hotkeys(key, option, method) {\n  _downKeys = [];\n  var keys = getKeys(key); // 需要处理的快捷键列表\n\n  var mods = [];\n  var scope = 'all'; // scope默认为all，所有范围都有效\n\n  var element = document; // 快捷键事件绑定节点\n\n  var i = 0;\n  var keyup = false;\n  var keydown = true;\n  var splitKey = '+';\n  var capture = false; // 对为设定范围的判断\n\n  if (method === undefined && typeof option === 'function') {\n    method = option;\n  }\n\n  if (Object.prototype.toString.call(option) === '[object Object]') {\n    if (option.scope) scope = option.scope; // eslint-disable-line\n\n    if (option.element) element = option.element; // eslint-disable-line\n\n    if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n    if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n    if (option.capture !== undefined) capture = option.capture; // eslint-disable-line\n\n    if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n  }\n\n  if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n  for (; i < keys.length; i++) {\n    key = keys[i].split(splitKey); // 按键列表\n\n    mods = []; // 如果是组合快捷键取得组合快捷键\n\n    if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n    key = key[key.length - 1];\n    key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n    // 判断key是否在_handlers中，不在就赋一个空数组\n\n    if (!(key in _handlers)) _handlers[key] = [];\n\n    _handlers[key].push({\n      keyup: keyup,\n      keydown: keydown,\n      scope: scope,\n      mods: mods,\n      shortcut: keys[i],\n      method: method,\n      key: keys[i],\n      splitKey: splitKey,\n      element: element\n    });\n  } // 在全局document上设置快捷键\n\n\n  if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n    elementHasBindEvent.push(element);\n    addEvent(element, 'keydown', function (e) {\n      dispatch(e, element);\n    }, capture);\n\n    if (!winListendFocus) {\n      winListendFocus = true;\n      addEvent(window, 'focus', function () {\n        _downKeys = [];\n      }, capture);\n    }\n\n    addEvent(element, 'keyup', function (e) {\n      dispatch(e, element);\n      clearModifier(e);\n    }, capture);\n  }\n}\n\nfunction trigger(shortcut) {\n  var scope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';\n  Object.keys(_handlers).forEach(function (key) {\n    var dataList = _handlers[key].filter(function (item) {\n      return item.scope === scope && item.shortcut === shortcut;\n    });\n\n    dataList.forEach(function (data) {\n      if (data && data.method) {\n        data.method();\n      }\n    });\n  });\n}\n\nvar _api = {\n  getPressedKeyString: getPressedKeyString,\n  setScope: setScope,\n  getScope: getScope,\n  deleteScope: deleteScope,\n  getPressedKeyCodes: getPressedKeyCodes,\n  isPressed: isPressed,\n  filter: filter,\n  trigger: trigger,\n  unbind: unbind,\n  keyMap: _keyMap,\n  modifier: _modifier,\n  modifierMap: modifierMap\n};\n\nfor (var a in _api) {\n  if (Object.prototype.hasOwnProperty.call(_api, a)) {\n    hotkeys[a] = _api[a];\n  }\n}\n\nif (typeof window !== 'undefined') {\n  var _hotkeys = window.hotkeys;\n\n  hotkeys.noConflict = function (deep) {\n    if (deep && window.hotkeys === hotkeys) {\n      window.hotkeys = _hotkeys;\n    }\n\n    return hotkeys;\n  };\n\n  window.hotkeys = hotkeys;\n}\n\nexport { hotkeys as default };\n","export interface IContact {\n  name?: string;\n  email?: string;\n  phone: number;\n}\n\nexport class Contact implements IContact {\n  name?: string;\n  email?: string;\n  phone: number;\n\n  constructor(phone: number, email?: string, name? : string){\n    this.email = email\n    this.name = name\n    this.phone = phone\n  }\n\n  saveLocal(){\n    if(this.email)\n      localStorage.setItem('email', this.email)\n  }\n}\n","export const defaultText = \"Hola, quisiera mas informacion sobre el bootcamp\"\nexport const whatsappURL = 'https://api.whatsapp.com/send'\nexport const contactsAPI = import.meta.env.PUBLIC_CONTATCS_API\n","import { defaultText, whatsappURL } from \"../config/whatsapp\"\nimport type { Contact } from \"./Contact\"\n\nexport class Schedule {\n  from?\n  to?\n\n  constructor(from?: number, to?: number){\n    this.from = from\n    this.to = to\n  }\n\n  get isInTime(){\n    if(!this.to || !this.from)\n      return true\n  \n    const currenTime = new Date().getUTCHours()\n    return currenTime <= (this.to ?? 23) && currenTime >= (this.from ?? 0)\n  }\n}\n\n\nexport class Whatsapp {\n  schedules: Schedule[] | Schedule\n  text: string;\n  contact: Contact;\n\n\n  constructor(schedules: Schedule[] | Schedule, conctact: Contact, text = defaultText ){\n    this.schedules = schedules\n    this.contact = conctact\n    this.text = text\n  }\n\n  get wpText(){\n    return `${this.contact.name|| ''}${this.text}`\n  }\n\n  get link(){\n    const wpURL = new URL(whatsappURL)\n    const { searchParams } =  wpURL\n\n    searchParams.append('text', this.wpText)\n    searchParams.append('phone', this.contact.phone.toString())\n\n\n    return wpURL\n  }\n\n  get isAvailable(){\n    if(Array.isArray(this.schedules))\n      return Boolean(this.schedules.find(schedule => schedule.isInTime))\n\n    return this.schedules.isInTime\n  }\n\n  get linkString(){\n    return this.link.toString()\n  }\n\n}\n","import { Contact } from \"../controllers/Contact\";\nimport { Schedule, Whatsapp } from \"../controllers/Whatsapp\";\nimport { MixPanelLocal } from \"../services/Mixpanel\";\n\nexport class WhatsappContactsObserver {\n  static contactLists: Whatsapp[][] = []\n  static subscribe(contactList: Whatsapp[]){\n    WhatsappContactsObserver.contactLists.push(contactList)\n  }\n\n  static clear(){\n    WhatsappContactsObserver.contactLists\n      .forEach(contactList => contactList.splice(0))\n  }\n\n  static forceActivateAttention(number: number){\n    WhatsappContactsObserver.clear()\n    const whatsapp = new Whatsapp( new Schedule(), new Contact(number))\n\n    WhatsappContactsObserver.contactLists.forEach(\n      contactList => contactList.push(whatsapp)\n    )\n  }\n}\n\nexport class MixpanelObserver {\n  static mixPanelInstance: MixPanelLocal\n\n  static subscribe(mixpanelInstance: MixPanelLocal){\n    MixpanelObserver.mixPanelInstance = mixpanelInstance\n  }\n\n  static deactivate(){\n    localStorage.setItem('mixpanelStatus', 'inactive')\n    MixpanelObserver.mixPanelInstance.deactivate(MixpanelObserver)\n  }\n\n  static activate(){\n    localStorage.setItem('mixpanelStatus', 'active')\n    MixpanelObserver.mixPanelInstance = MixPanelLocal.defaultInstance()\n    MixpanelObserver.mixPanelInstance.activate()\n  }\n\n}\n","import { isMixpanelAvailable } from \"../../ts/config/mixpanel\"\nimport { isSupabaseActive } from \"../../ts/config/supabase\"\n\n\nexport const options = [\n    {\n      \"label\": \"Mixpanel\", \n      \"id\": \"mixpanel\", \n      \"infoURL\": \"https://developer.mixpanel.com/docs\",\n      \"description\":\"Trackeamos eventos como clicks en los CTA y visitar a la web\",\n      \"type\": \"switch\",\n      \"isAvailable\": isMixpanelAvailable,\n      \"isActive\": localStorage.getItem(\"mixpanelStatus\") === 'active'\n    },\n    {\n      \"label\": \"Supase\", \n      \"id\": \"supabase\", \n      \"infoURL\": \"https://supabase.com/docs\",\n      \"isAvailable\": isSupabaseActive,\n      \"description\": \"Saas para guardar la data en postgres\"\n    },\n    {\n      \"label\": \"Atencion por Whatsapp\",\n      \"description\": \"Forzar que este disponible la atencion por whatsapp al hacer click en inscribirse\",\n      \"id\": \"channelWhatsapp\",\n      \"isAvailable\": true,\n      \"defaultOf\": true\n    }\n  ]\n\n","export enum DeveloperSettingType {\n  MIXPANEL = 'mixpanel',\n  SUPABASE = 'supabse',\n  WHATSAPP = 'channelWhatsapp'\n}\n","  import hotkeys from 'hotkeys-js'\n  import { $ } from '../../ts/utils'\n  import { MixpanelObserver, WhatsappContactsObserver } from '../../ts/reactive'\n  import { options } from './properties'\n  import { DeveloperSettingType } from './types'\n  import { mixPanelLocal } from '../../ts/services/Mixpanel'\n  \n  function getMockPhone(){\n    const phoneElement = $('input#mock-phone')\n    if(phoneElement instanceof HTMLInputElement)\n      return Number(phoneElement.value)\n\n    throw new Error('There is not phone')\n  }\n\n  MixpanelObserver.subscribe(mixPanelLocal())\n\n  options.forEach(({ id })=>{\n    $(`input#${id}`)?.addEventListener('change', ({target})=>{\n      if(!(target instanceof HTMLInputElement))\n        return\n        \n      const { checked } = target\n\n      if(id === 'channelWhatsapp' ){\n        if(checked)\n          return WhatsappContactsObserver\n            .forceActivateAttention(getMockPhone())\n\n        return WhatsappContactsObserver\n          .clear()\n      }\n\n      if(id === DeveloperSettingType.MIXPANEL)\n        if(!checked)\n          return MixpanelObserver.deactivate()\n          \n        return MixpanelObserver.activate()\n    })\n  })\n\n\n  // TODO: convertir a setoide, lenses, esta impuro\n  const modal = $('[data-modal=\"developer-settings\"]')\n\n  function toggleModal(){\n    modal?.classList.toggle('modal-open')\n  }\n\n  modal\n    ?.querySelector('[data-button=\"close-dev-options\"]')\n    ?.addEventListener('click', (event)=>{\n      event.preventDefault()\n\n      toggleModal()\n    })\n\n  hotkeys('ctrl+k', (event)=>{\n    event.preventDefault()\n    toggleModal()\n  })\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9jb21wb25lbnRzL0RldmVsb3BlclNldHRpbmdzL0RldmVsb3BlclNldHRpbmcuYXN0cm8iXSwgInNvdXJjZXNDb250ZW50IjogWyItLS1cbmltcG9ydCBEZXZlbG9wZXJTZXR0aW5nSXRlbSBmcm9tICcuL0RldmVsb3BlclNldHRpbmdJdGVtLmFzdHJvJztcbmltcG9ydCBQaG9uZSBmcm9tICcuL1Bob25lLmFzdHJvJztcbmltcG9ydCBTZXR0aW5nSW5wdXRUb29nbGVyIGZyb20gJy4vU2V0dGluZ1Rvb2dsZXIuYXN0cm8nO1xuaW1wb3J0IHsgb3B0aW9ucyB9IGZyb20gJy4vcHJvcGVydGllcydcbi0tLVxuXHUwMDNjZGl2IGNsYXNzPVwibW9kYWwgei1pbmRleDQwXCIgZGF0YS1tb2RhbD1cImRldmVsb3Blci1zZXR0aW5nc1wiXHUwMDNlXG4gIFx1MDAzY2RpdiBjbGFzcz1cIm1vZGFsLWJveFwiXHUwMDNlXG4gICAgXHUwMDNjaDQgY2xhc3M9XCJtYi0xMlwiXHUwMDNlU2kgZXhpc3RlIGRvY3VtZW50YWNpb24gZXh0ZXJuYSwgaGF6IGNsaWNrIGVuIGVsIFx1MDAzY3NwYW4gY2xhc3M9XCJ0ZXh0LWFjY2VudFwiXHUwMDNlbm9tYnJlXHUwMDNjL3NwYW5cdTAwM2VcdTAwM2MvaDRcdTAwM2VcbiAgICBcdTAwM2NwXHUwMDNlQWxndW5vcyBzZXJ2aWNpb3MgY29tZXpuYXJhbiBzaWVtcHJlIHByZW5kaWRvcywgcGFyYSBpaW5pY2FyIGRlc2FjdGl2YWRvLCBxdWl0YXIgZGUgbGFzIGVudnNcdTAwM2MvcFx1MDAzZVxuICAgIFx1MDAzY1Bob25lIGlkPSdtb2NrLXBob25lJy9cdTAwM2VcbiAgICBcdTAwM2NkaXYgY2xhc3M9XCJkaXZpZGVyXCIvXHUwMDNlXG4gICAge1xuICAgICAgb3B0aW9ucy5tYXAoKHtpc0F2YWlsYWJsZSwgaWQsIGRlZmF1bHRPZiwgaXNBY3RpdmUsIC4uLnJlc3R9KT1cdTAwM2V7XG4gICAgICAgIGNvbnN0IGNsYXNMaXN0ID0gWydmbGV4JywgJ2p1c3RpZnktYmV0d2VlbiddXG4gICAgICAgIGlmKCFpc0F2YWlsYWJsZSlcbiAgICAgICAgICBjbGFzTGlzdC5wdXNoKCd0ZXh0LWdyYXktNTAwJylcblxuICAgICAgICByZXR1cm4gKCBcbiAgICAgICAgICBcdTAwM2NkaXYgY2xhc3M6bGlzdD17Y2xhc0xpc3R9XHUwMDNlXG4gICAgICAgICAgICBcdTAwM2NEZXZlbG9wZXJTZXR0aW5nSXRlbSB7Li4ucmVzdH0vXHUwMDNlXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpc0F2YWlsYWJsZSA/IFx1MDAzY1NldHRpbmdJbnB1dFRvb2dsZXIgaWQ9e2lkfSBkZWZhdWx0T2Y9e2RlZmF1bHRPZn0gaXNBY3RpdmU9e2lzQWN0aXZlfSAvXHUwMDNlXG4gICAgICAgICAgICAgICAgICA6IFx1MDAzY3AgY2xhc3M9XCJ3LTUyXCJcdTAwM2VcbiAgICAgICAgICAgICAgICAgICAgRXN0YSBjYXJhY3RlcmlzdGEgbm8gZXN0YSBkaXNwb25pYmxlLCByZXZpc2EgdHVzIGVudnNcbiAgICAgICAgICAgICAgICAgIFx1MDAzYy9wXHUwMDNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgIFx1MDAzYy9kaXZcdTAwM2VcbiAgICAgICAgICBcdTAwM2NkaXYgY2xhc3M9XCJkaXZpZGVyXCIvXHUwMDNlXG4gICAgICAgICl9KVxuICAgIH1cbiAgICBcdTAwM2NkaXYgY2xhc3M9XCJtb2RhbC1hY3Rpb25cIlx1MDAzZVxuICAgICAgXHUwMDNjYnV0dG9uXG4gICAgICAgIGFyaWEtbGFiZWw9XCJjbG9zZSBtb2RhbFwiXG4gICAgICAgIHJvbGU9XCJjb250ZW50aW5mb1wiIFxuICAgICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIFxuICAgICAgICBkYXRhLWJ1dHRvbj1cImNsb3NlLWRldi1vcHRpb25zXCJcdTAwM2VcbiAgICAgICAgICBDbG9zZVxuICAgICAgXHUwMDNjL2J1dHRvblx1MDAzZVxuICAgIFx1MDAzYy9kaXZcdTAwM2VcbiAgXHUwMDNjL2Rpdlx1MDAzZVxuXHUwMDNjL2Rpdlx1MDAzZVxuXG5cdTAwM2NzY3JpcHRcdTAwM2VcbiAgaW1wb3J0IGhvdGtleXMgZnJvbSAnaG90a2V5cy1qcydcbiAgaW1wb3J0IHsgJCB9IGZyb20gJy4uLy4uL3RzL3V0aWxzJ1xuICBpbXBvcnQgeyBNaXhwYW5lbE9ic2VydmVyLCBXaGF0c2FwcENvbnRhY3RzT2JzZXJ2ZXIgfSBmcm9tICcuLi8uLi90cy9yZWFjdGl2ZSdcbiAgaW1wb3J0IHsgb3B0aW9ucyB9IGZyb20gJy4vcHJvcGVydGllcydcbiAgaW1wb3J0IHsgRGV2ZWxvcGVyU2V0dGluZ1R5cGUgfSBmcm9tICcuL3R5cGVzJ1xuICBpbXBvcnQgeyBtaXhQYW5lbExvY2FsIH0gZnJvbSAnLi4vLi4vdHMvc2VydmljZXMvTWl4cGFuZWwnXG4gIFxuICBmdW5jdGlvbiBnZXRNb2NrUGhvbmUoKXtcbiAgICBjb25zdCBwaG9uZUVsZW1lbnQgPSAkKCdpbnB1dCNtb2NrLXBob25lJylcbiAgICBpZihwaG9uZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KVxuICAgICAgcmV0dXJuIE51bWJlcihwaG9uZUVsZW1lbnQudmFsdWUpXG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vdCBwaG9uZScpXG4gIH1cblxuICBNaXhwYW5lbE9ic2VydmVyLnN1YnNjcmliZShtaXhQYW5lbExvY2FsKCkpXG5cbiAgb3B0aW9ucy5mb3JFYWNoKCh7IGlkIH0pPVx1MDAzZXtcbiAgICAkKGBpbnB1dCMke2lkfWApPy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoe3RhcmdldH0pPVx1MDAzZXtcbiAgICAgIGlmKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpXG4gICAgICAgIHJldHVyblxuICAgICAgICBcbiAgICAgIGNvbnN0IHsgY2hlY2tlZCB9ID0gdGFyZ2V0XG5cbiAgICAgIGlmKGlkID09PSAnY2hhbm5lbFdoYXRzYXBwJyApe1xuICAgICAgICBpZihjaGVja2VkKVxuICAgICAgICAgIHJldHVybiBXaGF0c2FwcENvbnRhY3RzT2JzZXJ2ZXJcbiAgICAgICAgICAgIC5mb3JjZUFjdGl2YXRlQXR0ZW50aW9uKGdldE1vY2tQaG9uZSgpKVxuXG4gICAgICAgIHJldHVybiBXaGF0c2FwcENvbnRhY3RzT2JzZXJ2ZXJcbiAgICAgICAgICAuY2xlYXIoKVxuICAgICAgfVxuXG4gICAgICBpZihpZCA9PT0gRGV2ZWxvcGVyU2V0dGluZ1R5cGUuTUlYUEFORUwpXG4gICAgICAgIGlmKCFjaGVja2VkKVxuICAgICAgICAgIHJldHVybiBNaXhwYW5lbE9ic2VydmVyLmRlYWN0aXZhdGUoKVxuICAgICAgICAgIFxuICAgICAgICByZXR1cm4gTWl4cGFuZWxPYnNlcnZlci5hY3RpdmF0ZSgpXG4gICAgfSlcbiAgfSlcblxuXG4gIC8vIFRPRE86IGNvbnZlcnRpciBhIHNldG9pZGUsIGxlbnNlcywgZXN0YSBpbXB1cm9cbiAgY29uc3QgbW9kYWwgPSAkKCdbZGF0YS1tb2RhbD1cImRldmVsb3Blci1zZXR0aW5nc1wiXScpXG5cbiAgZnVuY3Rpb24gdG9nZ2xlTW9kYWwoKXtcbiAgICBtb2RhbD8uY2xhc3NMaXN0LnRvZ2dsZSgnbW9kYWwtb3BlbicpXG4gIH1cblxuICBtb2RhbFxuICAgID8ucXVlcnlTZWxlY3RvcignW2RhdGEtYnV0dG9uPVwiY2xvc2UtZGV2LW9wdGlvbnNcIl0nKVxuICAgID8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpPVx1MDAzZXtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgdG9nZ2xlTW9kYWwoKVxuICAgIH0pXG5cbiAgaG90a2V5cygnY3RybCtrJywgKGV2ZW50KT1cdTAwM2V7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRvZ2dsZU1vZGFsKClcbiAgfSlcblx1MDAzYy9zY3JpcHRcdTAwM2UiXSwgIm1hcHBpbmdzIjogIkFBNENBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0UsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9DLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRDtBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEM7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsRUFBRTtBQUNGO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1QztBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDYjtBQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CO0FBQ0EsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDbkMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xCLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xEO0FBQ0EsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLE1BQU07QUFDTjtBQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0M7QUFDQSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QyxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBO0FBQ0EsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRDtBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QyxFQUFFO0FBQ0Y7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzQjtBQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEIsRUFBRSxDQUFDO0FBQUE7IiwgIm5hbWVzIjogW10gfQ=="],"names":["Config","window$1","loc","ArrayProto","FuncProto","ObjProto","slice","toString","hasOwnProperty","windowConsole","navigator","document$1","windowOpera","screen","userAgent","nativeBind","nativeForEach","nativeIndexOf","nativeMap","nativeIsArray","breaker","_","str","console","arg","args","log_func_with_prefix","func","prefix","console_with_prefix","context","bound","ctor","self","result","obj","iterator","l","key","source","prop","f","iterable","arr","callback","results","item","value","target","found","needle","subclass","superclass","v","k","d","pad","n","p","ret","length","val","mixed_val","quote","string","escapable","meta","holder","gap","indent","i","mind","partial","at","ch","escapee","text","error","m","e","next","c","number","hex","uffff","white","word","array","object","data","b64","o1","o2","o3","h1","h2","h3","h4","bits","ac","enc","tmp_arr","utftext","start","end","stringl","c1","T","R","UA","ua","buffer","xor","byte_array","j","tmp","se","BLOCKED_UA_STRS","formdata","arg_separator","use_val","use_key","url","param","regexS","regex","name","nameEQ","ca","cookie","seconds","is_cross_subdomain","is_secure","is_cross_site","domain_override","cdomain","expires","secure","domain","extract_domain","date","days","new_cookie_val","_localStorageSupported","localStorageSupported","storage","forceCheck","supported","cheap_guid","force_check","msg","err","register_event","element","type","handler","oldSchool","useCapture","ontype","old_handler","makeHandler","new_handler","old_handlers","event","fixEvent","old_result","new_result","TOKEN_MATCH_REGEX","getAllChildren","bad_whitespace","hasClass","elem","selector","className","getElementsBySelector","tokens","token","tagName","foundCount","elements","currentContextIndex","currentContext","id","token_match","attrName","attrOperator","attrValue","checkFunction","query","campaign_keywords","kw","params","kwkey","referrer","search","keyword","user_agent","vendor","opera","browser","versionRegexs","matches","a","split","page","maxlen","guid","SIMPLE_DOMAIN_MATCH_REGEX","DOMAIN_MATCH_REGEX","hostname","domain_regex","parts","tld","JSONStringify","JSONParse","DomTracker","mixpanel_instance","event_name","properties","user_callback","that","options","props","timeout","timeout_occured","LinkTracker","evt","FormTracker","logger$2","SharedLock","lockedCB","errorCB","pid","startTime","pollIntervalMS","timeoutMS","keyX","keyY","keyZ","reportError","delay","cb","loop","waitFor","predicate","getSetY","valY","criticalSection","logger$1","RequestQueue","storageKey","flushInterval","queueEntry","succeeded","storedQueue","batchSize","batch","idsInBatch","filterOutIDsAndInvalid","items","idSet","filteredItems","ids","removeFromStorage","updatePayloads","existingItems","itemsToUpdate","newItems","newPayload","storageEntry","queue","MAX_RETRY_INTERVAL_MS","logger","RequestBatcher","flushMS","currentBatchSize","dataForRequest","transformedItems","payload","batchSendCallback","res","removeItemsFromQueue","retryMS","headers","retryAfter","halvedBatchSize","requestOptions","GDPR_DEFAULT_PERSISTENCE_PREFIX","optIn","_optInOut","optOut","hasOptedIn","_getStorageValue","hasOptedOut","_hasDoNotTrackFlagOn","optedOut","addOptOutCheckMixpanelLib","method","_addOptOutCheck","addOptOutCheckMixpanelPeople","addOptOutCheckMixpanelGroup","clearOptInOut","_getStorage","_getStorageKey","win","nav","hasDntOn","dntValue","optValue","getConfigValue","ignoreDnt","persistenceType","persistencePrefix","SET_ACTION","SET_ONCE_ACTION","UNSET_ACTION","ADD_ACTION","APPEND_ACTION","UNION_ACTION","REMOVE_ACTION","DELETE_ACTION","apiActions","to","$set","$unset","$set_once","list_name","values","$union","$append","$remove","MixpanelGroup","group_key","group_id","date_encoded_data","conf","MixpanelPeople","by","$add","amount","device_id","user_id","had_persisted_distinct_id","conf_var","action","action_method","queue_to_params_fn","_this","queued_data","action_params","response","_set_callback","_add_callback","_append_callback","_set_once_callback","_union_callback","_unset_callback","_remove_callback","$append_queue","$remove_queue","$append_item","append_callback","$remove_item","remove_callback","SET_QUEUE_KEY","SET_ONCE_QUEUE_KEY","UNSET_QUEUE_KEY","ADD_QUEUE_KEY","APPEND_QUEUE_KEY","REMOVE_QUEUE_KEY","UNION_QUEUE_KEY","PEOPLE_DISTINCT_ID_KEY","ALIAS_ID_KEY","EVENT_TIMERS_KEY","RESERVED_PROPERTIES","MixpanelPersistence","config","storage_type","entry","upgrade_from_old_lib","old_cookie_name","old_cookie","default_value","disabled","cookie_domain","cross_site","cross_subdomain","q_key","q_data","set_q","set_once_q","unset_q","add_q","union_q","remove_q","append_q","enqueued_obj","append_obj","q","queued_action","default_val","timestamp","timers","init_type","mixpanel_master","INIT_MODULE","INIT_SNIPPET","IDENTITY_FUNC","x","NOOP_FUNC","PRIMARY_INSTANCE_NAME","PAYLOAD_TYPE_BASE64","PAYLOAD_TYPE_JSON","USE_XHR","ENQUEUE_REQUESTS","sendBeacon","DEFAULT_CONFIG","DOM_LOADED","MixpanelLib","create_mplib","instance","variable_features","api_host","flush_on_unload","ev","uuid","DomClass","dt","callback_function","jsc","randomized_cb","callback_string","DEFAULT_OPTIONS","body_data","use_post","use_sendBeacon","verbose_mode","lib","img","req","headerValue","headerName","start_time","script","s","fn_name","alias_calls","other_calls","tracking_calls","execute","calls","caller","call","batcher_for","attrs","batcher","events","encoded_data","truncated_data","endpoint","should_send_immediately","send_request_options","request_enqueued_or_initiated","send_request_immediately","transport","start_timestamp","duration_in_ms","property_blacklist","blacklisted_prop","group_ids","old_values","old_value","idx","groups","tracking_props","map_key","group","REGISTER_DEFAULTS","options_for_register","days_or_options","property","new_distinct_id","previous_distinct_id","alias","original","name_tag","new_batch_size","prop_name","hook_name","property_name","is_localStorage_requested","instances","extend_mp","override_mp_init_func","add_dom_loaded_handler","dom_loaded_handler","inst","do_scroll_check","toplevel","init_as_module","mixpanel","mixpanel_cjs","APP_MODE","isMixpanelAvailable","isMixpanelActive","MIXPANEL_KEY","isDebug","mixPanelDefaultConfig","mixpanelInstance","blackListObsevers","MixPanelLocal","description","observer","blakList","mixPanelLocal","Cache","maxSize","SPLIT_REGEX","DIGIT_REGEX","LEAD_DIGIT_REGEX","SPEC_CHAR_REGEX","CLEAN_QUOTES_REGEX","MAX_CACHE_SIZE","pathCache","setCache","getCache","propertyExpr","normalizePath","path","index","len","part","safe","segments","isQuoted","thisArg","forEach","iter","isArray","isBracket","shouldBeQuoted","hasLeadingNumber","hasSpecialChars","reWords","words","upperFirst","join","camelCase","acc","pascalCase","snakeCase","kebabCase","sentenceCase","titleCase","tinyCase","toposortModule","edges","toposort","uniqueNodes","toposort_1","nodes","cursor","sorted","visited","outgoingEdges","makeOutgoingEdges","nodesHash","makeNodesHash","edge","visit","node","predecessors","nodeRep","outgoing","child","errorToString","regExpToString","symbolToString","SYMBOL_REGEXP","printNumber","printSimpleValue","quoteStrings","typeOf","tag","printValue","toArray","strReg","ValidationError","message","errorOrErrors","field","mixed","originalValue","castMsg","boolean","isSchema","Condition","refs","is","then","otherwise","check","schema","_branch","branch","builder","base","ref","prefixes","Reference","getter","parent","isAbsent","createValidation","validate","panic","test","skipAbsent","abortEarly","resolve","createError","overrides","nextParams","invalid","ctx","handleResult","validOrError","handleError","shouldSkip","_result","getIn","lastPart","lastPartDebug","_part","isTuple","ReferenceSet","removeItems","clone","src","seen","copy","Schema","spec","label","fn","before","combined","mergedSpec","conditions","prevSchema","condition","_options$strict","_options$abortEarly","_options$recursive","resolvedSchema","allowOptionality","formattedValue","formattedResult","rawValue","_options","prevValue","_value","strict","initialTests","initialErrors","runOptions","fired","tests","panicOnce","nextOnce","count","nestedErrors","parentPath","originalParent","isIndex","testOptions","reject","parsed","errors","validated","defaultValue","def","isStrict","nullable","optional","opts","isExclusive","keys","deps","dep","enums","valids","resolved","invalids","strip","list","rEmail","rUrl","rUUID","isTrimmed","objStringTag","create$6","StringSchema","_raw","strValue","t","min","max","excludeEmptyString","isNaN$1","create$5","NumberSchema","less","more","_method","avail","isoReg","parseIsoDate","numericKeys","minutesOffset","struct","invalidDate","isDate","DateSchema","cast","limit","sortFields","fields","excludedEdges","excludes","b","addNode","depPath","findIndex","ii","_err$path","sortByKeyOrder","parseJson","deepPartial","fieldSchema","nextArray","deepHas","last","isObject","unknown","known","defaultSort","create$3","ObjectSchema","_options$stripUnknown","intermediateValue","innerOptions","isChanged","exists","fieldValue","inputValue","fieldSpec","from","recursive","objectErrors","fieldErrors","nextFields","schemaOrRef","dft","shape","additions","picked","fromGetter","newObj","noAllow","unknownKeys","allow","_innerOptions","__awaiter","this","_arguments","P","generator","adopt","fulfilled","step","rejected","resolveFetch","customFetch","_fetch","__vitePreload","browserPonyfill","FunctionsError","FunctionsFetchError","FunctionsRelayError","FunctionsHttpError","FunctionsClient","functionName","invokeOptions","_a","functionArgs","_headers","body","fetchError","isRelayError","responseType","global","__self__","F","exports","support","isDataView","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","Headers","header","oldValue","consumed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","promise","readBlobAsText","readArrayBufferAsText","buf","view","chars","bufferClone","Body","decode","methods","normalizeMethod","upcased","Request","input","form","bytes","parseHeaders","rawHeaders","preProcessedHeaders","line","Response","bodyInit","redirectStatuses","status","fetch","init","request","xhr","abortXhr","module","PostgrestBuilder","crossFetch","onfulfilled","onrejected","_b","_c","statusText","countHeader","contentRange","PostgrestTransformBuilder","columns","quoted","cleanedColumns","column","ascending","nullsFirst","foreignTable","existingOrder","keyOffset","keyLimit","signal","analyze","verbose","settings","buffers","wal","format","forMediatype","PostgrestFilterBuilder","pattern","cleanedValues","range","typePart","configPart","operator","filters","PostgrestQueryBuilder","head","prefersHeaders","uniqueColumns","onConflict","ignoreDuplicates","version","DEFAULT_HEADERS","PostgrestClient","relation","naiveFallback","require$$0","_globalThis","NativeWebSocket","websocket_version","require$$1","W3CWebSocket","uri","protocols","native_instance","VSN","DEFAULT_TIMEOUT","WS_CLOSE_NORMAL","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","Timer","timerCalc","Serializer","rawPayload","decoder","topicSize","eventSize","offset","topic","Push","channel","h","REALTIME_PRESENCE_LISTEN_EVENTS","RealtimePresence","newState","onJoin","onLeave","onSync","diff","currentPresences","newPresences","leftPresences","currentState","state","transformedState","joins","leaves","presences","newPresenceRefs","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","presence","PostgresTypes","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","noop","dataType","toBoolean","toNumber","toJson","toTimestampString","parsedValue","lastIdx","closeBrace","valTrim","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimeChannel","socket","pushEvent","reason","broadcast","accessTokenPayload","r","serverPostgresFilters","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","filter","serverPostgresFilter","push","onClose","leavePush","_event","_ref","typeLower","close","leave","handledPayload","bind","_d","_e","_f","bindId","bindEvent","postgresChanges","commit_timestamp","binding","obj1","obj2","records","Transformers.convertChangeData","RealtimeClient","endPoint","w3cwebsocket","eventsPerSecond","tries","code","kind","chan","newRef","dupChannel","rawMessage","eventsPerSecondLimitMs","StorageError","isStorageError","StorageApiError","StorageUnknownError","originalError","resolveResponse","_getErrorMessage","Res","_getRequestParams","parameters","_handleRequest","fetcher","get","post","put","remove","DEFAULT_SEARCH_OPTIONS","DEFAULT_FILE_OPTIONS","StorageFileApi","bucketId","fileBody","fileOptions","cleanPath","_path","fromPath","toPath","expiresIn","downloadQueryParam","paths","datum","renderPath","transformationQuery","queryString","_queryString","transform","StorageBucketApi","StorageClient","resolveHeadersConstructor","CrossFetchHeaders","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","accessToken","stripTrailingSlash","applySettingDefaults","defaults","dbOptions","authOptions","realtimeOptions","globalOptions","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","DEFAULT_GLOBAL_OPTIONS","expiresAt","isBrowser","localStorageWriteTests","supportsLocalStorage","randomKey","getParameterByName","looksLikeFetchResponse","maybeResponse","setItemAsync","getItemAsync","removeItemAsync","decodeBase64URL","base64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","Deferred","rej","decodeJWTPayload","base64UrlRegex","base64Url","sleep","time","accept","retryable","isRetryable","attempt","AuthError","isAuthError","AuthApiError","isAuthApiError","AuthUnknownError","CustomAuthError","AuthSessionMissingError","AuthInvalidCredentialsError","AuthImplicitGrantRedirectError","details","AuthRetryableFetchError","__rest","NETWORK_ERROR_CODES","_request","qs","_sessionResponse","session","hasSession","user","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","rest","_noResolveJsonResponse","GoTrueAdminApi","jwt","email","attributes","_g","pagination","users","total","links","link","rel","uid","shouldSoftDelete","factors","GOTRUE_URL","STORAGE_KEY","EXPIRY_MARGIN","localStorageAdapter","polyfillGlobalThis","AUTO_REFRESH_TICK_DURATION","AUTO_REFRESH_TICK_THRESHOLD","GoTrueClient","redirectType","credentials","password","phone","provider","nonce","currentSession","maybeSession","sessionData","sessionError","userError","timeNow","hasExpired","refreshedSession","error_description","error_code","provider_token","provider_refresh_token","access_token","expires_in","refresh_token","token_type","expires_at","subscription","refreshToken","startedAt","ticker","now","isInitial","urlParams","challengeData","challengeError","totp","factor","currentLevel","nextLevel","currentAuthenticationMethods","SupabaseAuthClient","SupabaseClient","supabaseUrl","_h","_supabaseUrl","urlParts","defaultStorageKey","DEFAULTS","SupabaseStorageClient","autoRefreshToken","persistSession","detectSessionInUrl","authHeaders","createClient","TOKEN","API","isSupabaseActive","SupabaseContactLocal","supabseLocal","handleValidationError","sendForm","validatedData","click","$","pojo","invalidFields","$$","tinySlider","win$1","raf","caf","extend","checkStorageValue","setLocalStorage","access","getSlideId","getBody","doc","docElement","setFakeBody","docOverflow","resetFakeBody","calc","div","vals","percentageLayout","wrapper","outer","perPage","mediaquerySupport","style","rule","position","createStyleSheet","media","addCSSRule","sheet","rules","removeCSSRule","getCssRulesLength","toDegree","y","getTouchDirection","angle","direction","scope","classListSupport","el","addClass","removeClass","hasAttr","attr","getAttr","isNodeList","setAttrs","els","removeAttrs","attrLength","arrayFromNodeList","nl","hideElement","forceHide","showElement","isVisible","whichProperty","Props","has3DTransforms","tf","has3d","cssTF","getEndProperty","propIn","propOut","endProp","supportsPassive","passiveOption","addEvents","preventScrolling","option","removeEvents","Events","eventName","jsTransform","postfix","duration","tick","unit","positionTick","moveElement","tns","KEYS","tnsStorage","localStorageAccess","browserInfo","CALC","PERCENTAGELAYOUT","CSSMQ","TRANSFORM","HAS3DTRANSFORMS","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","tnsList","optionsElements","responsive","nested","carousel","responsiveTem","updateOptions","animateIn","animateOut","animateDelay","animateNormal","horizontal","outerWrapper","innerWrapper","middleWrapper","container","containerParent","containerHTML","slideItems","slideCount","breakpointZone","windowWidth","getWindowWidth","isOn","setBreakpointZone","autoWidth","fixedWidth","getOption","edgePadding","gutter","viewport","getViewportWidth","center","slideBy","viewportMax","arrowKeys","speed","rewind","autoHeight","controls","controlsText","touch","mouseDrag","autoplay","autoplayTimeout","autoplayText","autoplayHoverPause","autoplayResetOnVisibility","lazyload","lazyloadSelector","slidePositions","slideItemsOut","cloneCount","getCloneCountForLoop","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","getStartIndex","indexCached","getCurrentSlide","indexMin","indexMax","preventActionWhenRunning","swipeAngle","moveDirectionExpected","running","onInit","newContainerClasses","slideId","disable","freezable","freeze","getFreeze","frozen","controlsEvents","onControlsClick","onControlsKeydown","navEvents","onNavClick","onNavKeydown","hoverEvents","mouseoverPause","mouseoutRestart","visibilityEvent","onVisibilityChange","docmentKeydownEvent","onDocumentKeydown","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasOption","hasNav","navAsThumbnails","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","onImgLoaded","onImgFailed","imgsComplete","liveregionCurrent","preventScroll","controlsContainer","controlsContainerHTML","prevButton","nextButton","prevButtonHTML","nextButtonHTML","prevIsButton","nextIsButton","navContainer","navContainerHTML","navItems","pages","getPages","pagesCached","navClicked","navCurrentIndex","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayDirection","autoplayButton","autoplayButtonHTML","autoplayHtmlStrings","autoplayTimer","animating","autoplayHoverPaused","autoplayUserPaused","autoplayVisibilityPaused","initPosition","lastPosition","translateInit","panStart","rafIndex","getDist","resetVariblesWhenDisable","initStructure","initSheet","initSliderTransform","tem","ind","getAbsIndex","absIndex","getItemsMax","bp","itemsMax","getInsertPosition","pos","getClientWidth","rect","width","ww","getSlideMarginLeft","getInnerWrapperStyles","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","autoHeightBP","gutterTemUnit","dir","getTransitionDurationStyle","getContainerWidth","itemsTem","getSlideWidthStyle","dividend","getSlideGutterStyle","getCSSPrefix","num","getAnimationDurationStyle","classOuter","classInner","wp","fragmentBefore","fragmentAfter","cloneFirst","cloneLast","imgs","imgLoaded","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","left","right","initSliderTransformCore","setSlidePositions","updateContentWrapperHeight","slide","update_carousel_transition_duration","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","gutterBP","updateSlideStatus","getLiveRegionStr","txt","toggleAutoplay","startAutoplay","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","eve","onTransitionEnd","resizeTasks","info","onResize","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","destroy","htmlList","prevEl","parentEl","getEvent","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","updateIndex","enableSlider","doContainerTransform","getContainerTransformValue","unfreezeSlider","stopAutoplay","html","updateLiveRegion","updateGallerySlidePositions","vp","leftEdge","rightEdge","enableUI","classN","getVisibleSlideRange","rangestart","rangeend","point","cell","srcset","getTarget","imgFailed","imgCompleted","imgSelector","updateInnerWrapperHeight","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","maxHeight","attr2","navPrev","navCurrent","getLowerCaseNodeName","isAriaDisabled","disEnableElement","prevDisabled","nextDisabled","disablePrev","disableNext","resetDuration","getSliderWidth","getCenterGap","denominator","animateSlide","classOut","classIn","isOut","transformCore","render","sliderMoved","strTrans","goTo","targetIndex","indexGap","passEventObject","targetIn","navIndex","targetIndexBase","setAutoplayTimer","stopAutoplayTimer","updateAutoplayButton","play","pause","keyIndex","setFocus","curElement","isTouchEvent","preventDefaultBehavior","getMoveDirectionExpected","panUpdate","dist","percentageX","preventClick","indexMoved","moved","rough","tns_1","functionThrottle","throttle","interval","timeoutId","throttledFn","leading","trailing","cancel","flush","throttleWrapper","callNow","lensToggleSlider","_slider","slider","isDestroyed","toggleSlider","throtle","isff","addEvent","getMods","modifier","mods","getKeys","compareArray","a1","a2","arr1","arr2","_keyMap","_modifier","modifierMap","_mods","_handlers","_downKeys","winListendFocus","_scope","elementHasBindEvent","getKey","getModifier","setScope","getScope","getPressedKeyCodes","getPressedKeyString","flag","isPressed","keyCode","deleteScope","newScope","handlers","clearModifier","hotkeys","unbind","keysInfo","eachUnbind","_len","_key","_ref$splitKey","splitKey","multipleKeys","originKey","unbindKeys","lastKey","isMatchingMethod","eventHandler","modifiersMatch","dispatch","asterisk","keyName","keyNum","_i","keyShortcut","_downKeysCurrent","isElementBind","keyup","keydown","capture","trigger","shortcut","dataList","_api","_hotkeys","deep","Contact","defaultText","whatsappURL","Schedule","currenTime","Whatsapp","schedules","conctact","wpURL","searchParams","schedule","WhatsappContactsObserver","contactList","whatsapp","MixpanelObserver","DeveloperSettingType","getMockPhone","phoneElement","checked","modal","toggleModal"],"mappings":"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"}