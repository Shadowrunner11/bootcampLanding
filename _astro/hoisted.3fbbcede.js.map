{"version":3,"file":"hoisted.3fbbcede.js","sources":["../../src/ts/main.ts","../../node_modules/property-expr/index.js","../../node_modules/tiny-case/index.js","../../node_modules/toposort/index.js","../../node_modules/yup/index.esm.js","../../src/components/Contact/schema.validaiton.ts","../../node_modules/@supabase/functions-js/dist/module/helper.js","../../node_modules/@supabase/functions-js/dist/module/types.js","../../node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","../../node_modules/cross-fetch/dist/browser-ponyfill.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestTransformBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestFilterBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestQueryBuilder.js","../../node_modules/@supabase/postgrest-js/dist/module/version.js","../../node_modules/@supabase/postgrest-js/dist/module/constants.js","../../node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","../../node_modules/es5-ext/global.js","../../node_modules/websocket/lib/version.js","../../node_modules/websocket/lib/browser.js","../../node_modules/@supabase/realtime-js/dist/module/lib/version.js","../../node_modules/@supabase/realtime-js/dist/module/lib/constants.js","../../node_modules/@supabase/realtime-js/dist/module/lib/timer.js","../../node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","../../node_modules/@supabase/realtime-js/dist/module/lib/push.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","../../node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","../../node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","../../node_modules/@supabase/storage-js/dist/module/lib/errors.js","../../node_modules/@supabase/storage-js/dist/module/lib/helpers.js","../../node_modules/@supabase/storage-js/dist/module/lib/fetch.js","../../node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","../../node_modules/@supabase/storage-js/dist/module/lib/version.js","../../node_modules/@supabase/storage-js/dist/module/lib/constants.js","../../node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","../../node_modules/@supabase/storage-js/dist/module/StorageClient.js","../../node_modules/@supabase/supabase-js/dist/module/lib/version.js","../../node_modules/@supabase/supabase-js/dist/module/lib/constants.js","../../node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","../../node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/errors.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","../../node_modules/@supabase/gotrue-js/dist/module/GoTrueAdminApi.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/version.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/local-storage.js","../../node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","../../node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","../../node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","../../node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","../../node_modules/@supabase/supabase-js/dist/module/index.js","../../src/ts/config/supabase.ts","../../src/ts/services/Supabse.ts","../../src/components/Contact/main.ts","../../src/components/Contact/Contact.astro?astro&type=script&index=0&lang.ts","../../src/components/DeveloperAlert/DeveloperAlert.astro?astro&type=script&index=0&lang.ts","../../node_modules/tiny-slider/dist/tiny-slider.js","../../node_modules/just-throttle/index.mjs","../../src/layouts/main.ts","../../src/layouts/MaybeCarousel.astro?astro&type=script&index=0&lang.ts","../../node_modules/hotkeys-js/dist/hotkeys.esm.js","../../src/components/DeveloperSettings/properties.ts","../../src/components/DeveloperSettings/types/index.ts","../../src/components/DeveloperSettings/DeveloperSetting.astro?astro&type=script&index=0&lang.ts"],"sourcesContent":["import { mixPanelLocal } from \"./services/Mixpanel\"\n\naddEventListener('load', ()=>{\n  if(!localStorage.getItem('theme'))\n    localStorage.setItem('theme', 'dark')\n\n  mixPanelLocal()\n    .trackVisit()\n})\n","/**\n * Based on Kendo UI Core expression code <https://github.com/telerik/kendo-ui-core#license-information>\n */\n'use strict'\n\nfunction Cache(maxSize) {\n  this._maxSize = maxSize\n  this.clear()\n}\nCache.prototype.clear = function () {\n  this._size = 0\n  this._values = Object.create(null)\n}\nCache.prototype.get = function (key) {\n  return this._values[key]\n}\nCache.prototype.set = function (key, value) {\n  this._size >= this._maxSize && this.clear()\n  if (!(key in this._values)) this._size++\n\n  return (this._values[key] = value)\n}\n\nvar SPLIT_REGEX = /[^.^\\]^[]+|(?=\\[\\]|\\.\\.)/g,\n  DIGIT_REGEX = /^\\d+$/,\n  LEAD_DIGIT_REGEX = /^\\d/,\n  SPEC_CHAR_REGEX = /[~`!#$%\\^&*+=\\-\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g,\n  CLEAN_QUOTES_REGEX = /^\\s*(['\"]?)(.*?)(\\1)\\s*$/,\n  MAX_CACHE_SIZE = 512\n\nvar pathCache = new Cache(MAX_CACHE_SIZE),\n  setCache = new Cache(MAX_CACHE_SIZE),\n  getCache = new Cache(MAX_CACHE_SIZE)\n\nvar config\n\nmodule.exports = {\n  Cache: Cache,\n\n  split: split,\n\n  normalizePath: normalizePath,\n\n  setter: function (path) {\n    var parts = normalizePath(path)\n\n    return (\n      setCache.get(path) ||\n      setCache.set(path, function setter(obj, value) {\n        var index = 0\n        var len = parts.length\n        var data = obj\n\n        while (index < len - 1) {\n          var part = parts[index]\n          if (\n            part === '__proto__' ||\n            part === 'constructor' ||\n            part === 'prototype'\n          ) {\n            return obj\n          }\n\n          data = data[parts[index++]]\n        }\n        data[parts[index]] = value\n      })\n    )\n  },\n\n  getter: function (path, safe) {\n    var parts = normalizePath(path)\n    return (\n      getCache.get(path) ||\n      getCache.set(path, function getter(data) {\n        var index = 0,\n          len = parts.length\n        while (index < len) {\n          if (data != null || !safe) data = data[parts[index++]]\n          else return\n        }\n        return data\n      })\n    )\n  },\n\n  join: function (segments) {\n    return segments.reduce(function (path, part) {\n      return (\n        path +\n        (isQuoted(part) || DIGIT_REGEX.test(part)\n          ? '[' + part + ']'\n          : (path ? '.' : '') + part)\n      )\n    }, '')\n  },\n\n  forEach: function (path, cb, thisArg) {\n    forEach(Array.isArray(path) ? path : split(path), cb, thisArg)\n  },\n}\n\nfunction normalizePath(path) {\n  return (\n    pathCache.get(path) ||\n    pathCache.set(\n      path,\n      split(path).map(function (part) {\n        return part.replace(CLEAN_QUOTES_REGEX, '$2')\n      })\n    )\n  )\n}\n\nfunction split(path) {\n  return path.match(SPLIT_REGEX) || ['']\n}\n\nfunction forEach(parts, iter, thisArg) {\n  var len = parts.length,\n    part,\n    idx,\n    isArray,\n    isBracket\n\n  for (idx = 0; idx < len; idx++) {\n    part = parts[idx]\n\n    if (part) {\n      if (shouldBeQuoted(part)) {\n        part = '\"' + part + '\"'\n      }\n\n      isBracket = isQuoted(part)\n      isArray = !isBracket && /^\\d+$/.test(part)\n\n      iter.call(thisArg, part, isBracket, isArray, idx, parts)\n    }\n  }\n}\n\nfunction isQuoted(str) {\n  return (\n    typeof str === 'string' && str && [\"'\", '\"'].indexOf(str.charAt(0)) !== -1\n  )\n}\n\nfunction hasLeadingNumber(part) {\n  return part.match(LEAD_DIGIT_REGEX) && !part.match(DIGIT_REGEX)\n}\n\nfunction hasSpecialChars(part) {\n  return SPEC_CHAR_REGEX.test(part)\n}\n\nfunction shouldBeQuoted(part) {\n  return !isQuoted(part) && (hasLeadingNumber(part) || hasSpecialChars(part))\n}\n","const reWords = /[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+|(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*/g\n\nconst words = (str) => str.match(reWords) || []\n\nconst upperFirst = (str) => str[0].toUpperCase() + str.slice(1)\n\nconst join = (str, d) => words(str).join(d).toLowerCase()\n\nconst camelCase = (str) =>\n  words(str).reduce(\n    (acc, next) =>\n      `${acc}${\n        !acc\n          ? next.toLowerCase()\n          : next[0].toUpperCase() + next.slice(1).toLowerCase()\n      }`,\n    '',\n  )\n\nconst pascalCase = (str) => upperFirst(camelCase(str))\n\nconst snakeCase = (str) => join(str, '_')\n\nconst kebabCase = (str) => join(str, '-')\n\nconst sentenceCase = (str) => upperFirst(join(str, ' '))\n\nconst titleCase = (str) => words(str).map(upperFirst).join(' ')\n\nmodule.exports = {\n  words,\n  upperFirst,\n  camelCase,\n  pascalCase,\n  snakeCase,\n  kebabCase,\n  sentenceCase,\n  titleCase,\n}\n","\n/**\n * Topological sorting function\n *\n * @param {Array} edges\n * @returns {Array}\n */\n\nmodule.exports = function(edges) {\n  return toposort(uniqueNodes(edges), edges)\n}\n\nmodule.exports.array = toposort\n\nfunction toposort(nodes, edges) {\n  var cursor = nodes.length\n    , sorted = new Array(cursor)\n    , visited = {}\n    , i = cursor\n    // Better data structures make algorithm much faster.\n    , outgoingEdges = makeOutgoingEdges(edges)\n    , nodesHash = makeNodesHash(nodes)\n\n  // check for unknown nodes\n  edges.forEach(function(edge) {\n    if (!nodesHash.has(edge[0]) || !nodesHash.has(edge[1])) {\n      throw new Error('Unknown node. There is an unknown node in the supplied edges.')\n    }\n  })\n\n  while (i--) {\n    if (!visited[i]) visit(nodes[i], i, new Set())\n  }\n\n  return sorted\n\n  function visit(node, i, predecessors) {\n    if(predecessors.has(node)) {\n      var nodeRep\n      try {\n        nodeRep = \", node was:\" + JSON.stringify(node)\n      } catch(e) {\n        nodeRep = \"\"\n      }\n      throw new Error('Cyclic dependency' + nodeRep)\n    }\n\n    if (!nodesHash.has(node)) {\n      throw new Error('Found unknown node. Make sure to provided all involved nodes. Unknown node: '+JSON.stringify(node))\n    }\n\n    if (visited[i]) return;\n    visited[i] = true\n\n    var outgoing = outgoingEdges.get(node) || new Set()\n    outgoing = Array.from(outgoing)\n\n    if (i = outgoing.length) {\n      predecessors.add(node)\n      do {\n        var child = outgoing[--i]\n        visit(child, nodesHash.get(child), predecessors)\n      } while (i)\n      predecessors.delete(node)\n    }\n\n    sorted[--cursor] = node\n  }\n}\n\nfunction uniqueNodes(arr){\n  var res = new Set()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var edge = arr[i]\n    res.add(edge[0])\n    res.add(edge[1])\n  }\n  return Array.from(res)\n}\n\nfunction makeOutgoingEdges(arr){\n  var edges = new Map()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var edge = arr[i]\n    if (!edges.has(edge[0])) edges.set(edge[0], new Set())\n    if (!edges.has(edge[1])) edges.set(edge[1], new Set())\n    edges.get(edge[0]).add(edge[1])\n  }\n  return edges\n}\n\nfunction makeNodesHash(arr){\n  var res = new Map()\n  for (var i = 0, len = arr.length; i < len; i++) {\n    res.set(arr[i], i)\n  }\n  return res\n}\n","import { getter, forEach, split, normalizePath, join } from 'property-expr';\nimport { camelCase, snakeCase } from 'tiny-case';\nimport toposort from 'toposort';\n\nconst toString = Object.prototype.toString;\nconst errorToString = Error.prototype.toString;\nconst regExpToString = RegExp.prototype.toString;\nconst symbolToString = typeof Symbol !== 'undefined' ? Symbol.prototype.toString : () => '';\nconst SYMBOL_REGEXP = /^Symbol\\((.*)\\)(.*)$/;\nfunction printNumber(val) {\n  if (val != +val) return 'NaN';\n  const isNegativeZero = val === 0 && 1 / val < 0;\n  return isNegativeZero ? '-0' : '' + val;\n}\nfunction printSimpleValue(val, quoteStrings = false) {\n  if (val == null || val === true || val === false) return '' + val;\n  const typeOf = typeof val;\n  if (typeOf === 'number') return printNumber(val);\n  if (typeOf === 'string') return quoteStrings ? `\"${val}\"` : val;\n  if (typeOf === 'function') return '[Function ' + (val.name || 'anonymous') + ']';\n  if (typeOf === 'symbol') return symbolToString.call(val).replace(SYMBOL_REGEXP, 'Symbol($1)');\n  const tag = toString.call(val).slice(8, -1);\n  if (tag === 'Date') return isNaN(val.getTime()) ? '' + val : val.toISOString(val);\n  if (tag === 'Error' || val instanceof Error) return '[' + errorToString.call(val) + ']';\n  if (tag === 'RegExp') return regExpToString.call(val);\n  return null;\n}\nfunction printValue(value, quoteStrings) {\n  let result = printSimpleValue(value, quoteStrings);\n  if (result !== null) return result;\n  return JSON.stringify(value, function (key, value) {\n    let result = printSimpleValue(this[key], quoteStrings);\n    if (result !== null) return result;\n    return value;\n  }, 2);\n}\n\nfunction toArray(value) {\n  return value == null ? [] : [].concat(value);\n}\n\nlet strReg = /\\$\\{\\s*(\\w+)\\s*\\}/g;\nclass ValidationError extends Error {\n  static formatError(message, params) {\n    const path = params.label || params.path || 'this';\n    if (path !== params.path) params = Object.assign({}, params, {\n      path\n    });\n    if (typeof message === 'string') return message.replace(strReg, (_, key) => printValue(params[key]));\n    if (typeof message === 'function') return message(params);\n    return message;\n  }\n  static isError(err) {\n    return err && err.name === 'ValidationError';\n  }\n  constructor(errorOrErrors, value, field, type) {\n    super();\n    this.value = void 0;\n    this.path = void 0;\n    this.type = void 0;\n    this.errors = void 0;\n    this.params = void 0;\n    this.inner = void 0;\n    this.name = 'ValidationError';\n    this.value = value;\n    this.path = field;\n    this.type = type;\n    this.errors = [];\n    this.inner = [];\n    toArray(errorOrErrors).forEach(err => {\n      if (ValidationError.isError(err)) {\n        this.errors.push(...err.errors);\n        this.inner = this.inner.concat(err.inner.length ? err.inner : err);\n      } else {\n        this.errors.push(err);\n      }\n    });\n    this.message = this.errors.length > 1 ? `${this.errors.length} errors occurred` : this.errors[0];\n    if (Error.captureStackTrace) Error.captureStackTrace(this, ValidationError);\n  }\n}\n\nlet mixed = {\n  default: '${path} is invalid',\n  required: '${path} is a required field',\n  defined: '${path} must be defined',\n  notNull: '${path} cannot be null',\n  oneOf: '${path} must be one of the following values: ${values}',\n  notOneOf: '${path} must not be one of the following values: ${values}',\n  notType: ({\n    path,\n    type,\n    value,\n    originalValue\n  }) => {\n    const castMsg = originalValue != null && originalValue !== value ? ` (cast from the value \\`${printValue(originalValue, true)}\\`).` : '.';\n    return type !== 'mixed' ? `${path} must be a \\`${type}\\` type, ` + `but the final value was: \\`${printValue(value, true)}\\`` + castMsg : `${path} must match the configured type. ` + `The validated value was: \\`${printValue(value, true)}\\`` + castMsg;\n  }\n};\nlet string = {\n  length: '${path} must be exactly ${length} characters',\n  min: '${path} must be at least ${min} characters',\n  max: '${path} must be at most ${max} characters',\n  matches: '${path} must match the following: \"${regex}\"',\n  email: '${path} must be a valid email',\n  url: '${path} must be a valid URL',\n  uuid: '${path} must be a valid UUID',\n  trim: '${path} must be a trimmed string',\n  lowercase: '${path} must be a lowercase string',\n  uppercase: '${path} must be a upper case string'\n};\nlet number = {\n  min: '${path} must be greater than or equal to ${min}',\n  max: '${path} must be less than or equal to ${max}',\n  lessThan: '${path} must be less than ${less}',\n  moreThan: '${path} must be greater than ${more}',\n  positive: '${path} must be a positive number',\n  negative: '${path} must be a negative number',\n  integer: '${path} must be an integer'\n};\nlet date = {\n  min: '${path} field must be later than ${min}',\n  max: '${path} field must be at earlier than ${max}'\n};\nlet boolean = {\n  isValue: '${path} field must be ${value}'\n};\nlet object = {\n  noUnknown: '${path} field has unspecified keys: ${unknown}'\n};\nlet array = {\n  min: '${path} field must have at least ${min} items',\n  max: '${path} field must have less than or equal to ${max} items',\n  length: '${path} must have ${length} items'\n};\nlet tuple = {\n  notType: params => {\n    const {\n      path,\n      value,\n      spec\n    } = params;\n    const typeLen = spec.types.length;\n    if (Array.isArray(value)) {\n      if (value.length < typeLen) return `${path} tuple value has too few items, expected a length of ${typeLen} but got ${value.length} for value: \\`${printValue(value, true)}\\``;\n      if (value.length > typeLen) return `${path} tuple value has too many items, expected a length of ${typeLen} but got ${value.length} for value: \\`${printValue(value, true)}\\``;\n    }\n    return ValidationError.formatError(mixed.notType, params);\n  }\n};\nvar locale = Object.assign(Object.create(null), {\n  mixed,\n  string,\n  number,\n  date,\n  object,\n  array,\n  boolean\n});\n\nconst isSchema = obj => obj && obj.__isYupSchema__;\n\nclass Condition {\n  static fromOptions(refs, config) {\n    if (!config.then && !config.otherwise) throw new TypeError('either `then:` or `otherwise:` is required for `when()` conditions');\n    let {\n      is,\n      then,\n      otherwise\n    } = config;\n    let check = typeof is === 'function' ? is : (...values) => values.every(value => value === is);\n    return new Condition(refs, (values, schema) => {\n      var _branch;\n      let branch = check(...values) ? then : otherwise;\n      return (_branch = branch == null ? void 0 : branch(schema)) != null ? _branch : schema;\n    });\n  }\n  constructor(refs, builder) {\n    this.fn = void 0;\n    this.refs = refs;\n    this.refs = refs;\n    this.fn = builder;\n  }\n  resolve(base, options) {\n    let values = this.refs.map(ref =>\n    // TODO: ? operator here?\n    ref.getValue(options == null ? void 0 : options.value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context));\n    let schema = this.fn(values, base, options);\n    if (schema === undefined ||\n    // @ts-ignore this can be base\n    schema === base) {\n      return base;\n    }\n    if (!isSchema(schema)) throw new TypeError('conditions must return a schema object');\n    return schema.resolve(options);\n  }\n}\n\nconst prefixes = {\n  context: '$',\n  value: '.'\n};\nfunction create$9(key, options) {\n  return new Reference(key, options);\n}\nclass Reference {\n  constructor(key, options = {}) {\n    this.key = void 0;\n    this.isContext = void 0;\n    this.isValue = void 0;\n    this.isSibling = void 0;\n    this.path = void 0;\n    this.getter = void 0;\n    this.map = void 0;\n    if (typeof key !== 'string') throw new TypeError('ref must be a string, got: ' + key);\n    this.key = key.trim();\n    if (key === '') throw new TypeError('ref must be a non-empty string');\n    this.isContext = this.key[0] === prefixes.context;\n    this.isValue = this.key[0] === prefixes.value;\n    this.isSibling = !this.isContext && !this.isValue;\n    let prefix = this.isContext ? prefixes.context : this.isValue ? prefixes.value : '';\n    this.path = this.key.slice(prefix.length);\n    this.getter = this.path && getter(this.path, true);\n    this.map = options.map;\n  }\n  getValue(value, parent, context) {\n    let result = this.isContext ? context : this.isValue ? value : parent;\n    if (this.getter) result = this.getter(result || {});\n    if (this.map) result = this.map(result);\n    return result;\n  }\n\n  /**\n   *\n   * @param {*} value\n   * @param {Object} options\n   * @param {Object=} options.context\n   * @param {Object=} options.parent\n   */\n  cast(value, options) {\n    return this.getValue(value, options == null ? void 0 : options.parent, options == null ? void 0 : options.context);\n  }\n  resolve() {\n    return this;\n  }\n  describe() {\n    return {\n      type: 'ref',\n      key: this.key\n    };\n  }\n  toString() {\n    return `Ref(${this.key})`;\n  }\n  static isRef(value) {\n    return value && value.__isYupRef;\n  }\n}\n\n// @ts-ignore\nReference.prototype.__isYupRef = true;\n\nconst isAbsent = value => value == null;\n\nfunction createValidation(config) {\n  function validate({\n    value,\n    path = '',\n    options,\n    originalValue,\n    schema\n  }, panic, next) {\n    const {\n      name,\n      test,\n      params,\n      message,\n      skipAbsent\n    } = config;\n    let {\n      parent,\n      context,\n      abortEarly = schema.spec.abortEarly\n    } = options;\n    function resolve(item) {\n      return Reference.isRef(item) ? item.getValue(value, parent, context) : item;\n    }\n    function createError(overrides = {}) {\n      const nextParams = Object.assign({\n        value,\n        originalValue,\n        label: schema.spec.label,\n        path: overrides.path || path,\n        spec: schema.spec\n      }, params, overrides.params);\n      for (const key of Object.keys(nextParams)) nextParams[key] = resolve(nextParams[key]);\n      const error = new ValidationError(ValidationError.formatError(overrides.message || message, nextParams), value, nextParams.path, overrides.type || name);\n      error.params = nextParams;\n      return error;\n    }\n    const invalid = abortEarly ? panic : next;\n    let ctx = {\n      path,\n      parent,\n      type: name,\n      from: options.from,\n      createError,\n      resolve,\n      options,\n      originalValue,\n      schema\n    };\n    const handleResult = validOrError => {\n      if (ValidationError.isError(validOrError)) invalid(validOrError);else if (!validOrError) invalid(createError());else next(null);\n    };\n    const handleError = err => {\n      if (ValidationError.isError(err)) invalid(err);else panic(err);\n    };\n    const shouldSkip = skipAbsent && isAbsent(value);\n    if (!options.sync) {\n      try {\n        Promise.resolve(!shouldSkip ? test.call(ctx, value, ctx) : true).then(handleResult, handleError);\n      } catch (err) {\n        handleError(err);\n      }\n      return;\n    }\n    let result;\n    try {\n      var _result;\n      result = !shouldSkip ? test.call(ctx, value, ctx) : true;\n      if (typeof ((_result = result) == null ? void 0 : _result.then) === 'function') {\n        throw new Error(`Validation test of type: \"${ctx.type}\" returned a Promise during a synchronous validate. ` + `This test will finish after the validate call has returned`);\n      }\n    } catch (err) {\n      handleError(err);\n      return;\n    }\n    handleResult(result);\n  }\n  validate.OPTIONS = config;\n  return validate;\n}\n\nfunction getIn(schema, path, value, context = value) {\n  let parent, lastPart, lastPartDebug;\n\n  // root path: ''\n  if (!path) return {\n    parent,\n    parentPath: path,\n    schema\n  };\n  forEach(path, (_part, isBracket, isArray) => {\n    let part = isBracket ? _part.slice(1, _part.length - 1) : _part;\n    schema = schema.resolve({\n      context,\n      parent,\n      value\n    });\n    let isTuple = schema.type === 'tuple';\n    let idx = isArray ? parseInt(part, 10) : 0;\n    if (schema.innerType || isTuple) {\n      if (isTuple && !isArray) throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part \"${lastPartDebug}\" must contain an index to the tuple element, e.g. \"${lastPartDebug}[0]\"`);\n      if (value && idx >= value.length) {\n        throw new Error(`Yup.reach cannot resolve an array item at index: ${_part}, in the path: ${path}. ` + `because there is no value at that index. `);\n      }\n      parent = value;\n      value = value && value[idx];\n      schema = isTuple ? schema.spec.types[idx] : schema.innerType;\n    }\n\n    // sometimes the array index part of a path doesn't exist: \"nested.arr.child\"\n    // in these cases the current part is the next schema and should be processed\n    // in this iteration. For cases where the index signature is included this\n    // check will fail and we'll handle the `child` part on the next iteration like normal\n    if (!isArray) {\n      if (!schema.fields || !schema.fields[part]) throw new Error(`The schema does not contain the path: ${path}. ` + `(failed at: ${lastPartDebug} which is a type: \"${schema.type}\")`);\n      parent = value;\n      value = value && value[part];\n      schema = schema.fields[part];\n    }\n    lastPart = part;\n    lastPartDebug = isBracket ? '[' + _part + ']' : '.' + _part;\n  });\n  return {\n    schema,\n    parent,\n    parentPath: lastPart\n  };\n}\nfunction reach(obj, path, value, context) {\n  return getIn(obj, path, value, context).schema;\n}\n\nclass ReferenceSet extends Set {\n  describe() {\n    const description = [];\n    for (const item of this.values()) {\n      description.push(Reference.isRef(item) ? item.describe() : item);\n    }\n    return description;\n  }\n  resolveAll(resolve) {\n    let result = [];\n    for (const item of this.values()) {\n      result.push(resolve(item));\n    }\n    return result;\n  }\n  clone() {\n    return new ReferenceSet(this.values());\n  }\n  merge(newItems, removeItems) {\n    const next = this.clone();\n    newItems.forEach(value => next.add(value));\n    removeItems.forEach(value => next.delete(value));\n    return next;\n  }\n}\n\n// tweaked from https://github.com/Kelin2025/nanoclone/blob/0abeb7635bda9b68ef2277093f76dbe3bf3948e1/src/index.js\nfunction clone(src, seen = new Map()) {\n  if (isSchema(src) || !src || typeof src !== 'object') return src;\n  if (seen.has(src)) return seen.get(src);\n  let copy;\n  if (src instanceof Date) {\n    // Date\n    copy = new Date(src.getTime());\n    seen.set(src, copy);\n  } else if (src instanceof RegExp) {\n    // RegExp\n    copy = new RegExp(src);\n    seen.set(src, copy);\n  } else if (Array.isArray(src)) {\n    // Array\n    copy = new Array(src.length);\n    seen.set(src, copy);\n    for (let i = 0; i < src.length; i++) copy[i] = clone(src[i], seen);\n  } else if (src instanceof Map) {\n    // Map\n    copy = new Map();\n    seen.set(src, copy);\n    for (const [k, v] of src.entries()) copy.set(k, clone(v, seen));\n  } else if (src instanceof Set) {\n    // Set\n    copy = new Set();\n    seen.set(src, copy);\n    for (const v of src) copy.add(clone(v, seen));\n  } else if (src instanceof Object) {\n    // Object\n    copy = {};\n    seen.set(src, copy);\n    for (const [k, v] of Object.entries(src)) copy[k] = clone(v, seen);\n  } else {\n    throw Error(`Unable to clone ${src}`);\n  }\n  return copy;\n}\n\nclass Schema {\n  constructor(options) {\n    this.type = void 0;\n    this.deps = [];\n    this.tests = void 0;\n    this.transforms = void 0;\n    this.conditions = [];\n    this._mutate = void 0;\n    this.internalTests = {};\n    this._whitelist = new ReferenceSet();\n    this._blacklist = new ReferenceSet();\n    this.exclusiveTests = Object.create(null);\n    this._typeCheck = void 0;\n    this.spec = void 0;\n    this.tests = [];\n    this.transforms = [];\n    this.withMutation(() => {\n      this.typeError(mixed.notType);\n    });\n    this.type = options.type;\n    this._typeCheck = options.check;\n    this.spec = Object.assign({\n      strip: false,\n      strict: false,\n      abortEarly: true,\n      recursive: true,\n      nullable: false,\n      optional: true,\n      coerce: true\n    }, options == null ? void 0 : options.spec);\n    this.withMutation(s => {\n      s.nonNullable();\n    });\n  }\n\n  // TODO: remove\n  get _type() {\n    return this.type;\n  }\n  clone(spec) {\n    if (this._mutate) {\n      if (spec) Object.assign(this.spec, spec);\n      return this;\n    }\n\n    // if the nested value is a schema we can skip cloning, since\n    // they are already immutable\n    const next = Object.create(Object.getPrototypeOf(this));\n\n    // @ts-expect-error this is readonly\n    next.type = this.type;\n    next._typeCheck = this._typeCheck;\n    next._whitelist = this._whitelist.clone();\n    next._blacklist = this._blacklist.clone();\n    next.internalTests = Object.assign({}, this.internalTests);\n    next.exclusiveTests = Object.assign({}, this.exclusiveTests);\n\n    // @ts-expect-error this is readonly\n    next.deps = [...this.deps];\n    next.conditions = [...this.conditions];\n    next.tests = [...this.tests];\n    next.transforms = [...this.transforms];\n    next.spec = clone(Object.assign({}, this.spec, spec));\n    return next;\n  }\n  label(label) {\n    let next = this.clone();\n    next.spec.label = label;\n    return next;\n  }\n  meta(...args) {\n    if (args.length === 0) return this.spec.meta;\n    let next = this.clone();\n    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);\n    return next;\n  }\n  withMutation(fn) {\n    let before = this._mutate;\n    this._mutate = true;\n    let result = fn(this);\n    this._mutate = before;\n    return result;\n  }\n  concat(schema) {\n    if (!schema || schema === this) return this;\n    if (schema.type !== this.type && this.type !== 'mixed') throw new TypeError(`You cannot \\`concat()\\` schema's of different types: ${this.type} and ${schema.type}`);\n    let base = this;\n    let combined = schema.clone();\n    const mergedSpec = Object.assign({}, base.spec, combined.spec);\n    combined.spec = mergedSpec;\n    combined.internalTests = Object.assign({}, base.internalTests, combined.internalTests);\n\n    // manually merge the blacklist/whitelist (the other `schema` takes\n    // precedence in case of conflicts)\n    combined._whitelist = base._whitelist.merge(schema._whitelist, schema._blacklist);\n    combined._blacklist = base._blacklist.merge(schema._blacklist, schema._whitelist);\n\n    // start with the current tests\n    combined.tests = base.tests;\n    combined.exclusiveTests = base.exclusiveTests;\n\n    // manually add the new tests to ensure\n    // the deduping logic is consistent\n    combined.withMutation(next => {\n      schema.tests.forEach(fn => {\n        next.test(fn.OPTIONS);\n      });\n    });\n    combined.transforms = [...base.transforms, ...combined.transforms];\n    return combined;\n  }\n  isType(v) {\n    if (v == null) {\n      if (this.spec.nullable && v === null) return true;\n      if (this.spec.optional && v === undefined) return true;\n      return false;\n    }\n    return this._typeCheck(v);\n  }\n  resolve(options) {\n    let schema = this;\n    if (schema.conditions.length) {\n      let conditions = schema.conditions;\n      schema = schema.clone();\n      schema.conditions = [];\n      schema = conditions.reduce((prevSchema, condition) => condition.resolve(prevSchema, options), schema);\n      schema = schema.resolve(options);\n    }\n    return schema;\n  }\n  resolveOptions(options) {\n    var _options$strict, _options$abortEarly, _options$recursive;\n    return Object.assign({}, options, {\n      from: options.from || [],\n      strict: (_options$strict = options.strict) != null ? _options$strict : this.spec.strict,\n      abortEarly: (_options$abortEarly = options.abortEarly) != null ? _options$abortEarly : this.spec.abortEarly,\n      recursive: (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive\n    });\n  }\n\n  /**\n   * Run the configured transform pipeline over an input value.\n   */\n\n  cast(value, options = {}) {\n    let resolvedSchema = this.resolve(Object.assign({\n      value\n    }, options));\n    let allowOptionality = options.assert === 'ignore-optionality';\n    let result = resolvedSchema._cast(value, options);\n    if (options.assert !== false && !resolvedSchema.isType(result)) {\n      if (allowOptionality && isAbsent(result)) {\n        return result;\n      }\n      let formattedValue = printValue(value);\n      let formattedResult = printValue(result);\n      throw new TypeError(`The value of ${options.path || 'field'} could not be cast to a value ` + `that satisfies the schema type: \"${resolvedSchema.type}\". \\n\\n` + `attempted value: ${formattedValue} \\n` + (formattedResult !== formattedValue ? `result of cast: ${formattedResult}` : ''));\n    }\n    return result;\n  }\n  _cast(rawValue, _options) {\n    let value = rawValue === undefined ? rawValue : this.transforms.reduce((prevValue, fn) => fn.call(this, prevValue, rawValue, this), rawValue);\n    if (value === undefined) {\n      value = this.getDefault();\n    }\n    return value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let {\n      path,\n      originalValue = _value,\n      strict = this.spec.strict\n    } = options;\n    let value = _value;\n    if (!strict) {\n      value = this._cast(value, Object.assign({\n        assert: false\n      }, options));\n    }\n    let initialTests = [];\n    for (let test of Object.values(this.internalTests)) {\n      if (test) initialTests.push(test);\n    }\n    this.runTests({\n      path,\n      value,\n      originalValue,\n      options,\n      tests: initialTests\n    }, panic, initialErrors => {\n      // even if we aren't ending early we can't proceed further if the types aren't correct\n      if (initialErrors.length) {\n        return next(initialErrors, value);\n      }\n      this.runTests({\n        path,\n        value,\n        originalValue,\n        options,\n        tests: this.tests\n      }, panic, next);\n    });\n  }\n\n  /**\n   * Executes a set of validations, either schema, produced Tests or a nested\n   * schema validate result.\n   */\n  runTests(runOptions, panic, next) {\n    let fired = false;\n    let {\n      tests,\n      value,\n      originalValue,\n      path,\n      options\n    } = runOptions;\n    let panicOnce = arg => {\n      if (fired) return;\n      fired = true;\n      panic(arg, value);\n    };\n    let nextOnce = arg => {\n      if (fired) return;\n      fired = true;\n      next(arg, value);\n    };\n    let count = tests.length;\n    let nestedErrors = [];\n    if (!count) return nextOnce([]);\n    let args = {\n      value,\n      originalValue,\n      path,\n      options,\n      schema: this\n    };\n    for (let i = 0; i < tests.length; i++) {\n      const test = tests[i];\n      test(args, panicOnce, function finishTestRun(err) {\n        if (err) {\n          nestedErrors = nestedErrors.concat(err);\n        }\n        if (--count <= 0) {\n          nextOnce(nestedErrors);\n        }\n      });\n    }\n  }\n  asNestedTest({\n    key,\n    index,\n    parent,\n    parentPath,\n    originalParent,\n    options\n  }) {\n    const k = key != null ? key : index;\n    if (k == null) {\n      throw TypeError('Must include `key` or `index` for nested validations');\n    }\n    const isIndex = typeof k === 'number';\n    let value = parent[k];\n    const testOptions = Object.assign({}, options, {\n      // Nested validations fields are always strict:\n      //    1. parent isn't strict so the casting will also have cast inner values\n      //    2. parent is strict in which case the nested values weren't cast either\n      strict: true,\n      parent,\n      value,\n      originalValue: originalParent[k],\n      // FIXME: tests depend on `index` being passed around deeply,\n      //   we should not let the options.key/index bleed through\n      key: undefined,\n      // index: undefined,\n      [isIndex ? 'index' : 'key']: k,\n      path: isIndex || k.includes('.') ? `${parentPath || ''}[${value ? k : `\"${k}\"`}]` : (parentPath ? `${parentPath}.` : '') + key\n    });\n    return (_, panic, next) => this.resolve(testOptions)._validate(value, testOptions, panic, next);\n  }\n  validate(value, options) {\n    let schema = this.resolve(Object.assign({}, options, {\n      value\n    }));\n    return new Promise((resolve, reject) => schema._validate(value, options, (error, parsed) => {\n      if (ValidationError.isError(error)) error.value = parsed;\n      reject(error);\n    }, (errors, validated) => {\n      if (errors.length) reject(new ValidationError(errors, validated));else resolve(validated);\n    }));\n  }\n  validateSync(value, options) {\n    let schema = this.resolve(Object.assign({}, options, {\n      value\n    }));\n    let result;\n    schema._validate(value, Object.assign({}, options, {\n      sync: true\n    }), (error, parsed) => {\n      if (ValidationError.isError(error)) error.value = parsed;\n      throw error;\n    }, (errors, validated) => {\n      if (errors.length) throw new ValidationError(errors, value);\n      result = validated;\n    });\n    return result;\n  }\n  isValid(value, options) {\n    return this.validate(value, options).then(() => true, err => {\n      if (ValidationError.isError(err)) return false;\n      throw err;\n    });\n  }\n  isValidSync(value, options) {\n    try {\n      this.validateSync(value, options);\n      return true;\n    } catch (err) {\n      if (ValidationError.isError(err)) return false;\n      throw err;\n    }\n  }\n  _getDefault() {\n    let defaultValue = this.spec.default;\n    if (defaultValue == null) {\n      return defaultValue;\n    }\n    return typeof defaultValue === 'function' ? defaultValue.call(this) : clone(defaultValue);\n  }\n  getDefault(options\n  // If schema is defaulted we know it's at least not undefined\n  ) {\n    let schema = this.resolve(options || {});\n    return schema._getDefault();\n  }\n  default(def) {\n    if (arguments.length === 0) {\n      return this._getDefault();\n    }\n    let next = this.clone({\n      default: def\n    });\n    return next;\n  }\n  strict(isStrict = true) {\n    return this.clone({\n      strict: isStrict\n    });\n  }\n  nullability(nullable, message) {\n    const next = this.clone({\n      nullable\n    });\n    next.internalTests.nullable = createValidation({\n      message,\n      name: 'nullable',\n      test(value) {\n        return value === null ? this.schema.spec.nullable : true;\n      }\n    });\n    return next;\n  }\n  optionality(optional, message) {\n    const next = this.clone({\n      optional\n    });\n    next.internalTests.optionality = createValidation({\n      message,\n      name: 'optionality',\n      test(value) {\n        return value === undefined ? this.schema.spec.optional : true;\n      }\n    });\n    return next;\n  }\n  optional() {\n    return this.optionality(true);\n  }\n  defined(message = mixed.defined) {\n    return this.optionality(false, message);\n  }\n  nullable() {\n    return this.nullability(true);\n  }\n  nonNullable(message = mixed.notNull) {\n    return this.nullability(false, message);\n  }\n  required(message = mixed.required) {\n    return this.clone().withMutation(next => next.nonNullable(message).defined(message));\n  }\n  notRequired() {\n    return this.clone().withMutation(next => next.nullable().optional());\n  }\n  transform(fn) {\n    let next = this.clone();\n    next.transforms.push(fn);\n    return next;\n  }\n\n  /**\n   * Adds a test function to the schema's queue of tests.\n   * tests can be exclusive or non-exclusive.\n   *\n   * - exclusive tests, will replace any existing tests of the same name.\n   * - non-exclusive: can be stacked\n   *\n   * If a non-exclusive test is added to a schema with an exclusive test of the same name\n   * the exclusive test is removed and further tests of the same name will be stacked.\n   *\n   * If an exclusive test is added to a schema with non-exclusive tests of the same name\n   * the previous tests are removed and further tests of the same name will replace each other.\n   */\n\n  test(...args) {\n    let opts;\n    if (args.length === 1) {\n      if (typeof args[0] === 'function') {\n        opts = {\n          test: args[0]\n        };\n      } else {\n        opts = args[0];\n      }\n    } else if (args.length === 2) {\n      opts = {\n        name: args[0],\n        test: args[1]\n      };\n    } else {\n      opts = {\n        name: args[0],\n        message: args[1],\n        test: args[2]\n      };\n    }\n    if (opts.message === undefined) opts.message = mixed.default;\n    if (typeof opts.test !== 'function') throw new TypeError('`test` is a required parameters');\n    let next = this.clone();\n    let validate = createValidation(opts);\n    let isExclusive = opts.exclusive || opts.name && next.exclusiveTests[opts.name] === true;\n    if (opts.exclusive) {\n      if (!opts.name) throw new TypeError('Exclusive tests must provide a unique `name` identifying the test');\n    }\n    if (opts.name) next.exclusiveTests[opts.name] = !!opts.exclusive;\n    next.tests = next.tests.filter(fn => {\n      if (fn.OPTIONS.name === opts.name) {\n        if (isExclusive) return false;\n        if (fn.OPTIONS.test === validate.OPTIONS.test) return false;\n      }\n      return true;\n    });\n    next.tests.push(validate);\n    return next;\n  }\n  when(keys, options) {\n    if (!Array.isArray(keys) && typeof keys !== 'string') {\n      options = keys;\n      keys = '.';\n    }\n    let next = this.clone();\n    let deps = toArray(keys).map(key => new Reference(key));\n    deps.forEach(dep => {\n      // @ts-ignore readonly array\n      if (dep.isSibling) next.deps.push(dep.key);\n    });\n    next.conditions.push(typeof options === 'function' ? new Condition(deps, options) : Condition.fromOptions(deps, options));\n    return next;\n  }\n  typeError(message) {\n    let next = this.clone();\n    next.internalTests.typeError = createValidation({\n      message,\n      name: 'typeError',\n      test(value) {\n        if (!isAbsent(value) && !this.schema._typeCheck(value)) return this.createError({\n          params: {\n            type: this.schema.type\n          }\n        });\n        return true;\n      }\n    });\n    return next;\n  }\n  oneOf(enums, message = mixed.oneOf) {\n    let next = this.clone();\n    enums.forEach(val => {\n      next._whitelist.add(val);\n      next._blacklist.delete(val);\n    });\n    next.internalTests.whiteList = createValidation({\n      message,\n      name: 'oneOf',\n      skipAbsent: true,\n      test(value) {\n        let valids = this.schema._whitelist;\n        let resolved = valids.resolveAll(this.resolve);\n        return resolved.includes(value) ? true : this.createError({\n          params: {\n            values: Array.from(valids).join(', '),\n            resolved\n          }\n        });\n      }\n    });\n    return next;\n  }\n  notOneOf(enums, message = mixed.notOneOf) {\n    let next = this.clone();\n    enums.forEach(val => {\n      next._blacklist.add(val);\n      next._whitelist.delete(val);\n    });\n    next.internalTests.blacklist = createValidation({\n      message,\n      name: 'notOneOf',\n      test(value) {\n        let invalids = this.schema._blacklist;\n        let resolved = invalids.resolveAll(this.resolve);\n        if (resolved.includes(value)) return this.createError({\n          params: {\n            values: Array.from(invalids).join(', '),\n            resolved\n          }\n        });\n        return true;\n      }\n    });\n    return next;\n  }\n  strip(strip = true) {\n    let next = this.clone();\n    next.spec.strip = strip;\n    return next;\n  }\n\n  /**\n   * Return a serialized description of the schema including validations, flags, types etc.\n   *\n   * @param options Provide any needed context for resolving runtime schema alterations (lazy, when conditions, etc).\n   */\n  describe(options) {\n    const next = (options ? this.resolve(options) : this).clone();\n    const {\n      label,\n      meta,\n      optional,\n      nullable\n    } = next.spec;\n    const description = {\n      meta,\n      label,\n      optional,\n      nullable,\n      default: next.getDefault(options),\n      type: next.type,\n      oneOf: next._whitelist.describe(),\n      notOneOf: next._blacklist.describe(),\n      tests: next.tests.map(fn => ({\n        name: fn.OPTIONS.name,\n        params: fn.OPTIONS.params\n      })).filter((n, idx, list) => list.findIndex(c => c.name === n.name) === idx)\n    };\n    return description;\n  }\n}\n// @ts-expect-error\nSchema.prototype.__isYupSchema__ = true;\nfor (const method of ['validate', 'validateSync']) Schema.prototype[`${method}At`] = function (path, value, options = {}) {\n  const {\n    parent,\n    parentPath,\n    schema\n  } = getIn(this, path, value, options.context);\n  return schema[method](parent && parent[parentPath], Object.assign({}, options, {\n    parent,\n    path\n  }));\n};\nfor (const alias of ['equals', 'is']) Schema.prototype[alias] = Schema.prototype.oneOf;\nfor (const alias of ['not', 'nope']) Schema.prototype[alias] = Schema.prototype.notOneOf;\n\nconst returnsTrue = () => true;\nfunction create$8(spec) {\n  return new MixedSchema(spec);\n}\nclass MixedSchema extends Schema {\n  constructor(spec) {\n    super(typeof spec === 'function' ? {\n      type: 'mixed',\n      check: spec\n    } : Object.assign({\n      type: 'mixed',\n      check: returnsTrue\n    }, spec));\n  }\n}\ncreate$8.prototype = MixedSchema.prototype;\n\nfunction create$7() {\n  return new BooleanSchema();\n}\nclass BooleanSchema extends Schema {\n  constructor() {\n    super({\n      type: 'boolean',\n      check(v) {\n        if (v instanceof Boolean) v = v.valueOf();\n        return typeof v === 'boolean';\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (ctx.spec.coerce && !ctx.isType(value)) {\n          if (/^(true|1)$/i.test(String(value))) return true;\n          if (/^(false|0)$/i.test(String(value))) return false;\n        }\n        return value;\n      });\n    });\n  }\n  isTrue(message = boolean.isValue) {\n    return this.test({\n      message,\n      name: 'is-value',\n      exclusive: true,\n      params: {\n        value: 'true'\n      },\n      test(value) {\n        return isAbsent(value) || value === true;\n      }\n    });\n  }\n  isFalse(message = boolean.isValue) {\n    return this.test({\n      message,\n      name: 'is-value',\n      exclusive: true,\n      params: {\n        value: 'false'\n      },\n      test(value) {\n        return isAbsent(value) || value === false;\n      }\n    });\n  }\n  default(def) {\n    return super.default(def);\n  }\n  defined(msg) {\n    return super.defined(msg);\n  }\n  optional() {\n    return super.optional();\n  }\n  required(msg) {\n    return super.required(msg);\n  }\n  notRequired() {\n    return super.notRequired();\n  }\n  nullable() {\n    return super.nullable();\n  }\n  nonNullable(msg) {\n    return super.nonNullable(msg);\n  }\n  strip(v) {\n    return super.strip(v);\n  }\n}\ncreate$7.prototype = BooleanSchema.prototype;\n\n// Taken from HTML spec: https://html.spec.whatwg.org/multipage/input.html#valid-e-mail-address\nlet rEmail =\n// eslint-disable-next-line\n/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\nlet rUrl =\n// eslint-disable-next-line\n/^((https?|ftp):)?\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$/i;\n\n// eslint-disable-next-line\nlet rUUID = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nlet isTrimmed = value => isAbsent(value) || value === value.trim();\nlet objStringTag = {}.toString();\nfunction create$6() {\n  return new StringSchema();\n}\nclass StringSchema extends Schema {\n  constructor() {\n    super({\n      type: 'string',\n      check(value) {\n        if (value instanceof String) value = value.valueOf();\n        return typeof value === 'string';\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce || ctx.isType(value)) return value;\n\n        // don't ever convert arrays\n        if (Array.isArray(value)) return value;\n        const strValue = value != null && value.toString ? value.toString() : value;\n\n        // no one wants plain objects converted to [Object object]\n        if (strValue === objStringTag) return value;\n        return strValue;\n      });\n    });\n  }\n  required(message) {\n    return super.required(message).withMutation(schema => schema.test({\n      message: message || mixed.required,\n      name: 'required',\n      skipAbsent: true,\n      test: value => !!value.length\n    }));\n  }\n  notRequired() {\n    return super.notRequired().withMutation(schema => {\n      schema.tests = schema.tests.filter(t => t.OPTIONS.name !== 'required');\n      return schema;\n    });\n  }\n  length(length, message = string.length) {\n    return this.test({\n      message,\n      name: 'length',\n      exclusive: true,\n      params: {\n        length\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length === this.resolve(length);\n      }\n    });\n  }\n  min(min, message = string.min) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message = string.max) {\n    return this.test({\n      name: 'max',\n      exclusive: true,\n      message,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length <= this.resolve(max);\n      }\n    });\n  }\n  matches(regex, options) {\n    let excludeEmptyString = false;\n    let message;\n    let name;\n    if (options) {\n      if (typeof options === 'object') {\n        ({\n          excludeEmptyString = false,\n          message,\n          name\n        } = options);\n      } else {\n        message = options;\n      }\n    }\n    return this.test({\n      name: name || 'matches',\n      message: message || string.matches,\n      params: {\n        regex\n      },\n      skipAbsent: true,\n      test: value => value === '' && excludeEmptyString || value.search(regex) !== -1\n    });\n  }\n  email(message = string.email) {\n    return this.matches(rEmail, {\n      name: 'email',\n      message,\n      excludeEmptyString: true\n    });\n  }\n  url(message = string.url) {\n    return this.matches(rUrl, {\n      name: 'url',\n      message,\n      excludeEmptyString: true\n    });\n  }\n  uuid(message = string.uuid) {\n    return this.matches(rUUID, {\n      name: 'uuid',\n      message,\n      excludeEmptyString: false\n    });\n  }\n\n  //-- transforms --\n  ensure() {\n    return this.default('').transform(val => val === null ? '' : val);\n  }\n  trim(message = string.trim) {\n    return this.transform(val => val != null ? val.trim() : val).test({\n      message,\n      name: 'trim',\n      test: isTrimmed\n    });\n  }\n  lowercase(message = string.lowercase) {\n    return this.transform(value => !isAbsent(value) ? value.toLowerCase() : value).test({\n      message,\n      name: 'string_case',\n      exclusive: true,\n      skipAbsent: true,\n      test: value => isAbsent(value) || value === value.toLowerCase()\n    });\n  }\n  uppercase(message = string.uppercase) {\n    return this.transform(value => !isAbsent(value) ? value.toUpperCase() : value).test({\n      message,\n      name: 'string_case',\n      exclusive: true,\n      skipAbsent: true,\n      test: value => isAbsent(value) || value === value.toUpperCase()\n    });\n  }\n}\ncreate$6.prototype = StringSchema.prototype;\n\n//\n// String Interfaces\n//\n\nlet isNaN$1 = value => value != +value;\nfunction create$5() {\n  return new NumberSchema();\n}\nclass NumberSchema extends Schema {\n  constructor() {\n    super({\n      type: 'number',\n      check(value) {\n        if (value instanceof Number) value = value.valueOf();\n        return typeof value === 'number' && !isNaN$1(value);\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce) return value;\n        let parsed = value;\n        if (typeof parsed === 'string') {\n          parsed = parsed.replace(/\\s/g, '');\n          if (parsed === '') return NaN;\n          // don't use parseFloat to avoid positives on alpha-numeric strings\n          parsed = +parsed;\n        }\n        if (ctx.isType(parsed)) return parsed;\n        return parseFloat(parsed);\n      });\n    });\n  }\n  min(min, message = number.min) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message = number.max) {\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value <= this.resolve(max);\n      }\n    });\n  }\n  lessThan(less, message = number.lessThan) {\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        less\n      },\n      skipAbsent: true,\n      test(value) {\n        return value < this.resolve(less);\n      }\n    });\n  }\n  moreThan(more, message = number.moreThan) {\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        more\n      },\n      skipAbsent: true,\n      test(value) {\n        return value > this.resolve(more);\n      }\n    });\n  }\n  positive(msg = number.positive) {\n    return this.moreThan(0, msg);\n  }\n  negative(msg = number.negative) {\n    return this.lessThan(0, msg);\n  }\n  integer(message = number.integer) {\n    return this.test({\n      name: 'integer',\n      message,\n      skipAbsent: true,\n      test: val => Number.isInteger(val)\n    });\n  }\n  truncate() {\n    return this.transform(value => !isAbsent(value) ? value | 0 : value);\n  }\n  round(method) {\n    var _method;\n    let avail = ['ceil', 'floor', 'round', 'trunc'];\n    method = ((_method = method) == null ? void 0 : _method.toLowerCase()) || 'round';\n\n    // this exists for symemtry with the new Math.trunc\n    if (method === 'trunc') return this.truncate();\n    if (avail.indexOf(method.toLowerCase()) === -1) throw new TypeError('Only valid options for round() are: ' + avail.join(', '));\n    return this.transform(value => !isAbsent(value) ? Math[method](value) : value);\n  }\n}\ncreate$5.prototype = NumberSchema.prototype;\n\n//\n// Number Interfaces\n//\n\n/* eslint-disable */\n/**\n *\n * Date.parse with progressive enhancement for ISO 8601 <https://github.com/csnover/js-iso8601>\n * NON-CONFORMANT EDITION.\n * © 2011 Colin Snover <http://zetafleet.com>\n * Released under MIT license.\n */\n\n//              1 YYYY                 2 MM        3 DD              4 HH     5 mm        6 ss            7 msec         8 Z 9 ±    10 tzHH    11 tzmm\nvar isoReg = /^(\\d{4}|[+\\-]\\d{6})(?:-?(\\d{2})(?:-?(\\d{2}))?)?(?:[ T]?(\\d{2}):?(\\d{2})(?::?(\\d{2})(?:[,\\.](\\d{1,}))?)?(?:(Z)|([+\\-])(\\d{2})(?::?(\\d{2}))?)?)?$/;\nfunction parseIsoDate(date) {\n  var numericKeys = [1, 4, 5, 6, 7, 10, 11],\n    minutesOffset = 0,\n    timestamp,\n    struct;\n  if (struct = isoReg.exec(date)) {\n    // avoid NaN timestamps caused by “undefined” values being passed to Date.UTC\n    for (var i = 0, k; k = numericKeys[i]; ++i) struct[k] = +struct[k] || 0;\n\n    // allow undefined days and months\n    struct[2] = (+struct[2] || 1) - 1;\n    struct[3] = +struct[3] || 1;\n\n    // allow arbitrary sub-second precision beyond milliseconds\n    struct[7] = struct[7] ? String(struct[7]).substr(0, 3) : 0;\n\n    // timestamps without timezone identifiers should be considered local time\n    if ((struct[8] === undefined || struct[8] === '') && (struct[9] === undefined || struct[9] === '')) timestamp = +new Date(struct[1], struct[2], struct[3], struct[4], struct[5], struct[6], struct[7]);else {\n      if (struct[8] !== 'Z' && struct[9] !== undefined) {\n        minutesOffset = struct[10] * 60 + struct[11];\n        if (struct[9] === '+') minutesOffset = 0 - minutesOffset;\n      }\n      timestamp = Date.UTC(struct[1], struct[2], struct[3], struct[4], struct[5] + minutesOffset, struct[6], struct[7]);\n    }\n  } else timestamp = Date.parse ? Date.parse(date) : NaN;\n  return timestamp;\n}\n\n// @ts-ignore\nlet invalidDate = new Date('');\nlet isDate = obj => Object.prototype.toString.call(obj) === '[object Date]';\nfunction create$4() {\n  return new DateSchema();\n}\nclass DateSchema extends Schema {\n  constructor() {\n    super({\n      type: 'date',\n      check(v) {\n        return isDate(v) && !isNaN(v.getTime());\n      }\n    });\n    this.withMutation(() => {\n      this.transform((value, _raw, ctx) => {\n        if (!ctx.spec.coerce || ctx.isType(value)) return value;\n        value = parseIsoDate(value);\n\n        // 0 is a valid timestamp equivalent to 1970-01-01T00:00:00Z(unix epoch) or before.\n        return !isNaN(value) ? new Date(value) : DateSchema.INVALID_DATE;\n      });\n    });\n  }\n  prepareParam(ref, name) {\n    let param;\n    if (!Reference.isRef(ref)) {\n      let cast = this.cast(ref);\n      if (!this._typeCheck(cast)) throw new TypeError(`\\`${name}\\` must be a Date or a value that can be \\`cast()\\` to a Date`);\n      param = cast;\n    } else {\n      param = ref;\n    }\n    return param;\n  }\n  min(min, message = date.min) {\n    let limit = this.prepareParam(min, 'min');\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      test(value) {\n        return value >= this.resolve(limit);\n      }\n    });\n  }\n  max(max, message = date.max) {\n    let limit = this.prepareParam(max, 'max');\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value <= this.resolve(limit);\n      }\n    });\n  }\n}\nDateSchema.INVALID_DATE = invalidDate;\ncreate$4.prototype = DateSchema.prototype;\ncreate$4.INVALID_DATE = invalidDate;\n\n// @ts-expect-error\nfunction sortFields(fields, excludedEdges = []) {\n  let edges = [];\n  let nodes = new Set();\n  let excludes = new Set(excludedEdges.map(([a, b]) => `${a}-${b}`));\n  function addNode(depPath, key) {\n    let node = split(depPath)[0];\n    nodes.add(node);\n    if (!excludes.has(`${key}-${node}`)) edges.push([key, node]);\n  }\n  for (const key of Object.keys(fields)) {\n    let value = fields[key];\n    nodes.add(key);\n    if (Reference.isRef(value) && value.isSibling) addNode(value.path, key);else if (isSchema(value) && 'deps' in value) value.deps.forEach(path => addNode(path, key));\n  }\n  return toposort.array(Array.from(nodes), edges).reverse();\n}\n\nfunction findIndex(arr, err) {\n  let idx = Infinity;\n  arr.some((key, ii) => {\n    var _err$path;\n    if ((_err$path = err.path) != null && _err$path.includes(key)) {\n      idx = ii;\n      return true;\n    }\n  });\n  return idx;\n}\nfunction sortByKeyOrder(keys) {\n  return (a, b) => {\n    return findIndex(keys, a) - findIndex(keys, b);\n  };\n}\n\nconst parseJson = (value, _, ctx) => {\n  if (typeof value !== 'string') {\n    return value;\n  }\n  let parsed = value;\n  try {\n    parsed = JSON.parse(value);\n  } catch (err) {\n    /* */\n  }\n  return ctx.isType(parsed) ? parsed : value;\n};\n\n// @ts-ignore\nfunction deepPartial(schema) {\n  if ('fields' in schema) {\n    const partial = {};\n    for (const [key, fieldSchema] of Object.entries(schema.fields)) {\n      partial[key] = deepPartial(fieldSchema);\n    }\n    return schema.setFields(partial);\n  }\n  if (schema.type === 'array') {\n    const nextArray = schema.optional();\n    if (nextArray.innerType) nextArray.innerType = deepPartial(nextArray.innerType);\n    return nextArray;\n  }\n  if (schema.type === 'tuple') {\n    return schema.optional().clone({\n      types: schema.spec.types.map(deepPartial)\n    });\n  }\n  if ('optional' in schema) {\n    return schema.optional();\n  }\n  return schema;\n}\nconst deepHas = (obj, p) => {\n  const path = [...normalizePath(p)];\n  if (path.length === 1) return path[0] in obj;\n  let last = path.pop();\n  let parent = getter(join(path), true)(obj);\n  return !!(parent && last in parent);\n};\nlet isObject = obj => Object.prototype.toString.call(obj) === '[object Object]';\nfunction unknown(ctx, value) {\n  let known = Object.keys(ctx.fields);\n  return Object.keys(value).filter(key => known.indexOf(key) === -1);\n}\nconst defaultSort = sortByKeyOrder([]);\nfunction create$3(spec) {\n  return new ObjectSchema(spec);\n}\nclass ObjectSchema extends Schema {\n  constructor(spec) {\n    super({\n      type: 'object',\n      check(value) {\n        return isObject(value) || typeof value === 'function';\n      }\n    });\n    this.fields = Object.create(null);\n    this._sortErrors = defaultSort;\n    this._nodes = [];\n    this._excludedEdges = [];\n    this.withMutation(() => {\n      if (spec) {\n        this.shape(spec);\n      }\n    });\n  }\n  _cast(_value, options = {}) {\n    var _options$stripUnknown;\n    let value = super._cast(_value, options);\n\n    //should ignore nulls here\n    if (value === undefined) return this.getDefault();\n    if (!this._typeCheck(value)) return value;\n    let fields = this.fields;\n    let strip = (_options$stripUnknown = options.stripUnknown) != null ? _options$stripUnknown : this.spec.noUnknown;\n    let props = [].concat(this._nodes, Object.keys(value).filter(v => !this._nodes.includes(v)));\n    let intermediateValue = {}; // is filled during the transform below\n    let innerOptions = Object.assign({}, options, {\n      parent: intermediateValue,\n      __validating: options.__validating || false\n    });\n    let isChanged = false;\n    for (const prop of props) {\n      let field = fields[prop];\n      let exists = (prop in value);\n      if (field) {\n        let fieldValue;\n        let inputValue = value[prop];\n\n        // safe to mutate since this is fired in sequence\n        innerOptions.path = (options.path ? `${options.path}.` : '') + prop;\n        field = field.resolve({\n          value: inputValue,\n          context: options.context,\n          parent: intermediateValue\n        });\n        let fieldSpec = field instanceof Schema ? field.spec : undefined;\n        let strict = fieldSpec == null ? void 0 : fieldSpec.strict;\n        if (fieldSpec != null && fieldSpec.strip) {\n          isChanged = isChanged || prop in value;\n          continue;\n        }\n        fieldValue = !options.__validating || !strict ?\n        // TODO: use _cast, this is double resolving\n        field.cast(value[prop], innerOptions) : value[prop];\n        if (fieldValue !== undefined) {\n          intermediateValue[prop] = fieldValue;\n        }\n      } else if (exists && !strip) {\n        intermediateValue[prop] = value[prop];\n      }\n      if (exists !== prop in intermediateValue || intermediateValue[prop] !== value[prop]) {\n        isChanged = true;\n      }\n    }\n    return isChanged ? intermediateValue : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let {\n      from = [],\n      originalValue = _value,\n      recursive = this.spec.recursive\n    } = options;\n    options.from = [{\n      schema: this,\n      value: originalValue\n    }, ...from];\n    // this flag is needed for handling `strict` correctly in the context of\n    // validation vs just casting. e.g strict() on a field is only used when validating\n    options.__validating = true;\n    options.originalValue = originalValue;\n    super._validate(_value, options, panic, (objectErrors, value) => {\n      if (!recursive || !isObject(value)) {\n        next(objectErrors, value);\n        return;\n      }\n      originalValue = originalValue || value;\n      let tests = [];\n      for (let key of this._nodes) {\n        let field = this.fields[key];\n        if (!field || Reference.isRef(field)) {\n          continue;\n        }\n        tests.push(field.asNestedTest({\n          options,\n          key,\n          parent: value,\n          parentPath: options.path,\n          originalParent: originalValue\n        }));\n      }\n      this.runTests({\n        tests,\n        value,\n        originalValue,\n        options\n      }, panic, fieldErrors => {\n        next(fieldErrors.sort(this._sortErrors).concat(objectErrors), value);\n      });\n    });\n  }\n  clone(spec) {\n    const next = super.clone(spec);\n    next.fields = Object.assign({}, this.fields);\n    next._nodes = this._nodes;\n    next._excludedEdges = this._excludedEdges;\n    next._sortErrors = this._sortErrors;\n    return next;\n  }\n  concat(schema) {\n    let next = super.concat(schema);\n    let nextFields = next.fields;\n    for (let [field, schemaOrRef] of Object.entries(this.fields)) {\n      const target = nextFields[field];\n      nextFields[field] = target === undefined ? schemaOrRef : target;\n    }\n    return next.withMutation(s => s.setFields(nextFields, this._excludedEdges));\n  }\n  _getDefault() {\n    if ('default' in this.spec) {\n      return super._getDefault();\n    }\n\n    // if there is no default set invent one\n    if (!this._nodes.length) {\n      return undefined;\n    }\n    let dft = {};\n    this._nodes.forEach(key => {\n      const field = this.fields[key];\n      dft[key] = field && 'getDefault' in field ? field.getDefault() : undefined;\n    });\n    return dft;\n  }\n  setFields(shape, excludedEdges) {\n    let next = this.clone();\n    next.fields = shape;\n    next._nodes = sortFields(shape, excludedEdges);\n    next._sortErrors = sortByKeyOrder(Object.keys(shape));\n    // XXX: this carries over edges which may not be what you want\n    if (excludedEdges) next._excludedEdges = excludedEdges;\n    return next;\n  }\n  shape(additions, excludes = []) {\n    return this.clone().withMutation(next => {\n      let edges = next._excludedEdges;\n      if (excludes.length) {\n        if (!Array.isArray(excludes[0])) excludes = [excludes];\n        edges = [...next._excludedEdges, ...excludes];\n      }\n\n      // XXX: excludes here is wrong\n      return next.setFields(Object.assign(next.fields, additions), edges);\n    });\n  }\n  partial() {\n    const partial = {};\n    for (const [key, schema] of Object.entries(this.fields)) {\n      partial[key] = 'optional' in schema && schema.optional instanceof Function ? schema.optional() : schema;\n    }\n    return this.setFields(partial);\n  }\n  deepPartial() {\n    const next = deepPartial(this);\n    return next;\n  }\n  pick(keys) {\n    const picked = {};\n    for (const key of keys) {\n      if (this.fields[key]) picked[key] = this.fields[key];\n    }\n    return this.setFields(picked);\n  }\n  omit(keys) {\n    const fields = Object.assign({}, this.fields);\n    for (const key of keys) {\n      delete fields[key];\n    }\n    return this.setFields(fields);\n  }\n  from(from, to, alias) {\n    let fromGetter = getter(from, true);\n    return this.transform(obj => {\n      if (!obj) return obj;\n      let newObj = obj;\n      if (deepHas(obj, from)) {\n        newObj = Object.assign({}, obj);\n        if (!alias) delete newObj[from];\n        newObj[to] = fromGetter(obj);\n      }\n      return newObj;\n    });\n  }\n\n  /** Parse an input JSON string to an object */\n  json() {\n    return this.transform(parseJson);\n  }\n  noUnknown(noAllow = true, message = object.noUnknown) {\n    if (typeof noAllow !== 'boolean') {\n      message = noAllow;\n      noAllow = true;\n    }\n    let next = this.test({\n      name: 'noUnknown',\n      exclusive: true,\n      message: message,\n      test(value) {\n        if (value == null) return true;\n        const unknownKeys = unknown(this.schema, value);\n        return !noAllow || unknownKeys.length === 0 || this.createError({\n          params: {\n            unknown: unknownKeys.join(', ')\n          }\n        });\n      }\n    });\n    next.spec.noUnknown = noAllow;\n    return next;\n  }\n  unknown(allow = true, message = object.noUnknown) {\n    return this.noUnknown(!allow, message);\n  }\n  transformKeys(fn) {\n    return this.transform(obj => {\n      if (!obj) return obj;\n      const result = {};\n      for (const key of Object.keys(obj)) result[fn(key)] = obj[key];\n      return result;\n    });\n  }\n  camelCase() {\n    return this.transformKeys(camelCase);\n  }\n  snakeCase() {\n    return this.transformKeys(snakeCase);\n  }\n  constantCase() {\n    return this.transformKeys(key => snakeCase(key).toUpperCase());\n  }\n  describe(options) {\n    let base = super.describe(options);\n    base.fields = {};\n    for (const [key, value] of Object.entries(this.fields)) {\n      var _innerOptions;\n      let innerOptions = options;\n      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {\n        innerOptions = Object.assign({}, innerOptions, {\n          parent: innerOptions.value,\n          value: innerOptions.value[key]\n        });\n      }\n      base.fields[key] = value.describe(innerOptions);\n    }\n    return base;\n  }\n}\ncreate$3.prototype = ObjectSchema.prototype;\n\nfunction create$2(type) {\n  return new ArraySchema(type);\n}\nclass ArraySchema extends Schema {\n  constructor(type) {\n    super({\n      type: 'array',\n      check(v) {\n        return Array.isArray(v);\n      }\n    });\n\n    // `undefined` specifically means uninitialized, as opposed to \"no subtype\"\n    this.innerType = void 0;\n    this.innerType = type;\n  }\n  _cast(_value, _opts) {\n    const value = super._cast(_value, _opts);\n\n    // should ignore nulls here\n    if (!this._typeCheck(value) || !this.innerType) {\n      return value;\n    }\n    let isChanged = false;\n    const castArray = value.map((v, idx) => {\n      const castElement = this.innerType.cast(v, Object.assign({}, _opts, {\n        path: `${_opts.path || ''}[${idx}]`\n      }));\n      if (castElement !== v) {\n        isChanged = true;\n      }\n      return castElement;\n    });\n    return isChanged ? castArray : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    var _options$recursive;\n    // let sync = options.sync;\n    // let path = options.path;\n    let innerType = this.innerType;\n    // let endEarly = options.abortEarly ?? this.spec.abortEarly;\n    let recursive = (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive;\n    options.originalValue != null ? options.originalValue : _value;\n    super._validate(_value, options, panic, (arrayErrors, value) => {\n      var _options$originalValu2;\n      if (!recursive || !innerType || !this._typeCheck(value)) {\n        next(arrayErrors, value);\n        return;\n      }\n\n      // #950 Ensure that sparse array empty slots are validated\n      let tests = new Array(value.length);\n      for (let index = 0; index < value.length; index++) {\n        var _options$originalValu;\n        tests[index] = innerType.asNestedTest({\n          options,\n          index,\n          parent: value,\n          parentPath: options.path,\n          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value\n        });\n      }\n      this.runTests({\n        value,\n        tests,\n        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,\n        options\n      }, panic, innerTypeErrors => next(innerTypeErrors.concat(arrayErrors), value));\n    });\n  }\n  clone(spec) {\n    const next = super.clone(spec);\n    // @ts-expect-error readonly\n    next.innerType = this.innerType;\n    return next;\n  }\n\n  /** Parse an input JSON string to an object */\n  json() {\n    return this.transform(parseJson);\n  }\n  concat(schema) {\n    let next = super.concat(schema);\n\n    // @ts-expect-error readonly\n    next.innerType = this.innerType;\n    if (schema.innerType)\n      // @ts-expect-error readonly\n      next.innerType = next.innerType ?\n      // @ts-expect-error Lazy doesn't have concat and will break\n      next.innerType.concat(schema.innerType) : schema.innerType;\n    return next;\n  }\n  of(schema) {\n    // FIXME: this should return a new instance of array without the default to be\n    let next = this.clone();\n    if (!isSchema(schema)) throw new TypeError('`array.of()` sub-schema must be a valid yup schema not: ' + printValue(schema));\n\n    // @ts-expect-error readonly\n    next.innerType = schema;\n    return next;\n  }\n  length(length, message = array.length) {\n    return this.test({\n      message,\n      name: 'length',\n      exclusive: true,\n      params: {\n        length\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length === this.resolve(length);\n      }\n    });\n  }\n  min(min, message) {\n    message = message || array.min;\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n      skipAbsent: true,\n      // FIXME(ts): Array<typeof T>\n      test(value) {\n        return value.length >= this.resolve(min);\n      }\n    });\n  }\n  max(max, message) {\n    message = message || array.max;\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n      skipAbsent: true,\n      test(value) {\n        return value.length <= this.resolve(max);\n      }\n    });\n  }\n  ensure() {\n    return this.default(() => []).transform((val, original) => {\n      // We don't want to return `null` for nullable schema\n      if (this._typeCheck(val)) return val;\n      return original == null ? [] : [].concat(original);\n    });\n  }\n  compact(rejector) {\n    let reject = !rejector ? v => !!v : (v, i, a) => !rejector(v, i, a);\n    return this.transform(values => values != null ? values.filter(reject) : values);\n  }\n  describe(options) {\n    let base = super.describe();\n    if (this.innerType) {\n      var _innerOptions;\n      let innerOptions = options;\n      if ((_innerOptions = innerOptions) != null && _innerOptions.value) {\n        innerOptions = Object.assign({}, innerOptions, {\n          parent: innerOptions.value,\n          value: innerOptions.value[0]\n        });\n      }\n      base.innerType = this.innerType.describe(options);\n    }\n    return base;\n  }\n}\ncreate$2.prototype = ArraySchema.prototype;\n\n// @ts-ignore\nfunction create$1(schemas) {\n  return new TupleSchema(schemas);\n}\nclass TupleSchema extends Schema {\n  constructor(schemas) {\n    super({\n      type: 'tuple',\n      spec: {\n        types: schemas\n      },\n      check(v) {\n        const types = this.spec.types;\n        return Array.isArray(v) && v.length === types.length;\n      }\n    });\n    this.withMutation(() => {\n      this.typeError(tuple.notType);\n    });\n  }\n  _cast(inputValue, options) {\n    const {\n      types\n    } = this.spec;\n    const value = super._cast(inputValue, options);\n    if (!this._typeCheck(value)) {\n      return value;\n    }\n    let isChanged = false;\n    const castArray = types.map((type, idx) => {\n      const castElement = type.cast(value[idx], Object.assign({}, options, {\n        path: `${options.path || ''}[${idx}]`\n      }));\n      if (castElement !== value[idx]) isChanged = true;\n      return castElement;\n    });\n    return isChanged ? castArray : value;\n  }\n  _validate(_value, options = {}, panic, next) {\n    let itemTypes = this.spec.types;\n    super._validate(_value, options, panic, (tupleErrors, value) => {\n      var _options$originalValu2;\n      // intentionally not respecting recursive\n      if (!this._typeCheck(value)) {\n        next(tupleErrors, value);\n        return;\n      }\n      let tests = [];\n      for (let [index, itemSchema] of itemTypes.entries()) {\n        var _options$originalValu;\n        tests[index] = itemSchema.asNestedTest({\n          options,\n          index,\n          parent: value,\n          parentPath: options.path,\n          originalParent: (_options$originalValu = options.originalValue) != null ? _options$originalValu : _value\n        });\n      }\n      this.runTests({\n        value,\n        tests,\n        originalValue: (_options$originalValu2 = options.originalValue) != null ? _options$originalValu2 : _value,\n        options\n      }, panic, innerTypeErrors => next(innerTypeErrors.concat(tupleErrors), value));\n    });\n  }\n}\ncreate$1.prototype = TupleSchema.prototype;\n\nfunction create(builder) {\n  return new Lazy(builder);\n}\nclass Lazy {\n  constructor(builder) {\n    this.type = 'lazy';\n    this.__isYupSchema__ = true;\n    this.spec = void 0;\n    this._resolve = (value, options = {}) => {\n      let schema = this.builder(value, options);\n      if (!isSchema(schema)) throw new TypeError('lazy() functions must return a valid schema');\n      if (this.spec.optional) schema = schema.optional();\n      return schema.resolve(options);\n    };\n    this.builder = builder;\n    this.spec = {\n      meta: undefined,\n      optional: false\n    };\n  }\n  clone(spec) {\n    const next = new Lazy(this.builder);\n    next.spec = Object.assign({}, this.spec, spec);\n    return next;\n  }\n  optionality(optional) {\n    const next = this.clone({\n      optional\n    });\n    return next;\n  }\n  optional() {\n    return this.optionality(true);\n  }\n  resolve(options) {\n    return this._resolve(options.value, options);\n  }\n  cast(value, options) {\n    return this._resolve(value, options).cast(value, options);\n  }\n  asNestedTest(config) {\n    let {\n      key,\n      index,\n      parent,\n      options\n    } = config;\n    let value = parent[index != null ? index : key];\n    return this._resolve(value, Object.assign({}, options, {\n      value,\n      parent\n    })).asNestedTest(config);\n  }\n  validate(value, options) {\n    return this._resolve(value, options).validate(value, options);\n  }\n  validateSync(value, options) {\n    return this._resolve(value, options).validateSync(value, options);\n  }\n  validateAt(path, value, options) {\n    return this._resolve(value, options).validateAt(path, value, options);\n  }\n  validateSyncAt(path, value, options) {\n    return this._resolve(value, options).validateSyncAt(path, value, options);\n  }\n  isValid(value, options) {\n    return this._resolve(value, options).isValid(value, options);\n  }\n  isValidSync(value, options) {\n    return this._resolve(value, options).isValidSync(value, options);\n  }\n  describe(options) {\n    return options ? this.resolve(options).describe(options) : {\n      type: 'lazy',\n      meta: this.spec.meta,\n      label: undefined\n    };\n  }\n  meta(...args) {\n    if (args.length === 0) return this.spec.meta;\n    let next = this.clone();\n    next.spec.meta = Object.assign(next.spec.meta || {}, args[0]);\n    return next;\n  }\n}\n\nfunction setLocale(custom) {\n  Object.keys(custom).forEach(type => {\n    // @ts-ignore\n    Object.keys(custom[type]).forEach(method => {\n      // @ts-ignore\n      locale[type][method] = custom[type][method];\n    });\n  });\n}\n\nfunction addMethod(schemaType, name, fn) {\n  if (!schemaType || !isSchema(schemaType.prototype)) throw new TypeError('You must provide a yup schema constructor function');\n  if (typeof name !== 'string') throw new TypeError('A Method name must be provided');\n  if (typeof fn !== 'function') throw new TypeError('Method function must be provided');\n  schemaType.prototype[name] = fn;\n}\n\nexport { ArraySchema, BooleanSchema, DateSchema, MixedSchema, NumberSchema, ObjectSchema, Schema, StringSchema, TupleSchema, ValidationError, addMethod, create$2 as array, create$7 as bool, create$7 as boolean, create$4 as date, getIn, isSchema, create as lazy, create$8 as mixed, create$5 as number, create$3 as object, reach, create$9 as ref, setLocale, create$6 as string, create$1 as tuple };\n","import { number, object, string } from 'yup'\n\nexport const schema = object().shape({\n  name: string().required(),\n  email: string().required().email(),\n  phone: number().required()/* .test( phone => Number.isNaN(Number(phone))) */\n})\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n//# sourceMappingURL=helper.js.map","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        super.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - the name of the function to invoke\n     */\n    invoke(functionName, invokeOptions = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, body: functionArgs } = invokeOptions;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n//# sourceMappingURL=FunctionsClient.js.map","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","import crossFetch from 'cross-fetch';\nexport default class PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.allowEmpty = builder.allowEmpty;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = crossFetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then(async (res) => {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = await res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                const body = await res.text();\n                try {\n                    error = JSON.parse(body);\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (Array.isArray(error) && res.status === 404) {\n                        data = [];\n                        error = null;\n                        status = 200;\n                        statusText = 'OK';\n                    }\n                }\n                catch (_d) {\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (res.status === 404 && body === '') {\n                        status = 204;\n                        statusText = 'No Content';\n                    }\n                    else {\n                        error = {\n                            message: body,\n                        };\n                    }\n                }\n                if (error && this.allowEmpty && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        });\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => ({\n                error: {\n                    message: `FetchError: ${fetchError.message}`,\n                    details: '',\n                    hint: '',\n                    code: fetchError.code || '',\n                },\n                data: null,\n                count: null,\n                status: 0,\n                statusText: '',\n            }));\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n//# sourceMappingURL=PostgrestBuilder.js.map","import PostgrestBuilder from './PostgrestBuilder';\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    /**\n     * Order the query result by `column`.\n     *\n     * You can call this method multiple times to order by multiple columns.\n     *\n     * You can order foreign tables, but it doesn't affect the ordering of the\n     * current table.\n     *\n     * @param column - The column to order by\n     * @param options - Named parameters\n     * @param options.ascending - If `true`, the result will be in ascending order\n     * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n     * `null`s appear last.\n     * @param options.foreignTable - Set this to order a foreign table by foreign\n     * columns\n     */\n    order(column, { ascending = true, nullsFirst, foreignTable, } = {}) {\n        const key = foreignTable ? `${foreignTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `from` and `to` inclusively.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        this.allowEmpty = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = this.headers['Accept'];\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     */\n    returns() {\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestTransformBuilder.js.map","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    /**\n     * Match only rows where `column` is equal to `value`.\n     *\n     * To check if the value of `column` is NULL, you should use `.is()` instead.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is not equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` IS `value`.\n     *\n     * For non-boolean columns, this is only relevant for checking if the value of\n     * `column` is NULL by setting `value` to `null`.\n     *\n     * For boolean columns, you can also set `value` to `true` or `false` and it\n     * will behave the same way as `.eq()`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is included in the `values` array.\n     *\n     * @param column - The column to filter on\n     * @param values - The values array to filter with\n     */\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * `column` contains every element appearing in `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * every element appearing in `column` is contained by `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is greater than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or greater than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is less than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or less than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where `column` is\n     * mutually exclusive to `range` and there can be no element between the two\n     * ranges.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for array and range columns. Match only rows where\n     * `column` and `value` have an element in common.\n     *\n     * @param column - The array or range column to filter on\n     * @param value - The array or range value to filter with\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for text and tsvector columns. Match only rows where\n     * `column` matches the query string in `query`.\n     *\n     * @param column - The text or tsvector column to filter on\n     * @param query - The query text to match with\n     * @param options - Named parameters\n     * @param options.config - The text search configuration to use\n     * @param options.type - Change how the `query` text is interpreted\n     */\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Match only rows where each column in `query` keys is equal to its\n     * associated value. Shorthand for multiple `.eq()`s.\n     *\n     * @param query - The object to filter with, with column names as keys mapped\n     * to their filter values\n     */\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    /**\n     * Match only rows which doesn't satisfy the filter.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to be negated to filter with, following\n     * PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param foreignTable - Set this to filter on foreign tables instead of the\n     * current table\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = foreignTable ? `${foreignTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy the filter. This is an escape hatch - you\n     * should use the specific filter methods wherever possible.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to filter with, following PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestFilterBuilder.js.map","import PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    insert(values, { count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        const body = values;\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestQueryBuilder.js.map","export const version = '1.4.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n//# sourceMappingURL=constants.js.map","import PostgrestQueryBuilder from './PostgrestQueryBuilder';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nimport { DEFAULT_HEADERS } from './constants';\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head) {\n            method = 'HEAD';\n            Object.entries(args).forEach(([name, value]) => {\n                url.searchParams.append(name, `${value}`);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url,\n            headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestClient.js.map","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","export const version = '2.6.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n//# sourceMappingURL=constants.js.map","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n//# sourceMappingURL=timer.js.map","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n//# sourceMappingURL=push.js.map","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n//# sourceMappingURL=RealtimePresence.js.map","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} stringValue The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n//# sourceMappingURL=transformers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    /**\n     * listen to Postgres changes.\n     */\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n **/\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence }, } = this.params;\n            this._onError((e) => callback && callback('CHANNEL_ERROR', e));\n            this._onClose(() => callback && callback('CLOSED'));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n            };\n            if (this.socket.accessToken) {\n                accessTokenPayload.access_token = this.socket.accessToken;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', ({ postgres_changes: serverPostgresFilters, }) => {\n                var _a;\n                this.socket.accessToken &&\n                    this.socket.setAuth(this.socket.accessToken);\n                if (serverPostgresFilters === undefined) {\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = serverPostgresFilters && serverPostgresFilters[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback &&\n                                callback('CHANNEL_ERROR', new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback &&\n                    callback('CHANNEL_ERROR', new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback && callback('TIMED_OUT');\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    track(payload, opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'track',\n                payload,\n            }, opts.timeout || this.timeout);\n        });\n    }\n    untrack(opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'untrack',\n            }, opts);\n        });\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    send(payload, opts = {}) {\n        return new Promise((resolve) => {\n            var _a, _b, _c;\n            const push = this._push(payload.type, payload, opts.timeout || this.timeout);\n            if (push.rateLimited) {\n                resolve('rate limited');\n            }\n            if (payload.type === 'broadcast' &&\n                !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                resolve('ok');\n            }\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => resolve('timed out'));\n        });\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n//# sourceMappingURL=RealtimeChannel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.eventsPerSecondLimitMs = 100;\n        this.inThrottle = false;\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const eventsPerSecond = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.eventsPerSecond;\n        if (eventsPerSecond)\n            this.eventsPerSecondLimitMs = Math.floor(1000 / eventsPerSecond);\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this._endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    /**\n     * Returns all created channels\n     */\n    getChannels() {\n        return this.channels;\n    }\n    /**\n     * Unsubscribes and removes a single channel\n     * @param channel A RealtimeChannel instance\n     */\n    removeChannel(channel) {\n        return channel.unsubscribe().then((status) => {\n            if (this.channels.length === 0) {\n                this.disconnect();\n            }\n            return status;\n        });\n    }\n    /**\n     * Unsubscribes and removes all channels\n     */\n    removeAllChannels() {\n        return Promise.all(this.channels.map((channel) => channel.unsubscribe())).then((values) => {\n            this.disconnect();\n            return values;\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overridden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Returns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        if (!this.isConnected()) {\n            this.connect();\n        }\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            if (['broadcast', 'presence', 'postgres_changes'].includes(event)) {\n                const isThrottled = this._throttle(callback)();\n                if (isThrottled) {\n                    return 'rate limited';\n                }\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ access_token: token });\n            if (channel.joinedOnce && channel._isJoined()) {\n                channel._push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Returns the URL of the websocket.\n     *\n     * @internal\n     */\n    _endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    _onConnOpen() {\n        this.log('transport', `connected to ${this._endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    /** @internal */\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /** @internal */\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n    /** @internal */\n    _throttle(callback, eventsPerSecondLimitMs = this.eventsPerSecondLimitMs) {\n        return () => {\n            if (this.inThrottle)\n                return true;\n            callback();\n            if (eventsPerSecondLimitMs > 0) {\n                this.inThrottle = true;\n                setTimeout(() => {\n                    this.inThrottle = false;\n                }, eventsPerSecondLimitMs);\n            }\n            return false;\n        };\n    }\n}\n//# sourceMappingURL=RealtimeClient.js.map","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        return (yield import('cross-fetch')).Response;\n    }\n    return Response;\n});\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res) {\n        error.json().then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError } from '../lib/errors';\nimport { get, post, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, {\n                    method,\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, Object.assign({ expiresIn }, ((options === null || options === void 0 ? void 0 : options.transform) ? { transform: options.transform } : {})), { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file from a private bucket. For public buckets, make a request to the URL returned from `getPublicUrl` instead.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    download(path, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n            const renderPath = wantsTransformation ? 'render/image/authenticated' : 'object';\n            const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n            const queryString = transformationQuery ? `?${transformationQuery}` : '';\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/${renderPath}/${_path}${queryString}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download Triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const _queryString = [];\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `download=${options.download === true ? '' : options.download}`\n            : '';\n        if (downloadQueryParam !== '') {\n            _queryString.push(downloadQueryParam);\n        }\n        const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n        const renderPath = wantsTransformation ? 'render/image' : 'object';\n        const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n        if (transformationQuery !== '') {\n            _queryString.push(transformationQuery);\n        }\n        let queryString = _queryString.join('&');\n        if (queryString !== '') {\n            queryString = `?${queryString}`;\n        }\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/${renderPath}/public/${_path}${queryString}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n    transformOptsToQueryString(transform) {\n        const params = [];\n        if (transform.width) {\n            params.push(`width=${transform.width}`);\n        }\n        if (transform.height) {\n            params.push(`height=${transform.height}`);\n        }\n        if (transform.resize) {\n            params.push(`resize=${transform.resize}`);\n        }\n        if (transform.format) {\n            params.push(`format=${transform.format}`);\n        }\n        if (transform.quality) {\n            params.push(`quality=${transform.quality}`);\n        }\n        return params.join('&');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map","// generated by genversion\nexport const version = '2.3.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = { public: false }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, { id, name: id, public: options.public }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=StorageBucketApi.js.map","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n//# sourceMappingURL=StorageClient.js.map","export const version = '2.8.0';\n//# sourceMappingURL=version.js.map","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n//# sourceMappingURL=fetch.js.map","export function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    return {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions),\n    };\n}\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof document !== 'undefined';\nconst localStorageWriteTests = {\n    tested: false,\n    writable: false,\n};\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n    if (!isBrowser()) {\n        return false;\n    }\n    try {\n        if (typeof globalThis.localStorage !== 'object') {\n            return false;\n        }\n    }\n    catch (e) {\n        // DOM exception when accessing `localStorage`\n        return false;\n    }\n    if (localStorageWriteTests.tested) {\n        return localStorageWriteTests.writable;\n    }\n    const randomKey = `lswt-${Math.random()}${Math.random()}`;\n    try {\n        globalThis.localStorage.setItem(randomKey, randomKey);\n        globalThis.localStorage.removeItem(randomKey);\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = true;\n    }\n    catch (e) {\n        // localStorage can't be written to\n        // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = false;\n    }\n    return localStorageWriteTests.writable;\n};\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.setItem(key, JSON.stringify(data));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = yield storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.removeItem(key);\n});\nexport function decodeBase64URL(value) {\n    const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let base64 = '';\n    let chr1, chr2, chr3;\n    let enc1, enc2, enc3, enc4;\n    let i = 0;\n    value = value.replace('-', '+').replace('_', '/');\n    while (i < value.length) {\n        enc1 = key.indexOf(value.charAt(i++));\n        enc2 = key.indexOf(value.charAt(i++));\n        enc3 = key.indexOf(value.charAt(i++));\n        enc4 = key.indexOf(value.charAt(i++));\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n        base64 = base64 + String.fromCharCode(chr1);\n        if (enc3 != 64 && chr2 != 0) {\n            base64 = base64 + String.fromCharCode(chr2);\n        }\n        if (enc4 != 64 && chr3 != 0) {\n            base64 = base64 + String.fromCharCode(chr3);\n        }\n    }\n    return base64;\n}\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\nexport function decodeJWTPayload(token) {\n    // Regex checks for base64url format\n    const base64UrlRegex = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i;\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new Error('JWT is not valid: not a JWT structure');\n    }\n    if (!base64UrlRegex.test(parts[1])) {\n        throw new Error('JWT is not valid: payload is not in base64url format');\n    }\n    const base64Url = parts[1];\n    return JSON.parse(decodeBase64URL(base64Url));\n}\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport function sleep(time) {\n    return new Promise((accept) => {\n        setTimeout(() => accept(null), time);\n    });\n}\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable(fn, isRetryable) {\n    const promise = new Promise((accept, reject) => {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        (() => __awaiter(this, void 0, void 0, function* () {\n            for (let attempt = 0; attempt < Infinity; attempt++) {\n                try {\n                    const result = yield fn(attempt);\n                    if (!isRetryable(attempt, null, result)) {\n                        accept(result);\n                        return;\n                    }\n                }\n                catch (e) {\n                    if (!isRetryable(attempt, e)) {\n                        reject(e);\n                        return;\n                    }\n                }\n            }\n        }))();\n    });\n    return promise;\n}\n//# sourceMappingURL=helpers.js.map","export class AuthError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n        this.status = status;\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status) {\n        super(message, status);\n        this.name = 'AuthApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport function isAuthApiError(error) {\n    return isAuthError(error) && error.name === 'AuthApiError';\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status) {\n        super(message);\n        this.name = name;\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status);\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const NETWORK_ERROR_CODES = [502, 503, 504];\n    if (!looksLikeFetchResponse(error)) {\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n    }\n    else if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n    }\n    else {\n        // got a response from server that is not in the 500...599 range - should not retry\n        error\n            .json()\n            .then((err) => {\n            reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((e) => {\n            // not a valid json response\n            reject(new AuthUnknownError(_getErrorMessage(e), e));\n        });\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport function _request(fetcher, method, url, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n        if (options === null || options === void 0 ? void 0 : options.jwt) {\n            headers['Authorization'] = `Bearer ${options.jwt}`;\n        }\n        const qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            qs['redirect_to'] = options.redirectTo;\n        }\n        const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n        const data = yield _handleRequest(fetcher, method, url + queryString, { headers, noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson }, {}, options === null || options === void 0 ? void 0 : options.body);\n        return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n    });\n}\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        session.expires_at = expiresAt(data.expires_in);\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\nexport function _noResolveJsonResponse(data) {\n    return data;\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _noResolveJsonResponse, _request, _userResponse, } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield _request(this.fetch, 'POST', `${this.url}/logout`, {\n                    headers: this.headers,\n                    jwt,\n                    noResolveJson: true,\n                });\n                return { data: null, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo A URL or mobile deeplink to send the user to after they are confirmed.\n     * @param options.data Optional user metadata\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/invite`, {\n                    body: { email, data: options.data },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    generateLink(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { options } = params, rest = __rest(params, [\"options\"]);\n                const body = Object.assign(Object.assign({}, rest), options);\n                if ('newEmail' in rest) {\n                    // replace newEmail with new_email in request body\n                    body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                    delete body['newEmail'];\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                    body: body,\n                    headers: this.headers,\n                    xform: _generateLinkResponse,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return {\n                        data: {\n                            properties: null,\n                            user: null,\n                        },\n                        error,\n                    };\n                }\n                throw error;\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     * @param params An object which supports `page` and `perPage` as numbers, to alter the paginated results.\n     */\n    listUsers(params) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const pagination = { nextPage: null, lastPage: 0, total: 0 };\n                const response = yield _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                    query: {\n                        page: (_b = (_a = params === null || params === void 0 ? void 0 : params.page) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '',\n                        per_page: (_d = (_c = params === null || params === void 0 ? void 0 : params.perPage) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : '',\n                    },\n                    xform: _noResolveJsonResponse,\n                });\n                if (response.error)\n                    throw response.error;\n                const users = yield response.json();\n                const total = (_e = response.headers.get('x-total-count')) !== null && _e !== void 0 ? _e : 0;\n                const links = (_g = (_f = response.headers.get('link')) === null || _f === void 0 ? void 0 : _f.split(',')) !== null && _g !== void 0 ? _g : [];\n                if (links.length > 0) {\n                    links.forEach((link) => {\n                        const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1));\n                        const rel = JSON.parse(link.split(';')[1].split('=')[1]);\n                        pagination[`${rel}Page`] = page;\n                    });\n                    pagination.total = parseInt(total);\n                }\n                return { data: Object.assign(Object.assign({}, users), pagination), error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { users: [] }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     * @param shouldSoftDelete If true, then the user will be soft-deleted from the auth schema.\n     * Defaults to false for backward compatibility.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    deleteUser(id, shouldSoftDelete = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                    headers: this.headers,\n                    body: {\n                        should_soft_delete: shouldSoftDelete,\n                    },\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _listFactors(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                    headers: this.headers,\n                    xform: (factors) => {\n                        return { data: { factors }, error: null };\n                    },\n                });\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _deleteFactor(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=GoTrueAdminApi.js.map","// Generated by genversion.\nexport const version = '2.12.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\n//# sourceMappingURL=constants.js.map","import { supportsLocalStorage } from './helpers';\nconst localStorageAdapter = {\n    getItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\nexport default localStorageAdapter;\n//# sourceMappingURL=local-storage.js.map","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n//# sourceMappingURL=polyfills.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN, GOTRUE_URL, STORAGE_KEY } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthInvalidCredentialsError, AuthRetryableFetchError, AuthSessionMissingError, AuthUnknownError, isAuthApiError, isAuthError, } from './lib/errors';\nimport { _request, _sessionResponse, _userResponse, _ssoResponse } from './lib/fetch';\nimport { decodeJWTPayload, Deferred, getItemAsync, getParameterByName, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, retryable, sleep, } from './lib/helpers';\nimport localStorageAdapter from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n};\n/** Current session will be checked for refresh at this interval. */\nconst AUTO_REFRESH_TICK_DURATION = 10 * 1000;\n/**\n * A token refresh will be attempted this many ticks before the current session expires. */\nconst AUTO_REFRESH_TICK_THRESHOLD = 3;\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        this.stateChangeEmitters = new Map();\n        this.autoRefreshTicker = null;\n        this.visibilityChangedCallback = null;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        /**\n         * Used to broadcast state change events to other tabs listening.\n         */\n        this.broadcastChannel = null;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.inMemorySession = null;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.storage = settings.storage || localStorageAdapter;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n        if (isBrowser() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) {\n            this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey);\n            this.broadcastChannel.addEventListener('message', (event) => {\n                this._notifyAllSubscribers(event.data.event, event.data.session, false); // broadcast = false so we don't get an endless loop of messages\n            });\n        }\n        this.initialize();\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    initialize() {\n        if (!this.initializePromise) {\n            this.initializePromise = this._initialize();\n        }\n        return this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    _initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.initializePromise) {\n                return this.initializePromise;\n            }\n            try {\n                if (this.detectSessionInUrl && this._isImplicitGrantFlow()) {\n                    const { data, error } = yield this._getSessionFromUrl();\n                    if (error) {\n                        // failed login attempt via url,\n                        // remove old session as in verifyOtp, signUp and signInWith*\n                        yield this._removeSession();\n                        return { error };\n                    }\n                    const { session, redirectType } = data;\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                    if (redirectType === 'recovery') {\n                        this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                    }\n                    return { error: null };\n                }\n                // no login attempt via callback url try to recover session from storage\n                yield this._recoverAndRefresh();\n                return { error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { error };\n                }\n                return {\n                    error: new AuthUnknownError('Unexpected error during initialization', error),\n                };\n            }\n            finally {\n                yield this._handleVisibilityChange();\n            }\n        });\n    }\n    /**\n     * Creates a new user.\n     *\n     * Be aware that if a user account exists in the system you may get back an\n     * error message that attempts to hide this information from the user.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUp(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                const session = data.session;\n                const user = data.user;\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     *\n     * Be aware that you may get back an error message that will not distingish\n     * between the cases where the account does not exist or that the\n     * email/phone and password combination is wrong or that the account can only\n     * be accessed via social login.\n     */\n    signInWithPassword(credentials) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     */\n    signInWithOAuth(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            return this._handleProviderSignIn(credentials.provider, {\n                redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n                skipBrowserRedirect: (_d = credentials.options) === null || _d === void 0 ? void 0 : _d.skipBrowserRedirect,\n            });\n        });\n    }\n    /**\n     * Allows signing in with an ID token issued by certain supported providers.\n     * The ID token is verified for validity and a new session is established.\n     *\n     * @experimental\n     */\n    signInWithIdToken(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            try {\n                const { options, provider, token, nonce } = credentials;\n                const res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n                    headers: this.headers,\n                    body: {\n                        provider,\n                        id_token: token,\n                        nonce,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponse,\n                });\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     *\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or, that the account\n     * can only be accessed via social login.\n     */\n    signInWithOtp(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                if ('email' in credentials) {\n                    const { email, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                if ('phone' in credentials) {\n                    const { phone, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                            create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     */\n    verifyOtp(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/verify`, {\n                    headers: this.headers,\n                    body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: (_a = params.options) === null || _a === void 0 ? void 0 : _a.captchaToken } }),\n                    redirectTo: (_b = params.options) === null || _b === void 0 ? void 0 : _b.redirectTo,\n                    xform: _sessionResponse,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw 'An error occurred on token verification.';\n                }\n                const session = data.session;\n                const user = data.user;\n                if (session === null || session === void 0 ? void 0 : session.access_token) {\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     *\n     * This API is experimental and availability is conditional on correct\n     * settings on the Auth service.\n     *\n     * @experimental\n     */\n    signInWithSSO(params) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                return yield _request(this.fetch, 'POST', `${this.url}/sso`, {\n                    body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                        ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                        : null)), { skip_http_redirect: true }),\n                    headers: this.headers,\n                    xform: _ssoResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     */\n    getSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure we've read the session from the url if there is one\n            // save to just await, as long we make sure _initialize() never throws\n            yield this.initializePromise;\n            let currentSession = null;\n            if (this.persistSession) {\n                const maybeSession = yield getItemAsync(this.storage, this.storageKey);\n                if (maybeSession !== null) {\n                    if (this._isValidSession(maybeSession)) {\n                        currentSession = maybeSession;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n            }\n            else {\n                currentSession = this.inMemorySession;\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at <= Date.now() / 1000\n                : false;\n            if (!hasExpired) {\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        });\n    }\n    /**\n     * Gets the current user details if there is an existing session.\n     * @param jwt Takes in an optional access token jwt. If no jwt is provided, getUser() will attempt to get the jwt from the current session.\n     */\n    getUser(jwt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!jwt) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    // Default to Authorization header if there is no existing session\n                    jwt = (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                }\n                return yield _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates user data for a logged in user.\n     */\n    updateUser(attributes, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                const { data, error: userError } = yield _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    body: attributes,\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Decodes a JWT (without performing any validation).\n     */\n    _decodeJWT(jwt) {\n        return decodeJWTPayload(jwt);\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token or access token in the current session is invalid, an error will be thrown.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    setSession(currentSession) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession.access_token || !currentSession.refresh_token) {\n                    throw new AuthSessionMissingError();\n                }\n                const timeNow = Date.now() / 1000;\n                let expiresAt = timeNow;\n                let hasExpired = true;\n                let session = null;\n                const payload = decodeJWTPayload(currentSession.access_token);\n                if (payload.exp) {\n                    expiresAt = payload.exp;\n                    hasExpired = expiresAt <= timeNow;\n                }\n                if (hasExpired) {\n                    const { session: refreshedSession, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                    if (error) {\n                        return { data: { user: null, session: null }, error: error };\n                    }\n                    if (!refreshedSession) {\n                        return { data: { user: null, session: null }, error: null };\n                    }\n                    session = refreshedSession;\n                }\n                else {\n                    const { data, error } = yield this.getUser(currentSession.access_token);\n                    if (error) {\n                        throw error;\n                    }\n                    session = {\n                        access_token: currentSession.access_token,\n                        refresh_token: currentSession.refresh_token,\n                        user: data.user,\n                        token_type: 'bearer',\n                        expires_in: expiresAt - timeNow,\n                        expires_at: expiresAt,\n                    };\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    refreshSession(currentSession) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    _getSessionFromUrl() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new AuthImplicitGrantRedirectError('No browser detected.');\n                if (!this._isImplicitGrantFlow()) {\n                    throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                }\n                const error_description = getParameterByName('error_description');\n                if (error_description) {\n                    const error_code = getParameterByName('error_code');\n                    if (!error_code)\n                        throw new AuthImplicitGrantRedirectError('No error_code detected.');\n                    const error = getParameterByName('error');\n                    if (!error)\n                        throw new AuthImplicitGrantRedirectError('No error detected.');\n                    throw new AuthImplicitGrantRedirectError(error_description, { error, code: error_code });\n                }\n                const provider_token = getParameterByName('provider_token');\n                const provider_refresh_token = getParameterByName('provider_refresh_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new AuthImplicitGrantRedirectError('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new AuthImplicitGrantRedirectError('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new AuthImplicitGrantRedirectError('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new AuthImplicitGrantRedirectError('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { data, error } = yield this.getUser(access_token);\n                if (error)\n                    throw error;\n                const user = data.user;\n                const session = {\n                    provider_token,\n                    provider_refresh_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user,\n                };\n                const redirectType = getParameterByName('type');\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: { session, redirectType }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, redirectType: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantFlow() {\n        return (isBrowser() &&\n            (Boolean(getParameterByName('access_token')) ||\n                Boolean(getParameterByName('error_description'))));\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = yield this.admin.signOut(accessToken);\n                if (error) {\n                    // ignore 404s since user might not exist anymore\n                    // ignore 401s since an invalid or expired JWT should sign out the current session\n                    if (!(isAuthApiError(error) && (error.status === 404 || error.status === 401))) {\n                        return { error };\n                    }\n                }\n            }\n            yield this._removeSession();\n            this._notifyAllSubscribers('SIGNED_OUT', null);\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this.stateChangeEmitters.set(id, subscription);\n        return { data: { subscription } };\n    }\n    /**\n     * Sends a password reset request to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/recover`, {\n                    body: { email, gotrue_meta_security: { captcha_token: options.captchaToken } },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    _refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const startedAt = Date.now();\n                // will attempt to refresh the token with exponential backoff\n                return yield retryable((attempt) => __awaiter(this, void 0, void 0, function* () {\n                    yield sleep(attempt * 200); // 0, 200, 400, 800, ...\n                    return yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                        body: { refresh_token: refreshToken },\n                        headers: this.headers,\n                        xform: _sessionResponse,\n                    });\n                }), (attempt, _, result) => result &&\n                    result.error &&\n                    result.error instanceof AuthRetryableFetchError &&\n                    // retryable only if the request can be sent before the backoff overflows the tick duration\n                    Date.now() + (attempt + 1) * 200 - startedAt < AUTO_REFRESH_TICK_DURATION);\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    _handleProviderSignIn(provider, options = {}) {\n        const url = this._getUrlForProvider(provider, {\n            redirectTo: options.redirectTo,\n            scopes: options.scopes,\n            queryParams: options.queryParams,\n        });\n        // try to open on the browser\n        if (isBrowser() && !options.skipBrowserRedirect) {\n            window.location.assign(url);\n        }\n        return { data: { provider, url }, error: null };\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const currentSession = yield getItemAsync(this.storage, this.storageKey);\n                if (!this._isValidSession(currentSession)) {\n                    if (currentSession !== null) {\n                        yield this._removeSession();\n                    }\n                    return;\n                }\n                const timeNow = Math.round(Date.now() / 1000);\n                if (((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            yield this._removeSession();\n                        }\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n                else {\n                    if (this.persistSession) {\n                        yield this._saveSession(currentSession);\n                    }\n                    this._notifyAllSubscribers('SIGNED_IN', currentSession);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return;\n            }\n        });\n    }\n    _callRefreshToken(refreshToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // refreshing is already in progress\n            if (this.refreshingDeferred) {\n                return this.refreshingDeferred.promise;\n            }\n            try {\n                this.refreshingDeferred = new Deferred();\n                if (!refreshToken) {\n                    throw new AuthSessionMissingError();\n                }\n                const { data, error } = yield this._refreshAccessToken(refreshToken);\n                if (error)\n                    throw error;\n                if (!data.session)\n                    throw new AuthSessionMissingError();\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n                const result = { session: data.session, error: null };\n                this.refreshingDeferred.resolve(result);\n                return result;\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    const result = { session: null, error };\n                    (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                    return result;\n                }\n                (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n                throw error;\n            }\n            finally {\n                this.refreshingDeferred = null;\n            }\n        });\n    }\n    _notifyAllSubscribers(event, session, broadcast = true) {\n        if (this.broadcastChannel && broadcast) {\n            this.broadcastChannel.postMessage({ event, session });\n        }\n        this.stateChangeEmitters.forEach((x) => x.callback(event, session));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.persistSession) {\n                this.inMemorySession = session;\n            }\n            if (this.persistSession && session.expires_at) {\n                yield this._persistSession(session);\n            }\n        });\n    }\n    _persistSession(currentSession) {\n        return setItemAsync(this.storage, this.storageKey, currentSession);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.persistSession) {\n                yield removeItemAsync(this.storage, this.storageKey);\n            }\n            else {\n                this.inMemorySession = null;\n            }\n        });\n    }\n    /**\n     * Removes any registered visibilitychange callback.\n     *\n     * {@see #startAutoRefresh}\n     * {@see #stopAutoRefresh}\n     */\n    _removeVisibilityChangedCallback() {\n        const callback = this.visibilityChangedCallback;\n        this.visibilityChangedCallback = null;\n        try {\n            if (callback && isBrowser() && (window === null || window === void 0 ? void 0 : window.removeEventListener)) {\n                window.removeEventListener('visibilitychange', callback);\n            }\n        }\n        catch (e) {\n            console.error('removing visibilitychange callback failed', e);\n        }\n    }\n    /**\n     * This is the private implementation of {@link #startAutoRefresh}. Use this\n     * within the library.\n     */\n    _startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._stopAutoRefresh();\n            const ticker = setInterval(() => this._autoRefreshTokenTick(), AUTO_REFRESH_TICK_DURATION);\n            this.autoRefreshTicker = ticker;\n            if (ticker && typeof ticker === 'object' && typeof ticker.unref === 'function') {\n                // ticker is a NodeJS Timeout object that has an `unref` method\n                // https://nodejs.org/api/timers.html#timeoutunref\n                // When auto refresh is used in NodeJS (like for testing) the\n                // `setInterval` is preventing the process from being marked as\n                // finished and tests run endlessly. This can be prevented by calling\n                // `unref()` on the returned object.\n                ticker.unref();\n            }\n            // run the tick immediately\n            yield this._autoRefreshTokenTick();\n        });\n    }\n    /**\n     * This is the private implementation of {@link #stopAutoRefresh}. Use this\n     * within the library.\n     */\n    _stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ticker = this.autoRefreshTicker;\n            this.autoRefreshTicker = null;\n            if (ticker) {\n                clearInterval(ticker);\n            }\n        });\n    }\n    /**\n     * Starts an auto-refresh process in the background. The session is checked\n     * every few seconds. Close to the time of expiration a process is started to\n     * refresh the session. If refreshing fails it will be retried for as long as\n     * necessary.\n     *\n     * If you set the {@link GoTrueClientOptions#autoRefreshToken} you don't need\n     * to call this function, it will be called for you.\n     *\n     * On browsers the refresh process works only when the tab/window is in the\n     * foreground to conserve resources as well as prevent race conditions and\n     * flooding auth with requests. If you call this method any managed\n     * visibility change callback will be removed and you must manage visibility\n     * changes on your own.\n     *\n     * On non-browser platforms the refresh process works *continuously* in the\n     * background, which may not be desireable. You should hook into your\n     * platform's foreground indication mechanism and call these methods\n     * appropriately to conserve resources.\n     *\n     * {@see #stopAutoRefresh}\n     */\n    startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._startAutoRefresh();\n        });\n    }\n    /**\n     * Stops an active auto refresh process running in the background (if any).\n     *\n     * If you call this method any managed visibility change callback will be\n     * removed and you must manage visibility changes on your own.\n     *\n     * See {@link #startAutoRefresh} for more details.\n     */\n    stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._stopAutoRefresh();\n        });\n    }\n    /**\n     * Runs the auto refresh token tick.\n     */\n    _autoRefreshTokenTick() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const now = Date.now();\n            try {\n                const { data: { session }, } = yield this.getSession();\n                if (!session || !session.refresh_token || !session.expires_at) {\n                    return;\n                }\n                // session will expire in this many ticks (or has already expired if <= 0)\n                const expiresInTicks = Math.floor((session.expires_at * 1000 - now) / AUTO_REFRESH_TICK_DURATION);\n                if (expiresInTicks < AUTO_REFRESH_TICK_THRESHOLD) {\n                    yield this._callRefreshToken(session.refresh_token);\n                }\n            }\n            catch (e) {\n                console.error('Auto refresh tick failed with error. This is likely a transient error.', e);\n            }\n        });\n    }\n    /**\n     * Registers callbacks on the browser / platform, which in-turn run\n     * algorithms when the browser window/tab are in foreground. On non-browser\n     * platforms it assumes always foreground.\n     */\n    _handleVisibilityChange() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n                if (this.autoRefreshToken) {\n                    // in non-browser environments the refresh token ticker runs always\n                    this.startAutoRefresh();\n                }\n                return false;\n            }\n            try {\n                this.visibilityChangedCallback = () => __awaiter(this, void 0, void 0, function* () { return yield this._onVisibilityChanged(false); });\n                window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', this.visibilityChangedCallback);\n                // now immediately call the visbility changed callback to setup with the\n                // current visbility state\n                yield this._onVisibilityChanged(true); // initial call\n            }\n            catch (error) {\n                console.error('_handleVisibilityChange', error);\n            }\n        });\n    }\n    /**\n     * Callback registered with `window.addEventListener('visibilitychange')`.\n     */\n    _onVisibilityChanged(isInitial) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (document.visibilityState === 'visible') {\n                if (!isInitial) {\n                    // initial visibility change setup is handled in another flow under #initialize()\n                    yield this.initializePromise;\n                    yield this._recoverAndRefresh();\n                }\n                if (this.autoRefreshToken) {\n                    // in browser environments the refresh token ticker runs only on focused tabs\n                    // which prevents race conditions\n                    this._startAutoRefresh();\n                }\n            }\n            else if (document.visibilityState === 'hidden') {\n                if (this.autoRefreshToken) {\n                    this._stopAutoRefresh();\n                }\n            }\n        });\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    _getUrlForProvider(provider, options) {\n        const urlParams = [`provider=${encodeURIComponent(provider)}`];\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.scopes) {\n            urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n        }\n        if (options === null || options === void 0 ? void 0 : options.queryParams) {\n            const query = new URLSearchParams(options.queryParams);\n            urlParams.push(query.toString());\n        }\n        return `${this.url}/authorize?${urlParams.join('&')}`;\n    }\n    _unenroll(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#enroll}\n     */\n    _enroll(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors`, {\n                    body: {\n                        friendly_name: params.friendlyName,\n                        factor_type: params.factorType,\n                        issuer: params.issuer,\n                    },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                if ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code) {\n                    data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#verify}\n     */\n    _verify(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                    body: { code: params.code, challenge_id: params.challengeId },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                yield this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n                this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challenge}\n     */\n    _challenge(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challengeAndVerify}\n     */\n    _challengeAndVerify(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: challengeData, error: challengeError } = yield this._challenge({\n                factorId: params.factorId,\n            });\n            if (challengeError) {\n                return { data: null, error: challengeError };\n            }\n            return yield this._verify({\n                factorId: params.factorId,\n                challengeId: challengeData.id,\n                code: params.code,\n            });\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#listFactors}\n     */\n    _listFactors() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { user }, error: userError, } = yield this.getUser();\n            if (userError) {\n                return { data: null, error: userError };\n            }\n            const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n            const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n            return {\n                data: {\n                    all: factors,\n                    totp,\n                },\n                error: null,\n            };\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n     */\n    _getAuthenticatorAssuranceLevel() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            if (!session) {\n                return {\n                    data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                    error: null,\n                };\n            }\n            const payload = this._decodeJWT(session.access_token);\n            let currentLevel = null;\n            if (payload.aal) {\n                currentLevel = payload.aal;\n            }\n            let nextLevel = currentLevel;\n            const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n            if (verifiedFactors.length > 0) {\n                nextLevel = 'aal2';\n            }\n            const currentAuthenticationMethods = payload.amr || [];\n            return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n        });\n    }\n}\n//# sourceMappingURL=GoTrueClient.js.map","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n//# sourceMappingURL=SupabaseAuthClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_HEADERS } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { stripTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nconst DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nconst DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nconst DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n};\nconst DEFAULT_REALTIME_OPTIONS = {};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace(/^http/i, 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        const isPlatform = _supabaseUrl.match(/(supabase\\.co)|(supabase\\.in)/);\n        if (isPlatform) {\n            const urlParts = _supabaseUrl.split('.');\n            this.functionsUrl = `${urlParts[0]}.functions.${urlParts[1]}.${urlParts[2]}`;\n        }\n        else {\n            this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        }\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${new URL(this.authUrl).hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_b = (_a = settings.auth) === null || _a === void 0 ? void 0 : _a.storageKey) !== null && _b !== void 0 ? _b : '';\n        this.headers = (_d = (_c = settings.global) === null || _c === void 0 ? void 0 : _c.headers) !== null && _d !== void 0 ? _d : {};\n        this.auth = this._initSupabaseAuthClient((_e = settings.auth) !== null && _e !== void 0 ? _e : {}, this.headers, (_f = settings.global) === null || _f === void 0 ? void 0 : _f.fetch);\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), (_g = settings.global) === null || _g === void 0 ? void 0 : _g.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this.rest = new PostgrestClient(`${_supabaseUrl}/rest/v1`, {\n            headers: this.headers,\n            schema: (_h = settings.db) === null || _h === void 0 ? void 0 : _h.schema,\n            fetch: this.fetch,\n        });\n        this._listenForAuthEvents();\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this.headers, this.fetch);\n    }\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param args  The parameters to pass to the function call.\n     * @param options.head   When set to true, no data will be returned.\n     * @param options.count  Count algorithm to use to count rows in a table.\n     *\n     */\n    rpc(fn, args = {}, options) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            fetch,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token !== null && token !== void 0 ? token : null);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT' || event === 'USER_DELETED') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n            this.changedAccessToken = undefined;\n        }\n    }\n}\n//# sourceMappingURL=SupabaseClient.js.map","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n//# sourceMappingURL=index.js.map","import { isDevelopment } from \".\"\n\nexport const TOKEN = import.meta.env.PUBLIC_SUPABASE_TOKEN\nexport const API = import.meta.env.PUBLIC_SUPABASE_API\n\nexport const isSupabaseActive = Boolean(TOKEN && API) &&\n  (!isDevelopment || localStorage.getItem('supabaseStatus') === 'active')\n","import { createClient } from \"@supabase/supabase-js\"\nimport { API, TOKEN, isSupabaseActive } from \"../config/supabase\"\nimport type { IContact } from \"../controllers/Contact\"\n\n\nexport class SupabaseContactLocal {\n  private static thisInstance? : SupabaseContactLocal\n  localClient\n\n  private constructor(options?: any){\n    this.localClient = isSupabaseActive ? \n      createClient(API, TOKEN, options) : undefined\n\n  }\n\n  static defaultInstance(){\n    SupabaseContactLocal.thisInstance ??= new SupabaseContactLocal()\n\n    return SupabaseContactLocal.thisInstance\n  }\n\n  sendFormContact(data: IContact){\n    if(localStorage.getItem('alreadySended') === 'true')\n      return \n  \n    return this.localClient?.from('interested')\n      .insert(data)\n      .then(({ error })=> {\n        if(error)\n          return\n        \n        localStorage.setItem('alredySended', 'true')\n\n        return data\n      }, (reason)=> reason)\n      \n  }\n}\n\nexport const supabseLocal = SupabaseContactLocal.defaultInstance\n","import { ValidationError } from \"yup\";\nimport { schema } from \"./schema.validaiton\";\nimport { supabseLocal } from \"../../ts/services/Supabse\";\nimport type { IContact } from \"../../ts/controllers/Contact\";\n\nfunction handleValidationError(error: unknown){\n  if(error instanceof ValidationError)\n    return error.inner.map(({ path })=> path)\n}\n\nexport async function sendForm(data: Record<string, unknown>){\n  try {\n    const validatedData : IContact = schema\n      .validateSync(data, { abortEarly: false })\n    \n    // TODO: add Sentry or another way to catch errors\n    // TODO: this retunrs a thenavailable not a promise, should convert ?\n    // this means that when ther is a error we will not notice\n    supabseLocal()\n      .sendFormContact(validatedData)\n\n  } catch (error) {\n    const errors = handleValidationError(error)\n    console.error(error, errors)\n\n    return errors\n  }\n}\n","  import { $ , $$ } from '../../ts/utils'\n  import { sendForm } from './main'\n\n  function click(element?: Element | null){\n    if(element instanceof HTMLElement)\n      element.click()\n  }\n\n\n  $('[data-form=\"contact\"]')?.addEventListener('submit', async function(this: Element, event){\n    event.preventDefault()\n\n    if(!(this instanceof HTMLFormElement))\n      return\n\n    const form = new FormData(this)\n\n    const pojo: Record<string, unknown> = {}\n    \n    form.forEach((value, key)=>{\n      pojo[key] = value\n    })\n\n    const invalidFields = await sendForm(pojo)\n\n    if(invalidFields?.length)\n      return invalidFields.forEach(path =>{\n        const element = $(`[name=\"${path}\"`, this as HTMLFormElement)\n        \n        if(element instanceof HTMLInputElement)\n          element.classList.add('border-error')\n      })\n\n    $$('input', this).forEach(element => element.classList.remove('border-error'))\n\n    click($(`label[for=\"subscription\"]`))\n\n  })\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9jb21wb25lbnRzL0NvbnRhY3QvQ29udGFjdC5hc3RybyJdLCAic291cmNlc0NvbnRlbnQiOiBbIi0tLVxuaW1wb3J0IEluZm9TdWJzY3JpcHRpb24gZnJvbSAnLi4vSW5mb1N1YnNjcmlwdGlvbi9JbmZvU3Vic2NyaXB0aW9uLmFzdHJvJztcbmltcG9ydCBEZWFmdWx0SW5wdXQgZnJvbSAnLi9EZWFmdWx0SW5wdXQuYXN0cm8nO1xuaW1wb3J0IHsgZm9ybUZpZWxkcyB9IGZyb20gJy4vbW9kdWxlLmpzb24nXG4tLS1cblxuXHUwMDNjZm9ybSBjbGFzcz1cImZsZXggZmxleC1jb2wganVzdGlmeS1jZW50ZXIgaXRlbXMtY2VudGVyIGdhcC04IG1kOnB4LTIwIHAtMTJcIiBpZD1cImNvbnRhY3RcIiBkYXRhLWZvcm09XCJjb250YWN0XCJcdTAwM2VcbiAgXHUwMDNjaDIgY2xhc3M9XCJ0ZXh0LTR4bCBtZDp0ZXh0LTZ4bCBmb250LWJvbGQgcC0xMlwiXHUwMDNlQ29udMOhY3Rhbm9zXHUwMDNjL2gyXHUwMDNlXG4gIHtcbiAgICBmb3JtRmllbGRzLm1hcCgoeyBsYWJlbCwgbmFtZSwgdHlwZSB9KT1cdTAwM2UoXG4gICAgICBcdTAwM2NEZWFmdWx0SW5wdXQgbGFiZWw9e2xhYmVsfSBuYW1lPXtuYW1lfSB0eXBlPXt0eXBlIGFzIGFueX0vXHUwMDNlXG4gICAgKSlcbiAgfVxuICBcdTAwM2NidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IG1heC13LXhsIHctZnVsbFwiXHUwMDNlRW52aWFyXHUwMDNjL2J1dHRvblx1MDAzZVxuXHUwMDNjL2Zvcm1cdTAwM2VcblxuXHUwMDNjSW5mb1N1YnNjcmlwdGlvbiBpZD1cInN1YnNjcmlwdGlvblwiL1x1MDAzZVxuXG5cdTAwM2NzY3JpcHRcdTAwM2VcbiAgaW1wb3J0IHsgJCAsICQkIH0gZnJvbSAnLi4vLi4vdHMvdXRpbHMnXG4gIGltcG9ydCB7IHNlbmRGb3JtIH0gZnJvbSAnLi9tYWluJ1xuXG4gIGZ1bmN0aW9uIGNsaWNrKGVsZW1lbnQ/OiBFbGVtZW50IHwgbnVsbCl7XG4gICAgaWYoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KVxuICAgICAgZWxlbWVudC5jbGljaygpXG4gIH1cblxuXG4gICQoJ1tkYXRhLWZvcm09XCJjb250YWN0XCJdJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIGZ1bmN0aW9uKHRoaXM6IEVsZW1lbnQsIGV2ZW50KXtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZighKHRoaXMgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpKVxuICAgICAgcmV0dXJuXG5cbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKHRoaXMpXG5cbiAgICBjb25zdCBwb2pvOiBSZWNvcmRcdTAwM2NzdHJpbmcsIHVua25vd25cdTAwM2UgPSB7fVxuICAgIFxuICAgIGZvcm0uZm9yRWFjaCgodmFsdWUsIGtleSk9XHUwMDNle1xuICAgICAgcG9qb1trZXldID0gdmFsdWVcbiAgICB9KVxuXG4gICAgY29uc3QgaW52YWxpZEZpZWxkcyA9IGF3YWl0IHNlbmRGb3JtKHBvam8pXG5cbiAgICBpZihpbnZhbGlkRmllbGRzPy5sZW5ndGgpXG4gICAgICByZXR1cm4gaW52YWxpZEZpZWxkcy5mb3JFYWNoKHBhdGggPVx1MDAzZXtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9ICQoYFtuYW1lPVwiJHtwYXRofVwiYCwgdGhpcyBhcyBIVE1MRm9ybUVsZW1lbnQpXG4gICAgICAgIFxuICAgICAgICBpZihlbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudClcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1lcnJvcicpXG4gICAgICB9KVxuXG4gICAgJCQoJ2lucHV0JywgdGhpcykuZm9yRWFjaChlbGVtZW50ID1cdTAwM2UgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdib3JkZXItZXJyb3InKSlcblxuICAgIGNsaWNrKCQoYGxhYmVsW2Zvcj1cInN1YnNjcmlwdGlvblwiXWApKVxuXG4gIH0pXG5cdTAwM2Mvc2NyaXB0XHUwMDNlIl0sICJtYXBwaW5ncyI6ICJBQW1CQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQztBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3RixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pCO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDWDtBQUNBLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0FBQzNDO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0IsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0M7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzVCLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUMxQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BFO0FBQ0EsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM5QyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlDLE1BQU0sQ0FBQztBQUNQO0FBQ0EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDakY7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hDO0FBQ0EsRUFBRSxDQUFDO0FBQUE7IiwgIm5hbWVzIjogW10gfQ==","  import { $ } from '../../ts/utils'\n\n  $('#dev-dismiss')?.addEventListener('click', ()=>{\n    $('.toast.alert')?.classList.toggle('hidden')\n  })\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9jb21wb25lbnRzL0RldmVsb3BlckFsZXJ0L0RldmVsb3BlckFsZXJ0LmFzdHJvIl0sICJzb3VyY2VzQ29udGVudCI6IFsiLS0tXG5pbXBvcnQgRGV2ZWxvcGVyU2V0dGluZyBmcm9tIFwiLi4vRGV2ZWxvcGVyU2V0dGluZ3MvRGV2ZWxvcGVyU2V0dGluZy5hc3Ryb1wiXG5cbi0tLVxuXG5cdTAwM2NkaXYgY2xhc3M9XCJ0b2FzdCBhbGVydCBob3ZlcjohYmctdmlvbGV0LTYwMCB6LTUwXCJcdTAwM2VcbiAgXHUwMDNjc3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBjbGFzcz1cInN0cm9rZS1pbmZvIGZsZXgtc2hyaW5rLTAgdy02IGgtNlwiXHUwMDNlXHUwMDNjcGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBzdHJva2Utd2lkdGg9XCIyXCIgZD1cIk0xMyAxNmgtMXYtNGgtMW0xLTRoLjAxTTIxIDEyYTkgOSAwIDExLTE4IDAgOSA5IDAgMDExOCAwelwiXHUwMDNlXHUwMDNjL3BhdGhcdTAwM2VcdTAwM2Mvc3ZnXHUwMDNlXG4gIFx1MDAzY3BcdTAwM2VFc3RvIHNvbG8gc2UgbW9zdHJhcmEgc2kgZXN0YXMgZW4gbW9kbyBkZXZcdTAwM2MvcFx1MDAzZVxuICBcdTAwM2NwXHUwMDNlUHJlc2lvbmEgXHUwMDNja2JkIGNsYXNzPVwia2JkXCJcdTAwM2VjdHJsXHUwMDNjL2tiZFx1MDAzZSArIFx1MDAzY2tiZCBjbGFzcz1cImtiZFwiXHUwMDNla1x1MDAzYy9rYmRcdTAwM2UgcGFyYSB2ZXIgbGFzIG9wY2lvbmVzXHUwMDNjL3BcdTAwM2VcbiAgXHUwMDNjYnV0dG9uIGlkPVwiZGV2LWRpc21pc3NcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiXHUwMDNlRGlzbWlzc1x1MDAzYy9idXR0b25cdTAwM2Vcblx1MDAzYy9kaXZcdTAwM2VcblxuXHUwMDNjRGV2ZWxvcGVyU2V0dGluZyAvXHUwMDNlXG5cblx1MDAzY3NjcmlwdFx1MDAzZVxuICBpbXBvcnQgeyAkIH0gZnJvbSAnLi4vLi4vdHMvdXRpbHMnXG5cbiAgJCgnI2Rldi1kaXNtaXNzJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9XHUwMDNle1xuICAgICQoJy50b2FzdC5hbGVydCcpPy5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICB9KVxuXHUwMDNjL3NjcmlwdFx1MDAzZSJdLCAibWFwcGluZ3MiOiAiQUFlQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkM7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25ELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hELEVBQUUsQ0FBQztBQUFBOyIsICJuYW1lcyI6IFtdIH0=","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar win$1 = window;\nvar raf = win$1.requestAnimationFrame || win$1.webkitRequestAnimationFrame || win$1.mozRequestAnimationFrame || win$1.msRequestAnimationFrame || function (cb) {\n  return setTimeout(cb, 16);\n};\n\nvar win = window;\nvar caf = win.cancelAnimationFrame || win.mozCancelAnimationFrame || function (id) {\n  clearTimeout(id);\n};\n\nfunction extend() {\n  var obj,\n      name,\n      copy,\n      target = arguments[0] || {},\n      i = 1,\n      length = arguments.length;\n\n  for (; i < length; i++) {\n    if ((obj = arguments[i]) !== null) {\n      for (name in obj) {\n        copy = obj[name];\n\n        if (target === copy) {\n          continue;\n        } else if (copy !== undefined) {\n          target[name] = copy;\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nfunction checkStorageValue(value) {\n  return ['true', 'false'].indexOf(value) >= 0 ? JSON.parse(value) : value;\n}\n\nfunction setLocalStorage(storage, key, value, access) {\n  if (access) {\n    try {\n      storage.setItem(key, value);\n    } catch (e) {}\n  }\n\n  return value;\n}\n\nfunction getSlideId() {\n  var id = window.tnsId;\n  window.tnsId = !id ? 1 : id + 1;\n  return 'tns' + window.tnsId;\n}\n\nfunction getBody() {\n  var doc = document,\n      body = doc.body;\n\n  if (!body) {\n    body = doc.createElement('body');\n    body.fake = true;\n  }\n\n  return body;\n}\n\nvar docElement = document.documentElement;\n\nfunction setFakeBody(body) {\n  var docOverflow = '';\n\n  if (body.fake) {\n    docOverflow = docElement.style.overflow; //avoid crashing IE8, if background image is used\n\n    body.style.background = ''; //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n\n    body.style.overflow = docElement.style.overflow = 'hidden';\n    docElement.appendChild(body);\n  }\n\n  return docOverflow;\n}\n\nfunction resetFakeBody(body, docOverflow) {\n  if (body.fake) {\n    body.remove();\n    docElement.style.overflow = docOverflow; // Trigger layout so kinetic scrolling isn't disabled in iOS6+\n    // eslint-disable-next-line\n\n    docElement.offsetHeight;\n  }\n}\n\n// get css-calc \nfunction calc() {\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      result = false;\n  body.appendChild(div);\n\n  try {\n    var str = '(10px * 10)',\n        vals = ['calc' + str, '-moz-calc' + str, '-webkit-calc' + str],\n        val;\n\n    for (var i = 0; i < 3; i++) {\n      val = vals[i];\n      div.style.width = val;\n\n      if (div.offsetWidth === 100) {\n        result = val.replace(str, '');\n        break;\n      }\n    }\n  } catch (e) {}\n\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return result;\n}\n\n// get subpixel support value\nfunction percentageLayout() {\n  // check subpixel layout supporting\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      wrapper = doc.createElement('div'),\n      outer = doc.createElement('div'),\n      str = '',\n      count = 70,\n      perPage = 3,\n      supported = false;\n  wrapper.className = \"tns-t-subp2\";\n  outer.className = \"tns-t-ct\";\n\n  for (var i = 0; i < count; i++) {\n    str += '<div></div>';\n  }\n\n  outer.innerHTML = str;\n  wrapper.appendChild(outer);\n  body.appendChild(wrapper);\n  supported = Math.abs(wrapper.getBoundingClientRect().left - outer.children[count - perPage].getBoundingClientRect().left) < 2;\n  body.fake ? resetFakeBody(body, docOverflow) : wrapper.remove();\n  return supported;\n}\n\nfunction mediaquerySupport() {\n  if (window.matchMedia || window.msMatchMedia) {\n    return true;\n  }\n\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      div = doc.createElement('div'),\n      style = doc.createElement('style'),\n      rule = '@media all and (min-width:1px){.tns-mq-test{position:absolute}}',\n      position;\n  style.type = 'text/css';\n  div.className = 'tns-mq-test';\n  body.appendChild(style);\n  body.appendChild(div);\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = rule;\n  } else {\n    style.appendChild(doc.createTextNode(rule));\n  }\n\n  position = window.getComputedStyle ? window.getComputedStyle(div).position : div.currentStyle['position'];\n  body.fake ? resetFakeBody(body, docOverflow) : div.remove();\n  return position === \"absolute\";\n}\n\n// create and append style sheet\nfunction createStyleSheet(media, nonce) {\n  // Create the <style> tag\n  var style = document.createElement(\"style\"); // style.setAttribute(\"type\", \"text/css\");\n  // Add a media (and/or media query) here if you'd like!\n  // style.setAttribute(\"media\", \"screen\")\n  // style.setAttribute(\"media\", \"only screen and (max-width : 1024px)\")\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } // Add nonce attribute for Content Security Policy\n\n\n  if (nonce) {\n    style.setAttribute(\"nonce\", nonce);\n  } // WebKit hack :(\n  // style.appendChild(document.createTextNode(\"\"));\n  // Add the <style> element to the page\n\n\n  document.querySelector('head').appendChild(style);\n  return style.sheet ? style.sheet : style.styleSheet;\n}\n\n// cross browsers addRule method\nfunction addCSSRule(sheet, selector, rules, index) {\n  // return raf(function() {\n  'insertRule' in sheet ? sheet.insertRule(selector + '{' + rules + '}', index) : sheet.addRule(selector, rules, index); // });\n}\n\n// cross browsers addRule method\nfunction removeCSSRule(sheet, index) {\n  // return raf(function() {\n  'deleteRule' in sheet ? sheet.deleteRule(index) : sheet.removeRule(index); // });\n}\n\nfunction getCssRulesLength(sheet) {\n  var rule = 'insertRule' in sheet ? sheet.cssRules : sheet.rules;\n  return rule.length;\n}\n\nfunction toDegree(y, x) {\n  return Math.atan2(y, x) * (180 / Math.PI);\n}\n\nfunction getTouchDirection(angle, range) {\n  var direction = false,\n      gap = Math.abs(90 - Math.abs(angle));\n\n  if (gap >= 90 - range) {\n    direction = 'horizontal';\n  } else if (gap <= range) {\n    direction = 'vertical';\n  }\n\n  return direction;\n}\n\n// https://toddmotto.com/ditch-the-array-foreach-call-nodelist-hack/\nfunction forEach(arr, callback, scope) {\n  for (var i = 0, l = arr.length; i < l; i++) {\n    callback.call(scope, arr[i], i);\n  }\n}\n\nvar classListSupport = ('classList' in document.createElement('_'));\n\nvar hasClass = classListSupport ? function (el, str) {\n  return el.classList.contains(str);\n} : function (el, str) {\n  return el.className.indexOf(str) >= 0;\n};\n\nvar addClass = classListSupport ? function (el, str) {\n  if (!hasClass(el, str)) {\n    el.classList.add(str);\n  }\n} : function (el, str) {\n  if (!hasClass(el, str)) {\n    el.className += ' ' + str;\n  }\n};\n\nvar removeClass = classListSupport ? function (el, str) {\n  if (hasClass(el, str)) {\n    el.classList.remove(str);\n  }\n} : function (el, str) {\n  if (hasClass(el, str)) {\n    el.className = el.className.replace(str, '');\n  }\n};\n\nfunction hasAttr(el, attr) {\n  return el.hasAttribute(attr);\n}\n\nfunction getAttr(el, attr) {\n  return el.getAttribute(attr);\n}\n\nfunction isNodeList(el) {\n  // Only NodeList has the \"item()\" function\n  return typeof el.item !== \"undefined\";\n}\n\nfunction setAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n\n  if (Object.prototype.toString.call(attrs) !== '[object Object]') {\n    return;\n  }\n\n  for (var i = els.length; i--;) {\n    for (var key in attrs) {\n      els[i].setAttribute(key, attrs[key]);\n    }\n  }\n}\n\nfunction removeAttrs(els, attrs) {\n  els = isNodeList(els) || els instanceof Array ? els : [els];\n  attrs = attrs instanceof Array ? attrs : [attrs];\n  var attrLength = attrs.length;\n\n  for (var i = els.length; i--;) {\n    for (var j = attrLength; j--;) {\n      els[i].removeAttribute(attrs[j]);\n    }\n  }\n}\n\nfunction arrayFromNodeList(nl) {\n  var arr = [];\n\n  for (var i = 0, l = nl.length; i < l; i++) {\n    arr.push(nl[i]);\n  }\n\n  return arr;\n}\n\nfunction hideElement(el, forceHide) {\n  if (el.style.display !== 'none') {\n    el.style.display = 'none';\n  }\n}\n\nfunction showElement(el, forceHide) {\n  if (el.style.display === 'none') {\n    el.style.display = '';\n  }\n}\n\nfunction isVisible(el) {\n  return window.getComputedStyle(el).display !== 'none';\n}\n\nfunction whichProperty(props) {\n  if (typeof props === 'string') {\n    var arr = [props],\n        Props = props.charAt(0).toUpperCase() + props.substr(1),\n        prefixes = ['Webkit', 'Moz', 'ms', 'O'];\n    prefixes.forEach(function (prefix) {\n      if (prefix !== 'ms' || props === 'transform') {\n        arr.push(prefix + Props);\n      }\n    });\n    props = arr;\n  }\n\n  var el = document.createElement('fakeelement');\n      props.length;\n\n  for (var i = 0; i < props.length; i++) {\n    var prop = props[i];\n\n    if (el.style[prop] !== undefined) {\n      return prop;\n    }\n  }\n\n  return false; // explicit for ie9-\n}\n\nfunction has3DTransforms(tf) {\n  if (!tf) {\n    return false;\n  }\n\n  if (!window.getComputedStyle) {\n    return false;\n  }\n\n  var doc = document,\n      body = getBody(),\n      docOverflow = setFakeBody(body),\n      el = doc.createElement('p'),\n      has3d,\n      cssTF = tf.length > 9 ? '-' + tf.slice(0, -9).toLowerCase() + '-' : '';\n  cssTF += 'transform'; // Add it to the body to get the computed style\n\n  body.insertBefore(el, null);\n  el.style[tf] = 'translate3d(1px,1px,1px)';\n  has3d = window.getComputedStyle(el).getPropertyValue(cssTF);\n  body.fake ? resetFakeBody(body, docOverflow) : el.remove();\n  return has3d !== undefined && has3d.length > 0 && has3d !== \"none\";\n}\n\n// get transitionend, animationend based on transitionDuration\n// @propin: string\n// @propOut: string, first-letter uppercase\n// Usage: getEndProperty('WebkitTransitionDuration', 'Transition') => webkitTransitionEnd\nfunction getEndProperty(propIn, propOut) {\n  var endProp = false;\n\n  if (/^Webkit/.test(propIn)) {\n    endProp = 'webkit' + propOut + 'End';\n  } else if (/^O/.test(propIn)) {\n    endProp = 'o' + propOut + 'End';\n  } else if (propIn) {\n    endProp = propOut.toLowerCase() + 'end';\n  }\n\n  return endProp;\n}\n\n// Test via a getter in the options object to see if the passive property is accessed\nvar supportsPassive = false;\n\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function () {\n      supportsPassive = true;\n    }\n  });\n  window.addEventListener(\"test\", null, opts);\n} catch (e) {}\n\nvar passiveOption = supportsPassive ? {\n  passive: true\n} : false;\n\nfunction addEvents(el, obj, preventScrolling) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 && !preventScrolling ? passiveOption : false;\n    el.addEventListener(prop, obj[prop], option);\n  }\n}\n\nfunction removeEvents(el, obj) {\n  for (var prop in obj) {\n    var option = ['touchstart', 'touchmove'].indexOf(prop) >= 0 ? passiveOption : false;\n    el.removeEventListener(prop, obj[prop], option);\n  }\n}\n\nfunction Events() {\n  return {\n    topics: {},\n    on: function (eventName, fn) {\n      this.topics[eventName] = this.topics[eventName] || [];\n      this.topics[eventName].push(fn);\n    },\n    off: function (eventName, fn) {\n      if (this.topics[eventName]) {\n        for (var i = 0; i < this.topics[eventName].length; i++) {\n          if (this.topics[eventName][i] === fn) {\n            this.topics[eventName].splice(i, 1);\n            break;\n          }\n        }\n      }\n    },\n    emit: function (eventName, data) {\n      data.type = eventName;\n\n      if (this.topics[eventName]) {\n        this.topics[eventName].forEach(function (fn) {\n          fn(data, eventName);\n        });\n      }\n    }\n  };\n}\n\nfunction jsTransform(element, attr, prefix, postfix, to, duration, callback) {\n  var tick = Math.min(duration, 10),\n      unit = to.indexOf('%') >= 0 ? '%' : 'px',\n      to = to.replace(unit, ''),\n      from = Number(element.style[attr].replace(prefix, '').replace(postfix, '').replace(unit, '')),\n      positionTick = (to - from) / duration * tick;\n  setTimeout(moveElement, tick);\n\n  function moveElement() {\n    duration -= tick;\n    from += positionTick;\n    element.style[attr] = prefix + from + unit + postfix;\n\n    if (duration > 0) {\n      setTimeout(moveElement, tick);\n    } else {\n      callback();\n    }\n  }\n}\n\n// Object.keys\nif (!Object.keys) {\n  Object.keys = function (object) {\n    var keys = [];\n\n    for (var name in object) {\n      if (Object.prototype.hasOwnProperty.call(object, name)) {\n        keys.push(name);\n      }\n    }\n\n    return keys;\n  };\n} // ChildNode.remove\n\n\nif (!(\"remove\" in Element.prototype)) {\n  Element.prototype.remove = function () {\n    if (this.parentNode) {\n      this.parentNode.removeChild(this);\n    }\n  };\n}\nvar tns = function (options) {\n  options = extend({\n    container: '.slider',\n    mode: 'carousel',\n    axis: 'horizontal',\n    items: 1,\n    gutter: 0,\n    edgePadding: 0,\n    fixedWidth: false,\n    autoWidth: false,\n    viewportMax: false,\n    slideBy: 1,\n    center: false,\n    controls: true,\n    controlsPosition: 'top',\n    controlsText: ['prev', 'next'],\n    controlsContainer: false,\n    prevButton: false,\n    nextButton: false,\n    nav: true,\n    navPosition: 'top',\n    navContainer: false,\n    navAsThumbnails: false,\n    arrowKeys: false,\n    speed: 300,\n    autoplay: false,\n    autoplayPosition: 'top',\n    autoplayTimeout: 5000,\n    autoplayDirection: 'forward',\n    autoplayText: ['start', 'stop'],\n    autoplayHoverPause: false,\n    autoplayButton: false,\n    autoplayButtonOutput: true,\n    autoplayResetOnVisibility: true,\n    animateIn: 'tns-fadeIn',\n    animateOut: 'tns-fadeOut',\n    animateNormal: 'tns-normal',\n    animateDelay: false,\n    loop: true,\n    rewind: false,\n    autoHeight: false,\n    responsive: false,\n    lazyload: false,\n    lazyloadSelector: '.tns-lazy-img',\n    touch: true,\n    mouseDrag: false,\n    swipeAngle: 15,\n    nested: false,\n    preventActionWhenRunning: false,\n    preventScrollOnTouch: false,\n    freezable: true,\n    onInit: false,\n    useLocalStorage: true,\n    nonce: false\n  }, options || {});\n  var doc = document,\n      win = window,\n      KEYS = {\n    ENTER: 13,\n    SPACE: 32,\n    LEFT: 37,\n    RIGHT: 39\n  },\n      tnsStorage = {},\n      localStorageAccess = options.useLocalStorage;\n\n  if (localStorageAccess) {\n    // check browser version and local storage access\n    var browserInfo = navigator.userAgent;\n    var uid = new Date();\n\n    try {\n      tnsStorage = win.localStorage;\n\n      if (tnsStorage) {\n        tnsStorage.setItem(uid, uid);\n        localStorageAccess = tnsStorage.getItem(uid) == uid;\n        tnsStorage.removeItem(uid);\n      } else {\n        localStorageAccess = false;\n      }\n\n      if (!localStorageAccess) {\n        tnsStorage = {};\n      }\n    } catch (e) {\n      localStorageAccess = false;\n    }\n\n    if (localStorageAccess) {\n      // remove storage when browser version changes\n      if (tnsStorage['tnsApp'] && tnsStorage['tnsApp'] !== browserInfo) {\n        ['tC', 'tPL', 'tMQ', 'tTf', 't3D', 'tTDu', 'tTDe', 'tADu', 'tADe', 'tTE', 'tAE'].forEach(function (item) {\n          tnsStorage.removeItem(item);\n        });\n      } // update browserInfo\n\n\n      localStorage['tnsApp'] = browserInfo;\n    }\n  }\n\n  var CALC = tnsStorage['tC'] ? checkStorageValue(tnsStorage['tC']) : setLocalStorage(tnsStorage, 'tC', calc(), localStorageAccess),\n      PERCENTAGELAYOUT = tnsStorage['tPL'] ? checkStorageValue(tnsStorage['tPL']) : setLocalStorage(tnsStorage, 'tPL', percentageLayout(), localStorageAccess),\n      CSSMQ = tnsStorage['tMQ'] ? checkStorageValue(tnsStorage['tMQ']) : setLocalStorage(tnsStorage, 'tMQ', mediaquerySupport(), localStorageAccess),\n      TRANSFORM = tnsStorage['tTf'] ? checkStorageValue(tnsStorage['tTf']) : setLocalStorage(tnsStorage, 'tTf', whichProperty('transform'), localStorageAccess),\n      HAS3DTRANSFORMS = tnsStorage['t3D'] ? checkStorageValue(tnsStorage['t3D']) : setLocalStorage(tnsStorage, 't3D', has3DTransforms(TRANSFORM), localStorageAccess),\n      TRANSITIONDURATION = tnsStorage['tTDu'] ? checkStorageValue(tnsStorage['tTDu']) : setLocalStorage(tnsStorage, 'tTDu', whichProperty('transitionDuration'), localStorageAccess),\n      TRANSITIONDELAY = tnsStorage['tTDe'] ? checkStorageValue(tnsStorage['tTDe']) : setLocalStorage(tnsStorage, 'tTDe', whichProperty('transitionDelay'), localStorageAccess),\n      ANIMATIONDURATION = tnsStorage['tADu'] ? checkStorageValue(tnsStorage['tADu']) : setLocalStorage(tnsStorage, 'tADu', whichProperty('animationDuration'), localStorageAccess),\n      ANIMATIONDELAY = tnsStorage['tADe'] ? checkStorageValue(tnsStorage['tADe']) : setLocalStorage(tnsStorage, 'tADe', whichProperty('animationDelay'), localStorageAccess),\n      TRANSITIONEND = tnsStorage['tTE'] ? checkStorageValue(tnsStorage['tTE']) : setLocalStorage(tnsStorage, 'tTE', getEndProperty(TRANSITIONDURATION, 'Transition'), localStorageAccess),\n      ANIMATIONEND = tnsStorage['tAE'] ? checkStorageValue(tnsStorage['tAE']) : setLocalStorage(tnsStorage, 'tAE', getEndProperty(ANIMATIONDURATION, 'Animation'), localStorageAccess); // get element nodes from selectors\n\n  var supportConsoleWarn = win.console && typeof win.console.warn === \"function\",\n      tnsList = ['container', 'controlsContainer', 'prevButton', 'nextButton', 'navContainer', 'autoplayButton'],\n      optionsElements = {};\n  tnsList.forEach(function (item) {\n    if (typeof options[item] === 'string') {\n      var str = options[item],\n          el = doc.querySelector(str);\n      optionsElements[item] = str;\n\n      if (el && el.nodeName) {\n        options[item] = el;\n      } else {\n        if (supportConsoleWarn) {\n          console.warn('Can\\'t find', options[item]);\n        }\n\n        return;\n      }\n    }\n  }); // make sure at least 1 slide\n\n  if (options.container.children.length < 1) {\n    if (supportConsoleWarn) {\n      console.warn('No slides found in', options.container);\n    }\n\n    return;\n  } // update options\n\n\n  var responsive = options.responsive,\n      nested = options.nested,\n      carousel = options.mode === 'carousel' ? true : false;\n\n  if (responsive) {\n    // apply responsive[0] to options and remove it\n    if (0 in responsive) {\n      options = extend(options, responsive[0]);\n      delete responsive[0];\n    }\n\n    var responsiveTem = {};\n\n    for (var key in responsive) {\n      var val = responsive[key]; // update responsive\n      // from: 300: 2\n      // to:\n      //   300: {\n      //     items: 2\n      //   }\n\n      val = typeof val === 'number' ? {\n        items: val\n      } : val;\n      responsiveTem[key] = val;\n    }\n\n    responsive = responsiveTem;\n    responsiveTem = null;\n  } // update options\n\n\n  function updateOptions(obj) {\n    for (var key in obj) {\n      if (!carousel) {\n        if (key === 'slideBy') {\n          obj[key] = 'page';\n        }\n\n        if (key === 'edgePadding') {\n          obj[key] = false;\n        }\n\n        if (key === 'autoHeight') {\n          obj[key] = false;\n        }\n      } // update responsive options\n\n\n      if (key === 'responsive') {\n        updateOptions(obj[key]);\n      }\n    }\n  }\n\n  if (!carousel) {\n    updateOptions(options);\n  } // === define and set variables ===\n\n\n  if (!carousel) {\n    options.axis = 'horizontal';\n    options.slideBy = 'page';\n    options.edgePadding = false;\n    var animateIn = options.animateIn,\n        animateOut = options.animateOut,\n        animateDelay = options.animateDelay,\n        animateNormal = options.animateNormal;\n  }\n\n  var horizontal = options.axis === 'horizontal' ? true : false,\n      outerWrapper = doc.createElement('div'),\n      innerWrapper = doc.createElement('div'),\n      middleWrapper,\n      container = options.container,\n      containerParent = container.parentNode,\n      containerHTML = container.outerHTML,\n      slideItems = container.children,\n      slideCount = slideItems.length,\n      breakpointZone,\n      windowWidth = getWindowWidth(),\n      isOn = false;\n\n  if (responsive) {\n    setBreakpointZone();\n  }\n\n  if (carousel) {\n    container.className += ' tns-vpfix';\n  } // fixedWidth: viewport > rightBoundary > indexMax\n\n\n  var autoWidth = options.autoWidth,\n      fixedWidth = getOption('fixedWidth'),\n      edgePadding = getOption('edgePadding'),\n      gutter = getOption('gutter'),\n      viewport = getViewportWidth(),\n      center = getOption('center'),\n      items = !autoWidth ? Math.floor(getOption('items')) : 1,\n      slideBy = getOption('slideBy'),\n      viewportMax = options.viewportMax || options.fixedWidthViewportWidth,\n      arrowKeys = getOption('arrowKeys'),\n      speed = getOption('speed'),\n      rewind = options.rewind,\n      loop = rewind ? false : options.loop,\n      autoHeight = getOption('autoHeight'),\n      controls = getOption('controls'),\n      controlsText = getOption('controlsText'),\n      nav = getOption('nav'),\n      touch = getOption('touch'),\n      mouseDrag = getOption('mouseDrag'),\n      autoplay = getOption('autoplay'),\n      autoplayTimeout = getOption('autoplayTimeout'),\n      autoplayText = getOption('autoplayText'),\n      autoplayHoverPause = getOption('autoplayHoverPause'),\n      autoplayResetOnVisibility = getOption('autoplayResetOnVisibility'),\n      sheet = createStyleSheet(null, getOption('nonce')),\n      lazyload = options.lazyload,\n      lazyloadSelector = options.lazyloadSelector,\n      slidePositions,\n      // collection of slide positions\n  slideItemsOut = [],\n      cloneCount = loop ? getCloneCountForLoop() : 0,\n      slideCountNew = !carousel ? slideCount + cloneCount : slideCount + cloneCount * 2,\n      hasRightDeadZone = (fixedWidth || autoWidth) && !loop ? true : false,\n      rightBoundary = fixedWidth ? getRightBoundary() : null,\n      updateIndexBeforeTransform = !carousel || !loop ? true : false,\n      // transform\n  transformAttr = horizontal ? 'left' : 'top',\n      transformPrefix = '',\n      transformPostfix = '',\n      // index\n  getIndexMax = function () {\n    if (fixedWidth) {\n      return function () {\n        return center && !loop ? slideCount - 1 : Math.ceil(-rightBoundary / (fixedWidth + gutter));\n      };\n    } else if (autoWidth) {\n      return function () {\n        for (var i = 0; i < slideCountNew; i++) {\n          if (slidePositions[i] >= -rightBoundary) {\n            return i;\n          }\n        }\n      };\n    } else {\n      return function () {\n        if (center && carousel && !loop) {\n          return slideCount - 1;\n        } else {\n          return loop || carousel ? Math.max(0, slideCountNew - Math.ceil(items)) : slideCountNew - 1;\n        }\n      };\n    }\n  }(),\n      index = getStartIndex(getOption('startIndex')),\n      indexCached = index;\n      getCurrentSlide();\n      var indexMin = 0,\n      indexMax = !autoWidth ? getIndexMax() : null,\n      preventActionWhenRunning = options.preventActionWhenRunning,\n      swipeAngle = options.swipeAngle,\n      moveDirectionExpected = swipeAngle ? '?' : true,\n      running = false,\n      onInit = options.onInit,\n      events = new Events(),\n      // id, class\n  newContainerClasses = ' tns-slider tns-' + options.mode,\n      slideId = container.id || getSlideId(),\n      disable = getOption('disable'),\n      disabled = false,\n      freezable = options.freezable,\n      freeze = freezable && !autoWidth ? getFreeze() : false,\n      frozen = false,\n      controlsEvents = {\n    'click': onControlsClick,\n    'keydown': onControlsKeydown\n  },\n      navEvents = {\n    'click': onNavClick,\n    'keydown': onNavKeydown\n  },\n      hoverEvents = {\n    'mouseover': mouseoverPause,\n    'mouseout': mouseoutRestart\n  },\n      visibilityEvent = {\n    'visibilitychange': onVisibilityChange\n  },\n      docmentKeydownEvent = {\n    'keydown': onDocumentKeydown\n  },\n      touchEvents = {\n    'touchstart': onPanStart,\n    'touchmove': onPanMove,\n    'touchend': onPanEnd,\n    'touchcancel': onPanEnd\n  },\n      dragEvents = {\n    'mousedown': onPanStart,\n    'mousemove': onPanMove,\n    'mouseup': onPanEnd,\n    'mouseleave': onPanEnd\n  },\n      hasControls = hasOption('controls'),\n      hasNav = hasOption('nav'),\n      navAsThumbnails = autoWidth ? true : options.navAsThumbnails,\n      hasAutoplay = hasOption('autoplay'),\n      hasTouch = hasOption('touch'),\n      hasMouseDrag = hasOption('mouseDrag'),\n      slideActiveClass = 'tns-slide-active',\n      slideClonedClass = 'tns-slide-cloned',\n      imgCompleteClass = 'tns-complete',\n      imgEvents = {\n    'load': onImgLoaded,\n    'error': onImgFailed\n  },\n      imgsComplete,\n      liveregionCurrent,\n      preventScroll = options.preventScrollOnTouch === 'force' ? true : false; // controls\n\n\n  if (hasControls) {\n    var controlsContainer = options.controlsContainer,\n        controlsContainerHTML = options.controlsContainer ? options.controlsContainer.outerHTML : '',\n        prevButton = options.prevButton,\n        nextButton = options.nextButton,\n        prevButtonHTML = options.prevButton ? options.prevButton.outerHTML : '',\n        nextButtonHTML = options.nextButton ? options.nextButton.outerHTML : '',\n        prevIsButton,\n        nextIsButton;\n  } // nav\n\n\n  if (hasNav) {\n    var navContainer = options.navContainer,\n        navContainerHTML = options.navContainer ? options.navContainer.outerHTML : '',\n        navItems,\n        pages = autoWidth ? slideCount : getPages(),\n        pagesCached = 0,\n        navClicked = -1,\n        navCurrentIndex = getCurrentNavIndex(),\n        navCurrentIndexCached = navCurrentIndex,\n        navActiveClass = 'tns-nav-active',\n        navStr = 'Carousel Page ',\n        navStrCurrent = ' (Current Slide)';\n  } // autoplay\n\n\n  if (hasAutoplay) {\n    var autoplayDirection = options.autoplayDirection === 'forward' ? 1 : -1,\n        autoplayButton = options.autoplayButton,\n        autoplayButtonHTML = options.autoplayButton ? options.autoplayButton.outerHTML : '',\n        autoplayHtmlStrings = ['<span class=\\'tns-visually-hidden\\'>', ' animation</span>'],\n        autoplayTimer,\n        animating,\n        autoplayHoverPaused,\n        autoplayUserPaused,\n        autoplayVisibilityPaused;\n  }\n\n  if (hasTouch || hasMouseDrag) {\n    var initPosition = {},\n        lastPosition = {},\n        translateInit,\n        panStart = false,\n        rafIndex,\n        getDist = horizontal ? function (a, b) {\n      return a.x - b.x;\n    } : function (a, b) {\n      return a.y - b.y;\n    };\n  } // disable slider when slidecount <= items\n\n\n  if (!autoWidth) {\n    resetVariblesWhenDisable(disable || freeze);\n  }\n\n  if (TRANSFORM) {\n    transformAttr = TRANSFORM;\n    transformPrefix = 'translate';\n\n    if (HAS3DTRANSFORMS) {\n      transformPrefix += horizontal ? '3d(' : '3d(0px, ';\n      transformPostfix = horizontal ? ', 0px, 0px)' : ', 0px)';\n    } else {\n      transformPrefix += horizontal ? 'X(' : 'Y(';\n      transformPostfix = ')';\n    }\n  }\n\n  if (carousel) {\n    container.className = container.className.replace('tns-vpfix', '');\n  }\n\n  initStructure();\n  initSheet();\n  initSliderTransform(); // === COMMON FUNCTIONS === //\n\n  function resetVariblesWhenDisable(condition) {\n    if (condition) {\n      controls = nav = touch = mouseDrag = arrowKeys = autoplay = autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n  }\n\n  function getCurrentSlide() {\n    var tem = carousel ? index - cloneCount : index;\n\n    while (tem < 0) {\n      tem += slideCount;\n    }\n\n    return tem % slideCount + 1;\n  }\n\n  function getStartIndex(ind) {\n    ind = ind ? Math.max(0, Math.min(loop ? slideCount - 1 : slideCount - items, ind)) : 0;\n    return carousel ? ind + cloneCount : ind;\n  }\n\n  function getAbsIndex(i) {\n    if (i == null) {\n      i = index;\n    }\n\n    if (carousel) {\n      i -= cloneCount;\n    }\n\n    while (i < 0) {\n      i += slideCount;\n    }\n\n    return Math.floor(i % slideCount);\n  }\n\n  function getCurrentNavIndex() {\n    var absIndex = getAbsIndex(),\n        result;\n    result = navAsThumbnails ? absIndex : fixedWidth || autoWidth ? Math.ceil((absIndex + 1) * pages / slideCount - 1) : Math.floor(absIndex / items); // set active nav to the last one when reaches the right edge\n\n    if (!loop && carousel && index === indexMax) {\n      result = pages - 1;\n    }\n\n    return result;\n  }\n\n  function getItemsMax() {\n    // fixedWidth or autoWidth while viewportMax is not available\n    if (autoWidth || fixedWidth && !viewportMax) {\n      return slideCount - 1; // most cases\n    } else {\n      var str = fixedWidth ? 'fixedWidth' : 'items',\n          arr = [];\n\n      if (fixedWidth || options[str] < slideCount) {\n        arr.push(options[str]);\n      }\n\n      if (responsive) {\n        for (var bp in responsive) {\n          var tem = responsive[bp][str];\n\n          if (tem && (fixedWidth || tem < slideCount)) {\n            arr.push(tem);\n          }\n        }\n      }\n\n      if (!arr.length) {\n        arr.push(0);\n      }\n\n      return Math.ceil(fixedWidth ? viewportMax / Math.min.apply(null, arr) : Math.max.apply(null, arr));\n    }\n  }\n\n  function getCloneCountForLoop() {\n    var itemsMax = getItemsMax(),\n        result = carousel ? Math.ceil((itemsMax * 5 - slideCount) / 2) : itemsMax * 4 - slideCount;\n    result = Math.max(itemsMax, result);\n    return hasOption('edgePadding') ? result + 1 : result;\n  }\n\n  function getWindowWidth() {\n    return win.innerWidth || doc.documentElement.clientWidth || doc.body.clientWidth;\n  }\n\n  function getInsertPosition(pos) {\n    return pos === 'top' ? 'afterbegin' : 'beforeend';\n  }\n\n  function getClientWidth(el) {\n    if (el == null) {\n      return;\n    }\n\n    var div = doc.createElement('div'),\n        rect,\n        width;\n    el.appendChild(div);\n    rect = div.getBoundingClientRect();\n    width = rect.right - rect.left;\n    div.remove();\n    return width || getClientWidth(el.parentNode);\n  }\n\n  function getViewportWidth() {\n    var gap = edgePadding ? edgePadding * 2 - gutter : 0;\n    return getClientWidth(containerParent) - gap;\n  }\n\n  function hasOption(item) {\n    if (options[item]) {\n      return true;\n    } else {\n      if (responsive) {\n        for (var bp in responsive) {\n          if (responsive[bp][item]) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  } // get option:\n  // fixed width: viewport, fixedWidth, gutter => items\n  // others: window width => all variables\n  // all: items => slideBy\n\n\n  function getOption(item, ww) {\n    if (ww == null) {\n      ww = windowWidth;\n    }\n\n    if (item === 'items' && fixedWidth) {\n      return Math.floor((viewport + gutter) / (fixedWidth + gutter)) || 1;\n    } else {\n      var result = options[item];\n\n      if (responsive) {\n        for (var bp in responsive) {\n          // bp: convert string to number\n          if (ww >= parseInt(bp)) {\n            if (item in responsive[bp]) {\n              result = responsive[bp][item];\n            }\n          }\n        }\n      }\n\n      if (item === 'slideBy' && result === 'page') {\n        result = getOption('items');\n      }\n\n      if (!carousel && (item === 'slideBy' || item === 'items')) {\n        result = Math.floor(result);\n      }\n\n      return result;\n    }\n  }\n\n  function getSlideMarginLeft(i) {\n    return CALC ? CALC + '(' + i * 100 + '% / ' + slideCountNew + ')' : i * 100 / slideCountNew + '%';\n  }\n\n  function getInnerWrapperStyles(edgePaddingTem, gutterTem, fixedWidthTem, speedTem, autoHeightBP) {\n    var str = '';\n\n    if (edgePaddingTem !== undefined) {\n      var gap = edgePaddingTem;\n\n      if (gutterTem) {\n        gap -= gutterTem;\n      }\n\n      str = horizontal ? 'margin: 0 ' + gap + 'px 0 ' + edgePaddingTem + 'px;' : 'margin: ' + edgePaddingTem + 'px 0 ' + gap + 'px 0;';\n    } else if (gutterTem && !fixedWidthTem) {\n      var gutterTemUnit = '-' + gutterTem + 'px',\n          dir = horizontal ? gutterTemUnit + ' 0 0' : '0 ' + gutterTemUnit + ' 0';\n      str = 'margin: 0 ' + dir + ';';\n    }\n\n    if (!carousel && autoHeightBP && TRANSITIONDURATION && speedTem) {\n      str += getTransitionDurationStyle(speedTem);\n    }\n\n    return str;\n  }\n\n  function getContainerWidth(fixedWidthTem, gutterTem, itemsTem) {\n    if (fixedWidthTem) {\n      return (fixedWidthTem + gutterTem) * slideCountNew + 'px';\n    } else {\n      return CALC ? CALC + '(' + slideCountNew * 100 + '% / ' + itemsTem + ')' : slideCountNew * 100 / itemsTem + '%';\n    }\n  }\n\n  function getSlideWidthStyle(fixedWidthTem, gutterTem, itemsTem) {\n    var width;\n\n    if (fixedWidthTem) {\n      width = fixedWidthTem + gutterTem + 'px';\n    } else {\n      if (!carousel) {\n        itemsTem = Math.floor(itemsTem);\n      }\n\n      var dividend = carousel ? slideCountNew : itemsTem;\n      width = CALC ? CALC + '(100% / ' + dividend + ')' : 100 / dividend + '%';\n    }\n\n    width = 'width:' + width; // inner slider: overwrite outer slider styles\n\n    return nested !== 'inner' ? width + ';' : width + ' !important;';\n  }\n\n  function getSlideGutterStyle(gutterTem) {\n    var str = ''; // gutter maybe interger || 0\n    // so can't use 'if (gutter)'\n\n    if (gutterTem !== false) {\n      var prop = horizontal ? 'padding-' : 'margin-',\n          dir = horizontal ? 'right' : 'bottom';\n      str = prop + dir + ': ' + gutterTem + 'px;';\n    }\n\n    return str;\n  }\n\n  function getCSSPrefix(name, num) {\n    var prefix = name.substring(0, name.length - num).toLowerCase();\n\n    if (prefix) {\n      prefix = '-' + prefix + '-';\n    }\n\n    return prefix;\n  }\n\n  function getTransitionDurationStyle(speed) {\n    return getCSSPrefix(TRANSITIONDURATION, 18) + 'transition-duration:' + speed / 1000 + 's;';\n  }\n\n  function getAnimationDurationStyle(speed) {\n    return getCSSPrefix(ANIMATIONDURATION, 17) + 'animation-duration:' + speed / 1000 + 's;';\n  }\n\n  function initStructure() {\n    var classOuter = 'tns-outer',\n        classInner = 'tns-inner';\n        hasOption('gutter');\n    outerWrapper.className = classOuter;\n    innerWrapper.className = classInner;\n    outerWrapper.id = slideId + '-ow';\n    innerWrapper.id = slideId + '-iw'; // set container properties\n\n    if (container.id === '') {\n      container.id = slideId;\n    }\n\n    newContainerClasses += PERCENTAGELAYOUT || autoWidth ? ' tns-subpixel' : ' tns-no-subpixel';\n    newContainerClasses += CALC ? ' tns-calc' : ' tns-no-calc';\n\n    if (autoWidth) {\n      newContainerClasses += ' tns-autowidth';\n    }\n\n    newContainerClasses += ' tns-' + options.axis;\n    container.className += newContainerClasses; // add constrain layer for carousel\n\n    if (carousel) {\n      middleWrapper = doc.createElement('div');\n      middleWrapper.id = slideId + '-mw';\n      middleWrapper.className = 'tns-ovh';\n      outerWrapper.appendChild(middleWrapper);\n      middleWrapper.appendChild(innerWrapper);\n    } else {\n      outerWrapper.appendChild(innerWrapper);\n    }\n\n    if (autoHeight) {\n      var wp = middleWrapper ? middleWrapper : innerWrapper;\n      wp.className += ' tns-ah';\n    }\n\n    containerParent.insertBefore(outerWrapper, container);\n    innerWrapper.appendChild(container); // add id, class, aria attributes\n    // before clone slides\n\n    forEach(slideItems, function (item, i) {\n      addClass(item, 'tns-item');\n\n      if (!item.id) {\n        item.id = slideId + '-item' + i;\n      }\n\n      if (!carousel && animateNormal) {\n        addClass(item, animateNormal);\n      }\n\n      setAttrs(item, {\n        'aria-hidden': 'true',\n        'tabindex': '-1'\n      });\n    }); // ## clone slides\n    // carousel: n + slides + n\n    // gallery:      slides + n\n\n    if (cloneCount) {\n      var fragmentBefore = doc.createDocumentFragment(),\n          fragmentAfter = doc.createDocumentFragment();\n\n      for (var j = cloneCount; j--;) {\n        var num = j % slideCount,\n            cloneFirst = slideItems[num].cloneNode(true);\n        addClass(cloneFirst, slideClonedClass);\n        removeAttrs(cloneFirst, 'id');\n        fragmentAfter.insertBefore(cloneFirst, fragmentAfter.firstChild);\n\n        if (carousel) {\n          var cloneLast = slideItems[slideCount - 1 - num].cloneNode(true);\n          addClass(cloneLast, slideClonedClass);\n          removeAttrs(cloneLast, 'id');\n          fragmentBefore.appendChild(cloneLast);\n        }\n      }\n\n      container.insertBefore(fragmentBefore, container.firstChild);\n      container.appendChild(fragmentAfter);\n      slideItems = container.children;\n    }\n  }\n\n  function initSliderTransform() {\n    // ## images loaded/failed\n    if (hasOption('autoHeight') || autoWidth || !horizontal) {\n      var imgs = container.querySelectorAll('img'); // add img load event listener\n\n      forEach(imgs, function (img) {\n        var src = img.src;\n\n        if (!lazyload) {\n          // not data img\n          if (src && src.indexOf('data:image') < 0) {\n            img.src = '';\n            addEvents(img, imgEvents);\n            addClass(img, 'loading');\n            img.src = src; // data img\n          } else {\n            imgLoaded(img);\n          }\n        }\n      }); // set imgsComplete\n\n      raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), function () {\n          imgsComplete = true;\n        });\n      }); // reset imgs for auto height: check visible imgs only\n\n      if (hasOption('autoHeight')) {\n        imgs = getImageArray(index, Math.min(index + items - 1, slideCountNew - 1));\n      }\n\n      lazyload ? initSliderTransformStyleCheck() : raf(function () {\n        imgsLoadedCheck(arrayFromNodeList(imgs), initSliderTransformStyleCheck);\n      });\n    } else {\n      // set container transform property\n      if (carousel) {\n        doContainerTransformSilent();\n      } // update slider tools and events\n\n\n      initTools();\n      initEvents();\n    }\n  }\n\n  function initSliderTransformStyleCheck() {\n    if (autoWidth && slideCount > 1) {\n      // check styles application\n      var num = loop ? index : slideCount - 1;\n\n      (function stylesApplicationCheck() {\n        var left = slideItems[num].getBoundingClientRect().left;\n        var right = slideItems[num - 1].getBoundingClientRect().right;\n        Math.abs(left - right) <= 1 ? initSliderTransformCore() : setTimeout(function () {\n          stylesApplicationCheck();\n        }, 16);\n      })();\n    } else {\n      initSliderTransformCore();\n    }\n  }\n\n  function initSliderTransformCore() {\n    // run Fn()s which are rely on image loading\n    if (!horizontal || autoWidth) {\n      setSlidePositions();\n\n      if (autoWidth) {\n        rightBoundary = getRightBoundary();\n\n        if (freezable) {\n          freeze = getFreeze();\n        }\n\n        indexMax = getIndexMax(); // <= slidePositions, rightBoundary <=\n\n        resetVariblesWhenDisable(disable || freeze);\n      } else {\n        updateContentWrapperHeight();\n      }\n    } // set container transform property\n\n\n    if (carousel) {\n      doContainerTransformSilent();\n    } // update slider tools and events\n\n\n    initTools();\n    initEvents();\n  }\n\n  function initSheet() {\n    // gallery:\n    // set animation classes and left value for gallery slider\n    if (!carousel) {\n      for (var i = index, l = index + Math.min(slideCount, items); i < l; i++) {\n        var item = slideItems[i];\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // #### LAYOUT\n    // ## INLINE-BLOCK VS FLOAT\n    // ## PercentageLayout:\n    // slides: inline-block\n    // remove blank space between slides by set font-size: 0\n    // ## Non PercentageLayout:\n    // slides: float\n    //         margin-right: -100%\n    //         margin-left: ~\n    // Resource: https://docs.google.com/spreadsheets/d/147up245wwTXeQYve3BRSAD4oVcvQmuGsFteJOeA5xNQ/edit?usp=sharing\n\n\n    if (horizontal) {\n      if (PERCENTAGELAYOUT || autoWidth) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', 'font-size:' + win.getComputedStyle(slideItems[0]).fontSize + ';', getCssRulesLength(sheet));\n        addCSSRule(sheet, '#' + slideId, 'font-size:0;', getCssRulesLength(sheet));\n      } else if (carousel) {\n        forEach(slideItems, function (slide, i) {\n          slide.style.marginLeft = getSlideMarginLeft(i);\n        });\n      }\n    } // ## BASIC STYLES\n\n\n    if (CSSMQ) {\n      // middle wrapper style\n      if (TRANSITIONDURATION) {\n        var str = middleWrapper && options.autoHeight ? getTransitionDurationStyle(options.speed) : '';\n        addCSSRule(sheet, '#' + slideId + '-mw', str, getCssRulesLength(sheet));\n      } // inner wrapper styles\n\n\n      str = getInnerWrapperStyles(options.edgePadding, options.gutter, options.fixedWidth, options.speed, options.autoHeight);\n      addCSSRule(sheet, '#' + slideId + '-iw', str, getCssRulesLength(sheet)); // container styles\n\n      if (carousel) {\n        str = horizontal && !autoWidth ? 'width:' + getContainerWidth(options.fixedWidth, options.gutter, options.items) + ';' : '';\n\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        addCSSRule(sheet, '#' + slideId, str, getCssRulesLength(sheet));\n      } // slide styles\n\n\n      str = horizontal && !autoWidth ? getSlideWidthStyle(options.fixedWidth, options.gutter, options.items) : '';\n\n      if (options.gutter) {\n        str += getSlideGutterStyle(options.gutter);\n      } // set gallery items transition-duration\n\n\n      if (!carousel) {\n        if (TRANSITIONDURATION) {\n          str += getTransitionDurationStyle(speed);\n        }\n\n        if (ANIMATIONDURATION) {\n          str += getAnimationDurationStyle(speed);\n        }\n      }\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      } // non CSS mediaqueries: IE8\n      // ## update inner wrapper, container, slides if needed\n      // set inline styles for inner wrapper & container\n      // insert stylesheet (one line) for slides only (since slides are many)\n\n    } else {\n      // middle wrapper styles\n      update_carousel_transition_duration(); // inner wrapper styles\n\n      innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, autoHeight); // container styles\n\n      if (carousel && horizontal && !autoWidth) {\n        container.style.width = getContainerWidth(fixedWidth, gutter, items);\n      } // slide styles\n\n\n      var str = horizontal && !autoWidth ? getSlideWidthStyle(fixedWidth, gutter, items) : '';\n\n      if (gutter) {\n        str += getSlideGutterStyle(gutter);\n      } // append to the last line\n\n\n      if (str) {\n        addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n      }\n    } // ## MEDIAQUERIES\n\n\n    if (responsive && CSSMQ) {\n      for (var bp in responsive) {\n        // bp: convert string to number\n        bp = parseInt(bp);\n        var opts = responsive[bp],\n            str = '',\n            middleWrapperStr = '',\n            innerWrapperStr = '',\n            containerStr = '',\n            slideStr = '',\n            itemsBP = !autoWidth ? getOption('items', bp) : null,\n            fixedWidthBP = getOption('fixedWidth', bp),\n            speedBP = getOption('speed', bp),\n            edgePaddingBP = getOption('edgePadding', bp),\n            autoHeightBP = getOption('autoHeight', bp),\n            gutterBP = getOption('gutter', bp); // middle wrapper string\n\n        if (TRANSITIONDURATION && middleWrapper && getOption('autoHeight', bp) && 'speed' in opts) {\n          middleWrapperStr = '#' + slideId + '-mw{' + getTransitionDurationStyle(speedBP) + '}';\n        } // inner wrapper string\n\n\n        if ('edgePadding' in opts || 'gutter' in opts) {\n          innerWrapperStr = '#' + slideId + '-iw{' + getInnerWrapperStyles(edgePaddingBP, gutterBP, fixedWidthBP, speedBP, autoHeightBP) + '}';\n        } // container string\n\n\n        if (carousel && horizontal && !autoWidth && ('fixedWidth' in opts || 'items' in opts || fixedWidth && 'gutter' in opts)) {\n          containerStr = 'width:' + getContainerWidth(fixedWidthBP, gutterBP, itemsBP) + ';';\n        }\n\n        if (TRANSITIONDURATION && 'speed' in opts) {\n          containerStr += getTransitionDurationStyle(speedBP);\n        }\n\n        if (containerStr) {\n          containerStr = '#' + slideId + '{' + containerStr + '}';\n        } // slide string\n\n\n        if ('fixedWidth' in opts || fixedWidth && 'gutter' in opts || !carousel && 'items' in opts) {\n          slideStr += getSlideWidthStyle(fixedWidthBP, gutterBP, itemsBP);\n        }\n\n        if ('gutter' in opts) {\n          slideStr += getSlideGutterStyle(gutterBP);\n        } // set gallery items transition-duration\n\n\n        if (!carousel && 'speed' in opts) {\n          if (TRANSITIONDURATION) {\n            slideStr += getTransitionDurationStyle(speedBP);\n          }\n\n          if (ANIMATIONDURATION) {\n            slideStr += getAnimationDurationStyle(speedBP);\n          }\n        }\n\n        if (slideStr) {\n          slideStr = '#' + slideId + ' > .tns-item{' + slideStr + '}';\n        } // add up\n\n\n        str = middleWrapperStr + innerWrapperStr + containerStr + slideStr;\n\n        if (str) {\n          sheet.insertRule('@media (min-width: ' + bp / 16 + 'em) {' + str + '}', sheet.cssRules.length);\n        }\n      }\n    }\n  }\n\n  function initTools() {\n    // == slides ==\n    updateSlideStatus(); // == live region ==\n\n    outerWrapper.insertAdjacentHTML('afterbegin', '<div class=\"tns-liveregion tns-visually-hidden\" aria-live=\"polite\" aria-atomic=\"true\">slide <span class=\"current\">' + getLiveRegionStr() + '</span>  of ' + slideCount + '</div>');\n    liveregionCurrent = outerWrapper.querySelector('.tns-liveregion .current'); // == autoplayInit ==\n\n    if (hasAutoplay) {\n      var txt = autoplay ? 'stop' : 'start';\n\n      if (autoplayButton) {\n        setAttrs(autoplayButton, {\n          'data-action': txt\n        });\n      } else if (options.autoplayButtonOutput) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.autoplayPosition), '<button type=\"button\" data-action=\"' + txt + '\">' + autoplayHtmlStrings[0] + txt + autoplayHtmlStrings[1] + autoplayText[0] + '</button>');\n        autoplayButton = outerWrapper.querySelector('[data-action]');\n      } // add event\n\n\n      if (autoplayButton) {\n        addEvents(autoplayButton, {\n          'click': toggleAutoplay\n        });\n      }\n\n      if (autoplay) {\n        startAutoplay();\n\n        if (autoplayHoverPause) {\n          addEvents(container, hoverEvents);\n        }\n\n        if (autoplayResetOnVisibility) {\n          addEvents(container, visibilityEvent);\n        }\n      }\n    } // == navInit ==\n\n\n    if (hasNav) {\n      // will not hide the navs in case they're thumbnails\n\n      if (navContainer) {\n        setAttrs(navContainer, {\n          'aria-label': 'Carousel Pagination'\n        });\n        navItems = navContainer.children;\n        forEach(navItems, function (item, i) {\n          setAttrs(item, {\n            'data-nav': i,\n            'tabindex': '-1',\n            'aria-label': navStr + (i + 1),\n            'aria-controls': slideId\n          });\n        }); // generated nav\n      } else {\n        var navHtml = '',\n            hiddenStr = navAsThumbnails ? '' : 'style=\"display:none\"';\n\n        for (var i = 0; i < slideCount; i++) {\n          // hide nav items by default\n          navHtml += '<button type=\"button\" data-nav=\"' + i + '\" tabindex=\"-1\" aria-controls=\"' + slideId + '\" ' + hiddenStr + ' aria-label=\"' + navStr + (i + 1) + '\"></button>';\n        }\n\n        navHtml = '<div class=\"tns-nav\" aria-label=\"Carousel Pagination\">' + navHtml + '</div>';\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.navPosition), navHtml);\n        navContainer = outerWrapper.querySelector('.tns-nav');\n        navItems = navContainer.children;\n      }\n\n      updateNavVisibility(); // add transition\n\n      if (TRANSITIONDURATION) {\n        var prefix = TRANSITIONDURATION.substring(0, TRANSITIONDURATION.length - 18).toLowerCase(),\n            str = 'transition: all ' + speed / 1000 + 's';\n\n        if (prefix) {\n          str = '-' + prefix + '-' + str;\n        }\n\n        addCSSRule(sheet, '[aria-controls^=' + slideId + '-item]', str, getCssRulesLength(sheet));\n      }\n\n      setAttrs(navItems[navCurrentIndex], {\n        'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n      });\n      removeAttrs(navItems[navCurrentIndex], 'tabindex');\n      addClass(navItems[navCurrentIndex], navActiveClass); // add events\n\n      addEvents(navContainer, navEvents);\n    } // == controlsInit ==\n\n\n    if (hasControls) {\n      if (!controlsContainer && (!prevButton || !nextButton)) {\n        outerWrapper.insertAdjacentHTML(getInsertPosition(options.controlsPosition), '<div class=\"tns-controls\" aria-label=\"Carousel Navigation\" tabindex=\"0\"><button type=\"button\" data-controls=\"prev\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[0] + '</button><button type=\"button\" data-controls=\"next\" tabindex=\"-1\" aria-controls=\"' + slideId + '\">' + controlsText[1] + '</button></div>');\n        controlsContainer = outerWrapper.querySelector('.tns-controls');\n      }\n\n      if (!prevButton || !nextButton) {\n        prevButton = controlsContainer.children[0];\n        nextButton = controlsContainer.children[1];\n      }\n\n      if (options.controlsContainer) {\n        setAttrs(controlsContainer, {\n          'aria-label': 'Carousel Navigation',\n          'tabindex': '0'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs([prevButton, nextButton], {\n          'aria-controls': slideId,\n          'tabindex': '-1'\n        });\n      }\n\n      if (options.controlsContainer || options.prevButton && options.nextButton) {\n        setAttrs(prevButton, {\n          'data-controls': 'prev'\n        });\n        setAttrs(nextButton, {\n          'data-controls': 'next'\n        });\n      }\n\n      prevIsButton = isButton(prevButton);\n      nextIsButton = isButton(nextButton);\n      updateControlsStatus(); // add events\n\n      if (controlsContainer) {\n        addEvents(controlsContainer, controlsEvents);\n      } else {\n        addEvents(prevButton, controlsEvents);\n        addEvents(nextButton, controlsEvents);\n      }\n    } // hide tools if needed\n\n\n    disableUI();\n  }\n\n  function initEvents() {\n    // add events\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      addEvents(container, eve);\n    }\n\n    if (touch) {\n      addEvents(container, touchEvents, options.preventScrollOnTouch);\n    }\n\n    if (mouseDrag) {\n      addEvents(container, dragEvents);\n    }\n\n    if (arrowKeys) {\n      addEvents(doc, docmentKeydownEvent);\n    }\n\n    if (nested === 'inner') {\n      events.on('outerResized', function () {\n        resizeTasks();\n        events.emit('innerLoaded', info());\n      });\n    } else if (responsive || fixedWidth || autoWidth || autoHeight || !horizontal) {\n      addEvents(win, {\n        'resize': onResize\n      });\n    }\n\n    if (autoHeight) {\n      if (nested === 'outer') {\n        events.on('innerLoaded', doAutoHeight);\n      } else if (!disable) {\n        doAutoHeight();\n      }\n    }\n\n    doLazyLoad();\n\n    if (disable) {\n      disableSlider();\n    } else if (freeze) {\n      freezeSlider();\n    }\n\n    events.on('indexChanged', additionalUpdates);\n\n    if (nested === 'inner') {\n      events.emit('innerLoaded', info());\n    }\n\n    if (typeof onInit === 'function') {\n      onInit(info());\n    }\n\n    isOn = true;\n  }\n\n  function destroy() {\n    // sheet\n    sheet.disabled = true;\n\n    if (sheet.ownerNode) {\n      sheet.ownerNode.remove();\n    } // remove win event listeners\n\n\n    removeEvents(win, {\n      'resize': onResize\n    }); // arrowKeys, controls, nav\n\n    if (arrowKeys) {\n      removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controlsContainer) {\n      removeEvents(controlsContainer, controlsEvents);\n    }\n\n    if (navContainer) {\n      removeEvents(navContainer, navEvents);\n    } // autoplay\n\n\n    removeEvents(container, hoverEvents);\n    removeEvents(container, visibilityEvent);\n\n    if (autoplayButton) {\n      removeEvents(autoplayButton, {\n        'click': toggleAutoplay\n      });\n    }\n\n    if (autoplay) {\n      clearInterval(autoplayTimer);\n    } // container\n\n\n    if (carousel && TRANSITIONEND) {\n      var eve = {};\n      eve[TRANSITIONEND] = onTransitionEnd;\n      removeEvents(container, eve);\n    }\n\n    if (touch) {\n      removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag) {\n      removeEvents(container, dragEvents);\n    } // cache Object values in options && reset HTML\n\n\n    var htmlList = [containerHTML, controlsContainerHTML, prevButtonHTML, nextButtonHTML, navContainerHTML, autoplayButtonHTML];\n    tnsList.forEach(function (item, i) {\n      var el = item === 'container' ? outerWrapper : options[item];\n\n      if (typeof el === 'object' && el) {\n        var prevEl = el.previousElementSibling ? el.previousElementSibling : false,\n            parentEl = el.parentNode;\n        el.outerHTML = htmlList[i];\n        options[item] = prevEl ? prevEl.nextElementSibling : parentEl.firstElementChild;\n      }\n    }); // reset variables\n\n    tnsList = animateIn = animateOut = animateDelay = animateNormal = horizontal = outerWrapper = innerWrapper = container = containerParent = containerHTML = slideItems = slideCount = breakpointZone = windowWidth = autoWidth = fixedWidth = edgePadding = gutter = viewport = items = slideBy = viewportMax = arrowKeys = speed = rewind = loop = autoHeight = sheet = lazyload = slidePositions = slideItemsOut = cloneCount = slideCountNew = hasRightDeadZone = rightBoundary = updateIndexBeforeTransform = transformAttr = transformPrefix = transformPostfix = getIndexMax = index = indexCached = indexMin = indexMax = swipeAngle = moveDirectionExpected = running = onInit = events = newContainerClasses = slideId = disable = disabled = freezable = freeze = frozen = controlsEvents = navEvents = hoverEvents = visibilityEvent = docmentKeydownEvent = touchEvents = dragEvents = hasControls = hasNav = navAsThumbnails = hasAutoplay = hasTouch = hasMouseDrag = slideActiveClass = imgCompleteClass = imgEvents = imgsComplete = controls = controlsText = controlsContainer = controlsContainerHTML = prevButton = nextButton = prevIsButton = nextIsButton = nav = navContainer = navContainerHTML = navItems = pages = pagesCached = navClicked = navCurrentIndex = navCurrentIndexCached = navActiveClass = navStr = navStrCurrent = autoplay = autoplayTimeout = autoplayDirection = autoplayText = autoplayHoverPause = autoplayButton = autoplayButtonHTML = autoplayResetOnVisibility = autoplayHtmlStrings = autoplayTimer = animating = autoplayHoverPaused = autoplayUserPaused = autoplayVisibilityPaused = initPosition = lastPosition = translateInit = panStart = rafIndex = getDist = touch = mouseDrag = null; // check variables\n    // [animateIn, animateOut, animateDelay, animateNormal, horizontal, outerWrapper, innerWrapper, container, containerParent, containerHTML, slideItems, slideCount, breakpointZone, windowWidth, autoWidth, fixedWidth, edgePadding, gutter, viewport, items, slideBy, viewportMax, arrowKeys, speed, rewind, loop, autoHeight, sheet, lazyload, slidePositions, slideItemsOut, cloneCount, slideCountNew, hasRightDeadZone, rightBoundary, updateIndexBeforeTransform, transformAttr, transformPrefix, transformPostfix, getIndexMax, index, indexCached, indexMin, indexMax, resizeTimer, swipeAngle, moveDirectionExpected, running, onInit, events, newContainerClasses, slideId, disable, disabled, freezable, freeze, frozen, controlsEvents, navEvents, hoverEvents, visibilityEvent, docmentKeydownEvent, touchEvents, dragEvents, hasControls, hasNav, navAsThumbnails, hasAutoplay, hasTouch, hasMouseDrag, slideActiveClass, imgCompleteClass, imgEvents, imgsComplete, controls, controlsText, controlsContainer, controlsContainerHTML, prevButton, nextButton, prevIsButton, nextIsButton, nav, navContainer, navContainerHTML, navItems, pages, pagesCached, navClicked, navCurrentIndex, navCurrentIndexCached, navActiveClass, navStr, navStrCurrent, autoplay, autoplayTimeout, autoplayDirection, autoplayText, autoplayHoverPause, autoplayButton, autoplayButtonHTML, autoplayResetOnVisibility, autoplayHtmlStrings, autoplayTimer, animating, autoplayHoverPaused, autoplayUserPaused, autoplayVisibilityPaused, initPosition, lastPosition, translateInit, disX, disY, panStart, rafIndex, getDist, touch, mouseDrag ].forEach(function(item) { if (item !== null) { console.log(item); } });\n\n    for (var a in this) {\n      if (a !== 'rebuild') {\n        this[a] = null;\n      }\n    }\n\n    isOn = false;\n  } // === ON RESIZE ===\n  // responsive || fixedWidth || autoWidth || !horizontal\n\n\n  function onResize(e) {\n    raf(function () {\n      resizeTasks(getEvent(e));\n    });\n  }\n\n  function resizeTasks(e) {\n    if (!isOn) {\n      return;\n    }\n\n    if (nested === 'outer') {\n      events.emit('outerResized', info(e));\n    }\n\n    windowWidth = getWindowWidth();\n    var bpChanged,\n        breakpointZoneTem = breakpointZone,\n        needContainerTransform = false;\n\n    if (responsive) {\n      setBreakpointZone();\n      bpChanged = breakpointZoneTem !== breakpointZone; // if (hasRightDeadZone) { needContainerTransform = true; } // *?\n\n      if (bpChanged) {\n        events.emit('newBreakpointStart', info(e));\n      }\n    }\n\n    var indChanged,\n        itemsChanged,\n        itemsTem = items,\n        disableTem = disable,\n        freezeTem = freeze,\n        arrowKeysTem = arrowKeys,\n        controlsTem = controls,\n        navTem = nav,\n        touchTem = touch,\n        mouseDragTem = mouseDrag,\n        autoplayTem = autoplay,\n        autoplayHoverPauseTem = autoplayHoverPause,\n        autoplayResetOnVisibilityTem = autoplayResetOnVisibility,\n        indexTem = index;\n\n    if (bpChanged) {\n      var fixedWidthTem = fixedWidth,\n          autoHeightTem = autoHeight,\n          controlsTextTem = controlsText,\n          centerTem = center,\n          autoplayTextTem = autoplayText;\n\n      if (!CSSMQ) {\n        var gutterTem = gutter,\n            edgePaddingTem = edgePadding;\n      }\n    } // get option:\n    // fixed width: viewport, fixedWidth, gutter => items\n    // others: window width => all variables\n    // all: items => slideBy\n\n\n    arrowKeys = getOption('arrowKeys');\n    controls = getOption('controls');\n    nav = getOption('nav');\n    touch = getOption('touch');\n    center = getOption('center');\n    mouseDrag = getOption('mouseDrag');\n    autoplay = getOption('autoplay');\n    autoplayHoverPause = getOption('autoplayHoverPause');\n    autoplayResetOnVisibility = getOption('autoplayResetOnVisibility');\n\n    if (bpChanged) {\n      disable = getOption('disable');\n      fixedWidth = getOption('fixedWidth');\n      speed = getOption('speed');\n      autoHeight = getOption('autoHeight');\n      controlsText = getOption('controlsText');\n      autoplayText = getOption('autoplayText');\n      autoplayTimeout = getOption('autoplayTimeout');\n\n      if (!CSSMQ) {\n        edgePadding = getOption('edgePadding');\n        gutter = getOption('gutter');\n      }\n    } // update options\n\n\n    resetVariblesWhenDisable(disable);\n    viewport = getViewportWidth(); // <= edgePadding, gutter\n\n    if ((!horizontal || autoWidth) && !disable) {\n      setSlidePositions();\n\n      if (!horizontal) {\n        updateContentWrapperHeight(); // <= setSlidePositions\n\n        needContainerTransform = true;\n      }\n    }\n\n    if (fixedWidth || autoWidth) {\n      rightBoundary = getRightBoundary(); // autoWidth: <= viewport, slidePositions, gutter\n      // fixedWidth: <= viewport, fixedWidth, gutter\n\n      indexMax = getIndexMax(); // autoWidth: <= rightBoundary, slidePositions\n      // fixedWidth: <= rightBoundary, fixedWidth, gutter\n    }\n\n    if (bpChanged || fixedWidth) {\n      items = getOption('items');\n      slideBy = getOption('slideBy');\n      itemsChanged = items !== itemsTem;\n\n      if (itemsChanged) {\n        if (!fixedWidth && !autoWidth) {\n          indexMax = getIndexMax();\n        } // <= items\n        // check index before transform in case\n        // slider reach the right edge then items become bigger\n\n\n        updateIndex();\n      }\n    }\n\n    if (bpChanged) {\n      if (disable !== disableTem) {\n        if (disable) {\n          disableSlider();\n        } else {\n          enableSlider(); // <= slidePositions, rightBoundary, indexMax\n        }\n      }\n    }\n\n    if (freezable && (bpChanged || fixedWidth || autoWidth)) {\n      freeze = getFreeze(); // <= autoWidth: slidePositions, gutter, viewport, rightBoundary\n      // <= fixedWidth: fixedWidth, gutter, rightBoundary\n      // <= others: items\n\n      if (freeze !== freezeTem) {\n        if (freeze) {\n          doContainerTransform(getContainerTransformValue(getStartIndex(0)));\n          freezeSlider();\n        } else {\n          unfreezeSlider();\n          needContainerTransform = true;\n        }\n      }\n    }\n\n    resetVariblesWhenDisable(disable || freeze); // controls, nav, touch, mouseDrag, arrowKeys, autoplay, autoplayHoverPause, autoplayResetOnVisibility\n\n    if (!autoplay) {\n      autoplayHoverPause = autoplayResetOnVisibility = false;\n    }\n\n    if (arrowKeys !== arrowKeysTem) {\n      arrowKeys ? addEvents(doc, docmentKeydownEvent) : removeEvents(doc, docmentKeydownEvent);\n    }\n\n    if (controls !== controlsTem) {\n      if (controls) {\n        if (controlsContainer) {\n          showElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            showElement(prevButton);\n          }\n\n          if (nextButton) {\n            showElement(nextButton);\n          }\n        }\n      } else {\n        if (controlsContainer) {\n          hideElement(controlsContainer);\n        } else {\n          if (prevButton) {\n            hideElement(prevButton);\n          }\n\n          if (nextButton) {\n            hideElement(nextButton);\n          }\n        }\n      }\n    }\n\n    if (nav !== navTem) {\n      if (nav) {\n        showElement(navContainer);\n        updateNavVisibility();\n      } else {\n        hideElement(navContainer);\n      }\n    }\n\n    if (touch !== touchTem) {\n      touch ? addEvents(container, touchEvents, options.preventScrollOnTouch) : removeEvents(container, touchEvents);\n    }\n\n    if (mouseDrag !== mouseDragTem) {\n      mouseDrag ? addEvents(container, dragEvents) : removeEvents(container, dragEvents);\n    }\n\n    if (autoplay !== autoplayTem) {\n      if (autoplay) {\n        if (autoplayButton) {\n          showElement(autoplayButton);\n        }\n\n        if (!animating && !autoplayUserPaused) {\n          startAutoplay();\n        }\n      } else {\n        if (autoplayButton) {\n          hideElement(autoplayButton);\n        }\n\n        if (animating) {\n          stopAutoplay();\n        }\n      }\n    }\n\n    if (autoplayHoverPause !== autoplayHoverPauseTem) {\n      autoplayHoverPause ? addEvents(container, hoverEvents) : removeEvents(container, hoverEvents);\n    }\n\n    if (autoplayResetOnVisibility !== autoplayResetOnVisibilityTem) {\n      autoplayResetOnVisibility ? addEvents(doc, visibilityEvent) : removeEvents(doc, visibilityEvent);\n    }\n\n    if (bpChanged) {\n      if (fixedWidth !== fixedWidthTem || center !== centerTem) {\n        needContainerTransform = true;\n      }\n\n      if (autoHeight !== autoHeightTem) {\n        if (!autoHeight) {\n          innerWrapper.style.height = '';\n        }\n      }\n\n      if (controls && controlsText !== controlsTextTem) {\n        prevButton.innerHTML = controlsText[0];\n        nextButton.innerHTML = controlsText[1];\n      }\n\n      if (autoplayButton && autoplayText !== autoplayTextTem) {\n        var i = autoplay ? 1 : 0,\n            html = autoplayButton.innerHTML,\n            len = html.length - autoplayTextTem[i].length;\n\n        if (html.substring(len) === autoplayTextTem[i]) {\n          autoplayButton.innerHTML = html.substring(0, len) + autoplayText[i];\n        }\n      }\n    } else {\n      if (center && (fixedWidth || autoWidth)) {\n        needContainerTransform = true;\n      }\n    }\n\n    if (itemsChanged || fixedWidth && !autoWidth) {\n      pages = getPages();\n      updateNavVisibility();\n    }\n\n    indChanged = index !== indexTem;\n\n    if (indChanged) {\n      events.emit('indexChanged', info());\n      needContainerTransform = true;\n    } else if (itemsChanged) {\n      if (!indChanged) {\n        additionalUpdates();\n      }\n    } else if (fixedWidth || autoWidth) {\n      doLazyLoad();\n      updateSlideStatus();\n      updateLiveRegion();\n    }\n\n    if (itemsChanged && !carousel) {\n      updateGallerySlidePositions();\n    }\n\n    if (!disable && !freeze) {\n      // non-mediaqueries: IE8\n      if (bpChanged && !CSSMQ) {\n        // middle wrapper styles\n        // inner wrapper styles\n        if (edgePadding !== edgePaddingTem || gutter !== gutterTem) {\n          innerWrapper.style.cssText = getInnerWrapperStyles(edgePadding, gutter, fixedWidth, speed, autoHeight);\n        }\n\n        if (horizontal) {\n          // container styles\n          if (carousel) {\n            container.style.width = getContainerWidth(fixedWidth, gutter, items);\n          } // slide styles\n\n\n          var str = getSlideWidthStyle(fixedWidth, gutter, items) + getSlideGutterStyle(gutter); // remove the last line and\n          // add new styles\n\n          removeCSSRule(sheet, getCssRulesLength(sheet) - 1);\n          addCSSRule(sheet, '#' + slideId + ' > .tns-item', str, getCssRulesLength(sheet));\n        }\n      } // auto height\n\n\n      if (autoHeight) {\n        doAutoHeight();\n      }\n\n      if (needContainerTransform) {\n        doContainerTransformSilent();\n        indexCached = index;\n      }\n    }\n\n    if (bpChanged) {\n      events.emit('newBreakpointEnd', info(e));\n    }\n  } // === INITIALIZATION FUNCTIONS === //\n\n\n  function getFreeze() {\n    if (!fixedWidth && !autoWidth) {\n      var a = center ? items - (items - 1) / 2 : items;\n      return slideCount <= a;\n    }\n\n    var width = fixedWidth ? (fixedWidth + gutter) * slideCount : slidePositions[slideCount],\n        vp = edgePadding ? viewport + edgePadding * 2 : viewport + gutter;\n\n    if (center) {\n      vp -= fixedWidth ? (viewport - fixedWidth) / 2 : (viewport - (slidePositions[index + 1] - slidePositions[index] - gutter)) / 2;\n    }\n\n    return width <= vp;\n  }\n\n  function setBreakpointZone() {\n    breakpointZone = 0;\n\n    for (var bp in responsive) {\n      bp = parseInt(bp); // convert string to number\n\n      if (windowWidth >= bp) {\n        breakpointZone = bp;\n      }\n    }\n  } // (slideBy, indexMin, indexMax) => index\n\n\n  var updateIndex = function () {\n    return loop ? carousel ? // loop + carousel\n    function () {\n      var leftEdge = indexMin,\n          rightEdge = indexMax;\n      leftEdge += slideBy;\n      rightEdge -= slideBy; // adjust edges when has edge paddings\n      // or fixed-width slider with extra space on the right side\n\n      if (edgePadding) {\n        leftEdge += 1;\n        rightEdge -= 1;\n      } else if (fixedWidth) {\n        if ((viewport + gutter) % (fixedWidth + gutter)) {\n          rightEdge -= 1;\n        }\n      }\n\n      if (cloneCount) {\n        if (index > rightEdge) {\n          index -= slideCount;\n        } else if (index < leftEdge) {\n          index += slideCount;\n        }\n      }\n    } : // loop + gallery\n    function () {\n      if (index > indexMax) {\n        while (index >= indexMin + slideCount) {\n          index -= slideCount;\n        }\n      } else if (index < indexMin) {\n        while (index <= indexMax - slideCount) {\n          index += slideCount;\n        }\n      }\n    } : // non-loop\n    function () {\n      index = Math.max(indexMin, Math.min(indexMax, index));\n    };\n  }();\n\n  function disableUI() {\n    if (!autoplay && autoplayButton) {\n      hideElement(autoplayButton);\n    }\n\n    if (!nav && navContainer) {\n      hideElement(navContainer);\n    }\n\n    if (!controls) {\n      if (controlsContainer) {\n        hideElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          hideElement(prevButton);\n        }\n\n        if (nextButton) {\n          hideElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function enableUI() {\n    if (autoplay && autoplayButton) {\n      showElement(autoplayButton);\n    }\n\n    if (nav && navContainer) {\n      showElement(navContainer);\n    }\n\n    if (controls) {\n      if (controlsContainer) {\n        showElement(controlsContainer);\n      } else {\n        if (prevButton) {\n          showElement(prevButton);\n        }\n\n        if (nextButton) {\n          showElement(nextButton);\n        }\n      }\n    }\n  }\n\n  function freezeSlider() {\n    if (frozen) {\n      return;\n    } // remove edge padding from inner wrapper\n\n\n    if (edgePadding) {\n      innerWrapper.style.margin = '0px';\n    } // add class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          addClass(slideItems[i], str);\n        }\n\n        addClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    disableUI();\n    frozen = true;\n  }\n\n  function unfreezeSlider() {\n    if (!frozen) {\n      return;\n    } // restore edge padding for inner wrapper\n    // for mordern browsers\n\n\n    if (edgePadding && CSSMQ) {\n      innerWrapper.style.margin = '';\n    } // remove class tns-transparent to cloned slides\n\n\n    if (cloneCount) {\n      var str = 'tns-transparent';\n\n      for (var i = cloneCount; i--;) {\n        if (carousel) {\n          removeClass(slideItems[i], str);\n        }\n\n        removeClass(slideItems[slideCountNew - i - 1], str);\n      }\n    } // update tools\n\n\n    enableUI();\n    frozen = false;\n  }\n\n  function disableSlider() {\n    if (disabled) {\n      return;\n    }\n\n    sheet.disabled = true;\n    container.className = container.className.replace(newContainerClasses.substring(1), '');\n    removeAttrs(container, ['style']);\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          hideElement(slideItems[j]);\n        }\n\n        hideElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // vertical slider\n\n\n    if (!horizontal || !carousel) {\n      removeAttrs(innerWrapper, ['style']);\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i];\n        removeAttrs(item, ['style']);\n        removeClass(item, animateIn);\n        removeClass(item, animateNormal);\n      }\n    } // update tools\n\n\n    disableUI();\n    disabled = true;\n  }\n\n  function enableSlider() {\n    if (!disabled) {\n      return;\n    }\n\n    sheet.disabled = false;\n    container.className += newContainerClasses;\n    doContainerTransformSilent();\n\n    if (loop) {\n      for (var j = cloneCount; j--;) {\n        if (carousel) {\n          showElement(slideItems[j]);\n        }\n\n        showElement(slideItems[slideCountNew - j - 1]);\n      }\n    } // gallery\n\n\n    if (!carousel) {\n      for (var i = index, l = index + slideCount; i < l; i++) {\n        var item = slideItems[i],\n            classN = i < index + items ? animateIn : animateNormal;\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, classN);\n      }\n    } // update tools\n\n\n    enableUI();\n    disabled = false;\n  }\n\n  function updateLiveRegion() {\n    var str = getLiveRegionStr();\n\n    if (liveregionCurrent.innerHTML !== str) {\n      liveregionCurrent.innerHTML = str;\n    }\n  }\n\n  function getLiveRegionStr() {\n    var arr = getVisibleSlideRange(),\n        start = arr[0] + 1,\n        end = arr[1] + 1;\n    return start === end ? start + '' : start + ' to ' + end;\n  }\n\n  function getVisibleSlideRange(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    var start = index,\n        end,\n        rangestart,\n        rangeend; // get range start, range end for autoWidth and fixedWidth\n\n    if (center || edgePadding) {\n      if (autoWidth || fixedWidth) {\n        rangestart = -(parseFloat(val) + edgePadding);\n        rangeend = rangestart + viewport + edgePadding * 2;\n      }\n    } else {\n      if (autoWidth) {\n        rangestart = slidePositions[index];\n        rangeend = rangestart + viewport;\n      }\n    } // get start, end\n    // - check auto width\n\n\n    if (autoWidth) {\n      slidePositions.forEach(function (point, i) {\n        if (i < slideCountNew) {\n          if ((center || edgePadding) && point <= rangestart + 0.5) {\n            start = i;\n          }\n\n          if (rangeend - point >= 0.5) {\n            end = i;\n          }\n        }\n      }); // - check percentage width, fixed width\n    } else {\n      if (fixedWidth) {\n        var cell = fixedWidth + gutter;\n\n        if (center || edgePadding) {\n          start = Math.floor(rangestart / cell);\n          end = Math.ceil(rangeend / cell - 1);\n        } else {\n          end = start + Math.ceil(viewport / cell) - 1;\n        }\n      } else {\n        if (center || edgePadding) {\n          var a = items - 1;\n\n          if (center) {\n            start -= a / 2;\n            end = index + a / 2;\n          } else {\n            end = index + a;\n          }\n\n          if (edgePadding) {\n            var b = edgePadding * items / viewport;\n            start -= b;\n            end += b;\n          }\n\n          start = Math.floor(start);\n          end = Math.ceil(end);\n        } else {\n          end = start + items - 1;\n        }\n      }\n\n      start = Math.max(start, 0);\n      end = Math.min(end, slideCountNew - 1);\n    }\n\n    return [start, end];\n  }\n\n  function doLazyLoad() {\n    if (lazyload && !disable) {\n      var arg = getVisibleSlideRange();\n      arg.push(lazyloadSelector);\n      getImageArray.apply(null, arg).forEach(function (img) {\n        if (!hasClass(img, imgCompleteClass)) {\n          // stop propagation transitionend event to container\n          var eve = {};\n\n          eve[TRANSITIONEND] = function (e) {\n            e.stopPropagation();\n          };\n\n          addEvents(img, eve);\n          addEvents(img, imgEvents); // update src\n\n          img.src = getAttr(img, 'data-src'); // update srcset\n\n          var srcset = getAttr(img, 'data-srcset');\n\n          if (srcset) {\n            img.srcset = srcset;\n          }\n\n          addClass(img, 'loading');\n        }\n      });\n    }\n  }\n\n  function onImgLoaded(e) {\n    imgLoaded(getTarget(e));\n  }\n\n  function onImgFailed(e) {\n    imgFailed(getTarget(e));\n  }\n\n  function imgLoaded(img) {\n    addClass(img, 'loaded');\n    imgCompleted(img);\n  }\n\n  function imgFailed(img) {\n    addClass(img, 'failed');\n    imgCompleted(img);\n  }\n\n  function imgCompleted(img) {\n    addClass(img, imgCompleteClass);\n    removeClass(img, 'loading');\n    removeEvents(img, imgEvents);\n  }\n\n  function getImageArray(start, end, imgSelector) {\n    var imgs = [];\n\n    if (!imgSelector) {\n      imgSelector = 'img';\n    }\n\n    while (start <= end) {\n      forEach(slideItems[start].querySelectorAll(imgSelector), function (img) {\n        imgs.push(img);\n      });\n      start++;\n    }\n\n    return imgs;\n  } // check if all visible images are loaded\n  // and update container height if it's done\n\n\n  function doAutoHeight() {\n    var imgs = getImageArray.apply(null, getVisibleSlideRange());\n    raf(function () {\n      imgsLoadedCheck(imgs, updateInnerWrapperHeight);\n    });\n  }\n\n  function imgsLoadedCheck(imgs, cb) {\n    // execute callback function if all images are complete\n    if (imgsComplete) {\n      return cb();\n    } // check image classes\n\n\n    imgs.forEach(function (img, index) {\n      if (!lazyload && img.complete) {\n        imgCompleted(img);\n      } // Check image.complete\n\n\n      if (hasClass(img, imgCompleteClass)) {\n        imgs.splice(index, 1);\n      }\n    }); // execute callback function if selected images are all complete\n\n    if (!imgs.length) {\n      return cb();\n    } // otherwise execute this functiona again\n\n\n    raf(function () {\n      imgsLoadedCheck(imgs, cb);\n    });\n  }\n\n  function additionalUpdates() {\n    doLazyLoad();\n    updateSlideStatus();\n    updateLiveRegion();\n    updateControlsStatus();\n    updateNavStatus();\n  }\n\n  function update_carousel_transition_duration() {\n    if (carousel && autoHeight) {\n      middleWrapper.style[TRANSITIONDURATION] = speed / 1000 + 's';\n    }\n  }\n\n  function getMaxSlideHeight(slideStart, slideRange) {\n    var heights = [];\n\n    for (var i = slideStart, l = Math.min(slideStart + slideRange, slideCountNew); i < l; i++) {\n      heights.push(slideItems[i].offsetHeight);\n    }\n\n    return Math.max.apply(null, heights);\n  } // update inner wrapper height\n  // 1. get the max-height of the visible slides\n  // 2. set transitionDuration to speed\n  // 3. update inner wrapper height to max-height\n  // 4. set transitionDuration to 0s after transition done\n\n\n  function updateInnerWrapperHeight() {\n    var maxHeight = autoHeight ? getMaxSlideHeight(index, items) : getMaxSlideHeight(cloneCount, slideCount),\n        wp = middleWrapper ? middleWrapper : innerWrapper;\n\n    if (wp.style.height !== maxHeight) {\n      wp.style.height = maxHeight + 'px';\n    }\n  } // get the distance from the top edge of the first slide to each slide\n  // (init) => slidePositions\n\n\n  function setSlidePositions() {\n    slidePositions = [0];\n    var attr = horizontal ? 'left' : 'top',\n        attr2 = horizontal ? 'right' : 'bottom',\n        base = slideItems[0].getBoundingClientRect()[attr];\n    forEach(slideItems, function (item, i) {\n      // skip the first slide\n      if (i) {\n        slidePositions.push(item.getBoundingClientRect()[attr] - base);\n      } // add the end edge\n\n\n      if (i === slideCountNew - 1) {\n        slidePositions.push(item.getBoundingClientRect()[attr2] - base);\n      }\n    });\n  } // update slide\n\n\n  function updateSlideStatus() {\n    var range = getVisibleSlideRange(),\n        start = range[0],\n        end = range[1];\n    forEach(slideItems, function (item, i) {\n      // show slides\n      if (i >= start && i <= end) {\n        if (hasAttr(item, 'aria-hidden')) {\n          removeAttrs(item, ['aria-hidden', 'tabindex']);\n          addClass(item, slideActiveClass);\n        } // hide slides\n\n      } else {\n        if (!hasAttr(item, 'aria-hidden')) {\n          setAttrs(item, {\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n          });\n          removeClass(item, slideActiveClass);\n        }\n      }\n    });\n  } // gallery: update slide position\n\n\n  function updateGallerySlidePositions() {\n    var l = index + Math.min(slideCount, items);\n\n    for (var i = slideCountNew; i--;) {\n      var item = slideItems[i];\n\n      if (i >= index && i < l) {\n        // add transitions to visible slides when adjusting their positions\n        addClass(item, 'tns-moving');\n        item.style.left = (i - index) * 100 / items + '%';\n        addClass(item, animateIn);\n        removeClass(item, animateNormal);\n      } else if (item.style.left) {\n        item.style.left = '';\n        addClass(item, animateNormal);\n        removeClass(item, animateIn);\n      } // remove outlet animation\n\n\n      removeClass(item, animateOut);\n    } // removing '.tns-moving'\n\n\n    setTimeout(function () {\n      forEach(slideItems, function (el) {\n        removeClass(el, 'tns-moving');\n      });\n    }, 300);\n  } // set tabindex on Nav\n\n\n  function updateNavStatus() {\n    // get current nav\n    if (nav) {\n      navCurrentIndex = navClicked >= 0 ? navClicked : getCurrentNavIndex();\n      navClicked = -1;\n\n      if (navCurrentIndex !== navCurrentIndexCached) {\n        var navPrev = navItems[navCurrentIndexCached],\n            navCurrent = navItems[navCurrentIndex];\n        setAttrs(navPrev, {\n          'tabindex': '-1',\n          'aria-label': navStr + (navCurrentIndexCached + 1)\n        });\n        removeClass(navPrev, navActiveClass);\n        setAttrs(navCurrent, {\n          'aria-label': navStr + (navCurrentIndex + 1) + navStrCurrent\n        });\n        removeAttrs(navCurrent, 'tabindex');\n        addClass(navCurrent, navActiveClass);\n        navCurrentIndexCached = navCurrentIndex;\n      }\n    }\n  }\n\n  function getLowerCaseNodeName(el) {\n    return el.nodeName.toLowerCase();\n  }\n\n  function isButton(el) {\n    return getLowerCaseNodeName(el) === 'button';\n  }\n\n  function isAriaDisabled(el) {\n    return el.getAttribute('aria-disabled') === 'true';\n  }\n\n  function disEnableElement(isButton, el, val) {\n    if (isButton) {\n      el.disabled = val;\n    } else {\n      el.setAttribute('aria-disabled', val.toString());\n    }\n  } // set 'disabled' to true on controls when reach the edges\n\n\n  function updateControlsStatus() {\n    if (!controls || rewind || loop) {\n      return;\n    }\n\n    var prevDisabled = prevIsButton ? prevButton.disabled : isAriaDisabled(prevButton),\n        nextDisabled = nextIsButton ? nextButton.disabled : isAriaDisabled(nextButton),\n        disablePrev = index <= indexMin ? true : false,\n        disableNext = !rewind && index >= indexMax ? true : false;\n\n    if (disablePrev && !prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, true);\n    }\n\n    if (!disablePrev && prevDisabled) {\n      disEnableElement(prevIsButton, prevButton, false);\n    }\n\n    if (disableNext && !nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, true);\n    }\n\n    if (!disableNext && nextDisabled) {\n      disEnableElement(nextIsButton, nextButton, false);\n    }\n  } // set duration\n\n\n  function resetDuration(el, str) {\n    if (TRANSITIONDURATION) {\n      el.style[TRANSITIONDURATION] = str;\n    }\n  }\n\n  function getSliderWidth() {\n    return fixedWidth ? (fixedWidth + gutter) * slideCountNew : slidePositions[slideCountNew];\n  }\n\n  function getCenterGap(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var gap = edgePadding ? gutter : 0;\n    return autoWidth ? (viewport - gap - (slidePositions[num + 1] - slidePositions[num] - gutter)) / 2 : fixedWidth ? (viewport - fixedWidth) / 2 : (items - 1) / 2;\n  }\n\n  function getRightBoundary() {\n    var gap = edgePadding ? gutter : 0,\n        result = viewport + gap - getSliderWidth();\n\n    if (center && !loop) {\n      result = fixedWidth ? -(fixedWidth + gutter) * (slideCountNew - 1) - getCenterGap() : getCenterGap(slideCountNew - 1) - slidePositions[slideCountNew - 1];\n    }\n\n    if (result > 0) {\n      result = 0;\n    }\n\n    return result;\n  }\n\n  function getContainerTransformValue(num) {\n    if (num == null) {\n      num = index;\n    }\n\n    var val;\n\n    if (horizontal && !autoWidth) {\n      if (fixedWidth) {\n        val = -(fixedWidth + gutter) * num;\n\n        if (center) {\n          val += getCenterGap();\n        }\n      } else {\n        var denominator = TRANSFORM ? slideCountNew : items;\n\n        if (center) {\n          num -= getCenterGap();\n        }\n\n        val = -num * 100 / denominator;\n      }\n    } else {\n      val = -slidePositions[num];\n\n      if (center && autoWidth) {\n        val += getCenterGap();\n      }\n    }\n\n    if (hasRightDeadZone) {\n      val = Math.max(val, rightBoundary);\n    }\n\n    val += horizontal && !autoWidth && !fixedWidth ? '%' : 'px';\n    return val;\n  }\n\n  function doContainerTransformSilent(val) {\n    resetDuration(container, '0s');\n    doContainerTransform(val);\n  }\n\n  function doContainerTransform(val) {\n    if (val == null) {\n      val = getContainerTransformValue();\n    }\n\n    container.style[transformAttr] = transformPrefix + val + transformPostfix;\n  }\n\n  function animateSlide(number, classOut, classIn, isOut) {\n    var l = number + items;\n\n    if (!loop) {\n      l = Math.min(l, slideCountNew);\n    }\n\n    for (var i = number; i < l; i++) {\n      var item = slideItems[i]; // set item positions\n\n      if (!isOut) {\n        item.style.left = (i - index) * 100 / items + '%';\n      }\n\n      if (animateDelay && TRANSITIONDELAY) {\n        item.style[TRANSITIONDELAY] = item.style[ANIMATIONDELAY] = animateDelay * (i - number) / 1000 + 's';\n      }\n\n      removeClass(item, classOut);\n      addClass(item, classIn);\n\n      if (isOut) {\n        slideItemsOut.push(item);\n      }\n    }\n  } // make transfer after click/drag:\n  // 1. change 'transform' property for mordern browsers\n  // 2. change 'left' property for legacy browsers\n\n\n  var transformCore = function () {\n    return carousel ? function () {\n      resetDuration(container, '');\n\n      if (TRANSITIONDURATION || !speed) {\n        // for morden browsers with non-zero duration or\n        // zero duration for all browsers\n        doContainerTransform(); // run fallback function manually\n        // when duration is 0 / container is hidden\n\n        if (!speed || !isVisible(container)) {\n          onTransitionEnd();\n        }\n      } else {\n        // for old browser with non-zero duration\n        jsTransform(container, transformAttr, transformPrefix, transformPostfix, getContainerTransformValue(), speed, onTransitionEnd);\n      }\n\n      if (!horizontal) {\n        updateContentWrapperHeight();\n      }\n    } : function () {\n      slideItemsOut = [];\n      var eve = {};\n      eve[TRANSITIONEND] = eve[ANIMATIONEND] = onTransitionEnd;\n      removeEvents(slideItems[indexCached], eve);\n      addEvents(slideItems[index], eve);\n      animateSlide(indexCached, animateIn, animateOut, true);\n      animateSlide(index, animateNormal, animateIn); // run fallback function manually\n      // when transition or animation not supported / duration is 0\n\n      if (!TRANSITIONEND || !ANIMATIONEND || !speed || !isVisible(container)) {\n        onTransitionEnd();\n      }\n    };\n  }();\n\n  function render(e, sliderMoved) {\n    if (updateIndexBeforeTransform) {\n      updateIndex();\n    } // render when slider was moved (touch or drag) even though index may not change\n\n\n    if (index !== indexCached || sliderMoved) {\n      // events\n      events.emit('indexChanged', info());\n      events.emit('transitionStart', info());\n\n      if (autoHeight) {\n        doAutoHeight();\n      } // pause autoplay when click or keydown from user\n\n\n      if (animating && e && ['click', 'keydown'].indexOf(e.type) >= 0) {\n        stopAutoplay();\n      }\n\n      running = true;\n      transformCore();\n    }\n  }\n  /*\n   * Transfer prefixed properties to the same format\n   * CSS: -Webkit-Transform => webkittransform\n   * JS: WebkitTransform => webkittransform\n   * @param {string} str - property\n   *\n   */\n\n\n  function strTrans(str) {\n    return str.toLowerCase().replace(/-/g, '');\n  } // AFTER TRANSFORM\n  // Things need to be done after a transfer:\n  // 1. check index\n  // 2. add classes to visible slide\n  // 3. disable controls buttons when reach the first/last slide in non-loop slider\n  // 4. update nav status\n  // 5. lazyload images\n  // 6. update container height\n\n\n  function onTransitionEnd(event) {\n    // check running on gallery mode\n    // make sure trantionend/animationend events run only once\n    if (carousel || running) {\n      events.emit('transitionEnd', info(event));\n\n      if (!carousel && slideItemsOut.length > 0) {\n        for (var i = 0; i < slideItemsOut.length; i++) {\n          var item = slideItemsOut[i]; // set item positions\n\n          item.style.left = '';\n\n          if (ANIMATIONDELAY && TRANSITIONDELAY) {\n            item.style[ANIMATIONDELAY] = '';\n            item.style[TRANSITIONDELAY] = '';\n          }\n\n          removeClass(item, animateOut);\n          addClass(item, animateNormal);\n        }\n      }\n      /* update slides, nav, controls after checking ...\n       * => legacy browsers who don't support 'event'\n       *    have to check event first, otherwise event.target will cause an error\n       * => or 'gallery' mode:\n       *   + event target is slide item\n       * => or 'carousel' mode:\n       *   + event target is container,\n       *   + event.property is the same with transform attribute\n       */\n\n\n      if (!event || !carousel && event.target.parentNode === container || event.target === container && strTrans(event.propertyName) === strTrans(transformAttr)) {\n        if (!updateIndexBeforeTransform) {\n          var indexTem = index;\n          updateIndex();\n\n          if (index !== indexTem) {\n            events.emit('indexChanged', info());\n            doContainerTransformSilent();\n          }\n        }\n\n        if (nested === 'inner') {\n          events.emit('innerLoaded', info());\n        }\n\n        running = false;\n        indexCached = index;\n      }\n    }\n  } // # ACTIONS\n\n\n  function goTo(targetIndex, e) {\n    if (freeze) {\n      return;\n    } // prev slideBy\n\n\n    if (targetIndex === 'prev') {\n      onControlsClick(e, -1); // next slideBy\n    } else if (targetIndex === 'next') {\n      onControlsClick(e, 1); // go to exact slide\n    } else {\n      if (running) {\n        if (preventActionWhenRunning) {\n          return;\n        } else {\n          onTransitionEnd();\n        }\n      }\n\n      var absIndex = getAbsIndex(),\n          indexGap = 0;\n\n      if (targetIndex === 'first') {\n        indexGap = -absIndex;\n      } else if (targetIndex === 'last') {\n        indexGap = carousel ? slideCount - items - absIndex : slideCount - 1 - absIndex;\n      } else {\n        if (typeof targetIndex !== 'number') {\n          targetIndex = parseInt(targetIndex);\n        }\n\n        if (!isNaN(targetIndex)) {\n          // from directly called goTo function\n          if (!e) {\n            targetIndex = Math.max(0, Math.min(slideCount - 1, targetIndex));\n          }\n\n          indexGap = targetIndex - absIndex;\n        }\n      } // gallery: make sure new page won't overlap with current page\n\n\n      if (!carousel && indexGap && Math.abs(indexGap) < items) {\n        var factor = indexGap > 0 ? 1 : -1;\n        indexGap += index + indexGap - slideCount >= indexMin ? slideCount * factor : slideCount * 2 * factor * -1;\n      }\n\n      index += indexGap; // make sure index is in range\n\n      if (carousel && loop) {\n        if (index < indexMin) {\n          index += slideCount;\n        }\n\n        if (index > indexMax) {\n          index -= slideCount;\n        }\n      } // if index is changed, start rendering\n\n\n      if (getAbsIndex(index) !== getAbsIndex(indexCached)) {\n        render(e);\n      }\n    }\n  } // on controls click\n\n\n  function onControlsClick(e, dir) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    var passEventObject;\n\n    if (!dir) {\n      e = getEvent(e);\n      var target = getTarget(e);\n\n      while (target !== controlsContainer && [prevButton, nextButton].indexOf(target) < 0) {\n        target = target.parentNode;\n      }\n\n      var targetIn = [prevButton, nextButton].indexOf(target);\n\n      if (targetIn >= 0) {\n        passEventObject = true;\n        dir = targetIn === 0 ? -1 : 1;\n      }\n    }\n\n    if (rewind) {\n      if (index === indexMin && dir === -1) {\n        goTo('last', e);\n        return;\n      } else if (index === indexMax && dir === 1) {\n        goTo('first', e);\n        return;\n      }\n    }\n\n    if (dir) {\n      index += slideBy * dir;\n\n      if (autoWidth) {\n        index = Math.floor(index);\n      } // pass e when click control buttons or keydown\n\n\n      render(passEventObject || e && e.type === 'keydown' ? e : null);\n    }\n  } // on nav click\n\n\n  function onNavClick(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    e = getEvent(e);\n    var target = getTarget(e),\n        navIndex; // find the clicked nav item\n\n    while (target !== navContainer && !hasAttr(target, 'data-nav')) {\n      target = target.parentNode;\n    }\n\n    if (hasAttr(target, 'data-nav')) {\n      var navIndex = navClicked = Number(getAttr(target, 'data-nav')),\n          targetIndexBase = fixedWidth || autoWidth ? navIndex * slideCount / pages : navIndex * items,\n          targetIndex = navAsThumbnails ? navIndex : Math.min(Math.ceil(targetIndexBase), slideCount - 1);\n      goTo(targetIndex, e);\n\n      if (navCurrentIndex === navIndex) {\n        if (animating) {\n          stopAutoplay();\n        }\n\n        navClicked = -1; // reset navClicked\n      }\n    }\n  } // autoplay functions\n\n\n  function setAutoplayTimer() {\n    autoplayTimer = setInterval(function () {\n      onControlsClick(null, autoplayDirection);\n    }, autoplayTimeout);\n    animating = true;\n  }\n\n  function stopAutoplayTimer() {\n    clearInterval(autoplayTimer);\n    animating = false;\n  }\n\n  function updateAutoplayButton(action, txt) {\n    setAttrs(autoplayButton, {\n      'data-action': action\n    });\n    autoplayButton.innerHTML = autoplayHtmlStrings[0] + action + autoplayHtmlStrings[1] + txt;\n  }\n\n  function startAutoplay() {\n    setAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('stop', autoplayText[1]);\n    }\n  }\n\n  function stopAutoplay() {\n    stopAutoplayTimer();\n\n    if (autoplayButton) {\n      updateAutoplayButton('start', autoplayText[0]);\n    }\n  } // programaitcally play/pause the slider\n\n\n  function play() {\n    if (autoplay && !animating) {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function pause() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    }\n  }\n\n  function toggleAutoplay() {\n    if (animating) {\n      stopAutoplay();\n      autoplayUserPaused = true;\n    } else {\n      startAutoplay();\n      autoplayUserPaused = false;\n    }\n  }\n\n  function onVisibilityChange() {\n    if (doc.hidden) {\n      if (animating) {\n        stopAutoplayTimer();\n        autoplayVisibilityPaused = true;\n      }\n    } else if (autoplayVisibilityPaused) {\n      setAutoplayTimer();\n      autoplayVisibilityPaused = false;\n    }\n  }\n\n  function mouseoverPause() {\n    if (animating) {\n      stopAutoplayTimer();\n      autoplayHoverPaused = true;\n    }\n  }\n\n  function mouseoutRestart() {\n    if (autoplayHoverPaused) {\n      setAutoplayTimer();\n      autoplayHoverPaused = false;\n    }\n  } // keydown events on document\n\n\n  function onDocumentKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      onControlsClick(e, keyIndex === 0 ? -1 : 1);\n    }\n  } // on key control\n\n\n  function onControlsKeydown(e) {\n    e = getEvent(e);\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT].indexOf(e.keyCode);\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (!prevButton.disabled) {\n          onControlsClick(e, -1);\n        }\n      } else if (!nextButton.disabled) {\n        onControlsClick(e, 1);\n      }\n    }\n  } // set focus\n\n\n  function setFocus(el) {\n    el.focus();\n  } // on key nav\n\n\n  function onNavKeydown(e) {\n    e = getEvent(e);\n    var curElement = doc.activeElement;\n\n    if (!hasAttr(curElement, 'data-nav')) {\n      return;\n    } // var code = e.keyCode,\n\n\n    var keyIndex = [KEYS.LEFT, KEYS.RIGHT, KEYS.ENTER, KEYS.SPACE].indexOf(e.keyCode),\n        navIndex = Number(getAttr(curElement, 'data-nav'));\n\n    if (keyIndex >= 0) {\n      if (keyIndex === 0) {\n        if (navIndex > 0) {\n          setFocus(navItems[navIndex - 1]);\n        }\n      } else if (keyIndex === 1) {\n        if (navIndex < pages - 1) {\n          setFocus(navItems[navIndex + 1]);\n        }\n      } else {\n        navClicked = navIndex;\n        goTo(navIndex, e);\n      }\n    }\n  }\n\n  function getEvent(e) {\n    e = e || win.event;\n    return isTouchEvent(e) ? e.changedTouches[0] : e;\n  }\n\n  function getTarget(e) {\n    return e.target || win.event.srcElement;\n  }\n\n  function isTouchEvent(e) {\n    return e.type.indexOf('touch') >= 0;\n  }\n\n  function preventDefaultBehavior(e) {\n    e.preventDefault ? e.preventDefault() : e.returnValue = false;\n  }\n\n  function getMoveDirectionExpected() {\n    return getTouchDirection(toDegree(lastPosition.y - initPosition.y, lastPosition.x - initPosition.x), swipeAngle) === options.axis;\n  }\n\n  function onPanStart(e) {\n    if (running) {\n      if (preventActionWhenRunning) {\n        return;\n      } else {\n        onTransitionEnd();\n      }\n    }\n\n    if (autoplay && animating) {\n      stopAutoplayTimer();\n    }\n\n    panStart = true;\n\n    if (rafIndex) {\n      caf(rafIndex);\n      rafIndex = null;\n    }\n\n    var $ = getEvent(e);\n    events.emit(isTouchEvent(e) ? 'touchStart' : 'dragStart', info(e));\n\n    if (!isTouchEvent(e) && ['img', 'a'].indexOf(getLowerCaseNodeName(getTarget(e))) >= 0) {\n      preventDefaultBehavior(e);\n    }\n\n    lastPosition.x = initPosition.x = $.clientX;\n    lastPosition.y = initPosition.y = $.clientY;\n\n    if (carousel) {\n      translateInit = parseFloat(container.style[transformAttr].replace(transformPrefix, ''));\n      resetDuration(container, '0s');\n    }\n  }\n\n  function onPanMove(e) {\n    if (panStart) {\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n\n      if (carousel) {\n        if (!rafIndex) {\n          rafIndex = raf(function () {\n            panUpdate(e);\n          });\n        }\n      } else {\n        if (moveDirectionExpected === '?') {\n          moveDirectionExpected = getMoveDirectionExpected();\n        }\n\n        if (moveDirectionExpected) {\n          preventScroll = true;\n        }\n      }\n\n      if ((typeof e.cancelable !== 'boolean' || e.cancelable) && preventScroll) {\n        e.preventDefault();\n      }\n    }\n  }\n\n  function panUpdate(e) {\n    if (!moveDirectionExpected) {\n      panStart = false;\n      return;\n    }\n\n    caf(rafIndex);\n\n    if (panStart) {\n      rafIndex = raf(function () {\n        panUpdate(e);\n      });\n    }\n\n    if (moveDirectionExpected === '?') {\n      moveDirectionExpected = getMoveDirectionExpected();\n    }\n\n    if (moveDirectionExpected) {\n      if (!preventScroll && isTouchEvent(e)) {\n        preventScroll = true;\n      }\n\n      try {\n        if (e.type) {\n          events.emit(isTouchEvent(e) ? 'touchMove' : 'dragMove', info(e));\n        }\n      } catch (err) {}\n\n      var x = translateInit,\n          dist = getDist(lastPosition, initPosition);\n\n      if (!horizontal || fixedWidth || autoWidth) {\n        x += dist;\n        x += 'px';\n      } else {\n        var percentageX = TRANSFORM ? dist * items * 100 / ((viewport + gutter) * slideCountNew) : dist * 100 / (viewport + gutter);\n        x += percentageX;\n        x += '%';\n      }\n\n      container.style[transformAttr] = transformPrefix + x + transformPostfix;\n    }\n  }\n\n  function onPanEnd(e) {\n    if (panStart) {\n      if (rafIndex) {\n        caf(rafIndex);\n        rafIndex = null;\n      }\n\n      if (carousel) {\n        resetDuration(container, '');\n      }\n\n      panStart = false;\n      var $ = getEvent(e);\n      lastPosition.x = $.clientX;\n      lastPosition.y = $.clientY;\n      var dist = getDist(lastPosition, initPosition);\n\n      if (Math.abs(dist)) {\n        // drag vs click\n        if (!isTouchEvent(e)) {\n          // prevent \"click\"\n          var target = getTarget(e);\n          addEvents(target, {\n            'click': function preventClick(e) {\n              preventDefaultBehavior(e);\n              removeEvents(target, {\n                'click': preventClick\n              });\n            }\n          });\n        }\n\n        if (carousel) {\n          rafIndex = raf(function () {\n            if (horizontal && !autoWidth) {\n              var indexMoved = -dist * items / (viewport + gutter);\n              indexMoved = dist > 0 ? Math.floor(indexMoved) : Math.ceil(indexMoved);\n              index += indexMoved;\n            } else {\n              var moved = -(translateInit + dist);\n\n              if (moved <= 0) {\n                index = indexMin;\n              } else if (moved >= slidePositions[slideCountNew - 1]) {\n                index = indexMax;\n              } else {\n                var i = 0;\n\n                while (i < slideCountNew && moved >= slidePositions[i]) {\n                  index = i;\n\n                  if (moved > slidePositions[i] && dist < 0) {\n                    index += 1;\n                  }\n\n                  i++;\n                }\n              }\n            }\n\n            render(e, dist);\n            events.emit(isTouchEvent(e) ? 'touchEnd' : 'dragEnd', info(e));\n          });\n        } else {\n          if (moveDirectionExpected) {\n            onControlsClick(e, dist > 0 ? -1 : 1);\n          }\n        }\n      }\n    } // reset\n\n\n    if (options.preventScrollOnTouch === 'auto') {\n      preventScroll = false;\n    }\n\n    if (swipeAngle) {\n      moveDirectionExpected = '?';\n    }\n\n    if (autoplay && !animating) {\n      setAutoplayTimer();\n    }\n  } // === RESIZE FUNCTIONS === //\n  // (slidePositions, index, items) => vertical_conentWrapper.height\n\n\n  function updateContentWrapperHeight() {\n    var wp = middleWrapper ? middleWrapper : innerWrapper;\n    wp.style.height = slidePositions[index + items] - slidePositions[index] + 'px';\n  }\n\n  function getPages() {\n    var rough = fixedWidth ? (fixedWidth + gutter) * slideCount / viewport : slideCount / items;\n    return Math.min(Math.ceil(rough), slideCount);\n  }\n  /*\n   * 1. update visible nav items list\n   * 2. add \"hidden\" attributes to previous visible nav items\n   * 3. remove \"hidden\" attrubutes to new visible nav items\n   */\n\n\n  function updateNavVisibility() {\n    if (!nav || navAsThumbnails) {\n      return;\n    }\n\n    if (pages !== pagesCached) {\n      var min = pagesCached,\n          max = pages,\n          fn = showElement;\n\n      if (pagesCached > pages) {\n        min = pages;\n        max = pagesCached;\n        fn = hideElement;\n      }\n\n      while (min < max) {\n        fn(navItems[min]);\n        min++;\n      } // cache pages\n\n\n      pagesCached = pages;\n    }\n  }\n\n  function info(e) {\n    return {\n      container: container,\n      slideItems: slideItems,\n      navContainer: navContainer,\n      navItems: navItems,\n      controlsContainer: controlsContainer,\n      hasControls: hasControls,\n      prevButton: prevButton,\n      nextButton: nextButton,\n      items: items,\n      slideBy: slideBy,\n      cloneCount: cloneCount,\n      slideCount: slideCount,\n      slideCountNew: slideCountNew,\n      index: index,\n      indexCached: indexCached,\n      displayIndex: getCurrentSlide(),\n      navCurrentIndex: navCurrentIndex,\n      navCurrentIndexCached: navCurrentIndexCached,\n      pages: pages,\n      pagesCached: pagesCached,\n      sheet: sheet,\n      isOn: isOn,\n      event: e || {}\n    };\n  }\n\n  return {\n    version: '2.9.4',\n    getInfo: info,\n    events: events,\n    goTo: goTo,\n    play: play,\n    pause: pause,\n    isOn: isOn,\n    updateSliderHeight: updateInnerWrapperHeight,\n    refresh: initSliderTransform,\n    destroy: destroy,\n    rebuild: function () {\n      return tns(extend(options, optionsElements));\n    }\n  };\n};\n\nexports.tns = tns;\n","var functionThrottle = throttle;\n\nfunction throttle(fn, interval, options) {\n  var timeoutId = null;\n  var throttledFn = null;\n  var leading = (options && options.leading);\n  var trailing = (options && options.trailing);\n\n  if (leading == null) {\n    leading = true; // default\n  }\n\n  if (trailing == null) {\n    trailing = !leading; //default\n  }\n\n  if (leading == true) {\n    trailing = false; // forced because there should be invocation per call\n  }\n\n  var cancel = function() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  var flush = function() {\n    var call = throttledFn;\n    cancel();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var throttleWrapper = function() {\n    var callNow = leading && !timeoutId;\n    var context = this;\n    var args = arguments;\n\n    throttledFn = function() {\n      return fn.apply(context, args);\n    };\n\n    if (!timeoutId) {\n      timeoutId = setTimeout(function() {\n        timeoutId = null;\n\n        if (trailing) {\n          return throttledFn();\n        }\n      }, interval);\n    }\n\n    if (callNow) {\n      callNow = false;\n      return throttledFn();\n    }\n  };\n\n  throttleWrapper.cancel = cancel;\n  throttleWrapper.flush = flush;\n\n  return throttleWrapper;\n}\n\nexport {functionThrottle as default};\n","export function lensToggleSlider (_slider: any) : [boolean, ()=>any]{\n  let slider = _slider\n  let isDestroyed = false\n  function toggleSlider(){\n    if((window.screen.width  > 680) && slider.destroy && !isDestroyed){\n      isDestroyed =  true\n      return slider.destroy()\n    }\n\n    if(isDestroyed && (window.innerWidth <= 680)){\n      isDestroyed = false\n      slider = slider.rebuild()\n    }\n  }\n\n  return [slider, toggleSlider]\n\n}\n","  import { tns } from 'tiny-slider'\n  import throtle from 'just-throttle'\n\n  import { lensToggleSlider } from './main'\n\n  const slider = tns({\n    container: '#carousel',\n    items: 1,\n    controls: false,\n    gutter: 0,\n    nav: false\n  })\n\n  const [, toggleSlider ] = lensToggleSlider(slider)\n\n  toggleSlider()\n\n\n  addEventListener('resize', throtle(()=>{\n    toggleSlider()\n\n  }, 200, {leading: true}))\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9sYXlvdXRzL01heWJlQ2Fyb3VzZWwuYXN0cm8iXSwgInNvdXJjZXNDb250ZW50IjogWyJcdTAwM2NkaXYgaWQ9XCJjYXJvdXNlbFwiIGNsYXNzPVwicm91bmRlZC1ib3ggdy1mdWxsIGZsZXggbWQ6ZmxleC13cmFwIGNvbnRlbnQtY2VudGVyIGp1c3RpZnktY2VudGVyIG1kOmdhcC0xMlwiIFx1MDAzZVxuICBcdTAwM2NzbG90IC9cdTAwM2Vcblx1MDAzYy9kaXZcdTAwM2VcblxuXHUwMDNjc2NyaXB0XHUwMDNlXG4gIGltcG9ydCB7IHRucyB9IGZyb20gJ3Rpbnktc2xpZGVyJ1xuICBpbXBvcnQgdGhyb3RsZSBmcm9tICdqdXN0LXRocm90dGxlJ1xuXG4gIGltcG9ydCB7IGxlbnNUb2dnbGVTbGlkZXIgfSBmcm9tICcuL21haW4nXG5cbiAgY29uc3Qgc2xpZGVyID0gdG5zKHtcbiAgICBjb250YWluZXI6ICcjY2Fyb3VzZWwnLFxuICAgIGl0ZW1zOiAxLFxuICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICBndXR0ZXI6IDAsXG4gICAgbmF2OiBmYWxzZVxuICB9KVxuXG4gIGNvbnN0IFssIHRvZ2dsZVNsaWRlciBdID0gbGVuc1RvZ2dsZVNsaWRlcihzbGlkZXIpXG5cbiAgdG9nZ2xlU2xpZGVyKClcblxuXG4gIGFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRocm90bGUoKCk9XHUwMDNle1xuICAgIHRvZ2dsZVNsaWRlcigpXG5cbiAgfSwgMjAwLCB7bGVhZGluZzogdHJ1ZX0pKVxuXHUwMDNjL3NjcmlwdFx1MDAzZSJdLCAibWFwcGluZ3MiOiAiQUFLQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwQztBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzFDO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0FBQ1osSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDYixJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNiLEVBQUUsQ0FBQztBQUNIO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkQ7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDZjtBQUNBO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCO0FBQ0EsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUFBOyIsICJuYW1lcyI6IFtdIH0=","/**! \n * hotkeys-js v3.10.1 \n * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies. \n * \n * Copyright (c) 2022 kenny wong <wowohoo@qq.com> \n * http://jaywcjlove.github.io/hotkeys \n * Licensed under the MIT license \n */\n\nvar isff = typeof navigator !== 'undefined' ? navigator.userAgent.toLowerCase().indexOf('firefox') > 0 : false; // 绑定事件\n\nfunction addEvent(object, event, method, useCapture) {\n  if (object.addEventListener) {\n    object.addEventListener(event, method, useCapture);\n  } else if (object.attachEvent) {\n    object.attachEvent(\"on\".concat(event), function () {\n      method(window.event);\n    });\n  }\n} // 修饰键转换成对应的键码\n\n\nfunction getMods(modifier, key) {\n  var mods = key.slice(0, key.length - 1);\n\n  for (var i = 0; i < mods.length; i++) {\n    mods[i] = modifier[mods[i].toLowerCase()];\n  }\n\n  return mods;\n} // 处理传的key字符串转换成数组\n\n\nfunction getKeys(key) {\n  if (typeof key !== 'string') key = '';\n  key = key.replace(/\\s/g, ''); // 匹配任何空白字符,包括空格、制表符、换页符等等\n\n  var keys = key.split(','); // 同时设置多个快捷键，以','分割\n\n  var index = keys.lastIndexOf(''); // 快捷键可能包含','，需特殊处理\n\n  for (; index >= 0;) {\n    keys[index - 1] += ',';\n    keys.splice(index, 1);\n    index = keys.lastIndexOf('');\n  }\n\n  return keys;\n} // 比较修饰键的数组\n\n\nfunction compareArray(a1, a2) {\n  var arr1 = a1.length >= a2.length ? a1 : a2;\n  var arr2 = a1.length >= a2.length ? a2 : a1;\n  var isIndex = true;\n\n  for (var i = 0; i < arr1.length; i++) {\n    if (arr2.indexOf(arr1[i]) === -1) isIndex = false;\n  }\n\n  return isIndex;\n}\n\nvar _keyMap = {\n  backspace: 8,\n  '⌫': 8,\n  tab: 9,\n  clear: 12,\n  enter: 13,\n  '↩': 13,\n  return: 13,\n  esc: 27,\n  escape: 27,\n  space: 32,\n  left: 37,\n  up: 38,\n  right: 39,\n  down: 40,\n  del: 46,\n  delete: 46,\n  ins: 45,\n  insert: 45,\n  home: 36,\n  end: 35,\n  pageup: 33,\n  pagedown: 34,\n  capslock: 20,\n  num_0: 96,\n  num_1: 97,\n  num_2: 98,\n  num_3: 99,\n  num_4: 100,\n  num_5: 101,\n  num_6: 102,\n  num_7: 103,\n  num_8: 104,\n  num_9: 105,\n  num_multiply: 106,\n  num_add: 107,\n  num_enter: 108,\n  num_subtract: 109,\n  num_decimal: 110,\n  num_divide: 111,\n  '⇪': 20,\n  ',': 188,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '-': isff ? 173 : 189,\n  '=': isff ? 61 : 187,\n  ';': isff ? 59 : 186,\n  '\\'': 222,\n  '[': 219,\n  ']': 221,\n  '\\\\': 220\n}; // Modifier Keys\n\nvar _modifier = {\n  // shiftKey\n  '⇧': 16,\n  shift: 16,\n  // altKey\n  '⌥': 18,\n  alt: 18,\n  option: 18,\n  // ctrlKey\n  '⌃': 17,\n  ctrl: 17,\n  control: 17,\n  // metaKey\n  '⌘': 91,\n  cmd: 91,\n  command: 91\n};\nvar modifierMap = {\n  16: 'shiftKey',\n  18: 'altKey',\n  17: 'ctrlKey',\n  91: 'metaKey',\n  shiftKey: 16,\n  ctrlKey: 17,\n  altKey: 18,\n  metaKey: 91\n};\nvar _mods = {\n  16: false,\n  18: false,\n  17: false,\n  91: false\n};\nvar _handlers = {}; // F1~F12 special key\n\nfor (var k = 1; k < 20; k++) {\n  _keyMap[\"f\".concat(k)] = 111 + k;\n}\n\nvar _downKeys = []; // 记录摁下的绑定键\n\nvar winListendFocus = false; // window是否已经监听了focus事件\n\nvar _scope = 'all'; // 默认热键范围\n\nvar elementHasBindEvent = []; // 已绑定事件的节点记录\n// 返回键码\n\nvar code = function code(x) {\n  return _keyMap[x.toLowerCase()] || _modifier[x.toLowerCase()] || x.toUpperCase().charCodeAt(0);\n};\n\nvar getKey = function getKey(x) {\n  return Object.keys(_keyMap).find(function (k) {\n    return _keyMap[k] === x;\n  });\n};\n\nvar getModifier = function getModifier(x) {\n  return Object.keys(_modifier).find(function (k) {\n    return _modifier[k] === x;\n  });\n}; // 设置获取当前范围（默认为'所有'）\n\n\nfunction setScope(scope) {\n  _scope = scope || 'all';\n} // 获取当前范围\n\n\nfunction getScope() {\n  return _scope || 'all';\n} // 获取摁下绑定键的键值\n\n\nfunction getPressedKeyCodes() {\n  return _downKeys.slice(0);\n}\n\nfunction getPressedKeyString() {\n  return _downKeys.map(function (c) {\n    return getKey(c) || getModifier(c) || String.fromCharCode(c);\n  });\n} // 表单控件控件判断 返回 Boolean\n// hotkey is effective only when filter return true\n\n\nfunction filter(event) {\n  var target = event.target || event.srcElement;\n  var tagName = target.tagName;\n  var flag = true; // ignore: isContentEditable === 'true', <input> and <textarea> when readOnly state is false, <select>\n\n  if (target.isContentEditable || (tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT') && !target.readOnly) {\n    flag = false;\n  }\n\n  return flag;\n} // 判断摁下的键是否为某个键，返回true或者false\n\n\nfunction isPressed(keyCode) {\n  if (typeof keyCode === 'string') {\n    keyCode = code(keyCode); // 转换成键码\n  }\n\n  return _downKeys.indexOf(keyCode) !== -1;\n} // 循环删除handlers中的所有 scope(范围)\n\n\nfunction deleteScope(scope, newScope) {\n  var handlers;\n  var i; // 没有指定scope，获取scope\n\n  if (!scope) scope = getScope();\n\n  for (var key in _handlers) {\n    if (Object.prototype.hasOwnProperty.call(_handlers, key)) {\n      handlers = _handlers[key];\n\n      for (i = 0; i < handlers.length;) {\n        if (handlers[i].scope === scope) handlers.splice(i, 1);else i++;\n      }\n    }\n  } // 如果scope被删除，将scope重置为all\n\n\n  if (getScope() === scope) setScope(newScope || 'all');\n} // 清除修饰键\n\n\nfunction clearModifier(event) {\n  var key = event.keyCode || event.which || event.charCode;\n\n  var i = _downKeys.indexOf(key); // 从列表中清除按压过的键\n\n\n  if (i >= 0) {\n    _downKeys.splice(i, 1);\n  } // 特殊处理 cmmand 键，在 cmmand 组合快捷键 keyup 只执行一次的问题\n\n\n  if (event.key && event.key.toLowerCase() === 'meta') {\n    _downKeys.splice(0, _downKeys.length);\n  } // 修饰键 shiftKey altKey ctrlKey (command||metaKey) 清除\n\n\n  if (key === 93 || key === 224) key = 91;\n\n  if (key in _mods) {\n    _mods[key] = false; // 将修饰键重置为false\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = false;\n    }\n  }\n}\n\nfunction unbind(keysInfo) {\n  // unbind(), unbind all keys\n  if (typeof keysInfo === 'undefined') {\n    Object.keys(_handlers).forEach(function (key) {\n      return delete _handlers[key];\n    });\n  } else if (Array.isArray(keysInfo)) {\n    // support like : unbind([{key: 'ctrl+a', scope: 's1'}, {key: 'ctrl-a', scope: 's2', splitKey: '-'}])\n    keysInfo.forEach(function (info) {\n      if (info.key) eachUnbind(info);\n    });\n  } else if (typeof keysInfo === 'object') {\n    // support like unbind({key: 'ctrl+a, ctrl+b', scope:'abc'})\n    if (keysInfo.key) eachUnbind(keysInfo);\n  } else if (typeof keysInfo === 'string') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    // support old method\n    // eslint-disable-line\n    var scope = args[0],\n        method = args[1];\n\n    if (typeof scope === 'function') {\n      method = scope;\n      scope = '';\n    }\n\n    eachUnbind({\n      key: keysInfo,\n      scope: scope,\n      method: method,\n      splitKey: '+'\n    });\n  }\n} // 解除绑定某个范围的快捷键\n\n\nvar eachUnbind = function eachUnbind(_ref) {\n  var key = _ref.key,\n      scope = _ref.scope,\n      method = _ref.method,\n      _ref$splitKey = _ref.splitKey,\n      splitKey = _ref$splitKey === void 0 ? '+' : _ref$splitKey;\n  var multipleKeys = getKeys(key);\n  multipleKeys.forEach(function (originKey) {\n    var unbindKeys = originKey.split(splitKey);\n    var len = unbindKeys.length;\n    var lastKey = unbindKeys[len - 1];\n    var keyCode = lastKey === '*' ? '*' : code(lastKey);\n    if (!_handlers[keyCode]) return; // 判断是否传入范围，没有就获取范围\n\n    if (!scope) scope = getScope();\n    var mods = len > 1 ? getMods(_modifier, unbindKeys) : [];\n    _handlers[keyCode] = _handlers[keyCode].filter(function (record) {\n      // 通过函数判断，是否解除绑定，函数相等直接返回\n      var isMatchingMethod = method ? record.method === method : true;\n      return !(isMatchingMethod && record.scope === scope && compareArray(record.mods, mods));\n    });\n  });\n}; // 对监听对应快捷键的回调函数进行处理\n\n\nfunction eventHandler(event, handler, scope, element) {\n  if (handler.element !== element) {\n    return;\n  }\n\n  var modifiersMatch; // 看它是否在当前范围\n\n  if (handler.scope === scope || handler.scope === 'all') {\n    // 检查是否匹配修饰符（如果有返回true）\n    modifiersMatch = handler.mods.length > 0;\n\n    for (var y in _mods) {\n      if (Object.prototype.hasOwnProperty.call(_mods, y)) {\n        if (!_mods[y] && handler.mods.indexOf(+y) > -1 || _mods[y] && handler.mods.indexOf(+y) === -1) {\n          modifiersMatch = false;\n        }\n      }\n    } // 调用处理程序，如果是修饰键不做处理\n\n\n    if (handler.mods.length === 0 && !_mods[16] && !_mods[18] && !_mods[17] && !_mods[91] || modifiersMatch || handler.shortcut === '*') {\n      if (handler.method(event, handler) === false) {\n        if (event.preventDefault) event.preventDefault();else event.returnValue = false;\n        if (event.stopPropagation) event.stopPropagation();\n        if (event.cancelBubble) event.cancelBubble = true;\n      }\n    }\n  }\n} // 处理keydown事件\n\n\nfunction dispatch(event, element) {\n  var asterisk = _handlers['*'];\n  var key = event.keyCode || event.which || event.charCode; // 表单控件过滤 默认表单控件不触发快捷键\n\n  if (!hotkeys.filter.call(this, event)) return; // Gecko(Firefox)的command键值224，在Webkit(Chrome)中保持一致\n  // Webkit左右 command 键值不一样\n\n  if (key === 93 || key === 224) key = 91;\n  /**\n   * Collect bound keys\n   * If an Input Method Editor is processing key input and the event is keydown, return 229.\n   * https://stackoverflow.com/questions/25043934/is-it-ok-to-ignore-keydown-events-with-keycode-229\n   * http://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n   */\n\n  if (_downKeys.indexOf(key) === -1 && key !== 229) _downKeys.push(key);\n  /**\n   * Jest test cases are required.\n   * ===============================\n   */\n\n  ['ctrlKey', 'altKey', 'shiftKey', 'metaKey'].forEach(function (keyName) {\n    var keyNum = modifierMap[keyName];\n\n    if (event[keyName] && _downKeys.indexOf(keyNum) === -1) {\n      _downKeys.push(keyNum);\n    } else if (!event[keyName] && _downKeys.indexOf(keyNum) > -1) {\n      _downKeys.splice(_downKeys.indexOf(keyNum), 1);\n    } else if (keyName === 'metaKey' && event[keyName] && _downKeys.length === 3) {\n      /**\n       * Fix if Command is pressed:\n       * ===============================\n       */\n      if (!(event.ctrlKey || event.shiftKey || event.altKey)) {\n        _downKeys = _downKeys.slice(_downKeys.indexOf(keyNum));\n      }\n    }\n  });\n  /**\n   * -------------------------------\n   */\n\n  if (key in _mods) {\n    _mods[key] = true; // 将特殊字符的key注册到 hotkeys 上\n\n    for (var k in _modifier) {\n      if (_modifier[k] === key) hotkeys[k] = true;\n    }\n\n    if (!asterisk) return;\n  } // 将 modifierMap 里面的修饰键绑定到 event 中\n\n\n  for (var e in _mods) {\n    if (Object.prototype.hasOwnProperty.call(_mods, e)) {\n      _mods[e] = event[modifierMap[e]];\n    }\n  }\n  /**\n   * https://github.com/jaywcjlove/hotkeys/pull/129\n   * This solves the issue in Firefox on Windows where hotkeys corresponding to special characters would not trigger.\n   * An example of this is ctrl+alt+m on a Swedish keyboard which is used to type μ.\n   * Browser support: https://caniuse.com/#feat=keyboardevent-getmodifierstate\n   */\n\n\n  if (event.getModifierState && !(event.altKey && !event.ctrlKey) && event.getModifierState('AltGraph')) {\n    if (_downKeys.indexOf(17) === -1) {\n      _downKeys.push(17);\n    }\n\n    if (_downKeys.indexOf(18) === -1) {\n      _downKeys.push(18);\n    }\n\n    _mods[17] = true;\n    _mods[18] = true;\n  } // 获取范围 默认为 `all`\n\n\n  var scope = getScope(); // 对任何快捷键都需要做的处理\n\n  if (asterisk) {\n    for (var i = 0; i < asterisk.length; i++) {\n      if (asterisk[i].scope === scope && (event.type === 'keydown' && asterisk[i].keydown || event.type === 'keyup' && asterisk[i].keyup)) {\n        eventHandler(event, asterisk[i], scope, element);\n      }\n    }\n  } // key 不在 _handlers 中返回\n\n\n  if (!(key in _handlers)) return;\n\n  for (var _i = 0; _i < _handlers[key].length; _i++) {\n    if (event.type === 'keydown' && _handlers[key][_i].keydown || event.type === 'keyup' && _handlers[key][_i].keyup) {\n      if (_handlers[key][_i].key) {\n        var record = _handlers[key][_i];\n        var splitKey = record.splitKey;\n        var keyShortcut = record.key.split(splitKey);\n        var _downKeysCurrent = []; // 记录当前按键键值\n\n        for (var a = 0; a < keyShortcut.length; a++) {\n          _downKeysCurrent.push(code(keyShortcut[a]));\n        }\n\n        if (_downKeysCurrent.sort().join('') === _downKeys.sort().join('')) {\n          // 找到处理内容\n          eventHandler(event, record, scope, element);\n        }\n      }\n    }\n  }\n} // 判断 element 是否已经绑定事件\n\n\nfunction isElementBind(element) {\n  return elementHasBindEvent.indexOf(element) > -1;\n}\n\nfunction hotkeys(key, option, method) {\n  _downKeys = [];\n  var keys = getKeys(key); // 需要处理的快捷键列表\n\n  var mods = [];\n  var scope = 'all'; // scope默认为all，所有范围都有效\n\n  var element = document; // 快捷键事件绑定节点\n\n  var i = 0;\n  var keyup = false;\n  var keydown = true;\n  var splitKey = '+';\n  var capture = false; // 对为设定范围的判断\n\n  if (method === undefined && typeof option === 'function') {\n    method = option;\n  }\n\n  if (Object.prototype.toString.call(option) === '[object Object]') {\n    if (option.scope) scope = option.scope; // eslint-disable-line\n\n    if (option.element) element = option.element; // eslint-disable-line\n\n    if (option.keyup) keyup = option.keyup; // eslint-disable-line\n\n    if (option.keydown !== undefined) keydown = option.keydown; // eslint-disable-line\n\n    if (option.capture !== undefined) capture = option.capture; // eslint-disable-line\n\n    if (typeof option.splitKey === 'string') splitKey = option.splitKey; // eslint-disable-line\n  }\n\n  if (typeof option === 'string') scope = option; // 对于每个快捷键进行处理\n\n  for (; i < keys.length; i++) {\n    key = keys[i].split(splitKey); // 按键列表\n\n    mods = []; // 如果是组合快捷键取得组合快捷键\n\n    if (key.length > 1) mods = getMods(_modifier, key); // 将非修饰键转化为键码\n\n    key = key[key.length - 1];\n    key = key === '*' ? '*' : code(key); // *表示匹配所有快捷键\n    // 判断key是否在_handlers中，不在就赋一个空数组\n\n    if (!(key in _handlers)) _handlers[key] = [];\n\n    _handlers[key].push({\n      keyup: keyup,\n      keydown: keydown,\n      scope: scope,\n      mods: mods,\n      shortcut: keys[i],\n      method: method,\n      key: keys[i],\n      splitKey: splitKey,\n      element: element\n    });\n  } // 在全局document上设置快捷键\n\n\n  if (typeof element !== 'undefined' && !isElementBind(element) && window) {\n    elementHasBindEvent.push(element);\n    addEvent(element, 'keydown', function (e) {\n      dispatch(e, element);\n    }, capture);\n\n    if (!winListendFocus) {\n      winListendFocus = true;\n      addEvent(window, 'focus', function () {\n        _downKeys = [];\n      }, capture);\n    }\n\n    addEvent(element, 'keyup', function (e) {\n      dispatch(e, element);\n      clearModifier(e);\n    }, capture);\n  }\n}\n\nfunction trigger(shortcut) {\n  var scope = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';\n  Object.keys(_handlers).forEach(function (key) {\n    var dataList = _handlers[key].filter(function (item) {\n      return item.scope === scope && item.shortcut === shortcut;\n    });\n\n    dataList.forEach(function (data) {\n      if (data && data.method) {\n        data.method();\n      }\n    });\n  });\n}\n\nvar _api = {\n  getPressedKeyString: getPressedKeyString,\n  setScope: setScope,\n  getScope: getScope,\n  deleteScope: deleteScope,\n  getPressedKeyCodes: getPressedKeyCodes,\n  isPressed: isPressed,\n  filter: filter,\n  trigger: trigger,\n  unbind: unbind,\n  keyMap: _keyMap,\n  modifier: _modifier,\n  modifierMap: modifierMap\n};\n\nfor (var a in _api) {\n  if (Object.prototype.hasOwnProperty.call(_api, a)) {\n    hotkeys[a] = _api[a];\n  }\n}\n\nif (typeof window !== 'undefined') {\n  var _hotkeys = window.hotkeys;\n\n  hotkeys.noConflict = function (deep) {\n    if (deep && window.hotkeys === hotkeys) {\n      window.hotkeys = _hotkeys;\n    }\n\n    return hotkeys;\n  };\n\n  window.hotkeys = hotkeys;\n}\n\nexport { hotkeys as default };\n","import { isMixpanelAvailable } from \"../../ts/config/mixpanel\"\nimport { isSupabaseActive } from \"../../ts/config/supabase\"\n\n\nexport const options = [\n    {\n      \"label\": \"Mixpanel\", \n      \"id\": \"mixpanel\", \n      \"infoURL\": \"https://developer.mixpanel.com/docs\",\n      \"description\":\"Trackeamos eventos como clicks en los CTA y visitar a la web\",\n      \"type\": \"switch\",\n      \"isAvailable\": isMixpanelAvailable,\n      \"isActive\": localStorage.getItem(\"mixpanelStatus\") === 'active'\n    },\n    {\n      \"label\": \"Supase\", \n      \"id\": \"supabase\", \n      \"infoURL\": \"https://supabase.com/docs\",\n      \"isAvailable\": isSupabaseActive,\n      \"description\": \"Saas para guardar la data en postgres\"\n    },\n    {\n      \"label\": \"Atencion por Whatsapp\",\n      \"description\": \"Forzar que este disponible la atencion por whatsapp al hacer click en inscribirse\",\n      \"id\": \"channelWhatsapp\",\n      \"isAvailable\": true,\n      \"defaultOf\": true\n    }\n  ]\n\n","export enum DeveloperSettingType {\n  MIXPANEL = 'mixpanel',\n  SUPABASE = 'supabse',\n  WHATSAPP = 'channelWhatsapp'\n}\n","  import hotkeys from 'hotkeys-js'\n  import { $ } from '../../ts/utils'\n  import { MixpanelObserver, WhatsappContactsObserver } from '../../ts/reactive'\n  import { options } from './properties'\n  import { DeveloperSettingType } from './types'\n  import { mixPanelLocal } from '../../ts/services/Mixpanel'\n  \n  function getMockPhone(){\n    const phoneElement = $('input#mock-phone')\n    if(phoneElement instanceof HTMLInputElement)\n      return Number(phoneElement.value)\n\n    throw new Error('There is not phone')\n  }\n\n  MixpanelObserver.subscribe(mixPanelLocal())\n\n  options.forEach(({ id })=>{\n    $(`input#${id}`)?.addEventListener('change', ({target})=>{\n      if(!(target instanceof HTMLInputElement))\n        return\n        \n      const { checked } = target\n\n      if(id === 'channelWhatsapp' ){\n        if(checked)\n          return WhatsappContactsObserver\n            .forceActivateAttention(getMockPhone())\n\n        return WhatsappContactsObserver\n          .clear()\n      }\n\n      if(id === DeveloperSettingType.MIXPANEL)\n        if(!checked)\n          return MixpanelObserver.deactivate()\n          \n        return MixpanelObserver.activate()\n    })\n  })\n\n\n  // TODO: convertir a setoide, lenses, esta impuro\n  const modal = $('[data-modal=\"developer-settings\"]')\n\n  function toggleModal(){\n    modal?.classList.toggle('modal-open')\n  }\n\n  modal\n    ?.querySelector('[data-button=\"close-dev-options\"]')\n    ?.addEventListener('click', (event)=>{\n      event.preventDefault()\n\n      toggleModal()\n    })\n\n  hotkeys('ctrl+k', (event)=>{\n    event.preventDefault()\n    toggleModal()\n  })\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvaG9tZS9ydW5uZXIvd29yay9ib290Y2FtcExhbmRpbmcvYm9vdGNhbXBMYW5kaW5nL3NyYy9jb21wb25lbnRzL0RldmVsb3BlclNldHRpbmdzL0RldmVsb3BlclNldHRpbmcuYXN0cm8iXSwgInNvdXJjZXNDb250ZW50IjogWyItLS1cbmltcG9ydCBEZXZlbG9wZXJTZXR0aW5nSXRlbSBmcm9tICcuL0RldmVsb3BlclNldHRpbmdJdGVtLmFzdHJvJztcbmltcG9ydCBQaG9uZSBmcm9tICcuL1Bob25lLmFzdHJvJztcbmltcG9ydCBTZXR0aW5nSW5wdXRUb29nbGVyIGZyb20gJy4vU2V0dGluZ1Rvb2dsZXIuYXN0cm8nO1xuaW1wb3J0IHsgb3B0aW9ucyB9IGZyb20gJy4vcHJvcGVydGllcydcbi0tLVxuXHUwMDNjZGl2IGNsYXNzPVwibW9kYWwgei1pbmRleDQwXCIgZGF0YS1tb2RhbD1cImRldmVsb3Blci1zZXR0aW5nc1wiXHUwMDNlXG4gIFx1MDAzY2RpdiBjbGFzcz1cIm1vZGFsLWJveFwiXHUwMDNlXG4gICAgXHUwMDNjaDQgY2xhc3M9XCJtYi0xMlwiXHUwMDNlU2kgZXhpc3RlIGRvY3VtZW50YWNpb24gZXh0ZXJuYSwgaGF6IGNsaWNrIGVuIGVsIFx1MDAzY3NwYW4gY2xhc3M9XCJ0ZXh0LWFjY2VudFwiXHUwMDNlbm9tYnJlXHUwMDNjL3NwYW5cdTAwM2VcdTAwM2MvaDRcdTAwM2VcbiAgICBcdTAwM2NwXHUwMDNlQWxndW5vcyBzZXJ2aWNpb3MgY29tZXpuYXJhbiBzaWVtcHJlIHByZW5kaWRvcywgcGFyYSBpaW5pY2FyIGRlc2FjdGl2YWRvLCBxdWl0YXIgZGUgbGFzIGVudnNcdTAwM2MvcFx1MDAzZVxuICAgIFx1MDAzY1Bob25lIGlkPSdtb2NrLXBob25lJy9cdTAwM2VcbiAgICBcdTAwM2NkaXYgY2xhc3M9XCJkaXZpZGVyXCIvXHUwMDNlXG4gICAge1xuICAgICAgb3B0aW9ucy5tYXAoKHtpc0F2YWlsYWJsZSwgaWQsIGRlZmF1bHRPZiwgaXNBY3RpdmUsIC4uLnJlc3R9KT1cdTAwM2V7XG4gICAgICAgIGNvbnN0IGNsYXNMaXN0ID0gWydmbGV4JywgJ2p1c3RpZnktYmV0d2VlbiddXG4gICAgICAgIGlmKCFpc0F2YWlsYWJsZSlcbiAgICAgICAgICBjbGFzTGlzdC5wdXNoKCd0ZXh0LWdyYXktNTAwJylcblxuICAgICAgICByZXR1cm4gKCBcbiAgICAgICAgICBcdTAwM2NkaXYgY2xhc3M6bGlzdD17Y2xhc0xpc3R9XHUwMDNlXG4gICAgICAgICAgICBcdTAwM2NEZXZlbG9wZXJTZXR0aW5nSXRlbSB7Li4ucmVzdH0vXHUwMDNlXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpc0F2YWlsYWJsZSA/IFx1MDAzY1NldHRpbmdJbnB1dFRvb2dsZXIgaWQ9e2lkfSBkZWZhdWx0T2Y9e2RlZmF1bHRPZn0gaXNBY3RpdmU9e2lzQWN0aXZlfSAvXHUwMDNlXG4gICAgICAgICAgICAgICAgICA6IFx1MDAzY3AgY2xhc3M9XCJ3LTUyXCJcdTAwM2VcbiAgICAgICAgICAgICAgICAgICAgRXN0YSBjYXJhY3RlcmlzdGEgbm8gZXN0YSBkaXNwb25pYmxlLCByZXZpc2EgdHVzIGVudnNcbiAgICAgICAgICAgICAgICAgIFx1MDAzYy9wXHUwMDNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgIFx1MDAzYy9kaXZcdTAwM2VcbiAgICAgICAgICBcdTAwM2NkaXYgY2xhc3M9XCJkaXZpZGVyXCIvXHUwMDNlXG4gICAgICAgICl9KVxuICAgIH1cbiAgICBcdTAwM2NkaXYgY2xhc3M9XCJtb2RhbC1hY3Rpb25cIlx1MDAzZVxuICAgICAgXHUwMDNjYnV0dG9uXG4gICAgICAgIGFyaWEtbGFiZWw9XCJjbG9zZSBtb2RhbFwiXG4gICAgICAgIHJvbGU9XCJjb250ZW50aW5mb1wiIFxuICAgICAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiIFxuICAgICAgICBkYXRhLWJ1dHRvbj1cImNsb3NlLWRldi1vcHRpb25zXCJcdTAwM2VcbiAgICAgICAgICBDbG9zZVxuICAgICAgXHUwMDNjL2J1dHRvblx1MDAzZVxuICAgIFx1MDAzYy9kaXZcdTAwM2VcbiAgXHUwMDNjL2Rpdlx1MDAzZVxuXHUwMDNjL2Rpdlx1MDAzZVxuXG5cdTAwM2NzY3JpcHRcdTAwM2VcbiAgaW1wb3J0IGhvdGtleXMgZnJvbSAnaG90a2V5cy1qcydcbiAgaW1wb3J0IHsgJCB9IGZyb20gJy4uLy4uL3RzL3V0aWxzJ1xuICBpbXBvcnQgeyBNaXhwYW5lbE9ic2VydmVyLCBXaGF0c2FwcENvbnRhY3RzT2JzZXJ2ZXIgfSBmcm9tICcuLi8uLi90cy9yZWFjdGl2ZSdcbiAgaW1wb3J0IHsgb3B0aW9ucyB9IGZyb20gJy4vcHJvcGVydGllcydcbiAgaW1wb3J0IHsgRGV2ZWxvcGVyU2V0dGluZ1R5cGUgfSBmcm9tICcuL3R5cGVzJ1xuICBpbXBvcnQgeyBtaXhQYW5lbExvY2FsIH0gZnJvbSAnLi4vLi4vdHMvc2VydmljZXMvTWl4cGFuZWwnXG4gIFxuICBmdW5jdGlvbiBnZXRNb2NrUGhvbmUoKXtcbiAgICBjb25zdCBwaG9uZUVsZW1lbnQgPSAkKCdpbnB1dCNtb2NrLXBob25lJylcbiAgICBpZihwaG9uZUVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KVxuICAgICAgcmV0dXJuIE51bWJlcihwaG9uZUVsZW1lbnQudmFsdWUpXG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIGlzIG5vdCBwaG9uZScpXG4gIH1cblxuICBNaXhwYW5lbE9ic2VydmVyLnN1YnNjcmliZShtaXhQYW5lbExvY2FsKCkpXG5cbiAgb3B0aW9ucy5mb3JFYWNoKCh7IGlkIH0pPVx1MDAzZXtcbiAgICAkKGBpbnB1dCMke2lkfWApPy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoe3RhcmdldH0pPVx1MDAzZXtcbiAgICAgIGlmKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkpXG4gICAgICAgIHJldHVyblxuICAgICAgICBcbiAgICAgIGNvbnN0IHsgY2hlY2tlZCB9ID0gdGFyZ2V0XG5cbiAgICAgIGlmKGlkID09PSAnY2hhbm5lbFdoYXRzYXBwJyApe1xuICAgICAgICBpZihjaGVja2VkKVxuICAgICAgICAgIHJldHVybiBXaGF0c2FwcENvbnRhY3RzT2JzZXJ2ZXJcbiAgICAgICAgICAgIC5mb3JjZUFjdGl2YXRlQXR0ZW50aW9uKGdldE1vY2tQaG9uZSgpKVxuXG4gICAgICAgIHJldHVybiBXaGF0c2FwcENvbnRhY3RzT2JzZXJ2ZXJcbiAgICAgICAgICAuY2xlYXIoKVxuICAgICAgfVxuXG4gICAgICBpZihpZCA9PT0gRGV2ZWxvcGVyU2V0dGluZ1R5cGUuTUlYUEFORUwpXG4gICAgICAgIGlmKCFjaGVja2VkKVxuICAgICAgICAgIHJldHVybiBNaXhwYW5lbE9ic2VydmVyLmRlYWN0aXZhdGUoKVxuICAgICAgICAgIFxuICAgICAgICByZXR1cm4gTWl4cGFuZWxPYnNlcnZlci5hY3RpdmF0ZSgpXG4gICAgfSlcbiAgfSlcblxuXG4gIC8vIFRPRE86IGNvbnZlcnRpciBhIHNldG9pZGUsIGxlbnNlcywgZXN0YSBpbXB1cm9cbiAgY29uc3QgbW9kYWwgPSAkKCdbZGF0YS1tb2RhbD1cImRldmVsb3Blci1zZXR0aW5nc1wiXScpXG5cbiAgZnVuY3Rpb24gdG9nZ2xlTW9kYWwoKXtcbiAgICBtb2RhbD8uY2xhc3NMaXN0LnRvZ2dsZSgnbW9kYWwtb3BlbicpXG4gIH1cblxuICBtb2RhbFxuICAgID8ucXVlcnlTZWxlY3RvcignW2RhdGEtYnV0dG9uPVwiY2xvc2UtZGV2LW9wdGlvbnNcIl0nKVxuICAgID8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpPVx1MDAzZXtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgICAgdG9nZ2xlTW9kYWwoKVxuICAgIH0pXG5cbiAgaG90a2V5cygnY3RybCtrJywgKGV2ZW50KT1cdTAwM2V7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRvZ2dsZU1vZGFsKClcbiAgfSlcblx1MDAzYy9zY3JpcHRcdTAwM2UiXSwgIm1hcHBpbmdzIjogIkFBNENBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNqQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0UsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9DLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzRDtBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMvQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEM7QUFDQSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEMsRUFBRTtBQUNGO0FBQ0EsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM1QztBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDNUIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0QsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDYjtBQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9CO0FBQ0EsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7QUFDbkMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xCLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3hDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2xEO0FBQ0EsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdEMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2pCLE1BQU07QUFDTjtBQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNuQixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDN0M7QUFDQSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN6QyxJQUFJLENBQUM7QUFDTCxFQUFFLENBQUM7QUFDSDtBQUNBO0FBQ0EsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyRDtBQUNBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDeEIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN4QyxFQUFFO0FBQ0Y7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDTixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMzQjtBQUNBLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDbEIsSUFBSSxDQUFDO0FBQ0w7QUFDQSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUM3QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3pCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDaEIsRUFBRSxDQUFDO0FBQUE7IiwgIm5hbWVzIjogW10gfQ=="],"names":["mixPanelLocal","Cache","maxSize","key","value","SPLIT_REGEX","DIGIT_REGEX","LEAD_DIGIT_REGEX","SPEC_CHAR_REGEX","CLEAN_QUOTES_REGEX","MAX_CACHE_SIZE","pathCache","setCache","getCache","propertyExpr","split","normalizePath","path","parts","obj","index","len","data","part","safe","segments","isQuoted","cb","thisArg","forEach","iter","idx","isArray","isBracket","shouldBeQuoted","str","hasLeadingNumber","hasSpecialChars","reWords","words","upperFirst","join","d","camelCase","acc","next","pascalCase","snakeCase","kebabCase","sentenceCase","titleCase","tinyCase","toposortModule","edges","toposort","uniqueNodes","toposort_1","nodes","cursor","sorted","visited","i","outgoingEdges","makeOutgoingEdges","nodesHash","makeNodesHash","edge","visit","node","predecessors","nodeRep","outgoing","child","arr","res","toString","errorToString","regExpToString","symbolToString","SYMBOL_REGEXP","printNumber","val","printSimpleValue","quoteStrings","typeOf","tag","printValue","result","toArray","strReg","ValidationError","message","params","_","err","errorOrErrors","field","type","mixed","originalValue","castMsg","string","number","date","boolean","object","array","isSchema","Condition","refs","config","is","then","otherwise","check","values","schema","_branch","branch","builder","base","options","ref","prefixes","Reference","prefix","getter","parent","context","isAbsent","createValidation","validate","panic","name","test","skipAbsent","abortEarly","resolve","item","createError","overrides","nextParams","error","invalid","ctx","handleResult","validOrError","handleError","shouldSkip","_result","getIn","lastPart","lastPartDebug","_part","isTuple","ReferenceSet","description","newItems","removeItems","clone","src","seen","copy","k","v","Schema","s","spec","label","args","fn","before","combined","mergedSpec","conditions","prevSchema","condition","_options$strict","_options$abortEarly","_options$recursive","resolvedSchema","allowOptionality","formattedValue","formattedResult","rawValue","_options","prevValue","_value","strict","initialTests","initialErrors","runOptions","fired","tests","panicOnce","arg","nextOnce","count","nestedErrors","parentPath","originalParent","isIndex","testOptions","reject","parsed","errors","validated","defaultValue","def","isStrict","nullable","optional","opts","isExclusive","keys","deps","dep","enums","valids","resolved","invalids","strip","meta","n","list","c","method","alias","rEmail","rUrl","rUUID","isTrimmed","objStringTag","create$6","StringSchema","_raw","strValue","length","min","max","regex","excludeEmptyString","isNaN$1","create$5","NumberSchema","less","more","msg","_method","avail","isoReg","parseIsoDate","numericKeys","minutesOffset","timestamp","struct","invalidDate","isDate","DateSchema","param","cast","limit","sortFields","fields","excludedEdges","excludes","a","b","addNode","depPath","findIndex","ii","_err$path","sortByKeyOrder","parseJson","deepPartial","partial","fieldSchema","nextArray","deepHas","p","last","isObject","unknown","known","defaultSort","create$3","ObjectSchema","_options$stripUnknown","props","intermediateValue","innerOptions","isChanged","prop","exists","fieldValue","inputValue","fieldSpec","from","recursive","objectErrors","fieldErrors","nextFields","schemaOrRef","target","dft","shape","additions","picked","to","fromGetter","newObj","noAllow","unknownKeys","allow","_innerOptions","__awaiter","this","_arguments","P","generator","adopt","fulfilled","step","e","rejected","resolveFetch","customFetch","_fetch","__vitePreload","browserPonyfill","FunctionsError","FunctionsFetchError","FunctionsRelayError","FunctionsHttpError","FunctionsClient","url","headers","token","functionName","invokeOptions","_a","functionArgs","_headers","body","response","fetchError","isRelayError","responseType","global","__self__","F","self","exports","support","isDataView","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","items","iterator","Headers","header","oldValue","callback","consumed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","promise","readBlobAsText","readArrayBufferAsText","buf","view","chars","bufferClone","Body","decode","methods","normalizeMethod","upcased","Request","input","form","bytes","parseHeaders","rawHeaders","preProcessedHeaders","line","Response","bodyInit","redirectStatuses","status","fetch","init","request","xhr","abortXhr","module","PostgrestBuilder","crossFetch","onfulfilled","onrejected","_b","_c","statusText","countHeader","contentRange","PostgrestTransformBuilder","columns","quoted","cleanedColumns","column","ascending","nullsFirst","foreignTable","existingOrder","keyOffset","keyLimit","signal","analyze","verbose","settings","buffers","wal","format","forMediatype","PostgrestFilterBuilder","pattern","cleanedValues","range","query","typePart","configPart","operator","filters","PostgrestQueryBuilder","head","prefersHeaders","x","uniqueColumns","onConflict","ignoreDuplicates","version","DEFAULT_HEADERS","PostgrestClient","relation","naiveFallback","require$$0","_globalThis","NativeWebSocket","websocket_version","require$$1","W3CWebSocket","uri","protocols","native_instance","browser","VSN","DEFAULT_TIMEOUT","WS_CLOSE_NORMAL","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","Timer","timerCalc","Serializer","rawPayload","buffer","decoder","topicSize","eventSize","offset","topic","event","Push","channel","payload","timeout","h","REALTIME_PRESENCE_LISTEN_EVENTS","RealtimePresence","events","newState","onJoin","onLeave","onSync","diff","currentPresences","newPresences","leftPresences","currentState","state","transformedState","joins","leaves","presences","newPresenceRefs","m","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","func","presence","PostgresTypes","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","noop","dataType","toBoolean","toNumber","toJson","toTimestampString","parsedValue","lastIdx","closeBrace","valTrim","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimeChannel","socket","pushEvent","reason","broadcast","accessTokenPayload","r","serverPostgresFilters","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","filter","serverPostgresFilter","push","onClose","leavePush","_event","_ref","typeLower","close","leave","handledPayload","bind","_d","_e","_f","bindId","bindEvent","postgresChanges","commit_timestamp","binding","obj1","obj2","records","Transformers.convertChangeData","RealtimeClient","endPoint","w3cwebsocket","eventsPerSecond","tries","code","kind","chan","newRef","dupChannel","rawMessage","eventsPerSecondLimitMs","StorageError","isStorageError","StorageApiError","StorageUnknownError","originalError","resolveResponse","_getErrorMessage","Res","_getRequestParams","parameters","_handleRequest","fetcher","get","post","put","remove","DEFAULT_SEARCH_OPTIONS","DEFAULT_FILE_OPTIONS","StorageFileApi","bucketId","fileBody","fileOptions","cleanPath","_path","fromPath","toPath","expiresIn","downloadQueryParam","paths","datum","renderPath","transformationQuery","queryString","_queryString","transform","StorageBucketApi","id","StorageClient","resolveHeadersConstructor","CrossFetchHeaders","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","accessToken","stripTrailingSlash","applySettingDefaults","defaults","dbOptions","authOptions","realtimeOptions","globalOptions","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","DEFAULT_GLOBAL_OPTIONS","expiresAt","uuid","isBrowser","localStorageWriteTests","supportsLocalStorage","randomKey","getParameterByName","results","looksLikeFetchResponse","maybeResponse","setItemAsync","storage","getItemAsync","removeItemAsync","decodeBase64URL","base64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","Deferred","rej","decodeJWTPayload","base64UrlRegex","base64Url","sleep","time","accept","retryable","isRetryable","attempt","AuthError","isAuthError","AuthApiError","isAuthApiError","AuthUnknownError","CustomAuthError","AuthSessionMissingError","AuthInvalidCredentialsError","AuthImplicitGrantRedirectError","details","AuthRetryableFetchError","__rest","NETWORK_ERROR_CODES","_request","qs","_sessionResponse","session","hasSession","user","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","rest","properties","_noResolveJsonResponse","GoTrueAdminApi","jwt","email","attributes","_g","pagination","users","total","links","link","page","rel","uid","shouldSoftDelete","factors","GOTRUE_URL","STORAGE_KEY","EXPIRY_MARGIN","localStorageAdapter","polyfillGlobalThis","DEFAULT_OPTIONS","AUTO_REFRESH_TICK_DURATION","AUTO_REFRESH_TICK_THRESHOLD","GoTrueClient","redirectType","credentials","password","phone","provider","nonce","currentSession","maybeSession","sessionData","sessionError","userError","timeNow","hasExpired","refreshedSession","error_description","error_code","provider_token","provider_refresh_token","access_token","expires_in","refresh_token","token_type","expires_at","subscription","refreshToken","startedAt","ticker","now","isInitial","urlParams","challengeData","challengeError","totp","factor","currentLevel","nextLevel","currentAuthenticationMethods","SupabaseAuthClient","SupabaseClient","supabaseUrl","_h","_supabaseUrl","urlParts","defaultStorageKey","DEFAULTS","SupabaseStorageClient","autoRefreshToken","persistSession","detectSessionInUrl","storageKey","authHeaders","source","createClient","TOKEN","API","isSupabaseActive","SupabaseContactLocal","supabseLocal","handleValidationError","sendForm","validatedData","click","element","$","pojo","invalidFields","$$","tinySlider","win$1","raf","win","caf","extend","checkStorageValue","setLocalStorage","access","getSlideId","getBody","doc","docElement","setFakeBody","docOverflow","resetFakeBody","calc","div","vals","percentageLayout","wrapper","outer","perPage","supported","mediaquerySupport","style","rule","position","createStyleSheet","media","addCSSRule","sheet","selector","rules","removeCSSRule","getCssRulesLength","toDegree","y","getTouchDirection","angle","direction","gap","scope","l","classListSupport","hasClass","el","addClass","removeClass","hasAttr","attr","getAttr","isNodeList","setAttrs","els","attrs","removeAttrs","attrLength","j","arrayFromNodeList","nl","hideElement","forceHide","showElement","isVisible","whichProperty","Props","has3DTransforms","tf","has3d","cssTF","getEndProperty","propIn","propOut","endProp","supportsPassive","passiveOption","addEvents","preventScrolling","option","removeEvents","Events","eventName","jsTransform","postfix","duration","tick","unit","positionTick","moveElement","tns","KEYS","tnsStorage","localStorageAccess","browserInfo","CALC","PERCENTAGELAYOUT","CSSMQ","TRANSFORM","HAS3DTRANSFORMS","TRANSITIONDURATION","TRANSITIONDELAY","ANIMATIONDURATION","ANIMATIONDELAY","TRANSITIONEND","ANIMATIONEND","supportConsoleWarn","tnsList","optionsElements","responsive","nested","carousel","responsiveTem","updateOptions","animateIn","animateOut","animateDelay","animateNormal","horizontal","outerWrapper","innerWrapper","middleWrapper","container","containerParent","containerHTML","slideItems","slideCount","breakpointZone","windowWidth","getWindowWidth","isOn","setBreakpointZone","autoWidth","fixedWidth","getOption","edgePadding","gutter","viewport","getViewportWidth","center","slideBy","viewportMax","arrowKeys","speed","rewind","loop","autoHeight","controls","controlsText","nav","touch","mouseDrag","autoplay","autoplayTimeout","autoplayText","autoplayHoverPause","autoplayResetOnVisibility","lazyload","lazyloadSelector","slidePositions","slideItemsOut","cloneCount","getCloneCountForLoop","slideCountNew","hasRightDeadZone","rightBoundary","getRightBoundary","updateIndexBeforeTransform","transformAttr","transformPrefix","transformPostfix","getIndexMax","getStartIndex","indexCached","getCurrentSlide","indexMin","indexMax","preventActionWhenRunning","swipeAngle","moveDirectionExpected","running","onInit","newContainerClasses","slideId","disable","disabled","freezable","freeze","getFreeze","frozen","controlsEvents","onControlsClick","onControlsKeydown","navEvents","onNavClick","onNavKeydown","hoverEvents","mouseoverPause","mouseoutRestart","visibilityEvent","onVisibilityChange","docmentKeydownEvent","onDocumentKeydown","touchEvents","onPanStart","onPanMove","onPanEnd","dragEvents","hasControls","hasOption","hasNav","navAsThumbnails","hasAutoplay","hasTouch","hasMouseDrag","slideActiveClass","slideClonedClass","imgCompleteClass","imgEvents","onImgLoaded","onImgFailed","imgsComplete","liveregionCurrent","preventScroll","controlsContainer","controlsContainerHTML","prevButton","nextButton","prevButtonHTML","nextButtonHTML","prevIsButton","nextIsButton","navContainer","navContainerHTML","navItems","pages","getPages","pagesCached","navClicked","navCurrentIndex","getCurrentNavIndex","navCurrentIndexCached","navActiveClass","navStr","navStrCurrent","autoplayDirection","autoplayButton","autoplayButtonHTML","autoplayHtmlStrings","autoplayTimer","animating","autoplayHoverPaused","autoplayUserPaused","autoplayVisibilityPaused","initPosition","lastPosition","translateInit","panStart","rafIndex","getDist","resetVariblesWhenDisable","initStructure","initSheet","initSliderTransform","tem","ind","getAbsIndex","absIndex","getItemsMax","bp","itemsMax","getInsertPosition","pos","getClientWidth","rect","width","ww","getSlideMarginLeft","getInnerWrapperStyles","edgePaddingTem","gutterTem","fixedWidthTem","speedTem","autoHeightBP","gutterTemUnit","dir","getTransitionDurationStyle","getContainerWidth","itemsTem","getSlideWidthStyle","dividend","getSlideGutterStyle","getCSSPrefix","num","getAnimationDurationStyle","classOuter","classInner","wp","fragmentBefore","fragmentAfter","cloneFirst","cloneLast","imgs","img","imgLoaded","imgsLoadedCheck","getImageArray","initSliderTransformStyleCheck","doContainerTransformSilent","initTools","initEvents","stylesApplicationCheck","left","right","initSliderTransformCore","setSlidePositions","updateContentWrapperHeight","slide","update_carousel_transition_duration","middleWrapperStr","innerWrapperStr","containerStr","slideStr","itemsBP","fixedWidthBP","speedBP","edgePaddingBP","gutterBP","updateSlideStatus","getLiveRegionStr","txt","toggleAutoplay","startAutoplay","navHtml","hiddenStr","updateNavVisibility","isButton","updateControlsStatus","disableUI","eve","onTransitionEnd","resizeTasks","info","onResize","doAutoHeight","doLazyLoad","disableSlider","freezeSlider","additionalUpdates","destroy","htmlList","prevEl","parentEl","getEvent","bpChanged","breakpointZoneTem","needContainerTransform","indChanged","itemsChanged","disableTem","freezeTem","arrowKeysTem","controlsTem","navTem","touchTem","mouseDragTem","autoplayTem","autoplayHoverPauseTem","autoplayResetOnVisibilityTem","indexTem","autoHeightTem","controlsTextTem","centerTem","autoplayTextTem","updateIndex","enableSlider","doContainerTransform","getContainerTransformValue","unfreezeSlider","stopAutoplay","html","updateLiveRegion","updateGallerySlidePositions","vp","leftEdge","rightEdge","enableUI","classN","getVisibleSlideRange","start","end","rangestart","rangeend","point","cell","srcset","getTarget","imgFailed","imgCompleted","imgSelector","updateInnerWrapperHeight","updateNavStatus","getMaxSlideHeight","slideStart","slideRange","heights","maxHeight","attr2","navPrev","navCurrent","getLowerCaseNodeName","isAriaDisabled","disEnableElement","prevDisabled","nextDisabled","disablePrev","disableNext","resetDuration","getSliderWidth","getCenterGap","denominator","animateSlide","classOut","classIn","isOut","transformCore","render","sliderMoved","strTrans","goTo","targetIndex","indexGap","passEventObject","targetIn","navIndex","targetIndexBase","setAutoplayTimer","stopAutoplayTimer","updateAutoplayButton","action","play","pause","keyIndex","setFocus","curElement","isTouchEvent","preventDefaultBehavior","getMoveDirectionExpected","panUpdate","dist","percentageX","preventClick","indexMoved","moved","rough","tns_1","functionThrottle","throttle","interval","timeoutId","throttledFn","leading","trailing","cancel","flush","call","throttleWrapper","callNow","lensToggleSlider","_slider","slider","isDestroyed","toggleSlider","throtle","isff","addEvent","useCapture","getMods","modifier","mods","getKeys","compareArray","a1","a2","arr1","arr2","_keyMap","_modifier","modifierMap","_mods","_handlers","_downKeys","winListendFocus","_scope","elementHasBindEvent","getKey","getModifier","setScope","getScope","getPressedKeyCodes","getPressedKeyString","tagName","flag","isPressed","keyCode","deleteScope","newScope","handlers","clearModifier","hotkeys","unbind","keysInfo","eachUnbind","_len","_key","_ref$splitKey","splitKey","multipleKeys","originKey","unbindKeys","lastKey","isMatchingMethod","eventHandler","handler","modifiersMatch","dispatch","asterisk","keyName","keyNum","_i","keyShortcut","_downKeysCurrent","isElementBind","keyup","keydown","capture","trigger","shortcut","dataList","_api","_hotkeys","deep","isMixpanelAvailable","DeveloperSettingType","getMockPhone","phoneElement","MixpanelObserver","checked","WhatsappContactsObserver","modal","toggleModal"],"mappings":"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"}